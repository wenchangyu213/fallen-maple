System.register("chunks:///_virtual/AudioSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Resources.ts"],(function(t){var e,s,i,r,n,o,u,a,c,h,_,m,l;return{setters:[function(t){e=t.inheritsLoose,s=t.createClass,i=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){n=t.cclegacy,o=t.director,u=t.System,a=t.lerp,c=t.clamp01,h=t.Node,_=t.AudioSource,m=t.AudioClip},function(t){l=t.Resources}],execute:function(){n._RF.push({},"5d3f0K9oRVIS71Nf7nf504Z","AudioSystem",void 0);var p=function(){function t(){this._source=(new h).addComponent(_),this._time=0,this._duration=0,this._callback=null,this._volumeStart=0,this._volumeEnd=0}var e=t.prototype;return e.play=function(t,e,s,i){void 0===i&&(i=!0),i&&!s?this._source.playOneShot(t,e):(this._source.clip=t,this._source.volume=e,this._source.loop=s,this._source.play()),this._time=this._duration=0},e.resume=function(){this._source.play()},e.pause=function(){this._source.pause()},e.stop=function(){this._source.stop()},e.fade=function(t,e,s){void 0===e&&(e=1),this._time=0,this._duration=Math.max(.01,e),this._callback=s,this._volumeStart=this._source.volume,this._volumeEnd=t},e.update=function(t){this._time<this._duration&&(this._time+=t,this._source.volume=a(this._volumeStart,this._volumeEnd,c(this._time/this._duration)),Math.abs(this._source.volume-this._volumeEnd)<=.01&&(0===this._volumeEnd&&this._source.stop(),this._time=this._duration,this._callback&&this._callback()))},s(t,[{key:"source",get:function(){return this._source}}]),t}(),f=t("audioSystem",new(function(t){function n(){for(var e,s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this)._frame=0,e._vol=1,e._bgm=null,e._sfx=new p,e._bgm0=new p,e._bgm1=new p,e._mute=!1,e}e(n,t);var o=n.prototype;return o.play=function(){var t=i(r().mark((function t(e,s,i,n){var o,u;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===s&&(s=1),void 0===i&&(i=!1),void 0===n&&(n=!0),0!==(o=this._vol*s)&&e){t.next=6;break}return t.abrupt("return");case 6:if(t.prev=6,!(e instanceof m)){t.next=11;break}t.t0=e,t.next=14;break;case 11:return t.next=13,l.Load(e,m);case 13:t.t0=t.sent;case 14:(u=t.t0)&&(!u.__frame||u.__frame<this._frame-5)&&(u.__frame=this._frame,this._sfx.play(u,o,i,n)),t.next=21;break;case 18:t.prev=18,t.t1=t.catch(6),console.error(t.t1);case 21:case"end":return t.stop()}}),t,this,[[6,18]])})));return function(e,s,i,r){return t.apply(this,arguments)}}(),o.stop=function(){this._sfx.stop()},o.playBGM=function(){var t=i(r().mark((function t(e,s,i){var n,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===s&&(s=1),void 0===i&&(i=!0),0!==(n=this._vol*s)&&e){t.next=5;break}return t.abrupt("return");case 5:if(t.prev=5,!(e instanceof m)){t.next=10;break}t.t0=e,t.next=13;break;case 10:return t.next=12,l.Load(e,m);case 12:t.t0=t.sent;case 13:o=t.t0,i?(this._bgm&&this._bgm.fade(0),this._bgm=this._bgm===this._bgm0?this._bgm1:this._bgm0,this._bgm.play(o,0,!0),this._bgm.fade(n)):this._bgm0.play(o,n,!0),t.next=20;break;case 17:t.prev=17,t.t1=t.catch(5),console.log(t.t1);case 20:case"end":return t.stop()}}),t,this,[[5,17]])})));return function(e,s,i){return t.apply(this,arguments)}}(),o.stopBGM=function(t){void 0===t&&(t=!0),this._bgm&&(t?this._bgm.fade(0):this._bgm.stop())},o.update=function(t){this._frame++,this._bgm0.update(t),this._bgm1.update(t)},s(n,[{key:"mute",get:function(){return this._mute},set:function(t){this._mute!==t&&(this._mute=t,this._vol=t?0:1,this._bgm&&(t?this._bgm.pause():this._bgm.resume()))}}]),n}(u)));o.registerSystem("AudioSystem",f,200),n._RF.pop()}}}));

System.register("chunks:///_virtual/CameraController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FreelookVirtualCamera.ts","./StateManager.ts","./StateHandler.ts","./Spherical.ts","./Math.ts","./MathUtils.ts","./Properties.ts","./Perlin.ts","./Enum.ts","./TweenUitls.ts","./PipelineNextSettings.ts"],(function(t){var e,i,a,o,s,n,r,h,l,f,p,c,u,_,m,d,k,g,y,S,v,A,w,C,O,b,F,H;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.extends,a=t.inheritsLoose,o=t.initializerDefineProperty,s=t.assertThisInitialized,n=t.createClass},function(t){r=t.cclegacy,h=t._decorator,l=t.Camera,f=t.Vec3,p=t.Component,c=t.tween,u=t.easing,_=t.lerp,m=t.director,d=t.clamp},function(t){k=t.FreelookVirtualCamera},function(t){g=t.StateManager},function(t){y=t.StateHandler},function(t){S=t.Spherical},function(t){v=t.randomFloat},function(t){A=t.setFromSpherical},function(t){w=t.properties},function(t){C=t.Perlin},function(t){O=t.EventType,b=t.HitType},function(t){F=t.killTweenOf},function(t){H=t.PipelineNextSettings}],execute:function(){var I,M,x;r._RF.push({},"9ee139SJIJGv4pIQOLKqhUH","CameraController",void 0);var R=h.ccclass,L=h.property,E=h.requireComponent,P=(t("CameraController",R("CameraController")(I=E(l)((x=e((M=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this)._camera=null,e._manager=new g,e._freelookVirtualCamera=null,o(e,"state",x,s(e)),e}a(e,t);var i=e.prototype;return i.onEnable=function(){this._freelookVirtualCamera&&(this._freelookVirtualCamera.enabled=!1)},i.onDisable=function(){this._freelookVirtualCamera&&(this._freelookVirtualCamera.enabled=!0)},i.onLoad=function(){this._camera=this.getComponent(l),this._freelookVirtualCamera=this.getComponent(k),this._manager.setStateHandler(new D({target:this._camera})),this._manager.setStateHandler(new T({target:this._camera})),this._manager.setStateHandler(new U({target:this._camera})),this._manager.state=this.state},i.onDestroy=function(){this._manager.clear()},i.lateUpdate=function(t){this._manager.update(t)},e}(p)).prototype,"state",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"playShip"}}),I=M))||I)||I),{fov:45,near:.1,far:100,phi:1.5,theta:0,radius:1,lookAt:new f(.05,.48,0)}),V=i({},P,{phi:1.5,theta:-.3,radius:1.88,lookAt:new f(.05,.36,0)}),D=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))||this).name="preload",e._lookAt=new f,e._spherical=new S(1,Math.PI/2),e}a(e,t);var i=e.prototype;return i.onEnter=function(){this.init(P)},i.init=function(t){var e=this.target,i=this._spherical;e.fov=t.fov,e.near=t.near,e.far=t.far,i.phi=t.phi,i.theta=t.theta,i.radius=t.radius,this._lookAt.set(t.lookAt),e.node.position=A(this._spherical,e.node.position).add(this._lookAt),e.node.lookAt(this._lookAt)},e}(y),T=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))||this).name="playShip",e.progress=0,e}a(e,t);var i=e.prototype;return i.onEnter=function(){w.user.life>0?(this.init(P),F(this),c(this).set({progress:0,intensity:0}).to(3.5,{progress:1,intensity:1},{easing:u.quadOut}).start()):(this.progress=1,this.init(V))},i.onUpdate=function(t){t=Math.min(.033,t);var e=w.hand.lookAtOffset,i=_(P.phi,1.5+.03*e.y,this.progress),a=_(P.theta,.03*e.x-.3,this.progress),o=_(P.radius,1.88,this.progress);this._lookAt.y=_(P.lookAt.y,.36,this.progress);var s=this._spherical;s.phi=_(s.phi,i,5*t),s.theta=_(s.theta,a,5*t),s.radius=_(s.radius,o,5*t);var n=this.target;n.node.position=A(s,n.node.position).add(this._lookAt),n.node.lookAt(this._lookAt)},n(e,[{key:"intensity",get:function(){return H.Instance.base.intensity},set:function(t){H.Instance.base.intensity=t}}]),e}(D),U=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))||this).name="gameStart",e.enableShake=!0,e.positionFrequency=.2,e.positionAmplitude=.1,e.positionScale=new f(1,1,1),e.positionFractalLevel=5,e._time=[],e._fbmNorm=1/.75,e._hitShakeOffset=0,e._position=new f,e._lookAt=new f(.031,-.036,-.02),e._localOffset=new f(0,-.5,0),e._lookAtOffset=new f,e._spherical=new S(1,Math.PI/2),e._offsetsmoothing=2,e}a(e,t);var i=e.prototype;return i.rehash=function(){for(var t=0;t<6;t++)this._time[t]=v(-1e4,0)},i.onEnter=function(){this.rehash(),this.target.near=.01,this.target.far=120,this.target.fov=73,m.on(O.HIT,this._onHit,this)},i.onExit=function(){m.off(O.HIT,this._onHit,this),F(this)},i._onHit=function(t){if(w.user.life>0)switch(t){case b.BUILDING:case b.CAR:this._hitShakeOffset=Math.max(1,this._hitShakeOffset);break;case b.LASER:this._hitShakeOffset=Math.max(.5,this._hitShakeOffset);break;case b.BRIDGE:this._hitShakeOffset=Math.max(1,this._hitShakeOffset)}},i.onUpdate=function(t){t=Math.min(.033,t);var i=e.__offset,a=w.ship;this._spherical.phi=1.3+1.5*a.speedRatio.y,this._spherical.theta=1.5*a.speedRatio.z-1.57,this._spherical.radius=.5,i.set(a.speedRatio.x,1.5*d(a.speedRatio.y,-.2,.2),1.5*d(.3*-a.speedRatio.z,-.075,.075)),this._localOffset.lerp(i,this._offsetsmoothing*t),this._lookAtOffset.set(0,.1+this._localOffset.y,4*-this._localOffset.z),this._lookAt.set(a.position).add(this._lookAtOffset);var o=this.target;if(o.node.position=A(this._spherical,this._position).add(this._lookAt),o.node.lookAt(this._lookAt),this._hitShakeOffset=_(this._hitShakeOffset,0,1.5*t),this.positionFrequency=a.speedRatio.x+this._hitShakeOffset,this.positionAmplitude=.02+this._hitShakeOffset,this.enableShake){for(var s=0;s<3;s++)this._time[s]+=this.positionFrequency*t;var n=i.set(C.Fbm(this.positionFractalLevel,this._time[0]),C.Fbm(this.positionFractalLevel,this._time[1]),C.Fbm(this.positionFractalLevel,this._time[2]));(n=n.multiply(this.positionScale)).multiplyScalar(this.positionAmplitude*this._fbmNorm),o.node.position=o.node.position.add(n)}},e}(y);U.__offset=new f,r._RF.pop()}}}));

System.register("chunks:///_virtual/Car.ts",["cc"],(function(e){var t,s;return{setters:[function(e){t=e.cclegacy,s=e.Vec2}],execute:function(){t._RF.push({},"79f3fzfqVtOvoAWYU1qzJvR","Car",void 0);e("Car",(function(){this.speed=0,this.offset=new s,this.reverse=!1,this.range=void 0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/DebugManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,r,t,i,o,a,u,c;return{setters:[function(e){n=e.applyDecoratedDescriptor,r=e.inheritsLoose,t=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,u=e.Node,c=e.Component}],execute:function(){var l,p,s,f,g,y,b;o._RF.push({},"5a47dt5TmZG1KUJNKlClyGO","DebugManager",void 0);var h=a.ccclass,d=a.property,m=a.executeInEditMode;e("DebugManager",(l=h("DebugManager"),p=d(u),s=d(u),l(f=m((y=n((g=function(e){function n(){for(var n,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=e.call.apply(e,[this].concat(o))||this,t(n,"ship",y,i(n)),t(n,"monkey",b,i(n)),n}r(n,e);var o=n.prototype;return o.onClickLaunch=function(){},o.onClickState=function(e,n){},n}(c)).prototype,"ship",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=n(g.prototype,"monkey",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=g))||f)||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/EffectManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,o,i,n,a,l,c,s,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,a=e._decorator,l=e.Color,c=e.Material,s=e.director,f=e.Component}],execute:function(){var p,u,h,y,C,E,d;n._RF.push({},"59b47+yGJ9Oa6DNf0Bsf51B","EffectManager",void 0);var T=a.ccclass,g=a.property,_=e("EffectType",{COLLECTED_BATTERY:0});e("EffectManager",(p=T("EffectManager"),u=g(l),h=g(c),p((E=t((C=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,o(t,"shipColor",E,i(t)),o(t,"shipMaterial",d,i(t)),t}r(t,e);var n=t.prototype;return n.onLoad=function(){s.on(_.COLLECTED_BATTERY,this._onCollectedBattery,this)},n.onDestroy=function(){s.off(_.COLLECTED_BATTERY,this._onCollectedBattery,this)},n._onCollectedBattery=function(){this.shipMaterial.setProperty("albedoScale",this.shipColor)},t}(f)).prototype,"shipColor",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l(1,1,1)}}),d=t(C.prototype,"shipMaterial",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=C))||y));n._RF.pop()}}}));

System.register("chunks:///_virtual/EnemyManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Properties.ts","./Math.ts","./Enum.ts","./TweenUitls.ts","./AudioSystem.ts"],(function(t){var e,n,o,i,r,a,s,l,p,c,u,y,f,m,d,h,v,_,w,g,M,b,x,C,E,N,A,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Node,l=t.Material,p=t.Animation,c=t.Vec3,u=t.Vec2,y=t.Quat,f=t.instantiate,m=t.Vec4,d=t.Color,h=t.tween,v=t.lerp,_=t.director,w=t.Component},function(t){g=t.properties},function(t){M=t.evalute,b=t.pointToLineDistance,x=t.randomInt,C=t.randomFloat},function(t){E=t.EventType,N=t.HitType},function(t){A=t.killTweenOf},function(t){L=t.audioSystem}],execute:function(){var k,P,T,z,S,D,H,I,U,R,B,F;r._RF.push({},"6dc66JgvoxI1LfYrGOBLRLm","EnemyManager",void 0);var V=a.ccclass,q=a.property;t("EnemyManager",(k=V("EnemyManager"),P=q(s),T=q(l),z=q(l),S=q(p),k(((F=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,o(e,"enemy",I,i(e)),o(e,"laserMaterial",U,i(e)),o(e,"enemyMaterial",R,i(e)),o(e,"warnning",B,i(e)),e._enemys=new s,e._tmpNode=new s,e}n(e,t);var r=e.prototype;return r.onLoad=function(){var t=this.enemy,n=e.__vec3,o=t.parent;this._enemys.parent=o;for(var i=0;i<3;i++){var r=f(t);r.position=n.set(0,0,1e4),this._enemys.addChild(r)}},r.onDestroy=function(){A(this),L.stop()},r.start=function(){var t=this,e=!1,n=new m(1,.2,.2,1),o=new m(90,195,255,255).multiplyScalar(1/255),i=(new d).fromHEX(16711680),r=(new d).fromHEX(821500);h(this).delay(15).call((function(){e=!e,t.laserMaterial.setProperty("mainColor",e?n:o),t.laserMaterial.setProperty("scale",e?20:10),t.enemyMaterial.setProperty("emissiveColor",e?i:r);for(var a=g.user.score<5e3?x(1,2):x(2,3),s=0;s<a;s++)t.runAction(t._enemys.children[s],0==s)})).union().repeat(1/0).start()},r.runAction=function(t,n){var o=this,i=e.__vec3,r=e.__position,a=e.__quat,s=C(-1,1),l=C(-.5,.5);t.position=i.set(g.ship.position.x-5,0,0);var p=new y;y.rotateY(p,p,-Math.PI/2);var c=t.getChildByName("lightline"),u=Math.random(),f=g.ship;h(this).delay(.2+u).call((function(){n&&(o.warnning.play(),L.play("audios/warning"))})).start(),h(this).delay(.3+u).call((function(){t.rotation=p,c.scale=i.set(1,1,0)})).to(1.5,{},{onUpdate:function(e,n){var o=6*n-1,a=M(f.position.x+o+f.offset,r),p=s+a.y,c=v(t.position.y,f.position.y+l,.1);t.position=i.set(f.position.x+o,c,p)}}).call((function(){L.play("audios/enemy",1,!1,!1)})).to(1.55,{},{onUpdate:function(e,n){var p=M(f.position.x+5+f.offset,r),c=s+p.y,u=v(t.position.y,f.position.y+l,.1);t.position=i.set(f.position.x+5,u,c),o._tmpNode.position=i,o._tmpNode.lookAt(f.position);var y=o._tmpNode.rotation;a.set(t.rotation),a.slerp(y,n),t.rotation=a}}).to(.2,{},{onUpdate:function(e,n){var a=M(f.position.x+5+f.offset,r),l=s+a.y;t.position=i.set(f.position.x+5,t.position.y,l);var p=20*n;c.scale=i.set(1,1,p),o.hitCheck(t,p)}}).to(3.5,{},{onUpdate:function(e,n){var l=5-6*n,p=M(f.position.x+l+f.offset,r),c=s+p.y;t.position=i.set(f.position.x+l,t.position.y,c),o._tmpNode.position=i,o._tmpNode.lookAt(f.position);var u=o._tmpNode.rotation;a.set(t.rotation),a.slerp(u,.03),t.rotation=a,o.hitCheck(t,20)}}).call((function(){t.position=i.set(-100,0,0)})).start()},r.hitCheck=function(t,e){var n=t.position,o=t.forward.multiplyScalar(e).add(t.position);b(g.ship.position,n,o)<.1&&_.emit(E.HIT,N.LASER)},e}(w)).__vec3=new c,F.__position=new u,F.__quat=new y,I=e((H=F).prototype,"enemy",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(H.prototype,"laserMaterial",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(H.prototype,"enemyMaterial",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(H.prototype,"warnning",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=H))||D));r._RF.pop()}}}));

System.register("chunks:///_virtual/Enum.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"36b4cQWfOpB/rQ24NzQ6AxH","Enum",void 0);t("EventType",function(t){return t.HIT="hit",t.GET="get",t.LEAVE="enter",t.GAMEEND="gameEnd",t.OFFSET="offset",t}({})),t("HitType",function(t){return t[t.CAR=0]="CAR",t[t.BUILDING=1]="BUILDING",t[t.BRIDGE=2]="BRIDGE",t[t.LASER=3]="LASER",t}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/EventConfig.ts",["cc"],(function(e){var t,n;return{setters:[function(e){t=e.cclegacy,n=e._decorator}],execute:function(){t._RF.push({},"7d338gHIo5CR53gFWy/3RCZ","EventConfig",void 0);n.ccclass,n.property,e("default",{PreloadFinished:"onPreloadFinished"});t._RF.pop()}}}));

System.register("chunks:///_virtual/EventManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,e,r,a,o;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,r=n._decorator,a=n.EventTarget,o=n.Component}],execute:function(){var c,i;e._RF.push({},"2d386+CInBBZKmunZgfMeFv","EventManager",void 0);var s=r.ccclass;r.property,n("EventManager",s("EventManager")(((i=function(n){function e(){for(var t,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return(t=n.call.apply(n,[this].concat(r))||this).eventTarget=new a,t}t(e,n);var r=e.prototype;return r.start=function(){e.Instance=new e},r.on=function(n,t,e,r){this.eventTarget.on(n,t,e,r)},r.off=function(n,t,e){this.eventTarget.off(n,t,e)},r.emit=function(n,t,e,r,a,o){this.eventTarget.emit(n,t,e,r,a,o)},e}(o)).Instance=null,c=i))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/Example1.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TextMeshPro.ts","./TmpUtils.ts"],(function(t){var e,n,r,i,a,s,o,c,u,l,f,p,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized,a=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){o=t.cclegacy,c=t._decorator,u=t.Component,l=t.Vec3,f=t.tween},function(t){p=t.default},function(t){h=t.default}],execute:function(){var x,d,g,b,m,v,y,w;o._RF.push({},"0fdd6S55YlEc6iLECOO44mP","Example1",void 0);var _=c.ccclass,V=c.property;t("default",(x=V(p),d=V(p),g=V(p),_((v=e((m=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,r(e,"text1",v,i(e)),r(e,"text2",y,i(e)),r(e,"text3",w,i(e)),e._time=0,e._fScale=1,e._xOffset=0,e._initPos=[],e.alpha=0,e}n(e,t);var o=e.prototype;return o.start=function(){var t=this;this.anim1(),this.anim3(),this.scheduleOnce((function(){for(var e=0;e<t.text2.string.length;e++){var n=t.text2.getPosVertices(e);t._initPos.push(n)}}),0)},o.update=function(t){this._time+=t,this.anim2()},o.anim1=function(){var t=a(s().mark((function t(){var e,n,r,i=this;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.waitCmpt(this,1);case 2:for(this.text1.string="这 是 一 段 测 试 文 字aaagghjsa;dzxmc;",this.text1.updateRenderData(!0),e=0;e<this.text1.string.length;e++)this.text1.setVisible(e,!1);n=s().mark((function t(e){var n,r,a;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i.text1.setVisible(e,!0),i.text1.isVisible(e)){t.next=3;break}return t.abrupt("return",1);case 3:return n=i.text1.getPosVertices(e),(r=new l).x=(n[0].x+n[1].x+n[2].x+n[3].x)/4,r.y=(n[0].y+n[1].y+n[2].y+n[3].y)/4,i._xOffset=-30,a=function(){var t=[];t.push(n[0].clone()),t.push(n[1].clone()),t.push(n[2].clone()),t.push(n[3].clone());for(var a=0;a<4;a++){var s=new l;l.subtract(s,t[a],r),s.multiplyScalar(i._fScale).add(new l(i._xOffset,0)),l.add(t[a],r,s)}i.text1.setPosVertices(e,t)},f(i).to(.05,{_fScale:2,_xOffset:-15},{onUpdate:a}).to(.05,{_fScale:1,_xOffset:0},{onUpdate:a}).start(),t.next=12,h.waitCmpt(i,.1);case 12:case"end":return t.stop()}}),t)})),r=0;case 7:if(!(r<this.text1.string.length)){t.next=14;break}return t.delegateYield(n(r),"t0",9);case 9:if(!t.t0){t.next=11;break}return t.abrupt("continue",11);case 11:r++,t.next=7;break;case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),o.anim2=function(){if(!(this._initPos.length<=0))for(var t=0;t<this.text2.string.length;t++)if(this.text2.isVisible(t)){for(var e=[],n=0;n<4;n++)e.push(this._initPos[t][n].clone()),e[n].y+=10*Math.sin(.5*t+5*this._time);this.text2.setPosVertices(t,e)}},o.anim3=function(){var t=a(s().mark((function t(){var e,n,r,i=this;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.waitCmpt(this,1);case 2:for(this.text3.string="这 是 一 段 测 试 文 字aaagghjsa;dzxmc;",this.text3.updateRenderData(!0),e=0;e<this.text3.string.length;e++)this.text3.setVisible(e,!1);.1,n=s().mark((function t(e){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i.text3.setVisible(e,!0),i.text3.isVisible(e)){t.next=3;break}return t.abrupt("return",1);case 3:return i.text3.setVisible(e,!1),n=i.text3.getColorExtraVertices(e),i.alpha=0,f(i).to(.05,{alpha:255},{onUpdate:function(){n[0].a=i.alpha,n[2].a=i.alpha,i.text3.setColorExtraVertices(e,n)}}).call((function(){i.alpha=0})).to(.05,{alpha:255},{onUpdate:function(){n[1].a=i.alpha,n[3].a=i.alpha,i.text3.setColorExtraVertices(e,n)}}).start(),t.next=9,h.waitCmpt(i,.1);case 9:case"end":return t.stop()}}),t)})),r=0;case 8:if(!(r<this.text3.string.length)){t.next=15;break}return t.delegateYield(n(r),"t0",10);case 10:if(!t.t0){t.next=12;break}return t.abrupt("continue",12);case 12:r++,t.next=8;break;case 15:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e}(u)).prototype,"text1",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(m.prototype,"text2",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(m.prototype,"text3",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=m))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/FreelookVirtualCamera.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MathUtils.ts","./Spherical.ts","./VirtualCamera.ts"],(function(t){var e,i,r,o,n,a,s,h,p,c,l,_,u,g,f,b,y,m,S,d,v,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized,n=t.createClass},function(t){a=t.cclegacy,s=t._decorator,h=t.Camera,p=t.Vec2,c=t.Vec3,l=t.input,_=t.Input,u=t.sys,g=t.view,f=t.toRadian,b=t.clamp},function(t){y=t.setFromMatrixColumn,m=t.FInterpTo,S=t.VInterpTo,d=t.setFromSpherical},function(t){v=t.Spherical},function(t){L=t.VirtualCamera}],execute:function(){var M,T,w,A,k,D,P,O,E,x,z,F,U,C,V,I,R,j,W,Y,H,N,X,B,Z,q,Q,G,J,K,$,tt,et,it,rt,ot;a._RF.push({},"189a8sT2OxBsqmpE63Qa3ms","FreelookVirtualCamera",void 0);var nt=s.ccclass,at=s.property,st=s.requireComponent,ht=Math.tan,pt=.001;t("FreelookVirtualCamera",(M=nt("FreelookVirtualCamera"),T=st(h),w=at(v),A=at({group:"set",step:.01}),k=at({group:"set",step:.01}),D=at({group:"set",step:.01}),P=at({group:"set",step:.01}),O=at({group:"set",step:.01}),E=at({group:"set",step:.01}),x=at({group:"set"}),z=at({group:"set"}),F=at({group:"set"}),U=at({group:"set"}),C=at({group:"set"}),V=at({group:"set"}),I=at({group:"set"}),R=at({group:"set"}),M(j=T(((ot=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this)._active=!1,e._targetTheta=0,e._targetPhi=0,e._targetSpringLength=4,e._tempSmoothing=6,e._tempRotateSmoothing=8,e._button=-1,e._touchID=-1,e._preLoc0=new p,e._preLoc1=new p,r(e,"_spherical",Y,o(e)),r(e,"_lookAt",H,o(e)),e._targetLookAt=new c,e._targetFov=e.lens.fov,e._targetNear=e.lens.near,e._targetFar=e.lens.far,e._camera=null,r(e,"thetaMin",N,o(e)),r(e,"thetaMax",X,o(e)),r(e,"phiMin",B,o(e)),r(e,"phiMax",Z,o(e)),r(e,"distanceMin",q,o(e)),r(e,"distanceMax",Q,o(e)),r(e,"rotateSmoothing",G,o(e)),r(e,"rotateSpeed",J,o(e)),r(e,"panSpeed",K,o(e)),r(e,"forbidX",$,o(e)),r(e,"forbidY",tt,o(e)),r(e,"forbidPanX",et,o(e)),r(e,"forbidPanY",it,o(e)),r(e,"forbidZ",rt,o(e)),e}i(e,t);var a=e.prototype;return a.onEnable=function(){this.active=!0,this.reset()},a.onDisable=function(){this.active=!1},a.reset=function(){this._button=-1,this._targetPhi=this.phi,this._targetTheta=this.theta,this._targetSpringLength=this.springLength,this._targetFov=this.lens.fov,this._targetNear=this.lens.near,this._targetFar=this.lens.far,this._targetLookAt.set(this.lookAt)},a.onLoad=function(){this._camera=this.getComponent(h)},a._setListeners=function(t){t?(l.on(_.EventType.MOUSE_DOWN,this._onMouseDown,this),l.on(_.EventType.MOUSE_UP,this._onMouseUp,this),l.on(_.EventType.MOUSE_MOVE,this._onMouseMove,this),l.on(_.EventType.MOUSE_WHEEL,this._onMouseWheel,this),l.on(_.EventType.TOUCH_START,this._onTouchStart,this),l.on(_.EventType.TOUCH_MOVE,this._onTouchMove,this)):(l.off(_.EventType.MOUSE_DOWN,this._onMouseDown,this),l.off(_.EventType.MOUSE_UP,this._onMouseUp,this),l.off(_.EventType.MOUSE_MOVE,this._onMouseMove,this),l.off(_.EventType.MOUSE_WHEEL,this._onMouseWheel,this),l.off(_.EventType.TOUCH_START,this._onTouchStart,this),l.off(_.EventType.TOUCH_MOVE,this._onTouchMove,this))},a._onTouchStart=function(t){if(u.isMobile){var e=t.getAllTouches();e.length>1?(e[0].getLocation(this._preLoc0),e[1].getLocation(this._preLoc1)):e.length>0&&(this._touchID=e[0].getID(),e[0].getLocation(this._preLoc0))}},a._onTouchMove=function(t){if(u.isMobile){var i=e.__loc0,r=e.__loc1,o=e.__panDelta,n=e.__rotateDelta,a=e.__preCenter,s=e.__center,h=t.getAllTouches();h.length>1?(h[0].getLocation(i),h[1].getLocation(r),this.lookAt&&(this._targetSpringLength*=this._calculateDistanceScale(p.distance(this._preLoc0,this._preLoc1)/p.distance(i,r))),a.set(this._preLoc0).add(this._preLoc1).multiplyScalar(.5),s.set(i).add(r).multiplyScalar(.5),this._calculatePanDelta(o,a,s),this._calculateTargetLookAt(o),this._calculateTargetSpringArm(),this._preLoc0.set(i),this._preLoc1.set(r)):h.length>0&&this._touchID===h[0].getID()&&(h[0].getLocation(i),this._calculateRotatelDelta(n,this._preLoc0,i),this._calculateTargetSpringArm(n),this._preLoc0.set(i))}},a._onMouseDown=function(t){this._button=t.getButton(),t.getLocation(this._preLoc0)},a._onMouseUp=function(t){this._button=-1},a._onMouseMove=function(t){var i=e.__loc0,r=e.__panDelta,o=e.__rotateDelta;switch(t.getLocation(i),this._button){case 0:this._calculateRotatelDelta(o,this._preLoc0,i),this._calculateTargetSpringArm(o);break;case 1:case 2:this._calculatePanDelta(r,this._preLoc0,i),this._calculateTargetLookAt(r)}this._preLoc0.set(i)},a._onMouseWheel=function(t){t.getScrollY()>0?this._targetSpringLength*=this._calculateDistanceScale(1/.85):t.getScrollY()<0&&(this._targetSpringLength*=this._calculateDistanceScale(.85)),this._calculateTargetSpringArm()},a._calculateDistanceScale=function(t){return this._tempRotateSmoothing=this.rotateSmoothing,this.forbidZ&&(t=1),t},a._calculatePanDelta=function(t,e,i){return this._tempRotateSmoothing=this.rotateSmoothing,p.copy(t,i).subtract(e).multiplyScalar(this.panSpeed/g.getVisibleSizeInPixel().height),this.forbidPanX&&(t.x=0),this.forbidPanY&&(t.y=0),t},a._calculateTargetLookAt=function(t){var i=e.__xAxis,r=e.__yAxis,o=e.__offset;y(this.node.worldMatrix,0,i),y(this.node.worldMatrix,1,r),c.copy(o,this.node.position).subtract(this.lookAt);var n=2*o.length()*ht(f(.5*this.lens.fov));this._targetLookAt.subtract(i.multiplyScalar(t.x*n)).subtract(r.multiplyScalar(t.y*n))},a._calculateRotatelDelta=function(t,e,i){return this._tempRotateSmoothing=this.rotateSmoothing,p.copy(t,i).subtract(e).multiplyScalar(2*this.rotateSpeed*Math.PI/g.getVisibleSizeInPixel().height),this.forbidX&&(t.x=0),this.forbidY&&(t.y=0),t},a._calculateTargetSpringArm=function(t,e){t&&(this._targetTheta-=t.x,this._targetPhi+=t.y),e&&(this._targetSpringLength=e),this._targetTheta=b(this._targetTheta,this.thetaMin,this.thetaMax),this._targetPhi=b(this._targetPhi,this.phiMin,this.phiMax),this._targetSpringLength=b(this._targetSpringLength,this.distanceMin,this.distanceMax)},a.gotoPOI=function(t){var e=t.phi,i=void 0===e?this._targetPhi:e,r=t.theta,o=void 0===r?this._targetTheta:r,n=t.springLength,a=void 0===n?this._targetSpringLength:n,s=t.lookAt,h=void 0===s?this._targetLookAt:s;this._targetPhi=i,this._targetTheta=o,this._targetSpringLength=a,this._targetLookAt.set(h)},a.gotoTransform=function(t){var i=t.position,r=t.rotation,o=t.damping,n=void 0===o||o,a=e.__forward,s=e.__spherical,h=e.__offset,p=c.transformQuat(a,c.FORWARD,r).multiplyScalar(this.springLength).add(i);h.set(i).subtract(p),s.setFromVector3(h),n?(this._targetPhi=s.phi,this._targetTheta=s.theta,this._targetLookAt.set(p)):(this.phi=s.phi,this.theta=s.theta,this.lookAt=p)},a.update=function(t){var e=this._tempSmoothing,i=this._tempRotateSmoothing;this._spherical.theta=m(this._spherical.theta,this._targetTheta,t,i),this._spherical.phi=m(this._spherical.phi,this._targetPhi,t,i),this._spherical.radius=m(this._spherical.radius,this._targetSpringLength,t,e),S(this._lookAt,this._targetLookAt,t,e),this.lens.fov=m(this.lens.fov,this._targetFov,t,e),this.lens.near=m(this.lens.near,this._targetNear,t,e),this.lens.far=m(this.lens.far,this._targetFar,t,e),this._camera.fov=this.lens.fov,this._camera.near=this.lens.near,this._camera.far=this.lens.far,this.node.position=d(this._spherical,this.node.position).add(this._lookAt),this.node.lookAt(this._lookAt)},n(e,[{key:"lookAt",get:function(){return this._lookAt},set:function(t){this._lookAt.set(t),this._targetLookAt.set(t)}},{key:"near",get:function(){return this.lens.near},set:function(t){this.lens.near=this._targetNear=t}},{key:"far",get:function(){return this.lens.far},set:function(t){this.lens.far=this._targetFar=t}},{key:"fov",get:function(){return this.lens.fov},set:function(t){this.lens.fov=this._targetFov=t}},{key:"springLength",get:function(){return this._spherical.radius},set:function(t){this._spherical.radius=this._targetSpringLength=t}},{key:"theta",get:function(){return this._spherical.theta},set:function(t){this._spherical.theta=this._targetTheta=t}},{key:"phi",get:function(){return this._spherical.phi},set:function(t){this._spherical.phi=this._targetPhi=t}},{key:"active",get:function(){return this._active},set:function(t){this._active!==t&&(this._active=t,this._setListeners(t))}}]),e}(L)).__loc0=new p,ot.__loc1=new p,ot.__center=new p,ot.__preCenter=new p,ot.__panDelta=new p,ot.__panTarget=new p,ot.__rotateDelta=new p,ot.__offset=new c,ot.__xAxis=new c,ot.__yAxis=new c,ot.__spherical=new v,ot.__forward=new c,Y=e((W=ot).prototype,"_spherical",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new v(4,Math.PI/2)}}),H=e(W.prototype,"_lookAt",[at],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c}}),e(W.prototype,"lookAt",[at],Object.getOwnPropertyDescriptor(W.prototype,"lookAt"),W.prototype),e(W.prototype,"near",[at],Object.getOwnPropertyDescriptor(W.prototype,"near"),W.prototype),e(W.prototype,"far",[at],Object.getOwnPropertyDescriptor(W.prototype,"far"),W.prototype),e(W.prototype,"fov",[at],Object.getOwnPropertyDescriptor(W.prototype,"fov"),W.prototype),e(W.prototype,"springLength",[at],Object.getOwnPropertyDescriptor(W.prototype,"springLength"),W.prototype),e(W.prototype,"theta",[at],Object.getOwnPropertyDescriptor(W.prototype,"theta"),W.prototype),e(W.prototype,"phi",[at],Object.getOwnPropertyDescriptor(W.prototype,"phi"),W.prototype),N=e(W.prototype,"thetaMin",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1e6}}),X=e(W.prototype,"thetaMax",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e6}}),B=e(W.prototype,"phiMin",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return pt}}),Z=e(W.prototype,"phiMax",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Math.PI-pt}}),q=e(W.prototype,"distanceMin",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return pt}}),Q=e(W.prototype,"distanceMax",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e6}}),G=e(W.prototype,"rotateSmoothing",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 8}}),J=e(W.prototype,"rotateSpeed",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),K=e(W.prototype,"panSpeed",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),$=e(W.prototype,"forbidX",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),tt=e(W.prototype,"forbidY",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),et=e(W.prototype,"forbidPanX",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),it=e(W.prototype,"forbidPanY",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),rt=e(W.prototype,"forbidZ",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),j=W))||j)||j));a._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PipelineNextSettings.ts","./Properties.ts","./Math.ts","./AudioSystem.ts","./TweenUitls.ts","./Enum.ts"],(function(t){var e,i,n,r,o,s,a,l,p,u,c,h,_,f,g,d,m,y,b,O,S,w,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,a=t.Node,l=t.Color,p=t.Sprite,u=t.Label,c=t.ProgressBar,h=t.find,_=t.UITransform,f=t.director,g=t.tween,d=t.lerp,m=t.Component},function(t){y=t.PipelineNextSettings},function(t){b=t.properties},function(t){O=t.prepare},function(t){S=t.audioSystem},function(t){w=t.killTweenOf},function(t){C=t.EventType}],execute:function(){var E,L,M,B,v,R;o._RF.push({},"802160Zq2FO7qjbPgVcg9Hw","GameManager",void 0);var N=s.ccclass,D=s.property;function G(t){return t<24?0:t}t("GameManager",(E=N("GameManager"),L=D(a),E(((R=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"group",v,r(e)),e._score=null,e._life=null,e._bar=null,e._preBar=null,e._groupSprite=null,e}i(e,t);var o=e.prototype;return o.onLoad=function(){this._groupSprite=this.group.getComponent(p),this._score=this.group.getChildByName("Score").getComponent(u),this._life=this.group.getChildByName("Life").getComponent(c),this._bar=h("Bar",this._life.node).getComponent(_),this._preBar=h("preBar",this._life.node).getComponent(_),this._preBar.width=this._bar.width},o.onEnable=function(){f.on(C.GAMEEND,this._gameEnd,this)},o.onDisable=function(){w(this),f.off(C.GAMEEND,this._gameEnd,this)},o.start=function(){O(),b.ship.far=0,b.ship.offset=0,b.ship.position.set(0,0,0),b.ship.speedRatio.set(0,0,0),b.user.life=100,b.user.score=0,S.play("audios/start",2),S.playBGM("audios/bgm01"),this._gameStart(),g(this).delay(33.63).call((function(){S.playBGM("audios/bgmtransition")})).delay(11.21).call((function(){S.playBGM("audios/bgm02",1)})).start()},o._gameStart=function(){var t=this;g(y.Instance.tonemap).set({intensity:0}).to(.5,{intensity:1}).start();var i=e.__COLOR_HIDE.clone();g(this).call((function(){return t._groupSprite.color=i})).delay(.5).to(1,{},{onUpdate:function(n,r){t._groupSprite.color=i.lerp(e.__COLOR_NORMAL,r)}}).start()},o._gameEnd=function(){var t=this;g(y.Instance.tonemap).delay(2).to(.5,{intensity:0}).call((function(){})).start();var i=e.__COLOR_NORMAL.clone();g(this).call((function(){return t._groupSprite.color=i})).delay(.5).to(1,{},{onUpdate:function(n,r){t._groupSprite.color=i.lerp(e.__COLOR_HIDE,r)}}).start()},o.update=function(t){this._score&&this._life&&(this._score.string=Math.floor(b.user.score).toLocaleString(),this._life.progress=b.user.life/100,this._bar.width=G(this._bar.width),this._preBar.width=G(d(this._preBar.width,this._bar.width,t)))},e}(m)).__COLOR_HIDE=(new l).fromHEX(4294967040),R.__COLOR_NORMAL=(new l).fromHEX(4294967295),v=e((B=R).prototype,"group",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=B))||M));o._RF.pop()}}}));

System.register("chunks:///_virtual/Hand.ts",["cc"],(function(t){var n,c;return{setters:[function(t){n=t.cclegacy,c=t.Vec3}],execute:function(){n._RF.push({},"31bac0t++FEMbC6AAkSIHGr","Hand",void 0);t("Hand",(function(){this.lookAtOffset=new c}));n._RF.pop()}}}));

System.register("chunks:///_virtual/HandController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Perlin.ts","./Math.ts","./Properties.ts","./MeshUtils.ts","./TweenUitls.ts","./Enum.ts"],(function(t){var e,n,i,s,r,o,a,_,h,l,u,c,p,f,E,d,m,R,T,w,g,y,v,S,O,M,b,k,A;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,s=t.assertThisInitialized,r=t.createClass},function(t){o=t.cclegacy,a=t._decorator,_=t.Vec3,h=t.Node,l=t.Vec2,u=t.Quat,c=t.Animation,p=t.director,f=t.input,E=t.Input,d=t.tween,m=t.easing,R=t.find,T=t.sys,w=t.view,g=t.clamp,y=t.Component,v=t.MeshRenderer},function(t){S=t.Perlin},function(t){O=t.randomFloat},function(t){M=t.properties},function(t){b=t.initParticleMesh},function(t){k=t.killTweenOf},function(t){A=t.EventType}],execute:function(){var U,C,L,D,N,I,P,V;o._RF.push({},"7a11cmNKKRCp5KLCImEI640","HandController",void 0);var x=a.ccclass,H=a.property,z=[[-2,0,.2,0,0,4],[-4,0,0,0,0,1],[0,-2,0,0,0,-4]],Z=function(t){return t[t.NONE=0]="NONE",t[t.RESET=1]="RESET",t[t.START=2]="START",t[t.ENTER=3]="ENTER",t[t.LEAVE=4]="LEAVE",t}(Z||{}),F={targetEulers:[new _(170,-179,33),new _(126,120,-71),new _(3.83,-.58,-9.6)],initEulers:[new _(170,-180,20),new _(126,120,-71),new _(3.83,-1.77,8.3)]},K=function(){function t(t){this._material=void 0,this.sync=0,this.noise=1;var e=t.getComponentInChildren(v);e.mesh=M.shipParticleMesh||b(e.mesh),this._material=e.sharedMaterial}return r(t,[{key:"progress",get:function(){return this._material.getProperty("progress",0)},set:function(t){this._material.setProperty("progress",t,0)}}]),t}(),q=function(){function t(t){this._material=void 0,this._material=t.getComponentInChildren(v).sharedMaterial,this.indirectIntensity=.3}return r(t,[{key:"indirectIntensity",get:function(){return this._material.getProperty("indirectIntensity",0)},set:function(t){this._material.setProperty("indirectIntensity",t,0)}}]),t}();t("HandController",(U=x("HandController"),C=H(h),L=H(h),U(((V=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this)._animation=null,e._armSkeletons=[],e._targetScales=[new _(2,2,2),new _,new _(-8,-8,-8)],e._targetSkeletons=[0,1,2],e._targetEulers=[new _,new _,new _],e._targetOffsets=[new _,new _,new _],e._targetCenters=[new _,new _,new _],e._currEulers=[new _,new _,new _],e._initialEulers=[new _,new _,new _],e._totalDelta=new l,e._time=[],e._preLoc0=new l,e._button=-1,e._state=Z.NONE,e._shipTween=void 0,e._handTween=void 0,i(e,"ship",I,s(e)),i(e,"target",P,s(e)),e}n(e,t);var r=e.prototype;return r.onLoad=function(){this._initSkeleton(),this._initTargetEulers(),this._initSkeltonRotations(),this._initTimes(),this._animation=this.getComponent(c),this._shipTween=new K(this.ship),this._handTween=new q(this.node),this._disable(),p.on(A.LEAVE,this._leaveScene,this)},r.onDestroy=function(){k(this._handTween),k(this._shipTween),p.off(A.LEAVE,this._leaveScene,this)},r._enable=function(){f.on(E.EventType.MOUSE_DOWN,this._onMouseDown,this),f.on(E.EventType.MOUSE_UP,this._onMouseUp,this),f.on(E.EventType.MOUSE_MOVE,this._onMouseMove,this),f.on(E.EventType.TOUCH_START,this._onTouchStart,this),f.on(E.EventType.TOUCH_END,this._onTouchEnd,this),f.on(E.EventType.TOUCH_MOVE,this._onTouchMove,this)},r._disable=function(){f.off(E.EventType.MOUSE_DOWN,this._onMouseDown,this),f.off(E.EventType.MOUSE_UP,this._onMouseUp,this),f.off(E.EventType.MOUSE_MOVE,this._onMouseMove,this),f.off(E.EventType.TOUCH_START,this._onTouchStart,this),f.off(E.EventType.TOUCH_END,this._onTouchEnd,this),f.off(E.EventType.TOUCH_MOVE,this._onTouchMove,this)},r.start=function(){this._initAnimation(),this._enterScene()},r._initAnimation=function(){this._animation.play("leave");var t=this._animation.getState("leave");t.setTime(t.duration)},r._enterScene=function(){var t=this;k(this._handTween),k(this._shipTween),d(this._shipTween).set({sync:0,noise:1}).to(3,{noise:0}).to(2,{sync:1,noise:1}).start(),d(this._shipTween).set({progress:2}).to(4,{progress:0},{easing:m.quadInOut}).start(),d(this._shipTween).delay(1.2).call((function(){t._state=Z.START})).delay(1).call((function(){t._state=Z.ENTER,t._animation.play("enter"),k(t._handTween),d(t._handTween).delay(2).call((function(){return t._enable()})).start(),d(t._handTween).delay(1).to(.5,{indirectIntensity:1}).start()})).start()},r._leaveScene=function(){this._state=Z.LEAVE,this._animation.play("leave"),this._shipTween.sync=0,this._disable(),k(this._shipTween),k(this._handTween),d(this._shipTween).set({progress:0}).to(3,{progress:2},{easing:m.quadInOut}).start(),d(this._handTween).to(.5,{indirectIntensity:.3}).start()},r._initSkeleton=function(){var t=this,e=R("hand.003",this.node);["upper_arm.R","upper_arm.R/forearm.R","upper_arm.R/forearm.R/hand.R","upper_arm.R/forearm.R/hand.R/palm.01.R/f_index.01.R","upper_arm.R/forearm.R/hand.R/palm.01.R/f_index.01.R/f_index.02.R","upper_arm.R/forearm.R/hand.R/palm.01.R/thumb.01.R","upper_arm.R/forearm.R/hand.R/palm.02.R/f_middle.01.R","upper_arm.R/forearm.R/hand.R/palm.02.R/f_middle.01.R/f_middle.02.R","upper_arm.R/forearm.R/hand.R/palm.03.R/f_ring.01.R","upper_arm.R/forearm.R/hand.R/palm.03.R/f_ring.01.R/f_ring.02.R","upper_arm.R/forearm.R/hand.R/palm.04.R/f_pinky.01.R","upper_arm.R/forearm.R/hand.R/palm.04.R/f_pinky.01.R/f_pinky.02.R"].forEach((function(n,i){t._armSkeletons[i]=R(n,e)}))},r._initTargetEulers=function(){var t=this;this._targetSkeletons.forEach((function(e,n){var i=t._armSkeletons[e].eulerAngles;t._currEulers[n].set(i),t._targetEulers[n].set(i),t._initialEulers[n].set(i)}))},r._initSkeltonRotations=function(){var t=this,n=e.__euler,i=e.__rotation;this._targetSkeletons.forEach((function(e,s){n.set(F.initEulers[s]),t._targetEulers[s].set(n),t._armSkeletons[e].rotation=u.fromEuler(i,n.x,n.y,n.z)}))},r._initTimes=function(){for(var t=0;t<3;t++)this._time[t]=O(-1e4,0);M.hand.lookAtOffset.set(0,0,0)},r.update=function(t){var n=this,i=e.__position,s=e.__rotation,r=e.__euler,o=e.__normal,a=e.__offset,h=M.hand,c=this._currEulers,p=this._targetScales,f=this._targetEulers,E=this._initialEulers,d=this._targetOffsets,m=this._targetCenters,R=this._targetSkeletons,T=this._armSkeletons;t=Math.min(.033,t);for(var w=0;w<3;w++)this._time[w]+=.2*t;var g=o.set(S.Fbm(3,this._time[0]),S.Fbm(3,this._time[1]),S.Fbm(3,this._time[2]));g.multiply3f(1,1,2).multiplyScalar(this._shipTween.noise),R.forEach((function(e,i){var o=T[e],l=d[i],R=m[i],w=f[i];switch(n._state){case Z.RESET:w.lerp(E[i],3*t),R.lerp(_.ZERO,5*t),h.lookAtOffset.lerp(_.ZERO,2*t);break;case Z.START:w.lerp(F.targetEulers[i],1.5*t);break;case Z.ENTER:w.lerp(E[i],1.5*t),R.lerp(_.ZERO,2.5*t),h.lookAtOffset.lerp(_.ZERO,1*t);break;case Z.LEAVE:w.lerp(F.targetEulers[i],1.5*t),R.lerp(_.ZERO,2.5*t),h.lookAtOffset.lerp(_.ZERO,1*t)}l.lerp(R,10*t),a.set(g).multiply(p[i]),r.set(w).add(l).add(a);var y=c[i].lerp(r,20*t);u.fromEuler(s,y.x,y.y,y.z),o.rotation=o.rotation.slerp(s,10*t)})),this._state===Z.RESET&&this._totalDelta.lerp(l.ZERO,3*t),this.ship&&this.target&&(this.ship.worldPosition=i.set(this.ship.worldPosition).lerp(this.target.worldPosition,this._shipTween.sync),this.ship.worldRotation=s.set(this.ship.worldRotation).slerp(this.target.worldRotation,this._shipTween.sync))},r._onMouseDown=function(t){this._button=t.getButton(),t.getUILocation(this._preLoc0),this._state=Z.NONE},r._onMouseUp=function(t){this._button=-1,this._state=Z.RESET},r._onMouseMove=function(t){var n=e.__loc0;t.getUILocation(n),this._setTargets(n,this._preLoc0),this._preLoc0.set(n)},r._onTouchStart=function(t){T.isMobile&&(this._button=0,this._state=Z.NONE,t.getAllTouches()[0].getUILocation(this._preLoc0))},r._onTouchEnd=function(t){T.isMobile&&(this._button=-1,this._state=Z.RESET)},r._onTouchMove=function(t){if(T.isMobile){var n=e.__loc0;t.getAllTouches()[0].getUILocation(n),this._setTargets(n,this._preLoc0),this._preLoc0.set(n)}},r._setTargets=function(t,e){0===this._button&&this._setTargetDelta(this._calcDelta(t,e))},r._calcDelta=function(t,n,i){void 0===i&&(i=e.__delta);var s=w.getVisibleSize();return i.set(t).subtract(n).multiplyScalar(15/s.height),i},r._setTargetDelta=function(t,e){void 0===e&&(e=z);var n=this._totalDelta,i=n.x,s=n.y,r=this._totalDelta.x=g(i+t.x,-10,3),o=this._totalDelta.y=g(s+t.y,-3,1.5),a=r-i,_=o-s;this._targetEulers.forEach((function(t,n){var i=e[n];t.x+=a*i[0],t.y+=a*i[1],t.z+=a*i[2]})),this._targetCenters.forEach((function(t,n){var i=e[n];t.x+=_*i[3],t.y+=_*i[4],t.z+=_*i[5]})),M.hand.lookAtOffset.add3f(-a,_,0)},e}(y)).__loc0=new l,V.__delta=new l,V.__euler=new _,V.__normal=new _,V.__position=new _,V.__rotation=new u,V.__offset=new _,I=e((N=V).prototype,"ship",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(N.prototype,"target",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=N))||D));o._RF.pop()}}}));

System.register("chunks:///_virtual/HomeManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PipelineNextSettings.ts","./Enum.ts","./Properties.ts","./TweenUitls.ts","./AudioSystem.ts"],(function(t){var e,n,o,i,r,s,a,l,u,c,_,h,p,f,y,g,d,M,b,m,E,T,O,C,L,v,R,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Camera,l=t.BoxCollider,u=t.Node,c=t.Animation,_=t.Vec2,h=t.geometry,p=t.Color,f=t.Vec3,y=t.Sprite,g=t.Label,d=t.MeshRenderer,M=t.input,b=t.Input,m=t.tween,E=t.sys,T=t.director,O=t.Component},function(t){C=t.PipelineNextSettings},function(t){L=t.EventType},function(t){v=t.properties},function(t){R=t.killTweenOf},function(t){S=t.audioSystem}],execute:function(){var w,P,A,U,H,B,D,N,V,x,z,I,k,F,X,j;r._RF.push({},"9450fAodF1Pk55cjHYq1hZS","HomeManager",void 0);var W=s.ccclass,q=s.property;s.executeInEditMode,t("HomeManager",(w=W("HomeManager"),P=q(a),A=q(l),U=q(a),H=q(u),B=q(c),D=q(u),w(((j=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,o(e,"camera",x,i(e)),o(e,"startCollider",z,i(e)),o(e,"uiCamera",I,i(e)),o(e,"screen",k,i(e)),o(e,"screenAnimation",F,i(e)),o(e,"group",X,i(e)),e._button=-1,e._pressed=!1,e._screenMaterial=null,e._startButton=null,e._startLabel=null,e._scoreLabel=null,e}n(e,t);var r=e.prototype;return r.onLoad=function(){this._startButton=this.group.getChildByName("button").getComponent(y),this._startLabel=this.group.getChildByPath("button/label").getComponent(g),this._scoreLabel=this.group.getChildByPath("score/score").getComponent(g),this._screenMaterial=this.screen.getComponent(d).material,this._screenMaterial.setProperty("mainTexture",this.uiCamera.targetTexture),S.stop()},r.onDestroy=function(){R(this)},r._enalble=function(){M.on(b.EventType.MOUSE_DOWN,this._onMouseDown,this),M.on(b.EventType.MOUSE_UP,this._onMouseUp,this),M.on(b.EventType.MOUSE_MOVE,this._onMouseMove,this),M.on(b.EventType.TOUCH_START,this._onTouchStart,this),M.on(b.EventType.TOUCH_END,this._onTouchEnd,this),M.on(b.EventType.TOUCH_MOVE,this._onTouchMove,this)},r._disable=function(){M.off(b.EventType.MOUSE_DOWN,this._onMouseDown,this),M.off(b.EventType.MOUSE_UP,this._onMouseUp,this),M.off(b.EventType.MOUSE_MOVE,this._onMouseMove,this),M.off(b.EventType.TOUCH_START,this._onTouchStart,this),M.off(b.EventType.TOUCH_END,this._onTouchEnd,this),M.off(b.EventType.TOUCH_MOVE,this._onTouchMove,this)},r.start=function(){var t=this;v.user.life<=0?(this._startButton.color=e.__COLOR_HIDE,this._scoreLabel.string=Math.floor(v.user.score).toLocaleString(),m(C.Instance.tonemap).set({intensity:0}).to(1,{intensity:1}).start(),m(this).delay(3.5).call((function(){return t.group.getComponent(c).play()})).delay(.5).call((function(){return S.play("audios/score")})).start(),this.screenAnimation.play()):(this._startLabel.string="PRESS START",this._startButton.color=e.__COLOR_NORMAL,m(this).delay(.5).call((function(){return t.screenAnimation.play()})).start()),S.play("audios/particle"),S.playBGM("audios/roombgm"),m(this).delay(4).call((function(){return t._enalble()})).start()},r.update=function(t){if(this._startButton){var n=this._startLabel.node,o=this._pressed?e.__SCAL0:e.__SCAL1;n.scale=n.scale.lerp(o,10*t)}},r._onMouseDown=function(t){this._button=t.getButton(),this._onPointerDown(t.getLocation(e.__loc0))},r._onMouseUp=function(t){this._button=-1,this._onPointerUp(t.getLocation(e.__loc0))},r._onMouseMove=function(t){this._onPointerMove(t.getLocation(e.__loc0))},r._onTouchStart=function(t){E.isMobile&&(this._button=0,this._onPointerDown(t.touch.getLocation(e.__loc0)))},r._onTouchEnd=function(t){E.isMobile&&(this._button=-1,this._onPointerUp(t.touch.getLocation(e.__loc0)))},r._onTouchMove=function(t){E.isMobile&&this._onPointerMove(t.touch.getLocation(e.__loc0))},r._onPointerDown=function(t){0===this._button&&(this._pressed=this._getRayResult(t)>0)},r._onPointerUp=function(t){this._pressed&&(this._pressed=!1,S.play("audios/click"),S.play("audios/particle"),T.emit(L.LEAVE),this._disable(),m(C.Instance.tonemap).delay(1.5).to(1,{intensity:0}).call((function(){T.loadScene("game")})).start())},r._onPointerMove=function(t){-1===this._button&&(this._startButton.color=this._getRayResult(t)>0?e.__COLOR_HOVER:e.__COLOR_NORMAL)},r._getRayResult=function(t){var n=this.camera.screenPointToRay(t.x,t.y,e.__ray);return h.intersect.rayAABB(n,this.startCollider.worldBounds)},e}(O)).__loc0=new _,j.__ray=new h.Ray,j.__COLOR_HIDE=(new p).fromHEX(2834693888),j.__COLOR_NORMAL=(new p).fromHEX(2834694143),j.__COLOR_HOVER=(new p).fromHEX(1893203967),j.__SCAL0=new f(1.2,1.2,1.2),j.__SCAL1=new f(1,1,1),x=e((V=j).prototype,"camera",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(V.prototype,"startCollider",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(V.prototype,"uiCamera",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(V.prototype,"screen",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(V.prototype,"screenAnimation",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(V.prototype,"group",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=V))||N));r._RF.pop()}}}));

System.register("chunks:///_virtual/HtmlParser.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var s,t;return{setters:[function(e){s=e.createForOfIteratorHelperLoose},function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"2e021iqtGxCJ479Ig98rVuT","HtmlParser",void 0);var r=/^(click)(\s)*=|(param)(\s)*=/,i=/(\s)*src(\s)*=|(\s)*height(\s)*=|(\s)*width(\s)*=|(\s)*align(\s)*=|(\s)*offset(\s)*=|(\s)*click(\s)*=|(\s)*param(\s)*=/;e("HtmlTextParser",function(){function e(){this._specialSymbolArray=[],this._stack=[],this._resultObjectArray=[],this._specialSymbolArray.push([/&lt;/g,"<"]),this._specialSymbolArray.push([/&gt;/g,">"]),this._specialSymbolArray.push([/&amp;/g,"&"]),this._specialSymbolArray.push([/&quot;/g,'"']),this._specialSymbolArray.push([/&apos;/g,"'"]),this._specialSymbolArray.push([/&nbsp;/g," "])}var t=e.prototype;return t.parse=function(e){this._resultObjectArray.length=0,this._stack.length=0;for(var s=0,t=e.length;s<t;){var r=e.indexOf(">",s),i=-1;if(r>=0)(i=e.lastIndexOf("<",r))<s-1&&(i=e.indexOf("<",r+1),r=e.indexOf(">",i+1));if(i<0)this._stack.pop(),this._processResult(e.substring(s)),s=t;else{var n=e.substring(s,i),a=e.substring(i+1,r);""===a&&(n=e.substring(s,r+1)),this._processResult(n),-1===r?r=i:"/"===e.charAt(i+1)?this._stack.pop():this._addToStack(a),s=r+1}}return this._resultObjectArray},t._attributeToObject=function(e){e=e.trim();var s={},t=/^(color|size)(\s)*=/.exec(e),r="",n=0,a="";if(t){if(r=t[0],""===(e=e.substring(r.length).trim()))return s;switch(n=e.indexOf(" "),r[0]){case"c":s.color=n>-1?e.substring(0,n).trim():e;break;case"s":s.size=parseInt(e)}return n>-1&&(a=e.substring(n+1).trim(),s.event=this._processEventHandler(a)),s}if((t=/^(br(\s)*\/)/.exec(e))&&t[0].length>0&&(r=t[0].trim()).startsWith("br")&&"/"===r[r.length-1])return s.isNewLine=!0,this._resultObjectArray.push({text:"",style:{isNewLine:!0}}),s;var c="",l=-1;if((t=/^(img(\s)*src(\s)*=[^>]+\/)/.exec(e))&&t[0].length>0&&(r=t[0].trim()).startsWith("img")&&"/"===r[r.length-1]){var o;t=i.exec(e);for(var f=!1;t;){var u=(r=(e=e.substring(e.indexOf(t[0]))).substr(0,t[0].length)).length;if(r=(r=r.replace(/[^a-zA-Z]/g,"").trim()).toLowerCase(),c=e.substring(u).trim(),l="src"===r?this.getRightQuotationIndex(c):-1,o=(n=c.indexOf(" ",l+1>=c.length?-1:l+1))>-1?c.substr(0,n):c,e=c.substring(n).trim(),o.endsWith("/")&&(o=o.slice(0,-1)),"src"===r){switch(o.charCodeAt(0)){case 34:case 39:f=!0,o=o.slice(1,-1)}s.isImage=!0,s.src=o}else if("height"===r)s.imageHeight=parseInt(o);else if("width"===r)s.imageWidth=parseInt(o);else if("align"===r){switch(o.charCodeAt(0)){case 34:case 39:o=o.slice(1,-1)}s.imageAlign=o.toLowerCase()}else"offset"===r?s.imageOffset=o:"click"===r&&(s.event=this._processEventHandler(r+"="+o));s.event&&"param"===r&&(s.event[r]=o.replace(/^"|"$/g,"")),t=i.exec(e)}return f&&s.isImage&&this._resultObjectArray.push({text:"",style:s}),{}}if(t=/^(cg(\s)*[^>]*)/.exec(e)){var g={lb:"#ffffff",rb:"#ffffff",lt:"#ffffff",rt:"#ffffff"};if(e=t[0].substring("cg".length).trim()){var h,b,m=/(\s)*lb(\s)*=|(\s)*rb(\s)*=|(\s)*lt(\s)*=|(\s)*rt(\s)*=/;for(t=m.exec(e);t;)r=(e=e.substring(e.indexOf(t[0]))).substr(0,t[0].length),h=(n=(b=e.substring(r.length).trim()).indexOf(" "))>-1?b.substr(0,n):b,r=(r=r.replace(/[^a-zA-Z]/g,"").trim()).toLocaleLowerCase(),e=b.substring(n).trim(),"lb"===r?g.lb=h:"rb"===r?g.rb=h:"lt"===r?g.lt=h:"rt"===r&&(g.rt=h),t=m.exec(e)}s.colorGradient=g}if(t=/^(face(\s)*[^>]*)/.exec(e)){var p={color:"#ffffff",dilate:.5,softness:.01};if(e=t[0].substring("face".length).trim()){var d,x,v=/(\s)*color(\s)*=|(\s)*dilate(\s)*=|(\s)*softness(\s)*=|(\s)*click(\s)*=|(\s)*param(\s)*=/;for(t=v.exec(e);t;)r=(e=e.substring(e.indexOf(t[0]))).substr(0,t[0].length),d=(n=(x=e.substring(r.length).trim()).indexOf(" "))>-1?x.substr(0,n):x,r=(r=r.replace(/[^a-zA-Z]/g,"").trim()).toLocaleLowerCase(),e=x.substring(n).trim(),"click"===r?s.event=this._processEventHandler(r+"="+d):"color"===r?p.color=d:"dilate"===r?p.dilate=Number(d):"softness"===r&&(p.softness=Number(d)),s.event&&"param"===r&&(s.event.param=d.replace(/^\"|\"$/g,"")),t=v.exec(e)}s.face=p}if(t=/^(outline(\s)*[^>]*)/.exec(e)){var _={color:"#ffffff",thickness:.1};if(e=t[0].substring("outline".length).trim()){var y,k=/(\s)*color(\s)*=|(\s)*thickness(\s)*=|(\s)*click(\s)*=|(\s)*param(\s)*=/;for(t=k.exec(e);t;)r=(e=e.substring(e.indexOf(t[0]))).substr(0,t[0].length),y=(n=(c=e.substring(r.length).trim()).indexOf(" "))>-1?c.substr(0,n):c,r=(r=r.replace(/[^a-zA-Z]/g,"").trim()).toLowerCase(),e=c.substring(n).trim(),"click"===r?s.event=this._processEventHandler(r+"="+y):"color"===r?_.color=y:"thickness"===r&&(_.thickness=Number(y)),s.event&&"param"===r&&(s.event[r]=y.replace(/^"|"$/g,"")),t=k.exec(e)}s.outline=_}if(t=/^(underlay(\s)*[^>]*)/.exec(e)){var O={color:"#ffffff",x:0,y:0,dilate:.5,softness:.1};if(e=t[0].substring("underlay".length).trim()){var A,w,L=/(\s)*color(\s)*=|(\s)*x(\s)*=|(\s)*y(\s)*=|(\s)*dilate(\s)*=|(\s)*softness(\s)*=|(\s)*click(\s)*=|(\s)*param(\s)*=/;for(t=L.exec(e);t;)r=(e=e.substring(e.indexOf(t[0]))).substr(0,t[0].length),A=(n=(w=e.substring(r.length).trim()).indexOf(" "))>-1?w.substr(0,n):w,r=(r=r.replace(/[^a-zA-Z]/g,"").trim()).toLocaleLowerCase(),e=w.substring(n).trim(),"click"===r?s.event=this._processEventHandler(r+"="+A):"color"===r?O.color=A:"dilate"===r?O.dilate=Number(A):"softness"===r?O.softness=Number(A):"x"===r?O.x=Number(A):"y"===r&&(O.y=Number(A)),s.event&&"param"===r&&(s.event.param=A.replace(/^\"|\"$/g,"")),t=L.exec(e)}s.underlay=O}if(t=/^(glow(\s)*[^>]*)/.exec(e)){var N={color:"#000000",offset:.5,inner:.01,outer:.01,power:1};if(e=t[0].substring("glow".length).trim()){var S,H,I=/(\s)*color(\s)*=|(\s)*offset(\s)*=|(\s)*inner(\s)*=|(\s)*outer(\s)*=|(\s)*power(\s)*=|(\s)*click(\s)*=|(\s)*param(\s)*=/;for(t=I.exec(e);t;)r=(e=e.substring(e.indexOf(t[0]))).substr(0,t[0].length),S=(n=(H=e.substring(r.length).trim()).indexOf(" "))>-1?H.substr(0,n):H,r=(r=r.replace(/[^a-zA-Z]/g,"").trim()).toLocaleLowerCase(),e=H.substring(n).trim(),"click"===r?s.event=this._processEventHandler(r+"="+S):"color"===r?N.color=S:"offset"===r?N.offset=Number(S):"inner"===r?N.inner=Number(S):"outer"===r?N.outer=Number(S):"power"===r&&(N.power=Number(S)),s.event&&"param"===r&&(s.event.param=S.replace(/^\"|\"$/g,"")),t=I.exec(e)}s.glow=N}if((t=/^(on|u|s|b|i)(\s)*/.exec(e))&&t[0].length>0){switch(r=t[0],e=e.substring(r.length).trim(),r[0]){case"u":s.underline=!0,s.offset="="===e[0]?Number(e.slice(1)):0;break;case"s":s.strikethrough=!0,s.offset="="===e[0]?Number(e.slice(1)):0;break;case"i":s.italic=!0;break;case"b":s.bold=!0}if(""===e)return s;s.event=this._processEventHandler(e)}return s},t.getRightQuotationIndex=function(e){var s=-1,t=-1,r=e.indexOf("'"),i=e.indexOf('"'),n=i>-1&&(i<r||-1===r);return r>-1&&(r<i||-1===i)?(s=r,t=e.indexOf("'",s+1>=e.length?-1:s+1)):n&&(s=i,t=e.indexOf('"',s+1>=e.length?-1:s+1)),t},t._processEventHandler=function(e){for(var s={},t=0,i=!1,n=r.exec(e);n;){var a=n[0],c="";if(i=!1,'"'===(e=e.substring(a.length).trim()).charAt(0))(t=e.indexOf('"',1))>-1&&(c=e.substring(1,t).trim(),i=!0),t++;else if("'"===e.charAt(0))(t=e.indexOf("'",1))>-1&&(c=e.substring(1,t).trim(),i=!0),t++;else{var l=/(\S)+/.exec(e);t=(c=l?l[0]:"").length}i&&(s[a=a.substring(0,a.length-1).trim()]=c),e=e.substring(t).trim(),n=r.exec(e)}return s},t._addToStack=function(e){var s=this._attributeToObject(e);if(0===this._stack.length)this._stack.push(s);else{if(s.isNewLine||s.isImage)return;var t=this._stack[this._stack.length-1];for(var r in t)s[r]||(s[r]=t[r]);this._stack.push(s)}},t._processResult=function(e){0!==e.length&&(e=this._escapeSpecialSymbol(e),this._stack.length>0?this._resultObjectArray.push({text:e,style:this._stack[this._stack.length-1]}):this._resultObjectArray.push({text:e}))},t._escapeSpecialSymbol=function(e){for(var t,r=s(this._specialSymbolArray);!(t=r()).done;){var i=t.value,n=i[0],a=i[1];e=e.replace(n,a)}return e},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./FreelookVirtualCamera.ts","./MathUtils.ts","./Spherical.ts","./VirtualCamera.ts","./MeshParticle.ts","./ReflectionProbeExtension.ts","./EventConfig.ts","./CameraController.ts","./HandController.ts","./ShipController.ts","./Car.ts","./Enum.ts","./Hand.ts","./Properties.ts","./Settings.ts","./Ship.ts","./StateHandler.ts","./StateManager.ts","./User.ts","./Example1.ts","./TextMeshPro.ts","./TmpRichText.ts","./HtmlParser.ts","./TmpAssembler.ts","./TmpFontConfig.ts","./TmpUtils.ts","./DebugManager.ts","./EffectManager.ts","./EnemyManager.ts","./EventManager.ts","./GameManager.ts","./HomeManager.ts","./ParticleManager.ts","./PortalManager.ts","./PreloadManager.ts","./PropsManager.ts","./SceneManager.ts","./PilelineNextBuilder.ts","./PipelineNextSettings.ts","./Plat4399.ts","./preload.ts","./AudioSystem.ts","./Math.ts","./MeshUtils.ts","./Perlin.ts","./Resources.ts","./TweenUitls.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Math.ts",["cc"],(function(n){var t,r,e;return{setters:[function(n){t=n.cclegacy,r=n.Vec2,e=n.Vec3}],execute:function(){function a(n,t){return n+Math.floor(Math.random()*(t-n+1))}function o(n,t,e,a,o,u){void 0===u&&(u=new r);var c=1-n,i=n*n,l=c*c,f=l*c,h=i*n,s=f*t.x+3*l*n*e.x+3*c*i*a.x+h*o.x,d=f*t.y+3*l*n*e.y+3*c*i*a.y+h*o.y;return u.set(s,d)}n({catmullRom:function(n,t,r,e,a){var o=.5*(e-t),u=.5*(a-r),c=n*n;return(2*r-2*e+o+u)*(n*c)+(-3*r+3*e-2*o-u)*c+o*n+r},cubicBezier:o,evalute:function n(t,e){null===i&&(i=new r,n(0,i));var a=Math.abs(t)/100,c=Math.floor(a),l=a-c,f=u[c%u.length];return o(l,f[0],f[1],f[2],f[3],e),e.set(t,30*e.y-i.y)},pointToLineDistance:function(n,t,r){var e=l.set(r).subtract(t),a=f.set(n).subtract(t),o=h.set(n).subtract(r),u=e.dot(e);if(0==u)return a.length();var c=a.dot(e)/u;if(c<0)return a.length();if(c>1)return o.length();var i=s.set(t).add(e.multiplyScalar(c));return d.set(n).subtract(i).length()},prepare:c,randomBoolean:function(){return Math.random()<.5},randomFloat:function(n,t){return n+Math.random()*(t-n)},randomFloats:function(n){var t=a(0,n.length-1);return n[t][0]+Math.random()*(n[t][1]-n[t][0])},randomInt:a,randomRange:function(n,t){return n+Math.random()*(t-n)},randomSpread:function(n){return n*(.5-Math.random())}}),t._RF.push({},"9f2f1ivwk9BjK/imrbnPB8l","Math",void 0);var u=[];function c(){for(var n=0,t=0;t<500;t++){var e=0===t?Math.random():n,a=499===t?u[0][0].y:Math.random();u.push([new r(0,e),new r(.25,e),new r(.75,a),new r(1,a)]),n=a}}c();var i=null;var l=new e,f=new e,h=new e,s=new e,d=new e;t._RF.pop()}}}));

System.register("chunks:///_virtual/MathUtils.ts",["cc"],(function(t){var r,e,n;return{setters:[function(t){r=t.cclegacy,e=t.Vec3,n=t.clamp}],execute:function(){t({FInterpTo:function(t,r,e,i){if(i<=0)return r;var u=r-t;if(a(u)<s)return r;return t+u*n(i*e,0,1)},VInterpConstantTo:function(t,r,e,n,a){void 0===a&&(a=t);var s=i.set(r).subtract(t),u=s.length(),c=n*e;if(u>c)return c>0?a.set(t).add(s.multiplyScalar(c/u)):a.set(t);return a.set(r)},VInterpTo:function(t,r,e,a,u){void 0===u&&(u=t);if(a<=0)return u.set(r);var c=i.set(r).subtract(t);if(c.length()<s)return u.set(r);return u.set(t).add(c.multiplyScalar(n(e*a,0,1)))},setFromMatrixColumn:function(t,r,n){void 0===n&&(n=new e);switch(r){case 0:n.x=t.m00,n.y=t.m01,n.z=t.m02;break;case 1:n.x=t.m04,n.y=t.m05,n.z=t.m06;break;case 2:n.x=t.m08,n.y=t.m09,n.z=t.m10}return n},setFromSpherical:function(t,r){void 0===r&&(r=new e);return u(t.radius,t.phi,t.theta,r)},setFromSphericalCoords:u}),r._RF.push({},"0aa086oFvlK4aWwMXQCIQYS","MathUtils",void 0);var a=Math.abs,s=1e-4,i=new e;function u(t,r,e,n){var a=Math.sin(r)*t;return n.x=a*Math.sin(e),n.y=Math.cos(r)*t,n.z=a*Math.cos(e),n}r._RF.pop()}}}));

System.register("chunks:///_virtual/MeshParticle.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MeshUtils.ts","./TweenUitls.ts"],(function(e){var t,n,i,r,s,l,a,c,o,u;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){i=e.cclegacy,r=e._decorator,s=e.MeshRenderer,l=e.tween,a=e.lerp,c=e.Component},function(e){o=e.initParticleMesh},function(e){u=e.killTweenOf}],execute:function(){var h,p;i._RF.push({},"02f44GNVflGdIkO3jD8UOXd","MeshParticle",void 0);var f=r.ccclass,_=(r.property,r.executeInEditMode);e("MeshParticle",f("MeshParticle")(h=_(((p=function(e){function i(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this)._material=null,t._isPlaying=!1,t}t(i,e);var r=i.prototype;return r.onLoad=function(){var e=this.getComponentInChildren(s);null===i.__particleMesh&&(i.__particleMesh=o(e.mesh,1)),e.mesh=i.__particleMesh,this._material=e.material},r.onDestroy=function(){u(this)},r.play=function(){var e=this;u(this),l(this).call((function(){return e._isPlaying=!0})).delay(.5).to(.8,{},{onUpdate:function(t,n){e._material.setProperty("progress",a(1.4,2,n))}}).call((function(){return e._isPlaying=!1})).start()},n(i,[{key:"isPlaying",get:function(){return this._isPlaying}}]),i}(c)).__particleMesh=null,h=p))||h)||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/MeshUtils.ts",["cc","./Math.ts"],(function(t){var r,a,e,o,n;return{setters:[function(t){r=t.cclegacy,a=t.gfx,e=t.utils},function(t){o=t.randomSpread,n=t.randomRange}],execute:function(){t("initParticleMesh",(function(t,r){void 0===r&&(r=0);var s=t.readIndices(0);if(null===s)return;var i={a_position:"positions",a_normal:"normals",a_tangent:"tangents",a_texCoord:"uvs",a_color:"colors"},u={};t.renderingSubMeshes[0].attributes.forEach((function(r){var e=u[i[r.name]]=[],o=t.readAttribute(0,r.name),n=0;switch(r.format){case a.Format.RGBA32F:s.forEach((function(t){n=4*t,e.push(o[n+0],o[n+1],o[n+2],o[n+3])}));break;case a.Format.RGB32F:s.forEach((function(t){n=3*t,e.push(o[n+0],o[n+1],o[n+2])}));break;case a.Format.RG32F:s.forEach((function(t){n=2*t,e.push(o[n+0],o[n+1])}))}}));for(var c=u.positions,h=[],f=0;f<c.length;f+=9)for(var l=(c[f+0]+c[f+3]+c[f+6])/3,v=(c[f+1]+c[f+4]+c[f+7])/3,m=(c[f+2]+c[f+5]+c[f+8])/3,F=0;F<3;F++)h.push(l,v,m);for(var p=[],d=[],_=0;_<h.length;_+=9)for(var b=h[_+0]+o(.5),g=h[_+1]+.5*n(.1,.5),R=h[_+2]+n(.1,.5),G=h[_+0]+o(.5),M=h[_+1],A=h[_+2]-n(.1,.5),B=0;B<3;B++)p.push(b,g,R),d.push(G,M,A);for(var w=[],P=0;P<h.length;P+=9)for(var E=h[P+0]+o(1),k=h[P+1]+.5*(0===r?n(1,1.5):n(0,.5)),x=o(1.5),S=0;S<3;S++)w.push(E,k,x);return u.customAttributes=[{attr:new a.Attribute("a_centroid",a.Format.RGB32F),values:h},{attr:new a.Attribute("a_controlPoint0",a.Format.RGB32F),values:p},{attr:new a.Attribute("a_controlPoint1",a.Format.RGB32F),values:d},{attr:new a.Attribute("a_endPosition",a.Format.RGB32F),values:w}],e.MeshUtils.createMesh(u)})),r._RF.push({},"59a539MoztOq6rufPGhtBuD","MeshUtils",void 0),r._RF.pop()}}}));

System.register("chunks:///_virtual/ParticleManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enum.ts","./MeshParticle.ts"],(function(e){var t,r,i,a,n,o,s,c,l,p,h,u,f,P;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized,n=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy,s=e._decorator,c=e.Node,l=e.director,p=e.instantiate,h=e.ParticleSystem,u=e.Component},function(e){f=e.EventType},function(e){P=e.MeshParticle}],execute:function(){var y,m,v,d,_,b,g;o._RF.push({},"81a848+EBRGfLLNCAe3/Qp6","ParticleManager",void 0);var E=s.ccclass,M=s.property;e("ParticleManager",(y=E("ParticleManager"),m=M(c),v=M(c),y((b=t((_=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this)._particles=[],t._meshParticles=[],i(t,"batteryParticle",b,a(t)),i(t,"meshParticle",g,a(t)),t}r(t,e);var o=t.prototype;return o.onEnable=function(){l.on(f.GET,this._onGet,this)},o.onDisable=function(){l.off(f.GET,this._onGet,this)},o.onLoad=function(){for(var e=0;e<4;e++){var t=p(this.batteryParticle);t.parent=this.batteryParticle.parent,this._addParticle(t)}this._addParticle(this.batteryParticle);for(var r=0;r<4;r++){var i=p(this.meshParticle);i.parent=this.meshParticle.parent,this._meshParticles.push(i.getComponent(P))}this._meshParticles.push(this.meshParticle.getComponent(P))},o._addParticle=function(e){this._particles.push({particles:e.getComponentsInChildren(h)})},o._onGet=function(e){for(var t,r=n(this._particles);!(t=r()).done;){var i=t.value;if(!i.particles[0].isPlaying){i.particles.forEach((function(e){return e.play()}));break}}for(var a,o=n(this._meshParticles);!(a=o()).done;){var s=a.value;if(!s.isPlaying){s.play();break}}},t}(u)).prototype,"batteryParticle",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(_.prototype,"meshParticle",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=_))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/Perlin.ts",["cc"],(function(r){var n;return{setters:[function(r){n=r.cclegacy}],execute:function(){n._RF.push({},"6ee1d1LaIJBS7abIudPXu+n","Perlin",void 0);var e=Math.floor;r("Perlin",function(){function r(){}return r.Noise=function(n,i,t){var o=r._Fade,u=r._Grad,a=r._Lerp,v=r._Permutation;if(void 0!==i&&void 0!==t){var f=e(n),c=e(i),d=e(t),s=255&f,_=255&c,l=255&d;i-=c,t-=d;var P=o(n-=f),p=o(i),F=o(t),m=v[s]+_,h=v[m]+l,L=v[m+1]+l,b=v[s+1]+_,g=v[b]+l,y=v[b+1]+l;return a(F,a(p,a(P,u(v[h],n,i,t),u(v[g],n-1,i,t)),a(P,u(v[L],n,i-1,t),u(v[y],n-1,i-1,t))),a(p,a(P,u(v[h+1],n,i,t-1),u(v[g+1],n-1,i,t-1)),a(P,u(v[L+1],n,i-1,t-1),u(v[y+1],n-1,i-1,t-1))))}if(void 0!==i){var G=e(n),I=e(i),N=255&G,R=255&I;i-=I;var S=o(n-=G),k=o(i),x=v[N]+R&255,B=v[N+1]+R&255;return a(k,a(S,u(v[x],n,i),u(v[B],n-1,i)),a(S,u(v[x+1],n,i-1),u(v[B+1],n-1,i-1)))}var J=e(n),M=255&J;return a(o(n-=J),u(v[M],n),u(v[M+1],n-1))},r.Fbm=function(n,e,i,t){var o=0,u=.5,a=r.Noise;if(void 0!==i&&void 0!==t)for(var v=0;v<n;v++)o+=u*a(e,i,t),e*=2,i*=2,t*=2,u*=.5;else if(void 0!==i)for(var f=0;f<n;f++)o+=u*a(e,i),e*=2,i*=2,u*=.5;else for(var c=0;c<n;c++)o+=u*a(e),e*=2,u*=.5;return o},r._Fade=function(r){return r*r*r*(r*(6*r-15)+10)},r._Lerp=function(r,n,e){return n+r*(e-n)},r._Grad=function(r,n,e,i){if(void 0!==e&&void 0!==i){var t=15&r,o=t<8?n:e,u=t<4?e:12==t||14==t?n:i;return(0==(1&t)?o:-o)+(0==(2&t)?u:-u)}return void 0!==e?(0==(1&r)?n:-n)+(0==(2&r)?e:-e):0==(1&r)?n:-n},r}())._Permutation=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180,151],n._RF.pop()}}}));

System.register("chunks:///_virtual/PilelineNextBuilder.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PipelineNextSettings.ts","./env"],(function(e){var t,a,i,n,r,d,o,s,l,h,u,g,p,c;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,i=e.sys,n=e.pipeline,r=e.renderer,d=e.director,o=e.PipelineEventType,s=e.gfx,l=e.Vec4,h=e.rendering},function(e){u=e.TonemapType,g=e.PipelineNextSettings},function(e){p=e.DEBUG,c=e.EDITOR}],execute:function(){e("getWindowId",S),a._RF.push({},"8e9bfPEYpFPMKqbee7DqB+k","PilelineNextBuilder",void 0),i.platform.endsWith("BROWSER")&&n.UBOSkinning.initLayout(Math.floor(n.UBOSkinning.JOINT_UNIFORM_CAPACITY));var m=r.scene.CameraUsage,w=0,_=new Map;function S(e){var t=_.get(e);return void 0===t&&(t=w++,_.set(e,t)),t}function f(e){return!!(e.clearFlag&(s.ClearFlagBit.COLOR|s.ClearFlagBit.STENCIL<<1))}function v(e){var t=e.cameraUsage===m.SCENE_VIEW?e.next=g.Instance:e.next;return void 0!==t&&!c&&!!t.base.material}function P(e,t,a,i){var n=e.addRenderPass(a.width,a.height,i);return n.addTexture(t.name,"mainTexture"),n.addRenderTarget(a.name,s.LoadOp.CLEAR,s.StoreOp.STORE),n}var E=e("PilelineNextBuilder",function(){function e(){this._clearColor=new s.Color,this._viewport=new s.Viewport,this._windows=new Map,this._windowInfo={id:0,width:1,height:1,name:"",depthStencilName:""},this._passStates=new Map,this._settings={isHDR:!0,useFloatOutput:!0}}var a=e.prototype;return a.setup=function(e,a){for(var i,n=t(e);!(i=n()).done;){var r=i.value;r.scene&&r.window&&(this._getSettings(r,a),this._getWindowInfo(r,a),d.root.pipelineEvent.emit(o.RENDER_CAMERA_BEGIN,r),v(r)?this._buildForwardPipeline(r,a):this._buildSimplePipeline(r,a),d.root.pipelineEvent.emit(o.RENDER_CAMERA_END,r))}},a._getSettings=function(e,t){var a=this._getPassState("Settings");if(0===a.flags){a.flags|=1;var i=this._settings;i.isHDR=t.pipelineSceneData.isHDR,i.useFloatOutput=t.getMacroBool("CC_USE_FLOAT_OUTPUT")}},a._getWindowInfo=function(e,t){var a=e.window,i=this._windowInfo,n=i.id=S(a),r=i.width=Math.max(Math.floor(a.width),1),d=i.height=Math.max(Math.floor(a.height),1),o=i.name="Color"+n,l=i.depthStencilName="DepthStencil"+n,h=this._windows.get(n);void 0===h&&this._windows.set(n,{width:r,height:d}),h&&h.width===r&&h.height===d||(t.addRenderWindow(o,s.Format.RGBA8,r,d,a),t.addDepthStencil(l,s.Format.DEPTH_STENCIL,r,d))},a._getPassState=function(e){var t=this._passStates.get(e);return void 0===t&&(t={flags:0},this._passStates.set(e,t)),t},a._getViewport=function(e,t,a){return this._viewport.left=Math.round(e.x*t),this._viewport.top=Math.round(e.y*a),this._viewport.width=Math.max(Math.round(e.width*t),1),this._viewport.height=Math.max(Math.round(e.height*a),1),this._viewport},a._getClearColor=function(e){return this._clearColor.set(e.x,e.y,e.z,e.w)},a._buildForwardPipeline=function(e,t){var a=this._windowInfo,i=a.id,n=a.width,r=a.height,d=this._getPassState("ForwardPass");if(0===d.flags){d.flags|=1;var o=d.source={name:"ForwardColor0"+i,width:n,height:r},l=d.destination={name:"ForwardColor1"+i,width:n,height:r},h=d.depthStencil={name:"ForwardDS"+i,width:n,height:r};t.addRenderTarget(o.name,s.Format.RGBA16F,o.width,o.height),t.addRenderTarget(l.name,s.Format.RGBA16F,l.width,l.height),t.addDepthStencil(h.name,s.Format.DEPTH_STENCIL,h.width,h.height)}var u=d.source,g=d.destination,p=u;this._addRenderPass(e,t,u,d.depthStencil);var c=e.next;c.fxaa.enable&&c.fxaa.material&&(this._addFxaaPass(e,t,u,g),p=u,u=g,g=p),c.bloom.enable&&c.bloom.material&&(this._addBloomPass(e,t,u,g),p=u,u=g,g=p),this._addToneMapPass(e,t,u,this._windowInfo)},a._addToneMapPass=function(e,t,a,i){var n=this._getPassState("ToneMapPass");0===n.flags&&(n.flags|=1,n.tonemapParams=new l(0,0,0,0));var r=e.next.base,d=e.next.tonemap;if(d.enable){var o=P(t,a,i,d.type===u.STANDARD?"tonemap":"tonemap-rgb");o.setVec4("cc_debug_view_mode",n.tonemapParams.set(d.intensity,d.damage,0,0)),o.addQueue(h.QueueHint.OPAQUE).addFullscreenQuad(r.material,d.type===u.STANDARD?1:2),o.addQueue(h.QueueHint.BLEND).addScene(e,h.SceneFlags.UI),"Main Camera"===e.name&&(o.showStatistics=p)}else{var s=P(t,a,i,"blit");s.addQueue(h.QueueHint.OPAQUE).addFullscreenQuad(r.material,0),s.addQueue(h.QueueHint.BLEND).addScene(e,h.SceneFlags.UI),"Main Camera"===e.name&&(s.showStatistics=p)}},a._addFxaaPass=function(e,t,a,i){var n=this._getPassState("FXAAPass");if(0===n.flags){n.flags|=1;var r=this._windowInfo,d=r.width,o=r.height;n.texelSize=new l(1/d,1/o,0,0)}var s=e.next.fxaa,u=P(t,a,i,"fxaa");u.setVec4("cc_debug_view_mode",n.texelSize),u.addQueue(h.QueueHint.OPAQUE).addFullscreenQuad(s.material,0)},a._addBloomPass=function(e,t,a,i){var n=this._getPassState("BloomPass");if(0===n.flags){n.flags|=1,n.bloomParams=new l;var r=this._windowInfo,d=r.id,o=r.width,u=r.height,g=this._settings.useFloatOutput?s.Format.RGBA16F:s.Format.RGBA8,p=.5,c=n.prefilterColor={name:"prefilterColor"+d,width:Math.floor(o*p),height:Math.floor(u*p)};t.addRenderTarget(c.name,g,c.width,c.height);for(var m=n.downsampleColors=[],w=0;w<8;w++){p*=.5;var _=m[w]={name:"downsampleColor"+d+w,width:Math.floor(o*p),height:Math.floor(u*p)};t.addRenderTarget(_.name,g,_.width,_.height)}for(var S=n.upsampleColors=[],f=0;f<7;f++){p*=2;var v=S[f]={name:"upsampleColor"+d+f,width:Math.floor(o*p),height:Math.floor(u*p)};t.addRenderTarget(v.name,g,v.width,v.height)}}var E=e.next.bloom,C=P(t,a,n.prefilterColor,"bloom-prefilter");C.setVec4("cc_debug_view_mode",n.bloomParams.set(0,0,E.threshold,0)),C.addQueue(h.QueueHint.OPAQUE).addFullscreenQuad(E.material,0);for(var R=n.downsampleColors,F=0;F<R.length;F++){var O=0===F?n.prefilterColor:R[F-1],D=P(t,O,R[F],"bloom-downsample");D.setVec4("cc_debug_view_mode",n.bloomParams.set(1/O.width,1/O.height,0,0)),D.addQueue(h.QueueHint.OPAQUE).addFullscreenQuad(E.material,1)}for(var T=R.length-1,Q=n.upsampleColors,A=0;A<Q.length;A++){var x=0===A?R[T]:Q[A-1],b=P(t,x,Q[A],"bloom-upsample");b.addTexture(R[T-1-A].name,"downsampleTexture"),b.setVec4("cc_debug_view_mode",n.bloomParams.set(1/x.width,1/x.height,0,0)),b.addQueue(h.QueueHint.OPAQUE).addFullscreenQuad(E.material,2)}var L=P(t,a,i,"bloom-combine");L.addTexture(Q[Q.length-1].name,"bloomTexture"),L.setVec4("cc_debug_view_mode",n.bloomParams.set(0,0,E.threshold,E.intensity)),L.addQueue(h.QueueHint.OPAQUE).addFullscreenQuad(E.material,3)},a._addRenderPass=function(e,t,a,i){var n=this._windowInfo.id,r=this._getPassState("RenderPass");if(0===r.flags){r.flags|=1;var d=t.pipelineSceneData.shadows;r.shadowMap={name:"shadowMap"+n,width:d.size.x,height:d.size.y},r.intensiy=new l}var o=t.addRenderPass(a.width,a.height,"default");f(e)?o.addRenderTarget(a.name,s.LoadOp.CLEAR,s.StoreOp.STORE,this._getClearColor(e.clearColor)):o.addRenderTarget(a.name,s.LoadOp.LOAD,s.StoreOp.STORE),e.clearFlag&s.ClearFlagBit.DEPTH_STENCIL?o.addDepthStencil(i.name,s.LoadOp.CLEAR,s.StoreOp.DISCARD,e.clearDepth,e.clearStencil,e.clearFlag&s.ClearFlagBit.DEPTH_STENCIL):o.addDepthStencil(i.name,s.LoadOp.LOAD,s.StoreOp.DISCARD);var u=e.next.base;o.setViewport(this._getViewport(e.viewport,a.width,a.height)),o.setVec4("cc_debug_view_mode",r.intensiy.set(u.intensity,0,0,0)),o.addQueue(h.QueueHint.OPAQUE).addScene(e,h.SceneFlags.OPAQUE),o.addQueue(h.QueueHint.BLEND).addScene(e,h.SceneFlags.BLEND)},a._buildSimplePipeline=function(e,t){var a=this._windowInfo,i=a.width,n=a.height,r=a.name,d=a.depthStencilName,o=t.addRenderPass(i,n,"default");f(e)?o.addRenderTarget(r,s.LoadOp.CLEAR,s.StoreOp.STORE,this._getClearColor(e.clearColor)):o.addRenderTarget(r,s.LoadOp.LOAD,s.StoreOp.STORE),e.clearFlag&s.ClearFlagBit.DEPTH_STENCIL?o.addDepthStencil(d,s.LoadOp.CLEAR,s.StoreOp.DISCARD,e.clearDepth,e.clearStencil,e.clearFlag&s.ClearFlagBit.DEPTH_STENCIL):o.addDepthStencil(d,s.LoadOp.LOAD,s.StoreOp.DISCARD),o.setViewport(this._getViewport(e.viewport,i,n)),o.addQueue(h.QueueHint.OPAQUE).addScene(e,h.SceneFlags.OPAQUE);var l=h.SceneFlags.BLEND|h.SceneFlags.UI;o.addQueue(h.QueueHint.BLEND).addScene(e,l)},e}());h.setCustomPipeline("next",new E),a._RF.pop()}}}));

System.register("chunks:///_virtual/PipelineNextSettings.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,t,n,r,a,o,l,u,s,p;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.initializerDefineProperty,n=e.inheritsLoose,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Material,u=e.Enum,s=e.Camera,p=e.Component}],execute:function(){var c,b,f,m,h,y,g,w,z,d,x,v,D,A,R,S,N,P,T,B,C,I,M,F,L,_,E,G,J,j,k,q,H,K,X,O,Q,U,V,W,Y,Z,$,ee,ie,te,ne;a._RF.push({},"f19b17FM2lJiJ7dRP6LKLsd","PipelineNextSettings",void 0);var re=o.ccclass,ae=o.property,oe=o.executeInEditMode,le=o.disallowMultiple,ue=o.requireComponent,se=(c=re("Base"),b=ae(l),f=ae({slide:!0,min:0,max:10,step:.1}),c((y=i((h=function(){t(this,"material",y,this),t(this,"intensity",g,this)}).prototype,"material",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=i(h.prototype,"intensity",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),m=h))||m),pe=(w=re("FXAA"),z=ae(l),w((v=i((x=function(){t(this,"enable",v,this),t(this,"material",D,this)}).prototype,"enable",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),D=i(x.prototype,"material",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=x))||d),ce=(A=re("Bloom"),R=ae(l),S=ae({slide:!0,min:0,max:10,step:.1}),N=ae({min:0}),A((B=i((T=function(){t(this,"enable",B,this),t(this,"material",C,this),t(this,"intensity",I,this),t(this,"threshold",M,this)}).prototype,"enable",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),C=i(T.prototype,"material",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=i(T.prototype,"intensity",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),M=i(T.prototype,"threshold",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.8}}),P=T))||P),be=e("TonemapType",function(e){return e[e.STANDARD=0]="STANDARD",e[e.RGB=1]="RGB",e}({})),fe=(F=re("Tonemap"),L=ae({type:u(be)}),_=ae({min:0,max:1,step:.01}),E=ae({min:0,max:1,step:.01}),F((j=i((J=function(){t(this,"enable",j,this),t(this,"type",k,this),t(this,"intensity",q,this),t(this,"damage",H,this)}).prototype,"enable",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),k=i(J.prototype,"type",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return be.STANDARD}}),q=i(J.prototype,"intensity",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),H=i(J.prototype,"damage",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),G=J))||G);e("PipelineNextSettings",(K=re("PipelineNextSettings"),X=ue(s),O=ae(se),Q=ae(fe),U=ae(pe),V=ae(ce),K(W=oe(W=le(W=X(((ne=function(e){function i(){for(var i,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return i=e.call.apply(e,[this].concat(a))||this,t(i,"preview",Z,r(i)),t(i,"base",$,r(i)),t(i,"tonemap",ee,r(i)),t(i,"fxaa",ie,r(i)),t(i,"bloom",te,r(i)),i}n(i,e);var a=i.prototype;return a.onEnable=function(){this.getComponent(s).camera.next=i.Instance=this},a.onDisable=function(){this.getComponent(s).camera.next=i.Instance=void 0},i}(p)).Instance=void 0,Z=i((Y=ne).prototype,"preview",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),$=i(Y.prototype,"base",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new se}}),ee=i(Y.prototype,"tonemap",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new fe}}),ie=i(Y.prototype,"fxaa",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new pe}}),te=i(Y.prototype,"bloom",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ce}}),W=Y))||W)||W)||W)||W));a._RF.pop()}}}));

System.register("chunks:///_virtual/Plat4399.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,o,r;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,r=t.Component}],execute:function(){var c;e._RF.push({},"8a2d1VFLBJEton4uqXeyY/0","Plat4399",void 0);var u=o.ccclass;o.property;CC_BUILD;t("Plat4399",u("Plat4399")(c=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var o=e.prototype;return o.start=function(){},o.update=function(t){},e}(r))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/PortalManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StateHandler.ts","./StateManager.ts","./PipelineNextSettings.ts"],(function(t){var e,r,a,n,i,o,l,s,u,p,c,d,h,m,y,g,w,f,x,P,S,M;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){i=t.cclegacy,o=t._decorator,l=t.Vec3,s=t.Mat4,u=t.Quat,p=t.Vec4,c=t.Camera,d=t.Node,h=t.RenderTexture,m=t.view,y=t.MeshRenderer,g=t.Component,w=t.lerp,f=t.clamp01},function(t){x=t.StateHandler},function(t){P=t.StateManager},function(t){S=t.PipelineNextSettings,M=t.TonemapType}],execute:function(){var T,b,v,_,R,C,z,k,I,W,A,D,H,F,O,N,U,V,B,L,j,E,Q,G,K;i._RF.push({},"53907QrpHpDBr27KpOSunkz","PortalManager",void 0);var q=o.ccclass,J=o.property,X=new l,Y=new s,Z=new s,$=new s,tt=new l,et=new u,rt=new l,at=new p,nt=new p;function it(t,e,r,a){var n=X.set(e).subtract(t),i=n.length(),o=r*a;return i>o?(o>0&&t.add(n.multiplyScalar(o/i)),0):(t.set(e),1)}t("PortalManager",(T=q("PortalManager"),b=J(c),v=J(c),_=J(d),R=J(d),C=J(d),z=J(c),k=J(d),I=J(d),W=J(d),A=J(d),D=J(d),T((O=e((F=function(t){function e(){for(var e,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i))||this,a(e,"uiCamera",O,n(e)),a(e,"outterCamera",N,n(e)),a(e,"outterPortal",U,n(e)),a(e,"outerShip",V,n(e)),a(e,"outerSpawn",B,n(e)),a(e,"playerCamera",L,n(e)),a(e,"playerCameraTrack",j,n(e)),a(e,"playerPortal",E,n(e)),a(e,"playerShip",Q,n(e)),a(e,"playerSlot",G,n(e)),a(e,"playerShipTrack",K,n(e)),e.screenMaterial=null,e.renderTexture=new h,e.mainTexture_ST=new p,e.mananger=new P,e}r(e,t);var i=e.prototype;return i.onLoad=function(){var t=m.getVisibleSizeInPixel(),e=t.width,r=t.height;this.renderTexture.reset({width:e,height:r}),this.screenMaterial=this.playerPortal.getComponent(y).material,this.screenMaterial.setProperty("mainTexture",this.renderTexture),this.uiCamera.targetTexture=this.renderTexture,this.outterCamera.targetTexture=this.renderTexture,this.mananger.setStateHandler(new ot({target:this})),this.mananger.setStateHandler(new lt({target:this})),this.mananger.setStateHandler(new st({target:this})),this.mananger.setStateHandler(new ut({target:this})),this.scheduleOnce(this._initScreen,.1)},i.onDestroy=function(){this.mananger.clear()},i.update=function(t){this.mananger.update(t)},i._initScreen=function(){var t=this.outterCamera,e=this.outterPortal,r=this.screenMaterial,a=t.camera.matViewProj;tt.set(0,.1835285,-.259),tt.transformMat4(e.worldMatrix),at.set(tt.x,tt.y,tt.z,1).transformMat4(a),at.multiplyScalar(.5/at.w).add4f(.5,.5,.5,.5),tt.set(0,-.1835285,.259),tt.transformMat4(e.worldMatrix),nt.set(tt.x,tt.y,tt.z,1).transformMat4(a),nt.multiplyScalar(.5/nt.w).add4f(.5,.5,.5,.5),this.mainTexture_ST.set(at.x-nt.x,at.y-nt.y,nt.x,nt.y),r.setProperty("mainTexture_ST",this.mainTexture_ST)},e}(g)).prototype,"uiCamera",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(F.prototype,"outterCamera",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(F.prototype,"outterPortal",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(F.prototype,"outerShip",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(F.prototype,"outerSpawn",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(F.prototype,"playerCamera",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(F.prototype,"playerCameraTrack",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(F.prototype,"playerPortal",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(F.prototype,"playerShip",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(F.prototype,"playerSlot",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(F.prototype,"playerShipTrack",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=F))||H));var ot=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).name="gameStart",e._shipTrackIndex=0,e._cameraTrackIndex=0,e._targetPosition=new l,e._targetRotation=new u,e._cameraSpeed=0,e}r(e,t);var a=e.prototype;return a.onEnter=function(){var t=this.target,e=t.outterPortal,r=t.outterCamera,a=t.playerPortal;$.set(e.worldMatrix).invert(),Y.set($).multiply(r.node.worldMatrix),Z.set(a.worldMatrix).multiply(Y),Z.getTranslation(this._targetPosition),Z.getRotation(this._targetRotation)},a.onUpdate=function(t){var e=this.target,r=e.outerSpawn,a=e.outerShip,n=(e.outterPortal,e.outterCamera,e.playerPortal),i=e.playerShip,o=e.playerCamera,l=e.playerCameraTrack,s=e.playerShipTrack,u=(e.screenMaterial,s.children);if(this._shipTrackIndex<u.length){var p=u[this._shipTrackIndex];it(i.position,p.position,1,t)&&this._shipTrackIndex++,i.position=i.position,i.rotation=i.rotation.lerp(p.rotation,2*t)}var c=l.children;if(this._cameraTrackIndex<c.length){this._cameraSpeed=w(this._cameraSpeed,1,5*t);var d=c[this._cameraTrackIndex];it(o.node.position,d.worldPosition,1,t)&&this._cameraTrackIndex++,o.node.position=o.node.position,o.node.rotation=o.node.rotation.lerp(d.worldRotation,2*t)}$.set(n.worldMatrix).invert(),Y.set($).multiply(i.worldMatrix),Z.set(r.worldMatrix).multiply(Y),a.worldPosition=Z.getTranslation(tt),a.worldRotation=Z.getRotation(et)},e}(x),lt=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).name="moveToScreen",e._portalWeight=0,e._targetPosition=new l,e._targetRotaiton=new u,e._targetPortalWeight=0,e}r(e,t);var a=e.prototype;return a.onEnter=function(){var t=this.target,e=t.screenMaterial,r=t.outterPortal,a=t.outterCamera,n=t.outerShip,i=t.playerPortal,o=t.playerShip;$.set(r.worldMatrix).invert(),Y.set($).multiply(a.node.worldMatrix),Z.set(i.worldMatrix).multiply(Y),this._targetPosition.set(Z.getTranslation(tt)),this._targetRotaiton.set(Z.getRotation(et)),rt.set(r.worldPosition).add3f(0,0,.2).subtract(a.node.worldPosition),e.setProperty("specularIntensity",f(rt.dot(l.FORWARD))),Y.set($).multiply(n.worldMatrix),Z.set(o.worldMatrix).multiply(Y)},a.onUpdate=function(t){var e=this.target,r=e.screenMaterial,a=e.playerCamera,n=e.outterCamera;this._portalWeight=w(this._portalWeight,this._targetPortalWeight,10*t),r.setProperty("portalWeight",this._portalWeight),a.fov=w(a.fov,n.fov,10*t),a.node.position=a.node.position.lerp(this._targetPosition,10*t),a.node.rotation=a.node.rotation.slerp(this._targetRotaiton,10*t)},e}(x),st=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).name="outsideScreen",e}return r(e,t),e.prototype.onUpdate=function(t){var e=this.target,r=e.playerPortal,a=e.playerCamera,n=e.playerShip,i=e.outterCamera,o=e.outterPortal,s=e.outerShip,u=e.screenMaterial;$.set(r.worldMatrix).invert(),Y.set($).multiply(a.node.worldMatrix),Z.set(o.worldMatrix).multiply(Y),i.node.setWorldPosition(Z.getTranslation(tt)),i.node.setWorldRotation(Z.getRotation(et)),Y.set($).multiply(n.worldMatrix),Z.set(o.worldMatrix).multiply(Y),s.setWorldPosition(Z.getTranslation(tt)),s.setWorldRotation(Z.getRotation(et)),rt.set(o.worldPosition).add3f(0,0,.2).subtract(i.node.worldPosition);var p=rt.dot(l.FORWARD);p<0?(i.enabled=!1,S.Instance.tonemap.type=M.RGB,a.node.worldPosition=i.node.worldPosition,a.node.worldRotation=i.node.worldRotation,this.target.mananger.state="insideScreen"):u.setProperty("specularIntensity",f(p))},e}(x),ut=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).name="insideScreen",e}return r(e,t),e.prototype.onUpdate=function(t){var e=this.target,r=e.outterPortal,a=e.outterCamera,n=e.playerCamera,i=e.playerPortal;rt.set(r.worldPosition).add3f(0,0,.2).subtract(n.node.worldPosition),rt.dot(l.FORWARD)>0&&(a.enabled=!0,S.Instance.tonemap.type=M.STANDARD,$.set(r.worldMatrix).invert(),Y.set($).multiply(n.node.worldMatrix),Z.set(i.worldMatrix).multiply(Y),n.node.worldPosition=Z.getTranslation(tt),n.node.worldRotation=Z.getRotation(et),this.target.mananger.state="outsideScreen")},e}(x);i._RF.pop()}}}));

System.register("chunks:///_virtual/preload.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventConfig.ts","./EventManager.ts"],(function(n){var e,t,o,r,i,a,s;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,o=n._decorator,r=n.log,i=n.Component},function(n){a=n.default},function(n){s=n.EventManager}],execute:function(){var c;t._RF.push({},"109992lEcpGN56GHHLCjELH","preload",void 0);var l=o.ccclass;o.property,n("preload",l("preload")(c=function(n){function t(){return n.apply(this,arguments)||this}e(t,n);var o=t.prototype;return o.start=function(){s.Instance.on(a.PreloadFinished,this[a.PreloadFinished],this)},o.onPreloadFinished=function(){r("onPreloadFinished")},t}(i))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/PreloadManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Properties.ts","./Settings.ts","./MeshUtils.ts","./EventConfig.ts","./EventManager.ts"],(function(e){var t,r,n,i,a,s,o,l,u,c,p,h,g,f,d,m,_,M,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,s=e._decorator,o=e.Camera,l=e.Node,u=e.Label,c=e.Mesh,p=e.game,h=e.assetManager,g=e.tween,f=e.Component},function(e){d=e.properties},function(e){m=e.settings},function(e){_=e.initParticleMesh},function(e){M=e.default},function(e){b=e.EventManager}],execute:function(){var y,P,v,w,x,z,C,E,I,L,R,S,D;a._RF.push({},"6af0dJe2k1E6LsxWOMfsIyh","PreloadManager",void 0);var F=s.ccclass,k=s.property;e("PreloadManager",(y=F("PreloadManager"),P=k(o),v=k(l),w=k(u),x=k(c),z=k(u),y((I=t((E=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,n(t,"uiCamera",I,i(t)),n(t,"screen",L,i(t)),n(t,"text",R,i(t)),n(t,"shipMesh",S,i(t)),n(t,"version",D,i(t)),t._progress=0,t._gameProgress=0,t._homeProgress=0,t._loaded=0,t._completed=!1,t._screenMaterial=null,t}r(t,e);var a=t.prototype;return a.start=function(){var e=this;p.frameRate=60.1,this.version.string=m.VERSION,d.shipParticleMesh=_(this.shipMesh),h.loadBundle("main",{},(function(t,r){r.loadScene("game",{},(function(t,r){return e._gameProgress=t/r}),(function(){return e._loaded++}))}))},a.update=function(e){this._completed||(this._progress=Math.max(this._progress,(this._homeProgress+this._gameProgress)/2),this.text.string=Math.floor(95*this._progress)+"%",this._loaded>=1&&(this._completed=!0,this.text.string="100%",g(this).delay(.2).call((function(){b.Instance.emit(M.PreloadFinished)})).start()))},t}(f)).prototype,"uiCamera",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(E.prototype,"screen",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(E.prototype,"text",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(E.prototype,"shipMesh",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(E.prototype,"version",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=E))||C));a._RF.pop()}}}));

System.register("chunks:///_virtual/Properties.ts",["cc","./Hand.ts","./Ship.ts","./User.ts"],(function(e){var t,n,s,i;return{setters:[function(e){t=e.cclegacy},function(e){n=e.Hand},function(e){s=e.Ship},function(e){i=e.User}],execute:function(){t._RF.push({},"9e5e9IF5ndL9oL8C9ZRamGX","Properties",void 0);e("properties",new function(){this.ship=new s,this.hand=new n,this.user=new i,this.shipParticleMesh=null});t._RF.pop()}}}));

System.register("chunks:///_virtual/PropsManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Math.ts","./Properties.ts","./Enum.ts"],(function(t){var e,o,i,r,n,a,s,l,p,c,u,f,_,v,h,d,y,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized,n=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy,s=t._decorator,l=t.Node,p=t.Vec2,c=t.Vec3,u=t.instantiate,f=t.director,_=t.Component},function(t){v=t.randomFloats,h=t.evalute,d=t.randomFloat},function(t){y=t.properties},function(t){m=t.EventType}],execute:function(){var b,N,g,x,P,F;a._RF.push({},"b3b13wxTkxD9JVZer6LmN0f","PropsManager",void 0);var I=s.ccclass,M=s.property,w=Math.cos;t("PropsManager",(b=I("PropsManager"),N=M(l),b(((F=function(t){function e(){for(var e,o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,i(e,"battery",P,r(e)),e._batterys=new l,e._group=[],e._groupInterval=37,e._cellInterval=2,e._cellNumber=8,e._rotation=new c,e._offset=function(){for(var t,o=n(e._group);!(t=o()).done;)for(var i,r=t.value,a=n(r);!(i=a()).done;){var s=i.value;s.mainNode.setPosition(s.mainNode.position.x-100,s.mainNode.position.y,s.mainNode.position.z)}},e}o(e,t);var a=e.prototype;return a.onLoad=function(){var t=e.__position,o=this.battery.parent;this._batterys.parent=o;for(var i=0;i<2;i++){for(var r=v([[-4,-3.5],[-1.5,-1],[1,1.5]]),n=d(4,8),a=[],s=this._cellNumber-1;s>=0;s--){var l=u(this.battery),p=h(30+i*this._groupInterval+this._cellInterval*s,t);l.parent=this._batterys,l.setPosition(p.x,r,p.y+(w(p.x/n)-.5)/2),a.push({mainNode:l,inNode:l.getChildByPath("box/in"),boxNode:l.getChildByPath("box")})}a.reverse(),this._group.push(a)}f.on(m.OFFSET,this._offset)},a.onDestroy=function(){f.off(m.OFFSET,this._offset)},a.update=function(t){t=Math.min(.033,t);var o=e.__position,i=e.__vec3,r=y.ship;this._rotation.y+=200*t;for(var a,s=n(this._group);!(a=s()).done;){var l=a.value;if(l[this._cellNumber-1].mainNode.position.x<r.position.x-1)for(var p=v([[-4,-3.5],[-1.5,-1],[1,1.5]]),u=l[0].mainNode.position.x+r.offset,_=d(4,8),b=0;b<this._cellNumber;b++){var N=h(u+2*this._groupInterval+b*this._cellInterval,o),g=l[b].mainNode;g.active=!0,g.setPosition(N.x-r.offset,p,N.y+(w(N.x/_)/2-.5))}for(var x=0;x<this._cellNumber;x++){var P=l[x].mainNode,F=l[x].inNode,I=l[x].boxNode;F.setRotationFromEuler(this._rotation),I.setPosition(i.set(0,.02*w(.02*this._rotation.y+x),0)),P.active&&c.distance(P.position,r.position)<.5&&(P.active=!1,f.emit(m.GET,r.position))}}},e}(_)).__position=new p,F.__vec3=new c,P=e((x=F).prototype,"battery",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=x))||g));a._RF.pop()}}}));

System.register("chunks:///_virtual/ReflectionProbeExtension.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,r,n,c,i,p,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,r=e.createClass},function(e){n=e.cclegacy,c=e._decorator,i=e.ReflectionProbe,p=e.TextureCube,s=e.Component}],execute:function(){var u,a,l,b,f;n._RF.push({},"46fa5tAhaRJlLHScyreZ6Jx","ReflectionProbeExtension",void 0);var h=c.ccclass,y=c.property,m=c.requireComponent;e("ReflectionProbeExtension",(u=h("ReflectionProbeExtension"),a=m(i),l=y(p),u(b=a((t((f=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return(t=e.call.apply(e,[this].concat(r))||this)._probe=null,t}return o(t,e),r(t,[{key:"probe",get:function(){return null===this._probe&&(this._probe=this.node.getComponent(i)),this._probe}},{key:"cubemap",get:function(){return this.probe.cubemap},set:function(e){this.probe.cubemap=e}}]),t}(s)).prototype,"cubemap",[l],Object.getOwnPropertyDescriptor(f.prototype,"cubemap"),f.prototype),b=f))||b)||b));n._RF.pop()}}}));

System.register("chunks:///_virtual/Resources.ts",["cc"],(function(e){var n,o,r,c;return{setters:[function(e){n=e.cclegacy,o=e.resources,r=e.error,c=e.director}],execute:function(){n._RF.push({},"8dcd76GREdIA4mOs8oTXzzy","Resources",void 0);e("Resources",function(){function e(){}return e.Load=function(e,n,c,u){return new Promise((function(s,t){o.load(e,n,(function(e,n){e?(r("Resources.Load error: "+e),!c||c.isValid?s(null):u&&u()):!c||c.isValid?s(n):u&&u()}))}))},e.LoadScene=function(e,n){return new Promise((function(o,u){c.preloadScene(e,n,(function(n,u){n?(r("Resources.Load error: "+n),o(null)):c.loadScene(e,(function(e,n){o(n)}))}))}))},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/SceneManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Math.ts","./Properties.ts","./Car.ts","./Enum.ts"],(function(i){var o,t,e,n,r,s,a,l,d,u,p,f,h,g,b,c,x,_,y,v,m,B,C,w,P;return{setters:[function(i){o=i.applyDecoratedDescriptor,t=i.inheritsLoose,e=i.initializerDefineProperty,n=i.assertThisInitialized,r=i.createForOfIteratorHelperLoose},function(i){s=i.cclegacy,a=i._decorator,l=i.Node,d=i.Vec3,u=i.Vec2,p=i.geometry,f=i.instantiate,h=i.director,g=i.MeshRenderer,b=i.clamp,c=i.Component},function(i){x=i.evalute,_=i.randomFloat,y=i.randomInt,v=i.randomFloats,m=i.randomBoolean},function(i){B=i.properties},function(i){C=i.Car},function(i){w=i.EventType,P=i.HitType}],execute:function(){var R,F,M,z,I,E,N,A,D,S,T,H,L,k,O,j;s._RF.push({},"12ba9g+myZB/5u/9o4+jogs","SceneManager",void 0);var G=a.ccclass,V=a.property;i("SceneManager",(R=G("SceneManager"),F=V(l),M=V(l),z=V(l),I=V(l),E=V(l),N=V(l),R(((j=function(i){function o(){for(var o,t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return o=i.call.apply(i,[this].concat(s))||this,e(o,"building",S,n(o)),e(o,"buildingBox",T,n(o)),e(o,"bridge",H,n(o)),e(o,"bridgeBox",L,n(o)),e(o,"bottom",k,n(o)),e(o,"enemyCars",O,n(o)),o._cars=new l,o._buildings=new l,o._bottoms=new l,o._bridges=new l,o._index=0,o._preBuildingBoxNodeIndex=[-1,-1],o._preBridgeBoxIndex=-1,o._ray=new p.Ray,o._buildingBoxModel=null,o._bridgeBoxModel=null,o._buildingCount=10,o._bottomCount=5,o._bridgeCount=5,o._offset=function(){for(var i,t=r(o._buildings.children);!(i=t()).done;){var e=i.value;e.setPosition(e.position.x-100,e.position.y,e.position.z)}o.buildingBox.setPosition(o.buildingBox.position.x-100,o.buildingBox.position.y,o.buildingBox.position.z);for(var n,s=r(o._bridges.children);!(n=s()).done;){var a=n.value;a.setPosition(a.position.x-100,a.position.y,a.position.z)}o.bridgeBox.setPosition(o.bridgeBox.position.x-100,o.bridgeBox.position.y,o.bridgeBox.position.z);for(var l,d=r(o._bottoms.children);!(l=d()).done;){var u=l.value;u.setPosition(u.position.x-100,u.position.y,u.position.z)}for(var p,f=r(o._cars.children);!(p=f()).done;){var h=p.value;h.setPosition(h.position.x-100,h.position.y,h.position.z)}},o}t(o,i);var s=o.prototype;return s.onLoad=function(){var i=o.__position,t=this.building,e=t.parent;this._cars.parent=e,this._buildings.parent=e,this._bottoms.parent=e,this._bridges.parent=e;for(var n=0;n<this._buildingCount;n++){var r=x(5*n,i),s=y(0,3),a=1===s?0:3===s?2:y(0,3),l=f(t);l.parent=this._buildings,l.setPosition(r.x,_(-5,0),r.y-4),l.setRotationFromEuler(0,90*s,0),this.setArrowRotation(l,!1);var d=f(t);d.parent=this._buildings,d.setPosition(r.x,_(-5,0),r.y+4),d.setRotationFromEuler(0,90*a,0),this.setArrowRotation(d,!0)}for(var u=0;u<this._bottomCount;u++){var p=x(10*u,i),g=y(0,1),b=f(this.bottom);b.parent=this._bottoms,b.setPosition(p.x,-4+_(-3,0),p.y);var c=_(.6,1.2);b.setScale(c,c,c),b.setRotationFromEuler(0,180*g,0)}for(var v=0;v<this._bridgeCount;v++){var m=x(10*(v+2),i),B=f(this.bridge);B.parent=this._bridges,B.setPosition(m.x,2.5*y(-1,1),m.y)}for(var P=0;P<20;P++){var R=P>=15?1:0,F=this.enemyCars[R],M=x(_(0,100),i),z=new C;this.refreshData(z),z.range=0===R?.2:.5;var I=f(F);I.data=z,I.parent=this._cars,I.position.set(M.x,z.offset.x,z.offset.y+M.y)}t.active=!1,this.enemyCars.forEach((function(i){return i.active=!1})),h.on(w.OFFSET,this._offset)},s.onDestroy=function(){h.off(w.OFFSET,this._offset)},s.start=function(){this._buildingBoxModel=this.buildingBox.children[0].getComponent(g).model,this._bridgeBoxModel=this.bridgeBox.children[0].getComponent(g).model},s.refreshData=function(i){i.offset.set(v([[-4,-3.5],[-1.5,-1],[1,1.5]]),_(-1,1)),i.speed=_(1,5),i.reverse=m()},s.setArrowRotation=function(i,o){o?(i.getChildByName("arrow").setRotationFromEuler(0,0,180),i.getChildByName("arrow-001").setRotationFromEuler(-145.818,92.176,1.069)):(i.getChildByName("arrow").setRotationFromEuler(0,0,0),i.getChildByName("arrow-001").setRotationFromEuler(-34.175,-87.098,0))},s.update=function(i){i=Math.min(.033,i);var t=o.__position,e=o.__vec3,n=B.ship,s=n.far>0?Math.floor(n.far/5):0;if(s!==this._index){for(var a=this._buildings.children,l=s-this._index,u=this._index;u<this._index+l;u++){var f=x(5*(u+this._buildingCount),t),g=y(0,3),c=1===g?0:3===g?2:y(0,3),v=u%this._buildingCount,m=a[2*v];m.setPosition(f.x-n.offset,_(-5,0),f.y-4),m.setRotationFromEuler(0,90*g,0),this.setArrowRotation(m,!1);var C=a[2*v+1];C.setPosition(f.x-n.offset,_(-5,0),f.y+4),C.setRotationFromEuler(0,90*c,0),this.setArrowRotation(C,!0)}this._index=s}var R=n.far%5>2?s+1:s,F=x(n.far,t),M=[R,n.position.z>F.y?0:1];if(M[0]!==this._preBuildingBoxNodeIndex[0]||M[1]!==this._preBuildingBoxNodeIndex[1]){var z=this._buildings.children[1===M[1]?R%this._buildingCount*2:R%this._buildingCount*2+1];this.buildingBox.setPosition(z.position),this.buildingBox.setRotation(z.rotation),this._preBuildingBoxNodeIndex=M}else{p.Ray.fromPoints(this._ray,n.position,e.set(this.buildingBox.position.x,b(n.position.y,this.buildingBox.position.y-4,this.buildingBox.position.y+6),this.buildingBox.position.z)),p.intersect.rayModel(this._ray,this._buildingBoxModel)||h.emit(w.HIT,P.BUILDING)}for(var I,E=r(this._bottoms.children);!(I=E()).done;){var N=I.value;if(N.position.x<n.position.x-5){var A=x(N.position.x+10*this._bottomCount+n.offset,t);N.setPosition(A.x-n.offset,-4+_(-3,0),A.y)}}for(var D,S=r(this._bridges.children);!(D=S()).done;){var T=D.value;if(T.position.x<n.position.x-5){var H=x(T.position.x+10*this._bridgeCount+n.offset,t);T.setPosition(H.x-n.offset,2.5*y(-1,1),H.y)}}if((s=Math.floor((n.far-20)/10)%this._bridgeCount)>=0)if(s!==this._preBridgeBoxIndex){var L=this._bridges.children[s];this.bridgeBox.setPosition(L.position),this._preBridgeBoxIndex=s}else{p.Ray.fromPoints(this._ray,n.position,e.set(this.bridgeBox.children[0].getWorldPosition())),p.intersect.rayModel(this._ray,this._bridgeBoxModel)||h.emit(w.HIT,P.BRIDGE)}for(var k=0,O=this._cars.children;k<O.length;k++){var j=O[k],G=j.data,V=G.reverse?j.position.x-G.speed*i:j.position.x+G.speed*i,U=x(V+n.offset,t);if(V<n.position.x-5||V>n.position.x+100){var W=_(n.position.x+50,n.position.x+100),Z=x(W+n.offset,t);this.refreshData(G),e.set(W,G.offset.x,G.offset.y+Z.y),j.lookAt(e),j.setPosition(e)}else e.set(V,G.offset.x,G.offset.y+U.y),j.lookAt(e),j.setPosition(e);d.distance(j.position,B.ship.position)<G.range&&h.emit(w.HIT,P.CAR,new d(B.ship.position).subtract(j.position))}},o}(c)).__euler=new d,j.__position=new u,j.__vec3=new d,S=o((D=j).prototype,"building",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=o(D.prototype,"buildingBox",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=o(D.prototype,"bridge",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=o(D.prototype,"bridgeBox",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=o(D.prototype,"bottom",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=o(D.prototype,"enemyCars",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=D))||A));s._RF.pop()}}}));

System.register("chunks:///_virtual/Settings.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"6f4e3x5crRPHoSSiUy/QR9V","Settings",void 0);e("settings",new(function(){function e(){this.resVersion="1.0.1",this.codeVersion="1.0.1"}return t(e,[{key:"VERSION",get:function(){return"Resource V"+this.resVersion+"\nCode V"+this.codeVersion}}]),e}()));n._RF.pop()}}}));

System.register("chunks:///_virtual/Ship.ts",["cc"],(function(t){var e,i,s;return{setters:[function(t){e=t.cclegacy,i=t.Vec3,s=t.Quat}],execute:function(){e._RF.push({},"3dee82LRGpHrZtd33SvfPKL","Ship",void 0);t("Ship",(function(){this.far=0,this.offset=0,this.speed=new i,this.speedRatio=new i,this.position=new i,this.rotation=new s}));e._RF.pop()}}}));

System.register("chunks:///_virtual/ShipController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Properties.ts","./Enum.ts","./Math.ts","./PipelineNextSettings.ts","./TweenUitls.ts","./AudioSystem.ts","./MeshUtils.ts"],(function(t){var i,e,s,n,o,r,a,h,c,l,p,_,u,f,y,d,w,T,m,g,v,b,x,D,I,M,E,P,S,z;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,s=t.initializerDefineProperty,n=t.assertThisInitialized,o=t.createClass},function(t){r=t.cclegacy,a=t._decorator,h=t.Material,c=t.ParticleSystem,l=t.Vec2,p=t.Vec3,_=t.input,u=t.Input,f=t.director,y=t.tween,d=t.sys,w=t.clamp,T=t.lerp,m=t.Quat,g=t.easing,v=t.Component,b=t.MeshRenderer},function(t){x=t.properties},function(t){D=t.EventType,I=t.HitType},function(t){M=t.evalute},function(t){E=t.PipelineNextSettings},function(t){P=t.killTweenOf},function(t){S=t.audioSystem},function(t){z=t.initParticleMesh}],execute:function(){var O,U,k,C,G,K,L,H,R,N,A,B,q,F;r._RF.push({},"c883a5gLRZKwIqJTUcMDvB8","ShipController",void 0);var Y=a.ccclass,V=a.property,W=function(){function t(t){this.material=void 0,this.sync=0,this.noise=1;var i=t.getComponentInChildren(b);i.mesh=x.shipParticleMesh||z(i.mesh),this.material=i.sharedMaterial,this.progress=0,this.sweepLight(0)}return t.prototype.sweepLight=function(t){this.material.setProperty("sweepThreshold",2*t%1),this.material.setProperty("sweepIntensity",t)},o(t,[{key:"progress",get:function(){return this.material.getProperty("progress",0)},set:function(t){this.material.setProperty("progress",t,0)}}]),t}();t("ShipController",(O=Y("ShipController"),U=V(h),k=V(h),C=V(h),G=V(c),K=V(c),O(((F=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return(i=t.call.apply(t,[this].concat(o))||this)._yaw=0,i._roll=0,i._pitch=0,i._targetSpeed=new p,i._protectOffset=new l,i._invincible=!1,i._invincibleTime=.5,i._speed=new p,i._direction=new l,i._intensity=1,i._shipTween=null,i._hitTween={},i._preloc=new l,s(i,"lenflareMaterial",R,n(i)),s(i,"shiptrailMaterial01",N,n(i)),s(i,"shiptrailMaterial02",A,n(i)),s(i,"trailParticle01",B,n(i)),s(i,"trailParticle02",q,n(i)),i._touchID=-1,i._touchDiff=new l,i._isEnd=!1,i}e(i,t);var o=i.prototype;return o.onEnable=function(){_.on(u.EventType.KEY_DOWN,this._onKeyDown,this),_.on(u.EventType.KEY_UP,this._onKeyUp,this),_.on(u.EventType.TOUCH_START,this._onTouchStart,this),_.on(u.EventType.TOUCH_END,this._onTouchEnd,this),_.on(u.EventType.TOUCH_MOVE,this._onTouchMove,this),f.on(D.HIT,this._onHit,this),f.on(D.GET,this._onGet,this)},o.onDisable=function(){_.off(u.EventType.KEY_DOWN,this._onKeyDown,this),_.off(u.EventType.KEY_UP,this._onKeyUp,this),f.off(D.HIT,this._onHit,this),f.off(D.GET,this._onGet,this),S.stop()},o.setTrailIntensity=function(t){this.lenflareMaterial.setProperty("intensity",t),this.shiptrailMaterial01.setProperty("intensity",t),this.shiptrailMaterial02.setProperty("intensity",t)},o.onLoad=function(){var t=this;this._shipTween=new W(this.node),y(this).to(2,{},{onUpdate:function(i,e){t.setTrailIntensity(e)}}).start()},o.onDestroy=function(){P(this),P(this._hitTween),P(this._shipTween)},o._onKeyDown=function(t){switch(t.keyCode){case 65:case 37:this._direction.x=-1;break;case 87:case 38:this._direction.y=1;break;case 40:case 83:this._direction.y=-1;break;case 68:case 39:this._direction.x=1}this._direction.x*x.ship.speed.z<0&&S.play("audios/roll"),this._intensity=this._direction.lengthSqr()>.01?1:0},o._onKeyUp=function(t){switch(t.keyCode){case 65:case 37:this._direction.x<0&&(this._direction.x=0);break;case 87:case 38:this._direction.y>0&&(this._direction.y=0);break;case 40:case 83:this._direction.y<0&&(this._direction.y=0);break;case 68:case 39:this._direction.x>0&&(this._direction.x=0)}this._intensity=this._direction.lengthSqr()>.01?1:0},o._onTouchStart=function(t){d.isMobile&&-1===this._touchID&&(this._touchID=t.touch.getID(),this._touchDiff.set(0,0),t.touch.getUILocation(this._preloc))},o._onTouchMove=function(t){if(d.isMobile&&this._touchID===t.touch.getID()){var e=i.__loc,s=i.__diff;t.touch.getUILocation(e),s.set(e).subtract(this._preloc),s.x*this._touchDiff.x<0&&(this._touchDiff.x*=.9),s.y*this._touchDiff.y<0&&(this._touchDiff.y*=.9),this._touchDiff.add(s),this._preloc.set(e);var n=this._touchDiff.length();this._intensity=Math.min(1,n/30),this._direction.set(this._touchDiff).normalize().multiplyScalar(this._intensity),this._direction.x*x.ship.speed.z<0&&S.play("audios/roll")}},o._onTouchEnd=function(t){d.isMobile&&this._touchID===t.touch.getID()&&(this._touchID=-1,this._direction.set(0,0),this._intensity=0)},o.update=function(t){var e=i.__offset,s=i.__vec2_0,n=i.__vec2_1,o=i.__position,r=this._speed,a=x.ship;t=Math.min(.033,t),r.x=w(r.x+t/35,0,20),r.x<4&&(r.x+=t),x.user.life=Math.max(0,x.user.life-r.x*t/2),0===x.user.life?this._endGame():x.user.score+=r.x*t*10;var h=a.speedRatio.x;r.y=10*this._direction.y*h,r.z=10*this._direction.x*h,this._targetSpeed.lerp(r,5*t),d.isMobile?(a.speed.x=T(a.speed.x,this._targetSpeed.x,5*t),a.speed.y=T(a.speed.y,r.y,3*t),a.speed.z=T(a.speed.z,r.z,3*t)):a.speed.lerp(this._targetSpeed,this._intensity?5*t:6*t),a.speedRatio.set(a.speed).multiplyScalar(.05),e.set(a.speed).multiplyScalar(t),a.far+=e.x,a.position.add(e),a.position.x>100&&(a.offset+=100,a.position.x-=100,f.emit(D.OFFSET),this.trailParticle01.stop(),this.trailParticle01.play(),this.trailParticle02.stop(),this.trailParticle02.play());var c=-50*this._direction.x*h,l=45*this._direction.x,p=50*this._direction.y*h;this._yaw=T(this._yaw,c,4*t),this._roll=T(this._roll,l,4*t),this._pitch=T(this._pitch,p,4*t),m.fromEuler(a.rotation,this._roll,this._yaw,this._pitch),s.set(this._protectOffset),this._protectOffset.lerp(n.set(0,0),10*t);var _=s.subtract(this._protectOffset);a.position.add3f(0,_.x,_.y);var u=M(a.far,o);a.position.z=w(a.position.z,u.y-3,u.y+3),a.position.y=w(a.position.y,-4,1.5),this.node.rotation=a.rotation,this.node.position=a.position,E.Instance.tonemap.damage=T(E.Instance.tonemap.damage,0,2*t)},o._onHit=function(t,e){var s=this,n=i.__position,o=i.__offset,r=x.ship;if(!this._invincible){var a=0;switch(t){case I.BUILDING:S.play("audios/hitdamage"),this._protectOffset.y=.8*(M(r.far,n).y-r.position.z),a=20;break;case I.CAR:S.play("audios/hitdamage"),e&&(o.set(0,e.y,e.z).normalize(),o.multiplyScalar(.5),this._protectOffset.set(o.y,o.z)),a=20;break;case I.LASER:S.play("audios/beamdamage"),a=10;break;case I.BRIDGE:S.play("audios/hitdamage"),this._protectOffset.x=1,a=20}E.Instance.tonemap.damage=1,this._invincible=!0,P(this._hitTween),y(this._hitTween).delay(this._invincibleTime).call((function(){s._invincible=!1})).start(),y(this._hitTween).call((function(){s.setTrailIntensity(0)})).to(1,{},{onUpdate:function(t,i){s.setTrailIntensity(i)}}).start(),x.user.life-a<0?(x.user.life=0,this._endGame()):x.user.life-=a}},o._onGet=function(){var t=this;S.play("audios/pickup"),x.user.life=w(x.user.life+4,0,100),P(this._shipTween),y(this._shipTween).to(1.6,{},{onUpdate:function(i,e){t._shipTween.sweepLight(1-e)}}).start()},o._endGame=function(){this._isEnd||(this._isEnd=!0,this.enabled=!1,P(this._hitTween),this.setTrailIntensity(0),P(this._shipTween),y(this._shipTween).set({progress:0}).to(3,{progress:2},{easing:g.quadInOut}).start(),this.scheduleOnce((function(){S.stopBGM(!0)}),2),f.emit(D.GAMEEND))},i}(v)).__loc=new l,F.__diff=new l,F.__dir2=new l,F.__offset=new p,F.__position=new l,F.__vec2_0=new l,F.__vec2_1=new l,R=i((H=F).prototype,"lenflareMaterial",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=i(H.prototype,"shiptrailMaterial01",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(H.prototype,"shiptrailMaterial02",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=i(H.prototype,"trailParticle01",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=i(H.prototype,"trailParticle02",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=H))||L));r._RF.pop()}}}));

System.register("chunks:///_virtual/Spherical.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,r,e,a,s;return{setters:[function(t){i=t.applyDecoratedDescriptor,r=t.initializerDefineProperty},function(t){e=t.cclegacy,a=t._decorator,s=t.clamp}],execute:function(){var n,o,h,u,c;e._RF.push({},"268bbqfUdpBD65sv+MYd9zj","Spherical",void 0);var p=a.ccclass,l=a.property;t("Spherical",p("Spherical")((h=i((o=function(){function t(t,i,e){void 0===t&&(t=1),void 0===i&&(i=0),r(this,"radius",h,this),r(this,"phi",u,this),r(this,"theta",c,this),this.radius=t,this.phi=i,this.theta}var i=t.prototype;return i.setFromVector3=function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},i.setFromCartesianCoords=function(t,i,r){return this.radius=Math.sqrt(t*t+i*i+r*r),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,r),this.phi=Math.acos(s(i/this.radius,-1,1))),this},t}()).prototype,"radius",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),u=i(o.prototype,"phi",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),c=i(o.prototype,"theta",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),n=o))||n);e._RF.pop()}}}));

System.register("chunks:///_virtual/StateHandler.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"59831e3N59JwL+LqEspRTqk","StateHandler",void 0);var n=0;t("StateHandler",(function(t){this.id=""+n++,this.name="none",this.active=!0,this.target=null,Object.assign(this,t)}));e._RF.pop()}}}));

System.register("chunks:///_virtual/StateManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StateHandler.ts"],(function(t){var e,a,n;return{setters:[function(t){e=t.createClass},function(t){a=t.cclegacy},function(t){n=t.StateHandler}],execute:function(){a._RF.push({},"da748X1dYFF17KkdffSgrJk","StateManager",void 0);t("StateManager",function(){function t(){this._state=null,this._handlersMap=new Map}var a=t.prototype;return a._exitState=function(){this._state&&(this._handlersMap.get(this._state).forEach((function(t){t.active&&t.onExit&&t.onExit()})),this._state=null)},a.clear=function(){this._exitState(),this._handlersMap.clear()},a.setStateHandler=function(t){var e=t instanceof n?t:new n(t),a=e.name||e.constructor.name,s=this._handlersMap.get(a);void 0===s&&(s=[],this._handlersMap.set(a,s)),s.push(e)},a.update=function(t){this._state&&this._handlersMap.get(this._state).forEach((function(e){e.active&&e.onUpdate&&e.onUpdate(t)}))},e(t,[{key:"state",get:function(){return this._state},set:function(t){var e=this;if(this._state!==t){var a=this._handlersMap.get(t);a?(this._exitState(),a.forEach((function(a){a.active&&(a.onEnter&&a.onEnter(),e._state=t)}))):console.warn("state: "+t+" not exist !!")}}}]),t}());a._RF.pop()}}}));

System.register("chunks:///_virtual/TextMeshPro.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TmpAssembler.ts","./TmpFontConfig.ts","./TmpUtils.ts"],(function(t){var e,r,o,i,n,a,l,s,p,u,c,h,f,y,_,g,b,m,d,w,O,D,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.createClass,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,l=t._decorator,s=t.gfx,p=t.Color,u=t.Vec2,c=t.JsonAsset,h=t.HorizontalTextAlignment,f=t.VerticalTextAlignment,y=t.Enum,_=t.Texture2D,g=t.color,b=t.RenderData,m=t.StencilManager,d=t.renderer,w=t.error,O=t.UIRenderer},function(t){D=t.default},function(t){T=t.default},null],execute:function(){var U,k,S,P,M,I,x,C,R,z,E,v,F,G,L,j,A,H,B,X,V,N,W,Y,K,q,Z,J,Q,$,tt,et,rt,ot,it,nt,at,lt,st,pt,ut,ct,ht,ft,yt,_t,gt,bt,mt,dt,wt,Ot,Dt,Tt,Ut,kt,St,Pt,Mt,It,xt,Ct,Rt,zt,Et,vt,Ft,Gt,Lt,jt,At,Ht,Bt,Xt,Vt,Nt,Wt,Yt,Kt,qt,Zt,Jt,Qt,$t,te,ee,re,oe,ie,ne,ae,le,se,pe,ue;a._RF.push({},"110b2HQ0H1MFY83nfU7nvjk","TextMeshPro",void 0);var ce=l.ccclass,he=l.property,fe=l.executeInEditMode,ye=[new s.Attribute(s.AttributeName.ATTR_POSITION,s.Format.RGB32F),new s.Attribute(s.AttributeName.ATTR_TEX_COORD,s.Format.RG32F),new s.Attribute(s.AttributeName.ATTR_COLOR,s.Format.RGBA32F),new s.Attribute(s.AttributeName.ATTR_COLOR2,s.Format.RGBA32F),new s.Attribute("a_texture_idx",s.Format.R32F)],_e=t("TmpOverflow",function(t){return t[t.NONE=0]="NONE",t[t.CLAMP=1]="CLAMP",t[t.ELLIPSIS=2]="ELLIPSIS",t[t.SHRINK=3]="SHRINK",t[t.RESIZE_HEIGHT=4]="RESIZE_HEIGHT",t}({})),ge=t("TmpUniform",(U=ce("TmpUniform"),k=he(p),S=he({tooltip:"文本主体颜色",type:p}),P=he({tooltip:"文本主体厚度",range:[0,1,.01]}),M=he({tooltip:"文本主体柔和度",range:[0,1,.01]}),I=he({tooltip:"是否启用描边效果"}),x=he(p),C=he({tooltip:"描边颜色",type:p,visible:function(){return this._enableOutline}}),R=he({tooltip:"描边厚度",range:[0,1,.01],visible:function(){return this._enableOutline}}),z=he({tooltip:"是否启用阴影效果"}),E=he(p),v=he({tooltip:"阴影颜色",type:p,visible:function(){return this._enableUnderlay}}),F=he(u),G=he({tooltip:"阴影偏移",type:u,range:[-1,1],visible:function(){return this._enableUnderlay}}),L=he({tooltip:"阴影厚度",range:[0,1,.01],visible:function(){return this._enableUnderlay}}),j=he({tooltip:"阴影柔和度",range:[0,1,.01],visible:function(){return this._enableUnderlay}}),A=he({tooltip:"是否启用辉光效果"}),H=he(p),B=he({tooltip:"辉光颜色",type:p,visible:function(){return this._enableGlow}}),X=he({tooltip:"辉光偏移",range:[0,1,.01],visible:function(){return this._enableGlow}}),V=he({tooltip:"辉光向内的厚度",range:[0,1,.01],visible:function(){return this._enableGlow}}),N=he({tooltip:"辉光向外的厚度",range:[0,1,.01],visible:function(){return this._enableGlow}}),W=he({tooltip:"辉光强度",range:[0,1,.01],visible:function(){return this._enableGlow}}),U((q=e((K=function(){function t(){i(this,"_faceColor",q,this),i(this,"_faceDilate",Z,this),i(this,"_faceSoftness",J,this),i(this,"_enableOutline",Q,this),i(this,"_outlineColor",$,this),i(this,"_outlineThickness",tt,this),i(this,"_enableUnderlay",et,this),i(this,"_underlayColor",rt,this),i(this,"_underlayOffset",ot,this),i(this,"_underlayDilate",it,this),i(this,"_underlaySoftness",nt,this),i(this,"_enableGlow",at,this),i(this,"_glowColor",lt,this),i(this,"_glowOffset",st,this),i(this,"_glowInner",pt,this),i(this,"_glowOuter",ut,this),i(this,"_glowPower",ct,this),this._comp=null}return t.prototype.init=function(t){this._comp=t;var e=this._comp.getMaterialInstance(0);this._comp.updateTmpMatFace(e),this._comp.updateTmpMatOutline(e),this._comp.updateTmpMatUnderlay(e),this._comp.updateTmpMatGlow(e)},r(t,[{key:"faceColor",get:function(){return this._faceColor},set:function(t){this._faceColor!==t&&(this._faceColor=t,this._comp&&this._comp.updateTmpMatFace(this._comp.getMaterialInstance(0)))}},{key:"faceDilate",get:function(){return this._faceDilate},set:function(t){this._faceDilate!==t&&(this._faceDilate=t,this._comp&&this._comp.updateTmpMatFace(this._comp.getMaterialInstance(0)))}},{key:"faceSoftness",get:function(){return this._faceSoftness},set:function(t){this._faceSoftness!==t&&(this._faceSoftness=t,this._comp&&this._comp.updateTmpMatFace(this._comp.getMaterialInstance(0)))}},{key:"enableOutline",get:function(){return this._enableOutline},set:function(t){this._enableOutline!==t&&(this._enableOutline=t,this._comp&&this._comp.updateTmpMatOutline(this._comp.getMaterialInstance(0)))}},{key:"outlineColor",get:function(){return this._outlineColor},set:function(t){this._outlineColor!==t&&(this._outlineColor=t,this._comp&&this._comp.updateTmpMatOutline(this._comp.getMaterialInstance(0)))}},{key:"outlineThickness",get:function(){return this._outlineThickness},set:function(t){this._outlineThickness!==t&&(this._outlineThickness=t,this._comp&&this._comp.updateTmpMatOutline(this._comp.getMaterialInstance(0)))}},{key:"enableUnderlay",get:function(){return this._enableUnderlay},set:function(t){this._enableUnderlay!==t&&(this._enableUnderlay=t,this._comp&&this._comp.updateTmpMatUnderlay(this._comp.getMaterialInstance(0)))}},{key:"underlayColor",get:function(){return this._underlayColor},set:function(t){this._underlayColor!==t&&(this._underlayColor=t,this._comp&&this._comp.updateTmpMatUnderlay(this._comp.getMaterialInstance(0)))}},{key:"underlayOffset",get:function(){return this._underlayOffset},set:function(t){this._underlayOffset!==t&&(this._underlayOffset=t,this._comp&&this._comp.updateTmpMatUnderlay(this._comp.getMaterialInstance(0)))}},{key:"underlayDilate",get:function(){return this._underlayDilate},set:function(t){this._underlayDilate!==t&&(this._underlayDilate=t,this._comp&&this._comp.updateTmpMatUnderlay(this._comp.getMaterialInstance(0)))}},{key:"underlaySoftness",get:function(){return this._underlaySoftness},set:function(t){this._underlaySoftness!==t&&(this._underlaySoftness=t,this._comp&&this._comp.updateTmpMatUnderlay(this._comp.getMaterialInstance(0)))}},{key:"enableGlow",get:function(){return this._enableGlow},set:function(t){this._enableGlow!==t&&(this._enableGlow=t,this._comp&&this._comp.updateTmpMatGlow(this._comp.getMaterialInstance(0)))}},{key:"glowColor",get:function(){return this._glowColor},set:function(t){this._glowColor!==t&&(this._glowColor=t,this._comp&&this._comp.updateTmpMatGlow(this._comp.getMaterialInstance(0)))}},{key:"glowOffset",get:function(){return this._glowOffset},set:function(t){this._glowOffset!==t&&(this._glowOffset=t,this._comp&&this._comp.updateTmpMatGlow(this._comp.getMaterialInstance(0)))}},{key:"glowInner",get:function(){return this._glowInner},set:function(t){this._glowInner!==t&&(this._glowInner=t,this._comp&&this._comp.updateTmpMatGlow(this._comp.getMaterialInstance(0)))}},{key:"glowOuter",get:function(){return this._glowOuter},set:function(t){this._glowOuter!==t&&(this._glowOuter=t,this._comp&&this._comp.updateTmpMatGlow(this._comp.getMaterialInstance(0)))}},{key:"glowPower",get:function(){return this._glowPower},set:function(t){this._glowPower!==t&&(this._glowPower=t,this._comp&&this._comp.updateTmpMatGlow(this._comp.getMaterialInstance(0)))}},{key:"comp",get:function(){return this._comp}}]),t}()).prototype,"_faceColor",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.WHITE.clone()}}),e(K.prototype,"faceColor",[S],Object.getOwnPropertyDescriptor(K.prototype,"faceColor"),K.prototype),Z=e(K.prototype,"_faceDilate",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),e(K.prototype,"faceDilate",[P],Object.getOwnPropertyDescriptor(K.prototype,"faceDilate"),K.prototype),J=e(K.prototype,"_faceSoftness",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.01}}),e(K.prototype,"faceSoftness",[M],Object.getOwnPropertyDescriptor(K.prototype,"faceSoftness"),K.prototype),Q=e(K.prototype,"_enableOutline",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(K.prototype,"enableOutline",[I],Object.getOwnPropertyDescriptor(K.prototype,"enableOutline"),K.prototype),$=e(K.prototype,"_outlineColor",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g(255,0,0,255)}}),e(K.prototype,"outlineColor",[C],Object.getOwnPropertyDescriptor(K.prototype,"outlineColor"),K.prototype),tt=e(K.prototype,"_outlineThickness",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),e(K.prototype,"outlineThickness",[R],Object.getOwnPropertyDescriptor(K.prototype,"outlineThickness"),K.prototype),et=e(K.prototype,"_enableUnderlay",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(K.prototype,"enableUnderlay",[z],Object.getOwnPropertyDescriptor(K.prototype,"enableUnderlay"),K.prototype),rt=e(K.prototype,"_underlayColor",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g(0,0,0,255)}}),e(K.prototype,"underlayColor",[v],Object.getOwnPropertyDescriptor(K.prototype,"underlayColor"),K.prototype),ot=e(K.prototype,"_underlayOffset",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u(0,0)}}),e(K.prototype,"underlayOffset",[G],Object.getOwnPropertyDescriptor(K.prototype,"underlayOffset"),K.prototype),it=e(K.prototype,"_underlayDilate",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),e(K.prototype,"underlayDilate",[L],Object.getOwnPropertyDescriptor(K.prototype,"underlayDilate"),K.prototype),nt=e(K.prototype,"_underlaySoftness",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),e(K.prototype,"underlaySoftness",[j],Object.getOwnPropertyDescriptor(K.prototype,"underlaySoftness"),K.prototype),at=e(K.prototype,"_enableGlow",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(K.prototype,"enableGlow",[A],Object.getOwnPropertyDescriptor(K.prototype,"enableGlow"),K.prototype),lt=e(K.prototype,"_glowColor",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g(0,255,0,255)}}),e(K.prototype,"glowColor",[B],Object.getOwnPropertyDescriptor(K.prototype,"glowColor"),K.prototype),st=e(K.prototype,"_glowOffset",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),e(K.prototype,"glowOffset",[X],Object.getOwnPropertyDescriptor(K.prototype,"glowOffset"),K.prototype),pt=e(K.prototype,"_glowInner",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.01}}),e(K.prototype,"glowInner",[V],Object.getOwnPropertyDescriptor(K.prototype,"glowInner"),K.prototype),ut=e(K.prototype,"_glowOuter",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.01}}),e(K.prototype,"glowOuter",[N],Object.getOwnPropertyDescriptor(K.prototype,"glowOuter"),K.prototype),ct=e(K.prototype,"_glowPower",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),e(K.prototype,"glowPower",[W],Object.getOwnPropertyDescriptor(K.prototype,"glowPower"),K.prototype),Y=K))||Y));t("default",(ht=ce("TextMeshPro"),ft=he({multiline:!0}),yt=he(c),_t=he({tooltip:"字体资源\n依赖的纹理请勿打入图集\n在编辑器内拖拽此文件时，纹理必须和此文件处于同一目录下",type:c}),gt=he({type:h}),bt=he({type:h}),mt=he({type:f}),dt=he({type:f}),wt=he({visible:function(){return this._overflow===_e.SHRINK}}),Ot=he({range:[0,1024]}),Dt=he({type:y(_e)}),Tt=he({tooltip:"文本的排版方式",type:y(_e)}),Ut=he({tooltip:"是否启用自动换行",visible:function(){return this._overflow===_e.CLAMP||this._overflow===_e.ELLIPSIS}}),kt=he({tooltip:"是否启用斜体"}),St=he({tooltip:"是否启用下划线"}),Pt=he({tooltip:"下划线高度偏移",visible:function(){return this._enableUnderline}}),Mt=he({tooltip:"是否启用删除线"}),It=he({tooltip:"删除线高度偏移",visible:function(){return this._enableStrikethrough}}),xt=he({tooltip:"是否启用颜色渐变，会和顶点颜色混合为最终的顶点颜色"}),Ct=he(p),Rt=he({tooltip:"左下顶点",type:p,visible:function(){return this._colorGradient}}),zt=he(p),Et=he({tooltip:"右下顶点",type:p,visible:function(){return this._colorGradient}}),vt=he(p),Ft=he({tooltip:"左上顶点",type:p,visible:function(){return this._colorGradient}}),Gt=he(p),Lt=he({tooltip:"右上顶点",type:p,visible:function(){return this._colorGradient}}),jt=he({tooltip:"材质参数",type:ge}),At=he({tooltip:"字体所依赖的纹理",type:_,readonly:!0}),ht(Ht=fe((Xt=e((Bt=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,i(e,"_string",Xt,n(e)),i(e,"_font",Vt,n(e)),i(e,"_horizontalAlign",Nt,n(e)),i(e,"_verticalAlign",Wt,n(e)),i(e,"_actualFontSize",Yt,n(e)),i(e,"_fontSize",Kt,n(e)),i(e,"_lineHeight",qt,n(e)),i(e,"_spacingX",Zt,n(e)),i(e,"_overflow",Jt,n(e)),i(e,"_enableWrapText",Qt,n(e)),i(e,"_enableItalic",$t,n(e)),i(e,"_enableUnderline",te,n(e)),i(e,"_underlineOffset",ee,n(e)),i(e,"_enableStrikethrough",re,n(e)),i(e,"_strikethroughOffset",oe,n(e)),i(e,"_colorGradient",ie,n(e)),i(e,"_colorLB",ne,n(e)),i(e,"_colorRB",ae,n(e)),i(e,"_colorLT",le,n(e)),i(e,"_colorRT",se,n(e)),i(e,"tmpUniform",pe,n(e)),i(e,"textures",ue,n(e)),e._fontConfig=null,e._lettersInfo=[],e._assembler=null,e._colorExtraDirty=!1,e._richTextDeltaX=0,e}o(e,t);var a=e.prototype;return a.editorInit=function(){},a.resetInEditor=function(){},a.onLoad=function(){t.prototype.onLoad.call(this),this.customMaterial||this.resetInEditor(),this.tmpUniform.init(this),!this._fontConfig&&this.font&&this.textures.length>0&&(this._fontConfig=new T(this._font.json,this.textures))},a.onEnable=function(){t.prototype.onEnable.call(this),this._applyFontTexture()},a.lateUpdate=function(t){this._colorExtraDirty&&(this._colorExtraDirty=!1,this._assembler.updateColorExtra(this))},a.requestRenderData=function(t){void 0===t&&(t=0);var e=b.add(ye);return e.initRenderDrawInfo(this,t),this._renderData=e,e},a.updateRenderData=function(t){void 0===t&&(t=!1),t&&(this._flushAssembler(),this.renderData&&(this.renderData.vertDirty=!0),this._applyFontTexture()),this._assembler&&this._assembler.updateRenderData(this)},a._render=function(t){this.commitComp(t,this,this.renderData,this.textures[0],this._assembler,null)},a.commitComp=function(t,e,r,o,i,n){var a,l=0,s=-1;if(r&&r.chunk){if(!r.isValid())return;l=r.dataHash,a=r.material,s=r.chunk.bufferId}e.stencilStage=m.sharedManager.stage;var u=e.stencilStage,c=!0,h=0;if(e.tmpUniform.enableOutline&&(h|=1),e.tmpUniform.enableUnderlay&&(h|=2),e.tmpUniform.enableGlow&&(h|=4),t._currMaterial!==a&&((a instanceof d.MaterialInstance&&t._currMaterial.parent!==a.parent||!(a instanceof d.MaterialInstance)&&t._currMaterial.parent!==a||t._currTmpMatDefine!==h)&&(c=!1),c))for(var f=["texture0","texture1","texture2","texture3","texture4","texture5","texture6","texture7","faceColor","faceDilate","faceSoftness","outlineColor","outlineThickness","underlayColor","underlayOffsetX","underlayOffsetY","underlayDilate","underlaySoftness","glowColor","glowOffset","glowInner","glowOuter","glowPower"],y=e.getRenderMaterial(0),_=0;_<f.length;_++){var g=f[_],b=y.getProperty(g),w=t._currMaterial.getProperty(g);if(!(b instanceof p&&w instanceof p&&b.equals(w))&&b!==w){c=!1;break}}t._currHash===l&&0!==l&&c&&t._currDepthStencilStateStage===u||(t.autoMergeBatches(t._currComponent),r&&!r._isMeshBuffer&&t.updateBuffer(r.vertexFormat,s),t._currTmpMatDefine=h,t._currRenderData=r,t._currHash=r?r.dataHash:0,t._currComponent=e,t._currTransform=n,t._currMaterial=e.getRenderMaterial(0),t._currDepthStencilStateStage=u,t._currLayer=e.node.layer,o?(t._currTexture=o.getGFXTexture(),t._currSampler=o.getGFXSampler(),t._currTextureHash=o.getHash(),t._currSamplerHash=t._currSampler.hash):(t._currTexture=null,t._currSampler=null,t._currTextureHash=0,t._currSamplerHash=0)),i.fillBuffers(e,t)},a._updateColor=function(){t.prototype._updateColor.call(this),this.markForUpdateRenderData()},a.setEntityColor=function(t){},a._canRender=function(){return!(!t.prototype._canRender.call(this)||!this._string)&&!(!this.fontConfig||this.textures.length<=0)},a._flushAssembler=function(){var t=D;this._assembler!==t&&(this.destroyRenderData(),this._assembler=t),this._renderData||this._assembler&&this._assembler.createData&&(this._renderData=this._assembler.createData(this),this._renderData.material=this.material,this._updateColor())},a._applyFontTexture=function(){this.markForUpdateRenderData(),this.textures.length>0&&(this.renderData,this.changeMaterialForDefine(),this._assembler&&this._assembler.updateRenderData(this))},a.changeMaterialForDefine=function(){this.textures.length<=0||this.updateMaterial()},a.updateMaterial=function(){if(this._customMaterial){this.setMaterial(this._customMaterial,0);var t=this.getMaterialInstance(0);this._updateTmpMatTexture(t),this.tmpUniform&&this.tmpUniform.comp&&(this.updateTmpMatFace(t),this.updateTmpMatOutline(t),this.updateTmpMatUnderlay(t),this.updateTmpMatGlow(t))}},a._updateTmpMatTexture=function(t){if(t&&!(this.textures.length<=0)){t.recompileShaders({USE_TEXTURE_LEVEL_1:this.textures.length>0,USE_TEXTURE_LEVEL_2:this.textures.length>1,USE_TEXTURE_LEVEL_3:this.textures.length>2,USE_TEXTURE_LEVEL_4:this.textures.length>4});for(var e=0;e<this.textures.length;e++)t.setProperty("texture"+e,this.textures[e])}},a.updateTmpMatFace=function(t){t&&(t.setProperty("faceColor",this.tmpUniform.faceColor),t.setProperty("faceDilate",this.tmpUniform.faceDilate),t.setProperty("faceSoftness",this.tmpUniform.faceSoftness))},a.updateTmpMatOutline=function(t){t&&(t.recompileShaders({USE_OUTLINE:this.tmpUniform.enableOutline}),this.tmpUniform.enableOutline&&(t.setProperty("outlineColor",this.tmpUniform.outlineColor),t.setProperty("outlineThickness",this.tmpUniform.outlineThickness)))},a.updateTmpMatUnderlay=function(t){t&&(t.recompileShaders({USE_UNDERLAY:this.tmpUniform.enableUnderlay}),this.tmpUniform.enableUnderlay&&(t.setProperty("underlayColor",this.tmpUniform.underlayColor),t.setProperty("underlayOffsetX",this.tmpUniform.underlayOffset.x),t.setProperty("underlayOffsetY",this.tmpUniform.underlayOffset.y),t.setProperty("underlayDilate",this.tmpUniform.underlayDilate),t.setProperty("underlaySoftness",this.tmpUniform.underlaySoftness)))},a.updateTmpMatGlow=function(t){t&&(t.recompileShaders({USE_GLOW:this.tmpUniform.enableGlow}),this.tmpUniform.enableGlow&&(t.setProperty("glowColor",this.tmpUniform.glowColor),t.setProperty("glowOffset",this.tmpUniform.glowOffset),t.setProperty("glowInner",this.tmpUniform.glowInner),t.setProperty("glowOuter",this.tmpUniform.glowOuter),t.setProperty("glowPower",this.tmpUniform.glowPower)))},a.forceUpdateRenderData=function(){this.updateRenderData(!0)},a.setFont=function(t,e){!t||e.length<0?w("params error!"):(this._font=t,this.textures=e,this._fontConfig=new T(this._font.json,this.textures),this.enabledInHierarchy&&this.updateRenderData(!0))},a.isVisible=function(t){return!!this.enabledInHierarchy&&this._assembler.isVisble(this,t)},a.setVisible=function(t,e){this.enabledInHierarchy&&this._assembler.setVisible(this,t,e)},a.getColorExtraVertices=function(t){return this.enabledInHierarchy?this._assembler.getColorExtraVertices(this,t):null},a.setColorExtraVertices=function(t,e){this.enabledInHierarchy&&this._assembler.setColorExtraVertices(this,t,e)},a.getPosVertices=function(t){return this.enabledInHierarchy?this._assembler.getPosVertices(this,t):null},a.setPosVertices=function(t,e){this.enabledInHierarchy&&this._assembler.setPosVertices(this,t,e)},r(e,[{key:"string",get:function(){return this._string},set:function(t){this._string!==t&&(this._string=t,this.markForUpdateRenderData())}},{key:"font",get:function(){return this._font},set:function(t){this._font!==t&&(this._font=t,this._renderData&&(this.destroyRenderData(),this._renderData=null),this.updateRenderData(!0))}},{key:"horizontalAlign",get:function(){return this._horizontalAlign},set:function(t){this._horizontalAlign!==t&&(this._horizontalAlign=t,this.markForUpdateRenderData())}},{key:"verticalAlign",get:function(){return this._verticalAlign},set:function(t){this._verticalAlign!==t&&(this._verticalAlign=t,this.markForUpdateRenderData())}},{key:"actualFontSize",get:function(){return this._actualFontSize}},{key:"bmfontOriginalSize",get:function(){return this.font?this.font.json.size:-1}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.markForUpdateRenderData())}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.markForUpdateRenderData())}},{key:"spacingX",get:function(){return this._spacingX},set:function(t){this._spacingX!==t&&(this._spacingX=t,this.markForUpdateRenderData())}},{key:"overflow",get:function(){return this._overflow},set:function(t){this._overflow!==t&&(this._overflow=t,this.markForUpdateRenderData())}},{key:"enableWrapText",get:function(){return this._enableWrapText},set:function(t){this._enableWrapText!==t&&(this._enableWrapText=t,this.markForUpdateRenderData())}},{key:"enableItalic",get:function(){return this._enableItalic},set:function(t){this._enableItalic!==t&&(this._enableItalic=t,this.markForUpdateRenderData())}},{key:"enableUnderline",get:function(){return this._enableUnderline},set:function(t){this._enableUnderline!==t&&(this._enableUnderline=t,this.markForUpdateRenderData())}},{key:"underlineOffset",get:function(){return this._underlineOffset},set:function(t){this._underlineOffset!==t&&(this._underlineOffset=t,this.markForUpdateRenderData())}},{key:"enableStrikethrough",get:function(){return this._enableStrikethrough},set:function(t){this._enableStrikethrough!==t&&(this._enableStrikethrough=t,this.markForUpdateRenderData())}},{key:"strikethroughOffset",get:function(){return this._strikethroughOffset},set:function(t){this._strikethroughOffset!==t&&(this._strikethroughOffset=t,this.markForUpdateRenderData())}},{key:"colorGradient",get:function(){return this._colorGradient},set:function(t){this._colorGradient!==t&&(this._colorGradient=t,this._colorExtraDirty=!0)}},{key:"colorLB",get:function(){return this._colorLB},set:function(t){this._colorLB!==t&&(this._colorLB=t,this._colorExtraDirty=!0)}},{key:"colorRB",get:function(){return this._colorRB},set:function(t){this._colorRB!==t&&(this._colorRB=t,this._colorExtraDirty=!0)}},{key:"colorLT",get:function(){return this._colorLT},set:function(t){this._colorLT!==t&&(this._colorLT=t,this._colorExtraDirty=!0)}},{key:"colorRT",get:function(){return this._colorRT},set:function(t){this._colorRT!==t&&(this._colorRT=t,this._colorExtraDirty=!0)}},{key:"fontConfig",get:function(){return this._fontConfig}},{key:"lettersInfo",get:function(){return this._lettersInfo}},{key:"richTextDeltaX",get:function(){return this._richTextDeltaX}}]),e}(O)).prototype,"_string",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),e(Bt.prototype,"string",[ft],Object.getOwnPropertyDescriptor(Bt.prototype,"string"),Bt.prototype),Vt=e(Bt.prototype,"_font",[yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),e(Bt.prototype,"font",[_t],Object.getOwnPropertyDescriptor(Bt.prototype,"font"),Bt.prototype),Nt=e(Bt.prototype,"_horizontalAlign",[gt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.LEFT}}),e(Bt.prototype,"horizontalAlign",[bt],Object.getOwnPropertyDescriptor(Bt.prototype,"horizontalAlign"),Bt.prototype),Wt=e(Bt.prototype,"_verticalAlign",[mt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return f.TOP}}),e(Bt.prototype,"verticalAlign",[dt],Object.getOwnPropertyDescriptor(Bt.prototype,"verticalAlign"),Bt.prototype),Yt=e(Bt.prototype,"_actualFontSize",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(Bt.prototype,"actualFontSize",[wt],Object.getOwnPropertyDescriptor(Bt.prototype,"actualFontSize"),Bt.prototype),e(Bt.prototype,"bmfontOriginalSize",[he],Object.getOwnPropertyDescriptor(Bt.prototype,"bmfontOriginalSize"),Bt.prototype),Kt=e(Bt.prototype,"_fontSize",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 32}}),e(Bt.prototype,"fontSize",[Ot],Object.getOwnPropertyDescriptor(Bt.prototype,"fontSize"),Bt.prototype),qt=e(Bt.prototype,"_lineHeight",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 32}}),e(Bt.prototype,"lineHeight",[he],Object.getOwnPropertyDescriptor(Bt.prototype,"lineHeight"),Bt.prototype),Zt=e(Bt.prototype,"_spacingX",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(Bt.prototype,"spacingX",[he],Object.getOwnPropertyDescriptor(Bt.prototype,"spacingX"),Bt.prototype),Jt=e(Bt.prototype,"_overflow",[Dt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _e.NONE}}),e(Bt.prototype,"overflow",[Tt],Object.getOwnPropertyDescriptor(Bt.prototype,"overflow"),Bt.prototype),Qt=e(Bt.prototype,"_enableWrapText",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),e(Bt.prototype,"enableWrapText",[Ut],Object.getOwnPropertyDescriptor(Bt.prototype,"enableWrapText"),Bt.prototype),$t=e(Bt.prototype,"_enableItalic",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(Bt.prototype,"enableItalic",[kt],Object.getOwnPropertyDescriptor(Bt.prototype,"enableItalic"),Bt.prototype),te=e(Bt.prototype,"_enableUnderline",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(Bt.prototype,"enableUnderline",[St],Object.getOwnPropertyDescriptor(Bt.prototype,"enableUnderline"),Bt.prototype),ee=e(Bt.prototype,"_underlineOffset",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(Bt.prototype,"underlineOffset",[Pt],Object.getOwnPropertyDescriptor(Bt.prototype,"underlineOffset"),Bt.prototype),re=e(Bt.prototype,"_enableStrikethrough",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(Bt.prototype,"enableStrikethrough",[Mt],Object.getOwnPropertyDescriptor(Bt.prototype,"enableStrikethrough"),Bt.prototype),oe=e(Bt.prototype,"_strikethroughOffset",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(Bt.prototype,"strikethroughOffset",[It],Object.getOwnPropertyDescriptor(Bt.prototype,"strikethroughOffset"),Bt.prototype),ie=e(Bt.prototype,"_colorGradient",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(Bt.prototype,"colorGradient",[xt],Object.getOwnPropertyDescriptor(Bt.prototype,"colorGradient"),Bt.prototype),ne=e(Bt.prototype,"_colorLB",[Ct],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.WHITE.clone()}}),e(Bt.prototype,"colorLB",[Rt],Object.getOwnPropertyDescriptor(Bt.prototype,"colorLB"),Bt.prototype),ae=e(Bt.prototype,"_colorRB",[zt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.WHITE.clone()}}),e(Bt.prototype,"colorRB",[Et],Object.getOwnPropertyDescriptor(Bt.prototype,"colorRB"),Bt.prototype),le=e(Bt.prototype,"_colorLT",[vt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.WHITE.clone()}}),e(Bt.prototype,"colorLT",[Ft],Object.getOwnPropertyDescriptor(Bt.prototype,"colorLT"),Bt.prototype),se=e(Bt.prototype,"_colorRT",[Gt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.WHITE.clone()}}),e(Bt.prototype,"colorRT",[Lt],Object.getOwnPropertyDescriptor(Bt.prototype,"colorRT"),Bt.prototype),pe=e(Bt.prototype,"tmpUniform",[jt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ge}}),ue=e(Bt.prototype,"textures",[At],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ht=Bt))||Ht)||Ht));a._RF.pop()}}}));

System.register("chunks:///_virtual/TmpAssembler.ts",["cc","./TextMeshPro.ts","./TmpUtils.ts"],(function(t){var e,r,a,i,n,o,h,s,l,f,d,u,c;return{setters:[function(t){e=t.cclegacy,r=t.Color,a=t.Vec3,i=t.Mat4,n=t.misc,o=t.rect,h=t.size,s=t.v2,l=t.log,f=t.HorizontalTextAlignment,d=t.VerticalTextAlignment},function(t){u=t.TmpOverflow},function(t){c=t.default}],execute:function(){e._RF.push({},"83104TeN+tAhp9CufQV0kSY","TmpAssembler",void 0);var g,x=new r(255,255,255,255),v=new a,p=new i,I=r.WHITE,y=n.degreesToRadians(15),m={fontAtlas:null,fontSize:0,lineHeight:0,hAlign:0,vAlign:0,hash:"",margin:0},w=null,_=null,A=o(),b=o(),L=[],C=[],S=[],T=null,E=0,D=0,M=0,F=0,P=0,k=1,O=h(0,0),U="",z=0,R=0,V=0,B=0,H=0,W=0,Q=0,G=!1,X=0,q=0,N=0,K=s(),Y={},J=null,Z=null,j=0,$=t("TmpLetterInfo",(function(){this.valid=!0,this.char="",this.x=0,this.y=0,this.line=0,this.hash="",this.quadsIndex=0,this.visible=!0})),tt=t("default",function(){function t(){}return t.createData=function(t){return t.requestRenderData()},t.fillBuffers=function(t,e){var i=t.node;x.set(t.color),x.a=255*i._uiProps.opacity;var n=t.renderData.chunk,o=t.renderData.data,h=n.vb,s=t.renderData.vertexCount;i.getWorldMatrix(p);for(var l=0,f=0;f<s;f++){var d=o[f];a.set(v,d.x,d.y,0),a.transformMat4(v,v,p),h[l++]=v.x,h[l++]=v.y,h[l++]=v.z,r.toArray(h,x,l+2),r.toArray(h,d.colorExtra,l+6),l+=11}n.bufferId;for(var u=n.vertexOffset,c=n.meshBuffer,g=n.meshBuffer.iData,I=c.indexOffset,y=0,m=s/4;y<m;y++){var w=u+4*y;g[I++]=w,g[I++]=w+1,g[I++]=w+2,g[I++]=w+1,g[I++]=w+3,g[I++]=w+2}c.indexOffset+=t.renderData.indexCount,c.setDirty()},t.updateRenderData=function(t){if(t.renderData&&w!==t&&t.fontConfig&&(t.renderData.vertDirty&&(_=(w=t).node._uiProps.uiTransformComp,t.lettersInfo.length=0,this._updateProperties(t),this._updateContent(),this.updateUVs(t),this.updateColor(t),this.updateTextureIdx(t),w._actualFontSize=z,_.setContentSize(O),w.renderData.vertDirty=!1,w.markForUpdateRenderData(!1),w=null,this._resetProperties()),t.textures.length>0)){var e=t.renderData;e.textureDirty=!1,e.updateRenderData(t,t.textures[0])}},t.updateColor=function(t){},t.updateUVs=function(t){for(var e=t.renderData,r=e.chunk.vb,a=e.vertexCount,i=e.data,n=this.uvOffset,o=0;o<a;o++){var h=i[o];r[n]=h.u,r[n+1]=h.v,n+=this.floatsPerVert}},t.updateTextureIdx=function(t){for(var e=t.renderData,r=e.chunk.vb,a=e.vertexCount,i=e.data,n=this.textureIdxOffset,o=0;o<a;o++){var h=i[o];r[n]=h.textureIdx,n+=this.floatsPerVert}},t._updateProperties=function(t){T=t.fontConfig,U=t.string.toString(),z=t.fontSize,R=T?T.json.size:t.fontSize,k=z/R,V=t.horizontalAlign,B=t.verticalAlign,H=t.spacingX,Q=t.overflow,W=t.lineHeight;var e=_.contentSize;O.width=e.width,O.height=e.height,m.fontAtlas=t.fontConfig,m.lineHeight=W,m.fontSize=z,m.hash="",m.margin=0,Q===u.NONE?(G=!1,O.width+=2*m.margin,O.height+=2*m.margin):Q===u.RESIZE_HEIGHT?(G=!0,O.height+=2*m.margin):G=Q!==u.SHRINK&&t.enableWrapText,this._setupBMFontOverflowMetrics(),t.enableItalic&&(K.x=0,K.y=O.height/2,K=K.rotate(y),O.width+=2*Math.abs(K.x),O.height-=2*Math.abs(O.height/2-K.y)),(t.enableUnderline||t.enableStrikethrough)&&((J=m.fontAtlas.getLetter(95+m.hash))||l("Can't find letter definition in textures. letter: _")),t.overflow===u.ELLIPSIS&&((Z=m.fontAtlas.getLetter(46+m.hash))?j=3*(Z.xAdvance*k+H):(j=0,l("Can't find letter definition in textures. letter: .")))},t._resetProperties=function(){T=null,m.hash="",m.margin=0},t._updateContent=function(){this._computeHorizontalKerningForText(),this._alignText()},t._computeHorizontalKerningForText=function(){U.length;L.length=0},t._alignText=function(){if(D=0,C.length=0,Y={},this._multilineTextWrapByWord(),Q===u.SHRINK&&z>0){var t=k,e=k,r=!1;D>O.height&&(t=O.height/D*k,r=!0);var a=0;C.forEach((function(t){t>a&&(a=t)})),a>O.width&&(e=O.width/a*k,r=!0),k=Math.min(t,e),r&&(z=k*R,D=0,C.length=0,Y={},this._multilineTextWrapByWord())}this._computeAlignmentOffset(),this._updateQuads()},t._multilineTextWrapByWord=function(){return this._multilineTextWrap(this._getFirstWordLen)},t._multilineTextWrapByChar=function(){return this._multilineTextWrap(this._getFirstCharLen)},t._multilineTextWrap=function(t){var e=0,r=!1;Q===u.ELLIPSIS&&Z&&(e=Math.max(1,Math.floor(O.height/W)));for(var a=U.length,i=0,n=0,o=0,h=0,f=0,d=0,g=0,x=null,v=s(0,0),p=0;p<a;){var I=U.charAt(p);if("\n"!==I){for(var _=t(U,p,a),A=d,b=g,S=f,T=n,M=!1,z=0;z<_;++z){var R=p+z;if("\r"!==(I=U.charAt(R)))if(x=m.fontAtlas.getLetterDefinitionForChar(I)){var V=T+x.offsetX*k-m.margin;if(w.enableItalic&&(K.x=0,K.y=x.h*k/2,K=K.rotate(y),V+=Math.abs(K.x)),Q===u.ELLIPSIS&&Z&&V+(x.xAdvance-x.offsetX)*k>N&&(!G||i+1>=e)){this._recordEllipsis(o,v,i),r=!0,f=w.lettersInfo[w.lettersInfo.length-1].x+(Z.xAdvance-Z.offsetX)*k+H-2*m.margin;break}if(G&&N>0&&n>0&&V+(x.xAdvance-x.offsetX)*k>N&&!c.isUnicodeSpace(I)){C.push(f),f=0,i++,n=0,o-=W*this._getFontScale()+0,M=!0;break}v.x=V,v.y=o-x.offsetY*k+m.margin,this._recordLetterInfo(v,I,R,i),R+1<L.length&&R<a-1&&(T+=L[R+1]),S=T+=x.xAdvance*k+H-2*m.margin,w.enableItalic&&(K.x=0,K.y=x.h*k/2,K=K.rotate(y),S+=Math.abs(K.x)),A<v.y&&(A=v.y),b>v.y-x.h*k&&(b=v.y-x.h*k)}else this._recordPlaceholderInfo(R,I),l("Can't find letter definition in textures. letter: "+I);else this._recordPlaceholderInfo(R,I)}if(r)break;M||(n=T,d<A&&(d=A),g>b&&(g=b),h<(f=S)&&(h=f),p+=_)}else{if(Q===u.ELLIPSIS&&Z&&i+1>=e){this._recordEllipsis(o,v,i),r=!0,f=w.lettersInfo[w.lettersInfo.length-1].x+(Z.xAdvance-Z.offsetX)*k+H-2*m.margin;break}C.push(f),f=0,i++,n=0,o-=W*this._getFontScale()+0,this._recordPlaceholderInfo(p,I),p++}}return C.push(f),D=(E=i+1)*W*this._getFontScale(),E>1&&(D+=0*(E-1)),O.width=X,O.height=q,X<=0&&(O.width=parseFloat(h.toFixed(2))+2*m.margin),q<=0&&(O.height=parseFloat(D.toFixed(2))+2*m.margin),F=O.height,P=0,Q!==u.CLAMP&&(d>0&&(F=O.height+d),g<-D&&(P=D+g)),w._richTextDeltaX=n-f,!0},t._getFirstCharLen=function(){return 1},t._getFontScale=function(){return Q===u.SHRINK?k:1},t._getFirstWordLen=function(t,e,r){var a=t.charAt(e);if(c.isUnicodeCJK(a)||"\n"===a||c.isUnicodeSpace(a))return 1;var i=1,n=m.fontAtlas.getLetterDefinitionForChar(a);if(!n)return i;for(var o=n.xAdvance*k+H,h=e+1;h<r&&(a=t.charAt(h),n=m.fontAtlas.getLetterDefinitionForChar(a));++h){if(o+n.offsetX*k+(n.xAdvance-n.offsetX)*k>N&&!c.isUnicodeSpace(a)&&N>0)return i;if(o+=n.xAdvance*k+H,"\n"===a||c.isUnicodeSpace(a)||c.isUnicodeCJK(a))break;i++}return i},t._recordEllipsis=function(t,e,r){for(var a=0,i=w.lettersInfo.length-1;i>=0;){var n=w.lettersInfo[i],o=m.fontAtlas.getLetterDefinitionForChar(n.char),h=o?o.w:0,s=o?o.xAdvance:0,l=o?o.offsetX:0,f=n.x+h*k-m.margin;if(a=n.x+(s-l)*k+H-2*m.margin,N>=f+j)break;i--,w.lettersInfo.pop()}i<0&&(a=0),e.y=t-Z.offsetY*k+m.margin;for(var d=1;d<=3;d++)e.x=a+Z.offsetX*k-m.margin,this._recordLetterInfo(e,".",i+d,r),a+=Z.xAdvance*k+H-2*m.margin},t._recordPlaceholderInfo=function(t,e){if(t>=w.lettersInfo.length){var r=new $;w.lettersInfo.push(r)}w.lettersInfo[t].char=e,w.lettersInfo[t].hash=e.charCodeAt(0)+m.hash,w.lettersInfo[t].valid=!1},t._recordLetterInfo=function(t,e,r,a){if(r>=w.lettersInfo.length){var i=new $;w.lettersInfo.push(i)}var n=e.charCodeAt(0)+m.hash;w.lettersInfo[r].line=a,w.lettersInfo[r].char=e,w.lettersInfo[r].hash=n,w.lettersInfo[r].valid=m.fontAtlas.getLetter(n).valid,w.lettersInfo[r].x=t.x,w.lettersInfo[r].y=t.y},t._computeAlignmentOffset=function(){switch(S.length=0,V){case f.LEFT:for(var t=0;t<E;++t)S.push(0);break;case f.CENTER:for(var e=0,r=C.length;e<r;e++)S.push((O.width-C[e])/2);break;case f.RIGHT:for(var a=0,i=C.length;a<i;a++)S.push(O.width-C[a])}if(M=O.height,B!==d.TOP){var n=O.height-D+W*this._getFontScale()-R*k;B===d.BOTTOM?M-=n:M-=n/2}},t._setupBMFontOverflowMetrics=function(){var t=O.width,e=O.height;Q===u.RESIZE_HEIGHT&&(e=0),Q===u.NONE&&(t=0,e=0),X=t,q=e,N=t},t._updateQuads=function(){var t=w.renderData;t.dataLength=0,t.resize(0,0);for(var e=_.anchorPoint,r=O,a=e.x*r.width,i=e.y*r.height,n=0,o=0,h=w.lettersInfo.length;o<h;++o){var s=w.lettersInfo[o];if(!s)break;if(s.valid){s.quadsIndex=n;var l=m.fontAtlas.getLetter(s.hash);A.height=l.h,A.width=l.w,A.x=l.u,A.y=l.v;var f=s.y+M;if(q>0&&Q===u.CLAMP){if(f>F){var d=f-F;A.y+=d/k,A.height-=d/k,f-=d}f-A.height*k<P&&(A.height=f<P?0:(f-P)/k)}var x=s.x+S[s.line];if(X>0&&Q===u.CLAMP&&(x<0&&(A.x+=-x/k,A.width-=-x/k,x=0),x+A.width*k>O.width)){var v=x+A.width*k-O.width;A.width-=v/k}if(A.height>0&&A.width>0&&(b.x=x-a,b.y=f-i,b.width=A.width*k,b.height=A.height*k,this.appendQuad(w,l.textureId,A,b),n++,J&&(w.enableUnderline||w.enableStrikethrough)&&!c.isUnicodeSpace(s.char))){var p=Y[s.line];p?p.last<o&&(p.last=o):Y[s.line]={lineIndex:s.line,first:o,last:o}}}}J&&(w.enableUnderline&&this._updateLineQuads(a,i,-z+w.underlineOffset*k),w.enableStrikethrough&&this._updateLineQuads(a,i,-z/2+w.strikethroughOffset*k)),this.updateColorExtra(w);var I=t.indexCount;this.createQuadIndices(I),t.chunk.setIndexBuffer(g)},t.createQuadIndices=function(t){if(t%6==0){var e=t/6;g=null,g=new Uint16Array(t);for(var r=0,a=0;a<e;a++)g[r++]=0+4*a,g[r++]=1+4*a,g[r++]=2+4*a,g[r++]=1+4*a,g[r++]=3+4*a,g[r++]=2+4*a}else console.error("illegal index count!")},t._updateLineQuads=function(t,e,r){for(var a in Y){var i=Y[a],n=i.lineIndex,o=i.first,h=i.last>0?i.last:o,s=w.lettersInfo[o];if(s.valid){var l=w.lettersInfo[h],f=m.fontAtlas.getLetter(s.hash),d=m.fontAtlas.getLetter(l.hash),c=l.x+d.w*k-s.x,g=c>=J.w*k?J.w*k/3:c/2,x=g,v=c-g-x,p=s.x+S[n],I=p+g+v,y=p+g;A.height=J.h,A.width=g/k,A.x=J.u,A.y=J.v;var _=s.y+M+f.offsetY*k+r;if(q>0){if(_>F){var L=_-F;A.y+=L,A.height-=L,_-=L}_-J.h*k<P&&Q===u.CLAMP&&(A.height=_<P?0:(_-P)/k)}A.height>0&&A.width>0&&(b.x=p-t,b.y=_-e,b.width=g,b.height=A.height*k,this.appendQuad(w,J.textureId,A,b)),A.width=x/k,A.x=J.u+J.w-A.width,A.height>0&&A.width>0&&(b.x=I-t,b.y=_-e,b.width=x,b.height=A.height*k,this.appendQuad(w,J.textureId,A,b)),v>0&&(A.width=J.w-2*g/k,A.x=J.u+A.width,A.height>0&&A.width>0&&(b.x=y-t,b.y=_-e,b.width=v,b.height=A.height*k,this.appendQuad(w,J.textureId,A,b)))}}},t.appendQuad=function(t,e,r,a){var i=t.renderData;if(i){var n=i.dataLength;i.dataLength+=4,i.resize(i.dataLength,i.dataLength/2*3);var o,h,s,l,f=i.data,d=m.fontAtlas.getTexture(e),u=d.width,c=d.height,g=r.width,x=r.height;o=r.x/u,s=(r.x+g)/u,h=(r.y+x)/c,l=r.y/c,f[n].u=o,f[n].v=h,f[n+1].u=s,f[n+1].v=h,f[n+2].u=o,f[n+2].v=l,f[n+3].u=s,f[n+3].v=l,o=a.x,s=a.x+a.width,h=a.y-a.height,l=a.y,this.appendVerts(t,f,n,o,s,h,l);for(var v=0;v<4;v++)f[n+v].colorExtra=I.clone();for(var p=0;p<4;p++)f[n+p].textureIdx=e}},t.appendVerts=function(t,e,r,a,i,n,o){t.enableItalic?(K.x=0,K.y=(o-n)/2,K=K.rotate(y),e[r].x=a-Math.abs(K.x),e[r].y=n+Math.abs((o-n)/2-K.y),e[r+1].x=i-Math.abs(K.x),e[r+1].y=n+Math.abs((o-n)/2-K.y),e[r+2].x=a+Math.abs(K.x),e[r+2].y=o-Math.abs((o-n)/2-K.y),e[r+3].x=i+Math.abs(K.x),e[r+3].y=o-Math.abs((o-n)/2-K.y)):(e[r].x=a,e[r].y=n,e[r+1].x=i,e[r+1].y=n,e[r+2].x=a,e[r+2].y=o,e[r+3].x=i,e[r+3].y=o)},t.updateColorExtra=function(t){var e=t.renderData.data;if(e&&!(e.length<=0))for(var r=0;r<t.lettersInfo.length;r++){var a=t.lettersInfo[r];if(a.valid&&!c.isUnicodeSpace(a.char)){var i=a.visible?1:0,n=4*a.quadsIndex;if(e.length<n+4)break;x.set(I),x.a*=i,t.colorGradient&&x.multiply(t.colorLB),e[n].colorExtra.set(x),x.set(I),x.a*=i,t.colorGradient&&x.multiply(t.colorRB),e[n+1].colorExtra.set(x),x.set(I),x.a*=i,t.colorGradient&&x.multiply(t.colorLT),e[n+2].colorExtra.set(x),x.set(I),x.a*=i,t.colorGradient&&x.multiply(t.colorRT),e[n+3].colorExtra.set(x)}}},t.isVisble=function(t,e){var r=t.lettersInfo[e];return r&&r.valid&&r.visible&&!c.isUnicodeSpace(r.char)},t.setVisible=function(t,e,r){var a=t.lettersInfo[e];if(a&&this.isVisble(t,e)!==r&&a.visible!==r&&!c.isUnicodeSpace(a.char)){var i=4*a.quadsIndex,n=t.renderData.data;if(n&&!(n.length<i+4)){a.visible=r;var o=r?1:0;x.set(I),x.a*=o,t.colorGradient&&x.multiply(t.colorLB),n[i].colorExtra.set(x),x.set(I),x.a*=o,t.colorGradient&&x.multiply(t.colorRB),n[i+1].colorExtra.set(x),x.set(I),x.a*=o,t.colorGradient&&x.multiply(t.colorLT),n[i+2].colorExtra.set(x),x.set(I),x.a*=o,t.colorGradient&&x.multiply(t.colorRT),n[i+3].colorExtra.set(x)}}},t.getColorExtraVertices=function(t,e){var r=t.lettersInfo[e];if(!r||!r.valid)return null;var a=4*r.quadsIndex,i=t.renderData.data;if(i&&!(i.length<a+4)){for(var n=[],o=0;o<4;o++){var h=i[a+o].colorExtra.clone();n.push(h)}return n}},t.setColorExtraVertices=function(t,e,r){var a=t.lettersInfo[e];if(a&&a.valid&&4===r.length&&!c.isUnicodeSpace(a.char)){var i=4*a.quadsIndex,n=t.renderData.data;if(n&&!(n.length<i+4))for(var o=0;o<4;o++)n[i+o].colorExtra.set(r[o])}},t.getPosVertices=function(t,e){var r=t.lettersInfo[e];if(!r||!r.valid)return null;var i=4*r.quadsIndex,n=t.renderData.data;if(n&&!(n.length<i+4)){for(var o=[],h=0;h<4;h++)o.push(new a(n[i+h].x,n[i+h].y,n[i+h].z));return o}},t.setPosVertices=function(t,e,r){var a=t.lettersInfo[e];if(a&&a.valid&&4===r.length&&!c.isUnicodeSpace(a.char)){var i=4*a.quadsIndex,n=t.renderData.data;if(n&&!(n.length<i+4))for(var o=0;o<4;o++)n[i+o].x=r[o].x,n[i+o].y=r[o].y,n[i+o].z=r[o].z}},t}());tt.floatsPerVert=14,tt.verticesCount=4,tt.indicesCount=6,tt.uvOffset=3,tt.colorOffset=5,tt.colorExtraOffset=9,tt.textureIdxOffset=13,e._RF.pop()}}}));

System.register("chunks:///_virtual/TmpFontConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n;return{setters:[function(t){e=t.createClass},function(t){i=t.cclegacy,n=t.js}],execute:function(){i._RF.push({},"46a178eVaVOxZBFNDH/dmfz","TmpFontConfig",void 0);var r=t("TmpFontLetter",(function(){this.u=0,this.v=0,this.w=0,this.h=0,this.offsetX=0,this.offsetY=0,this.textureId=0,this.valid=!1,this.xAdvance=0}));t("default",function(){function t(t,e){var i=this;this._letterDefinitions={},this._textures={},this._json=null,this._json=t,e.forEach((function(t,e){i._textures[e]=t})),t.charData.forEach((function(t){var e=new r;e.offsetX=t.xoffset,e.offsetY=t.yoffset,e.w=t.width,e.h=t.height,e.u=t.x,e.v=t.y,e.textureId=t.page,e.valid=!0,e.xAdvance=t.xadvance,i.addLetterDefinitions(t.id,e)}))}var i=t.prototype;return i.addTexture=function(t,e){this._textures[t]=e},i.addLetterDefinitions=function(t,e){this._letterDefinitions[t]=e},i.cloneLetterDefinition=function(){var t={};for(var e in this._letterDefinitions){var i=new r;n.mixin(i,this._letterDefinitions[e]),t[e]=i}return t},i.getTexture=function(t){return this._textures[t]},i.getLetter=function(t){return this._letterDefinitions[t]},i.getLetterDefinitionForChar=function(t){var e=t.charCodeAt(0);return this._letterDefinitions.hasOwnProperty(e)?this._letterDefinitions[e]:null},i.clear=function(){this._letterDefinitions={}},e(t,[{key:"json",get:function(){return this._json}}]),t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/TmpRichText.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env","./TextMeshPro.ts","./HtmlParser.ts","./TmpUtils.ts"],(function(t){var e,i,n,o,r,a,s,l,h,u,c,f,p,_,g,d,m,y,b,v,C,T,x,A,L,O,S,z,H;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose,a=t.createClass},function(t){s=t.cclegacy,l=t._decorator,h=t.js,u=t.isValid,c=t.JsonAsset,f=t.HorizontalTextAlignment,p=t.VerticalTextAlignment,_=t.SpriteAtlas,g=t.Material,d=t.Texture2D,m=t.NodeEventType,y=t.Node,b=t.Component,v=t.UITransform,C=t.Sprite,T=t.warnID,x=t.Color,A=t.v2,L=t.CCObject},function(t){O=t.DEV},function(t){S=t.default},function(t){z=t.HtmlTextParser},function(t){H=t.default}],execute:function(){var I,w,E,P,W,D,k,U,R,F,N,X,B,G,M,j,V,Y,J,K,q,Q,Z,$,tt,et;s._RF.push({},"cd6a1T8yVBMCqKxdsw6LjB6","TmpRichText",void 0);var it=l.ccclass,nt=l.property,ot=l.disallowMultiple,rt=l.executeInEditMode,at="RICHTEXT_CHILD",st="RICHTEXT_Image_CHILD",lt=new z,ht=new h.Pool((function(t){return!!u(t.node)}),20),ut=new h.Pool((function(t){return u(t.node)}),10);function ct(t){return{node:new y(t),comp:null,lineCount:0,styleIndex:0,imageOffset:"",clickParam:"",clickHandler:"",type:t}}function ft(t,e,i){var n;t===at?n=ht._get():t===st&&(n=ut._get());var o=(n=n||ct(t)).node;return o||(o=new y(t)),o.hideFlags|=L.Flags.DontSave|L.Flags.HideInHierarchy,t===st?(n.comp=o.getComponent(C)||o.addComponent(C),n.comp.spriteFrame=e,n.comp.type=C.Type.SLICED,n.comp.sizeMode=C.SizeMode.CUSTOM):(n.comp=o.getComponent(S)||o.addComponent(S),i&&(n.comp.customMaterial=i),n.comp.string=e,n.comp.horizontalAlign=f.LEFT,n.comp.verticalAlign=p.TOP,n.comp.underlineHeight=2),o.setPosition(0,0,0),o._uiProps.uiTransformComp.setAnchorPoint(.5,.5),n.node=o,n.lineCount=0,n.styleIndex=0,n.imageOffset="",n.clickParam="",n.clickHandler="",n}t("default",(I=nt({multiline:!0}),w=nt(c),E=nt({tooltip:O,type:c}),P=nt({type:f}),W=nt({type:f}),D=nt({type:p}),k=nt({type:p}),U=nt({range:[0,1024]}),R=nt({tooltip:O}),F=nt(_),N=nt(_),X=nt(g),B=nt({tooltip:O,type:d,readonly:!0}),it(G=ot(G=rt((j=e((M=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"_string",j,o(e)),n(e,"_font",V,o(e)),n(e,"_horizontalAlign",Y,o(e)),n(e,"_verticalAlign",J,o(e)),n(e,"_fontSize",K,o(e)),n(e,"_maxWidth",q,o(e)),n(e,"_lineHeight",Q,o(e)),n(e,"_imageAtlas",Z,o(e)),n(e,"_handleTouchEvent",$,o(e)),n(e,"material",tt,o(e)),n(e,"textures",et,o(e)),e._textArray=[],e._segments=[],e._labelSegmentsCache=[],e._linesWidth=[],e._lineOffsetX=0,e._lineCount=1,e._labelWidth=0,e._labelHeight=0,e._layoutDirty=!0,e._labelChildrenNum=0,e._labelContent=null,e._imageContent=null,e}i(e,t);var s=e.prototype;return s.editorInit=function(){},s.resetInEditor=function(){},s.onRestore=function(){},s.onEnable=function(){this.handleTouchEvent&&this._addEventListeners(),this._onFontLoaded(),this._activateChildren(!0)},s.onDisable=function(){this.handleTouchEvent&&this._removeEventListeners(),this._activateChildren(!1)},s.onLoad=function(){this.node.on(m.LAYER_CHANGED,this._applyLayer,this)},s.onDestroy=function(){for(var t,e=r(this._segments);!(t=e()).done;){var i=t.value;i.node.removeFromParent(),i.type===at?ht.put(i):i.type===st&&ut.put(i)}this.node.off(m.ANCHOR_CHANGED,this._updateRichTextPosition,this),this.node.off(m.LAYER_CHANGED,this._applyLayer,this)},s.start=function(){this._onFontLoaded(),this.node.on(m.ANCHOR_CHANGED,this._updateRichTextPosition,this)},s._addEventListeners=function(){this.node.on(y.EventType.TOUCH_END,this._onTouchEnded,this)},s._removeEventListeners=function(){this.node.off(y.EventType.TOUCH_END,this._onTouchEnded,this)},s._updateLabelSegmentTextAttributes=function(){var t=this;this._segments.forEach((function(e){t._applyTextAttribute(e)}))},s._createFontLabel=function(t){return ft(at,t,this.material)},s._createImage=function(t){return ft(st,t)},s._onFontLoaded=function(){this._layoutDirty=!0,this._updateRichText()},s.SplitLongStringApproximatelyIn2048=function(t,e){var i=[];if(this._calculateSize(e,t).x<2048)i.push(t);else for(var n=t.split("\n"),o=0;o<n.length;o++){if(this._calculateSize(e,n[o]).x<2048)i.push(n[o]);else{var r=this.splitLongStringOver2048(n[o],e);i.push.apply(i,r)}}return i},s.splitLongStringOver2048=function(t,e){for(var i=[],n=t,o=0,r=n.length/2,a=n.substring(o,r),s=n.substring(r),l=this._calculateSize(e,a),h=(this._calculateSize(e,s),1*this.maxWidth);l.x>h;){if((r/=2)<1){r*=2;break}a=a.substring(o,r),s=n.substring(r),l=this._calculateSize(e,a)}for(var u=1e3,c=1;u&&o<t.length;){for(;u&&l.x<h;){var f=H.getEnglishWordPartAtFirst(s);f&&f.length>0&&(c=f[0].length),r+=c,a=n.substring(o,r),s=n.substring(r),l=this._calculateSize(e,a),u--}for(;u&&a.length>=2&&l.x>h;)r-=c,a=n.substring(o,r),l=this._calculateSize(e,a),c=1,u--;if(a.length>=2){var p=H.getEnglishWordPartAtLast(a);p&&p.length>0&&a!==p[0]&&(r-=p[0].length,a=n.substring(o,r))}if(i.push(a),o=r,r+=a.length,a=n.substring(o,r),s=n.substring(r),u--,this._calculateSize(e,s).x<2048){o=t.length,r=t.length,a=s,i.push(a);break}l=this._calculateSize(e,a)}return i},s._measureText=function(t,e){var i=this,n=function(e){return i._calculateSize(t,e).width};return e?n(e):n},s._calculateSize=function(t,e){var i;return 0===this._labelSegmentsCache.length?(i=this._createFontLabel(e),this._labelSegmentsCache.push(i)):(i=this._labelSegmentsCache[0]).node.getComponent(S).string=e,i.styleIndex=t,this._applyTextAttribute(i),i.node._uiProps.uiTransformComp.contentSize},s._onTouchEnded=function(t){for(var e,i=this,n=this.node.getComponents(b),o=function(){var o=e.value,r=o.clickHandler,a=o.clickParam;r&&i._containsTouchLocation(o,t.touch.getUILocation())&&(n.forEach((function(e){var i=e[r];e.enabledInHierarchy&&i&&i.call(e,t,a)})),t.propagationStopped=!0)},a=r(this._segments);!(e=a()).done;)o()},s._containsTouchLocation=function(t,e){var i=t.node.getComponent(v);return!!i&&i.getBoundingBoxToWorld().contains(e)},s._resetContent=function(t){if(t)for(var e=t.children,i=e.length-1;i>=0;i--){var n=e[i];if(n.name===at||n.name===st){n.parent===t?n.parent=null:e.splice(i,1);var o=ct(n.name);o.node=n,n.name===at?(o.comp=n.getComponent(S),ht.put(o)):(o.comp=n.getComponent(C),ut.put(o)),this._labelChildrenNum--}}},s._resetState=function(){this._resetContent(this._labelContent),this._resetContent(this._imageContent),this._segments.length=0,this._labelSegmentsCache.length=0,this._linesWidth.length=0,this._lineOffsetX=0,this._lineCount=1,this._labelWidth=0,this._labelHeight=0,this._layoutDirty=!0},s._activateChildren=function(t){this.node.children.forEach((function(e){for(var i=e.children.length-1;i>=0;i--){var n=e.children[i];n.name!==at&&n.name!==st||(n.active=t)}}))},s._addLabelSegment=function(t,e){var i;if(0===this._labelSegmentsCache.length)i=this._createFontLabel(t);else{var n=(i=this._labelSegmentsCache.pop()).node.getComponent(S);n&&(n.string=t)}var o=i.comp;return o.verticalAlign!==this._verticalAlign&&(o.verticalAlign=this._verticalAlign),i.styleIndex=e,i.lineCount=this._lineCount,i.node._uiProps.uiTransformComp.setAnchorPoint(0,0),i.node.layer=this.node.layer,this.labelContent.insertChild(i.node,this._labelChildrenNum++),this._applyTextAttribute(i),this._segments.push(i),i},s._updateRichTextWithMaxWidth=function(t,e,i){var n=e;if(this._lineOffsetX>0&&n+this._lineOffsetX>this._maxWidth)for(var o=0;this._lineOffsetX<=this._maxWidth;){var r=this._getFirstWordLen(t,o,t.length),a=t.substr(o,r),s=this._measureText(i,a);if(!(this._lineOffsetX+s<=this._maxWidth)){if(o>0){var l=t.substr(0,o);this._addLabelSegment(l,i),t=t.substr(o,t.length),n=this._measureText(i,t)}this._updateLineInfo();break}this._lineOffsetX+=s,o+=r}if(n>this._maxWidth)for(var h=H.fragmentText(t,n,this._maxWidth,this._measureText(i)),u=0;u<h.length;++u){var c=h[u],f=this._addLabelSegment(c,i).node._uiProps.uiTransformComp.contentSize;this._lineOffsetX+=f.width,h.length>1&&u<h.length-1&&this._updateLineInfo()}else this._lineOffsetX+=n,this._addLabelSegment(t,i)},s._isLastComponentCR=function(t){return t.length-1===t.lastIndexOf("\n")},s._updateLineInfo=function(){this._linesWidth.push(this._lineOffsetX),this._lineOffsetX=0,this._lineCount++},s._needsUpdateTextLayout=function(t){if(this._layoutDirty||!this._textArray||!t)return!0;if(this._textArray.length!==t.length)return!0;for(var e=0;e<this._textArray.length;e++){var i=this._textArray[e],n=t[e];if(i.text!==n.text)return!0;var o=i.style,r=n.style;if(o){if(r){if(!!r.outline!=!!o.outline)return!0;if(o.size!==r.size||o.italic!==r.italic||o.isImage!==r.isImage)return!0;if(o.src!==r.src||o.imageAlign!==r.imageAlign||o.imageHeight!==r.imageHeight||o.imageWidth!==r.imageWidth||o.imageOffset!==r.imageOffset)return!0}else if(o.size||o.italic||o.isImage||o.outline)return!0}else if(r&&(r.size||r.italic||r.isImage||r.outline))return!0}return!1},s._addRichTextImageElement=function(t){if(t.style){var e=t.style,i=e.src,n=this._imageAtlas&&i&&this._imageAtlas.getSpriteFrame(i);if(n){var o=this._createImage(n);o.comp;switch(e.imageAlign){case"top":o.node._uiProps.uiTransformComp.setAnchorPoint(0,1);break;case"center":o.node._uiProps.uiTransformComp.setAnchorPoint(0,.5);break;default:o.node._uiProps.uiTransformComp.setAnchorPoint(0,0)}e.imageOffset&&(o.imageOffset=e.imageOffset),o.node.layer=this.node.layer,this.imageContent.insertChild(o.node,this._labelChildrenNum++),this._segments.push(o);var r=n.rect.clone(),a=1,s=r.width,l=r.height,h=e.imageWidth||0,u=e.imageHeight||0;u>0?(s*=a=u/l,l*=a):(s*=a=this._lineHeight/l,l*=a),h>0&&(s=h),this._maxWidth>0?(this._lineOffsetX+s>this._maxWidth&&this._updateLineInfo(),this._lineOffsetX+=s):(this._lineOffsetX+=s,this._lineOffsetX>this._labelWidth&&(this._labelWidth=this._lineOffsetX)),o.node._uiProps.uiTransformComp.setContentSize(s,l),o.lineCount=this._lineCount,o.clickHandler="",o.clickParam="";var c=e.event;c&&(o.clickHandler=c.click,o.clickParam=c.param)}else T(4400)}},s._updateRichText=function(){if(this.enabledInHierarchy){var t=lt.parse(this._string);if(!this._needsUpdateTextLayout(t))return this._textArray=t.slice(),void this._updateLabelSegmentTextAttributes();this._textArray=t.slice(),this._resetState();for(var e,i=!1,n=0;n<this._textArray.length;++n){var o=this._textArray[n],r=o.text;if(void 0!==r){if(""===r){if(o.style&&o.style.isNewLine){this._updateLineInfo();continue}if(o.style&&o.style.isImage&&this._imageAtlas){this._addRichTextImageElement(o);continue}}for(var a=(r=this.SplitLongStringApproximatelyIn2048(r,n).join("\n")).split("\n"),s=0;s<a.length;++s){var l=a[s];if(""!==l)if(i=!1,this._maxWidth>0){var h=this._measureText(n,l);this._updateRichTextWithMaxWidth(l,h,n),a.length>1&&s<a.length-1&&this._updateLineInfo()}else e=this._addLabelSegment(l,n),this._lineOffsetX+=e.node._uiProps.uiTransformComp.width,this._lineOffsetX>this._labelWidth&&(this._labelWidth=this._lineOffsetX),a.length>1&&s<a.length-1&&this._updateLineInfo();else{if(this._isLastComponentCR(r)&&s===a.length-1)continue;this._updateLineInfo(),i=!0}}}}i||this._linesWidth.push(this._lineOffsetX),this._maxWidth>0&&(this._labelWidth=this._maxWidth),this._labelHeight=(this._lineCount+.26)*this._lineHeight,this.node._uiProps.uiTransformComp.setContentSize(this._labelWidth,this._labelHeight),this._updateRichTextPosition(),this._layoutDirty=!1}},s._getFirstWordLen=function(t,e,i){var n=t.charAt(e);if(H.isUnicodeCJK(n)||H.isUnicodeSpace(n))return 1;for(var o=1,r=e+1;r<i&&(n=t.charAt(r),!H.isUnicodeSpace(n)&&!H.isUnicodeCJK(n));++r)o++;return o},s._updateRichTextPosition=function(){for(var t=0,e=1,i=this._lineCount,n=this.node._uiProps.uiTransformComp,o=n.anchorX,r=n.anchorY,a=0;a<this._segments.length;++a){var s=this._segments[a],l=s.lineCount;l>e&&(t=0,e=l);var h=this._labelWidth*(.5*this._horizontalAlign-o);switch(this._horizontalAlign){case f.LEFT:break;case f.CENTER:h-=this._linesWidth[l-1]/2;break;case f.RIGHT:h-=this._linesWidth[l-1]}var u=s.node.position;if(s.node.setPosition(t+h,this._lineHeight*(i-l)-this._labelHeight*r,u.z),l===e){t+=s.node._uiProps.uiTransformComp.width;var c=s.node.getComponent(S);c&&c.richTextDeltaX&&(t+=c.richTextDeltaX)}if(s.node.getComponent(C)){var p=s.node.position.clone(),_=this._lineHeight,g=1.26*this._lineHeight;switch(s.node._uiProps.uiTransformComp.anchorY){case 1:p.y+=_+(g-_)/2;break;case.5:p.y+=g/2;break;default:p.y+=(g-_)/2}if(s.imageOffset){var d=s.imageOffset.split(",");if(1===d.length&&d[0]){var m=parseFloat(d[0]);Number.isInteger(m)&&(p.y+=m)}else if(2===d.length){var y=parseFloat(d[0]),b=parseFloat(d[1]);Number.isInteger(y)&&(p.x+=y),Number.isInteger(b)&&(p.y+=b)}}s.node.position=p}}},s._convertLiteralColorValue=function(t){var e=t.toUpperCase();if(x[e])return x[e];var i=0===t.indexOf("#")?t.substring(1):t,n=parseInt(i.substring(0,2),16)||0,o=parseInt(i.substring(2,4),16)||0,r=parseInt(i.substring(4,6),16)||0,a=parseInt(i.substring(6,8),16);return Number.isNaN(a)&&(a=255),new x(n,o,r,a)},s._applyTextAttribute=function(t){var e,i=t.node.getComponent(S);if(i){var n=t.styleIndex,o=null;this._textArray[n]&&(o=this._textArray[n].style),o&&o.color?i.color=this._convertLiteralColorValue(o.color):i.color=x.WHITE,i.setFont(this.font,this.textures),i.lineHeight=this.lineHeight,i.colorGradient=Boolean(o&&o.colorGradient),i.colorGradient&&(i.colorLB=this._convertLiteralColorValue(o.colorGradient.lb),i.colorRB=this._convertLiteralColorValue(o.colorGradient.rb),i.colorLT=this._convertLiteralColorValue(o.colorGradient.lt),i.colorRT=this._convertLiteralColorValue(o.colorGradient.rt)),o&&o.face?(i.tmpUniform.faceColor=this._convertLiteralColorValue(o.face.color),i.tmpUniform.faceDilate=o.face.dilate,i.tmpUniform.faceSoftness=o.face.softness):(i.tmpUniform.faceColor=x.WHITE,i.tmpUniform.faceDilate=.5,i.tmpUniform.faceSoftness=.01),i.enableItalic=Boolean(o&&o.italic),i.enableUnderline=Boolean(o&&o.underline),i.enableUnderline&&(i.underlineOffset=o.offset||0),i.enableStrikethrough=Boolean(o&&o.strikethrough),i.enableStrikethrough&&(i.strikethroughOffset=o.offset||0),i.tmpUniform.enableOutline=Boolean(o&&o.outline),o&&o.outline&&(i.tmpUniform.outlineColor=this._convertLiteralColorValue(o.outline.color),i.tmpUniform.outlineThickness=o.outline.thickness),i.tmpUniform.enableUnderlay=Boolean(o&&o.underlay),i.tmpUniform.enableUnderlay&&(i.tmpUniform.underlayColor=this._convertLiteralColorValue(o.underlay.color),i.tmpUniform.underlayOffset=A(o.underlay.x,o.underlay.y),i.tmpUniform.underlayDilate=o.underlay.dilate,i.tmpUniform.underlaySoftness=o.underlay.softness),i.tmpUniform.enableGlow=Boolean(o&&o.glow),i.tmpUniform.enableGlow&&(i.tmpUniform.glowColor=this._convertLiteralColorValue(o.glow.color),i.tmpUniform.glowOffset=o.glow.offset,i.tmpUniform.glowInner=o.glow.inner,i.tmpUniform.glowOuter=o.glow.outer,i.tmpUniform.glowPower=o.glow.power),o&&o.size?i.fontSize=o.size:i.fontSize=this.fontSize,i.forceUpdateRenderData(),t.clickHandler="",t.clickParam="";var r=null==(e=o)?void 0:e.event;r&&(t.clickHandler=r.click||"",t.clickParam=r.param||"")}},s._applyLayer=function(){for(var t,e=r(this._segments);!(t=e()).done;){t.value.node.layer=this.node.layer}},a(e,[{key:"string",get:function(){return this._string},set:function(t){this._string!==t&&(this._string=t,this._updateRichText())}},{key:"font",get:function(){return this._font},set:function(t){this._font!==t&&(this._font=t,this._layoutDirty=!0,this._updateRichText())}},{key:"horizontalAlign",get:function(){return this._horizontalAlign},set:function(t){this._horizontalAlign!==t&&(this._horizontalAlign=t,this._layoutDirty=!0,this._updateRichText())}},{key:"verticalAlign",get:function(){return this._verticalAlign},set:function(t){this._verticalAlign!==t&&(this._verticalAlign=t,this._layoutDirty=!0,this._updateRichText())}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this._layoutDirty=!0,this._updateRichText())}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this._layoutDirty=!0,this._updateRichText())}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this._layoutDirty=!0,this._updateRichText())}},{key:"imageAtlas",get:function(){return this._imageAtlas},set:function(t){this._imageAtlas!==t&&(this._imageAtlas=t,this._layoutDirty=!0,this._updateRichText())}},{key:"handleTouchEvent",get:function(){return this._handleTouchEvent},set:function(t){this._handleTouchEvent!==t&&(this._handleTouchEvent=t,this.enabledInHierarchy&&(this.handleTouchEvent?this._addEventListeners():this._removeEventListeners()))}},{key:"labelContent",get:function(){if(!this._labelContent){var t,e="TMP_LABEL_CONTENT";this._labelContent=null!=(t=this.node.getChildByName(e))?t:new y(e),this._labelContent.hideFlags|=L.Flags.DontSave|L.Flags.HideInHierarchy,this.node.insertChild(this._labelContent,this._imageContent?1:0)}return this._labelContent}},{key:"imageContent",get:function(){if(!this._imageContent){var t,e="TMP_IMAGE_CONTENT";this._imageContent=null!=(t=this.node.getChildByName(e))?t:new y(e),this._imageContent.hideFlags|=L.Flags.DontSave|L.Flags.HideInHierarchy,this.node.insertChild(this._imageContent,0)}return this._imageContent}}]),e}(b)).prototype,"_string",[nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),e(M.prototype,"string",[I],Object.getOwnPropertyDescriptor(M.prototype,"string"),M.prototype),V=e(M.prototype,"_font",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),e(M.prototype,"font",[E],Object.getOwnPropertyDescriptor(M.prototype,"font"),M.prototype),Y=e(M.prototype,"_horizontalAlign",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return f.LEFT}}),e(M.prototype,"horizontalAlign",[W],Object.getOwnPropertyDescriptor(M.prototype,"horizontalAlign"),M.prototype),J=e(M.prototype,"_verticalAlign",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.TOP}}),e(M.prototype,"verticalAlign",[k],Object.getOwnPropertyDescriptor(M.prototype,"verticalAlign"),M.prototype),K=e(M.prototype,"_fontSize",[nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 32}}),e(M.prototype,"fontSize",[U],Object.getOwnPropertyDescriptor(M.prototype,"fontSize"),M.prototype),q=e(M.prototype,"_maxWidth",[nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(M.prototype,"maxWidth",[R],Object.getOwnPropertyDescriptor(M.prototype,"maxWidth"),M.prototype),Q=e(M.prototype,"_lineHeight",[nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 32}}),e(M.prototype,"lineHeight",[nt],Object.getOwnPropertyDescriptor(M.prototype,"lineHeight"),M.prototype),Z=e(M.prototype,"_imageAtlas",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),e(M.prototype,"imageAtlas",[N],Object.getOwnPropertyDescriptor(M.prototype,"imageAtlas"),M.prototype),$=e(M.prototype,"_handleTouchEvent",[nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),e(M.prototype,"handleTouchEvent",[nt],Object.getOwnPropertyDescriptor(M.prototype,"handleTouchEvent"),M.prototype),tt=e(M.prototype,"material",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=e(M.prototype,"textures",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=M))||G)||G)||G));s._RF.pop()}}}));

System.register("chunks:///_virtual/TmpUtils.ts",["cc"],(function(t){var u;return{setters:[function(t){u=t.cclegacy}],execute:function(){u._RF.push({},"a0698HuGsRM85nr22PDZ+bP","TmpUtils",void 0);var e=/([a-zA-Z0-9ÄÖÜäöüßéèçàùêâîôûа-яА-ЯЁё]+|\S)/,n=/^[!,.:;'}\]%\?>、‘“》？。，！]/,r=/([a-zA-Z0-9ÄÖÜäöüßéèçàùêâîôûаíìÍÌïÁÀáàÉÈÒÓòóŐőÙÚŰúűñÑæÆœŒÃÂãÔõěščřžýáíéóúůťďňĚŠČŘŽÁÍÉÓÚŤżźśóńłęćąŻŹŚÓŃŁĘĆĄ-яА-ЯЁёáàảạãăắằẳẵặâấầẩẫậéèẻẽẹêếềểễệiíìỉĩịóòỏõọôốồổỗộơớờởỡợúùủũụưứừửữựýỳỷỹỵđÁÀẢẠÃĂẮẰẲẴẶÂẤẦẨẪẬÉÈẺẼẸÊẾỀỂỄỆIÍÌỈĨỊÓÒỎÕỌÔỐỒỔỖỘƠỚỜỞỠỢÚÙỦŨỤƯỨỪỬỮỰÝỲỶỸỴĐ]+|\S)$/,i=/[a-zA-Z0-9ÄÖÜäöüßéèçàùêâîôûаíìÍÌïÁÀáàÉÈÒÓòóŐőÙÚŰúűñÑæÆœŒÃÂãÔõěščřžýáíéóúůťďňĚŠČŘŽÁÍÉÓÚŤżźśóńłęćąŻŹŚÓŃŁĘĆĄ-яА-ЯЁёáàảạãăắằẳẵặâấầẩẫậéèẻẽẹêếềểễệiíìỉĩịóòỏõọôốồổỗộơớờởỡợúùủũụưứừửữựýỳỷỹỵđÁÀẢẠÃĂẮẰẲẴẶÂẤẦẨẪẬÉÈẺẼẸÊẾỀỂỄỆIÍÌỈĨỊÓÒỎÕỌÔỐỒỔỖỘƠỚỜỞỠỢÚÙỦŨỤƯỨỪỬỮỰÝỲỶỸỴĐ]+$/,c=/^[a-zA-Z0-9ÄÖÜäöüßéèçàùêâîôûаíìÍÌïÁÀáàÉÈÒÓòóŐőÙÚŰúűñÑæÆœŒÃÂãÔõěščřžýáíéóúůťďňĚŠČŘŽÁÍÉÓÚŤżźśóńłęćąŻŹŚÓŃŁĘĆĄ-яА-ЯЁёáàảạãăắằẳẵặâấầẩẫậéèẻẽẹêếềểễệiíìỉĩịóòỏõọôốồổỗộơớờởỡợúùủũụưứừửữựýỳỷỹỵđÁÀẢẠÃĂẮẰẲẴẶÂẤẦẨẪẬÉÈẺẼẸÊẾỀỂỄỆIÍÌỈĨỊÓÒỎÕỌÔỐỒỔỖỘƠỚỜỞỠỢÚÙỦŨỤƯỨỪỬỮỰÝỲỶỸỴĐ]/;function s(t,u,e){var n=u,r=e,i=t[u];if(i>="\udc00"&&i<="\udfff"&&n--,void 0!==e)if(e-1!==u){var c=t[e-1];c>="\ud800"&&c<="\udbff"&&r--}else i>="\ud800"&&i<="\udbff"&&r++;return t.substring(n,r)}t("default",function(){function t(){}return t.load=function(t){return new Promise((function(t,u){t(null)}))},t.waitCmpt=function(t,u){return new Promise((function(e,n){t.scheduleOnce((function(){e()}),u)}))},t.isUnicodeCJK=function(t){return/^[\u4E00-\u9FFF\u3400-\u4DFF]+$/.test(t)||/[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]|[\u4E00-\u9FAF]|[\u2605-\u2606]|[\u2190-\u2195]|\u203B/g.test(t)||/^[\u1100-\u11FF]|[\u3130-\u318F]|[\uA960-\uA97F]|[\uAC00-\uD7AF]|[\uD7B0-\uD7FF]+$/.test(t)},t.isUnicodeSpace=function(t){var u=t.charCodeAt(0);return u>=9&&u<=13||32===u||133===u||160===u||5760===u||u>=8192&&u<=8202||8232===u||8233===u||8239===u||8287===u||12288===u},t.getEnglishWordPartAtFirst=function(t){return c.exec(t)},t.getEnglishWordPartAtLast=function(t){return i.exec(t)},t.fragmentText=function(t,u,o,f){var a=[];if(0===t.length||o<0)return a.push(""),a;for(var F=t;u>o&&F.length>1;){for(var l=F.length*(o/u)|0,h=s(F,l),d=u-f(h),g=h,v=0,A=0;d>o&&A++<100;)l*=o/d,d=u-f(h=s(F,l|=0));for(A=0;h&&d<=o&&A++<100;){var m=e.exec(h);g=h,d=u-f(h=s(F,l+=v=m?m[0].length:1))}0===(l-=v)?(l=1,g=s(F,1)):1===l&&F[0]>="\ud800"&&F[0]<="\udbff"&&(l=2,g=s(F,2));var p=s(F,0,l),x=void 0;n.test(g||h)&&(0===(l-=(x=r.exec(p))?x[0].length:0)&&(l=1),g=s(F,l),p=s(F,0,l)),c.test(g)&&(x=i.exec(p))&&p!==x[0]&&(g=s(F,l-=x[0].length),p=s(F,0,l)),(0===a.length||(p=p.trim()).length>0)&&a.push(p),u=f(F=g||h)}return(0===a.length||(F=F.trim()).length>0)&&a.push(F),a},t}()).TMP_MAT="textMeshPro/resources/shader/materials/textMeshPro.mtl",u._RF.pop()}}}));

System.register("chunks:///_virtual/TweenUitls.ts",["cc"],(function(e){var n,t;return{setters:[function(e){n=e.cclegacy,t=e.TweenSystem}],execute:function(){e("killTweenOf",(function(e){t.instance.ActionManager.removeAllActionsFromTarget(e)})),n._RF.push({},"83f2bQsmBdHKJdjQ6lismW4","TweenUitls",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/User.ts",["cc"],(function(e){var s;return{setters:[function(e){s=e.cclegacy}],execute:function(){s._RF.push({},"15cddBbPL5Cs7aOgbWehaPQ","User",void 0);e("User",(function(){this.life=100,this.score=0}));s._RF.pop()}}}));

System.register("chunks:///_virtual/VirtualCamera.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,i,t,n,a,o,l;return{setters:[function(e){r=e.applyDecoratedDescriptor,i=e.initializerDefineProperty,t=e.inheritsLoose,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Component}],execute:function(){var u,c,s,p,f,b,h,y,m,v;a._RF.push({},"8c02aOiFCJDbLaGxNIz/HjF","VirtualCamera",void 0);var g=o.ccclass,z=o.property,w=g("Lens")((s=r((c=function(){i(this,"fov",s,this),i(this,"near",p,this),i(this,"far",f,this)}).prototype,"fov",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),p=r(c.prototype,"near",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),f=r(c.prototype,"far",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e3}}),u=c))||u;e("VirtualCamera",(b=g("VirtualCamera"),h=z({visible:!1}),b((v=r((m=function(e){function r(){for(var r,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a))||this,i(r,"lens",v,n(r)),r}return t(r,e),r}(l)).prototype,"lens",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new w}}),y=m))||y));a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});