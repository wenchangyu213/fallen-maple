System.register("chunks:///_virtual/audioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./storageManager.ts","./resourceUtil.ts","./lodash.ts"],(function(o){var s,i,u,t,n,e,a,r;return{setters:[function(o){s=o.createClass},function(o){i=o.cclegacy,u=o._decorator,t=o.AudioSource,n=o.AudioClip},function(o){e=o.StorageManager},function(o){a=o.resourceUtil},function(o){r=o.Lodash}],execute:function(){var c,d;i._RF.push({},"de0e8WLqVNNv6s86nwtTHUX","audioManager",void 0);var h=u.ccclass;u.property,o("AudioManager",h("AudioManager")(((d=function(){function o(){this._persistRootNode=null,this._audioSources=[],this.dictWeaponSoundIndex={},this.musicVolume=.8,this.soundVolume=1,this.audios={},this.arrSound=[]}var i=o.prototype;return i.init=function(o){this._persistRootNode=o;var s=this.getAudioSetting(!0),i=this.getAudioSetting(!1);this.musicVolume=s?.8:0,this.soundVolume=i?1:0},i._getAudioSource=function(o){for(var s,i=0;i<this._audioSources.length;++i){var u=this._audioSources[i];if(!u.playing){s=u;break}}return s||(s=this._persistRootNode.addComponent(t),this._audioSources.push(s)),s.node.off(t.EventType.ENDED),s.clip=o,s.currentTime=0,s},i.getAudioSetting=function(o){var s;return!(s=o?e.instance.getGlobalData("music"):e.instance.getGlobalData("sound"))||"true"===s},i.playMusic=function(o,s){var i=this,u="audio/music/"+o;a.loadRes(u,n,(function(u,t){var n=i._getAudioSource(t),e={source:n,isMusic:!0};void 0===i.audios[o]&&(i.audios[o]=[]),i.audios[o].push(e),n.volume=i.musicVolume,n.loop=s,n.play()}))},i.playSound=function(o,s){var i=this;if(void 0===s&&(s=!1),this.soundVolume){a.loadRes("audio/sound/"+o,n,(function(u,n){var e=i._getAudioSource(n),a={source:e,isMusic:!1};i.arrSound.push(a),s&&(void 0===i.audios[o]&&(i.audios[o]=[]),i.audios[o].push(a)),e.volume=i.soundVolume,e.loop=s,e.play(),e.node.on(t.EventType.ENDED,(function(){r.remove(i.arrSound,(function(o){return o.source===a.source}))}))}))}},i.stop=function(o){if(this.audios.hasOwnProperty(o)){var s=this.audios[o].pop();s&&s.source.stop()}},i.stopAll=function(){for(var o in this.audios){if(this.audios.hasOwnProperty(o))this.audios[o].forEach((function(o){o.source.stop()})),this.audios[o]=[]}},i.setMusic=function(o){var s=this;for(var i in this.musicVolume=o,this.audios){if(this.audios.hasOwnProperty(i)&&this.audios[i].isMusic)this.audios[i].forEach((function(o){o.source.volume=s.musicVolume}))}},i.pauseAll=function(){for(var o in console.log("pause all music!!!"),this.audios){if(this.audios.hasOwnProperty(o))this.audios[o].forEach((function(o){o.source.pause()}))}},i.resumeAll=function(){for(var o in this.audios){if(this.audios.hasOwnProperty(o))this.audios[o].forEach((function(o){o.source.play()}))}},i.openMusic=function(){this.setMusic(.8),e.instance.setGlobalData("music","true")},i.closeMusic=function(){this.setMusic(0),e.instance.setGlobalData("music","false")},i.openSound=function(){this.setSound(1),e.instance.setGlobalData("sound","true")},i.closeSound=function(){this.setSound(0),e.instance.setGlobalData("sound","false")},i.setSound=function(o){var s=this;for(var i in this.soundVolume=o,this.audios){if(this.audios.hasOwnProperty(i)&&!this.audios[i].isMusic)this.audios[i].forEach((function(o){o.source.volume=s.soundVolume}))}for(var u=0;u<this.arrSound.length;u++){this.arrSound[u].source.volume=this.soundVolume}},i.stopSingleSound=function(o){if(this.audios.hasOwnProperty(o)&&!this.audios[o].isMusic){var s=this.audios[o].pop();s&&s.source.stop()}},i.resumeSingleSound=function(o){this.audios.hasOwnProperty(o)&&!this.audios[o].isMusic&&this.audios[o].forEach((function(o){o.source.play()}))},i.pauseSingleSound=function(o){this.audios.hasOwnProperty(o)&&!this.audios[o].isMusic&&this.audios[o].forEach((function(o){o.source.pause()}))},s(o,null,[{key:"instance",get:function(){return this._instance||(this._instance=new o),this._instance}}]),o}())._instance=void 0,c=d))||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/bg.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resourceUtil.ts"],(function(e){var t,o,n,r,i,c,s,a,u,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,c=e._decorator,s=e.Node,a=e.instantiate,u=e.Component},function(e){l=e.resourceUtil}],execute:function(){var p,f,h,g,d;i._RF.push({},"adbd78xyv1PoKOhimL/au7s","bg",void 0);var y=c.ccclass,b=c.property;e("bg",(p=y("bg"),f=b(s),p((d=t((g=function(e){function t(){for(var t,o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return t=e.call.apply(e,[this].concat(i))||this,n(t,"ndChooseBg",d,r(t)),t}return o(t,e),t.prototype.start=function(){var e=this;l.loadEffectRes("chooseBgBox/chooseBgBox").then((function(t){a(t).parent=e.node,e.ndChooseBg.active=!1}))},t}(u)).prototype,"ndChooseBg",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=g))||h));i._RF.pop()}}}));

System.register("chunks:///_virtual/btnAdapter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts"],(function(e){var t,n,i,r,o,a,c,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,c=e.Button,l=e.Component},function(e){u=e.AudioManager}],execute:function(){var p,s,d,f,b,m,y,v,S,h,g,k,P;o._RF.push({},"7c544DOUeVDCI5/EjSEfHhm","btnAdapter",void 0);var C=a.ccclass,A=a.property,w=a.menu,z=a.requireComponent,D=a.disallowMultiple;e("btnAdapter",(p=C("btnAdapter"),s=w("自定义组件/btnAdapter"),d=z(c),f=A({tooltip:"点击后是否播放点击音效"}),b=A({tooltip:"点击音效名"}),m=A({tooltip:"是否禁止快速二次点击"}),y=A({tooltip:"点击后多久才能再次点击,仅isPreventSecondClick为true生效"}),p(v=s(v=d(v=D((h=t((S=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"isPlaySound",h,r(t)),i(t,"clickSoundName",g,r(t)),i(t,"isPreventSecondClick",k,r(t)),i(t,"preventTime",P,r(t)),t}return n(t,e),t.prototype.start=function(){var e=this,t=this.node.getComponent(c);this.node.on("click",(function(){e.isPreventSecondClick&&(t.interactable=!1,e.scheduleOnce((function(){t.node&&(t.interactable=!0)}),e.preventTime)),e.isPlaySound&&u.instance.playSound(e.clickSoundName,!1)}))},t}(l)).prototype,"isPlaySound",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),g=t(S.prototype,"clickSoundName",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"click"}}),k=t(S.prototype,"isPreventSecondClick",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),P=t(S.prototype,"preventTime",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),v=S))||v)||v)||v)||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/choose.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts","./clientEvent.ts","./constant.ts","./poolManager.ts","./uiManager.ts","./LanguageData.ts"],(function(i){var n,e,t,o,s,a,l,r,c,u,h,d,p,g,E,f,_,m,b,N,L,T,A,O;return{setters:[function(i){n=i.applyDecoratedDescriptor,e=i.inheritsLoose,t=i.initializerDefineProperty,o=i.assertThisInitialized},function(i){s=i.cclegacy,a=i.Color,l=i._decorator,r=i.Prefab,c=i.SpriteFrame,u=i.SpriteComponent,h=i.AnimationComponent,d=i.Node,p=i.Label,g=i.find,E=i.ColliderComponent,f=i.Component},function(i){_=i.AudioManager},function(i){m=i.ClientEvent},function(i){b=i.constant},function(i){N=i.PoolManager},function(i){L=i.UIManager},function(i){T=i._language,A=i.init,O=i.updateSceneRenderers}],execute:function(){var S,y,C,M,I,D,w,v,z,G,H,U,B,F,P,k,R,Z,V,W,j,x,J,q,K,Q,X;s._RF.push({},"4daa4LnLMZJ97/46rPGrVpI","choose",void 0);var Y={NONE:new a(255,255,255),CHOOSE:new a(0,0,0)},$=l.ccclass,ii=l.property;i("Choose",(S=$("Choose"),y=ii(r),C=ii(r),M=ii(c),I=ii(c),D=ii(u),w=ii(h),v=ii(h),z=ii(h),G=ii(h),H=ii(d),U=ii(p),B=ii(p),S((k=n((P=function(i){function n(){for(var n,e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return n=i.call.apply(i,[this].concat(s))||this,t(n,"pfEndless",k,o(n)),t(n,"pfLimitTime",R,o(n)),t(n,"sfCloseAudio",Z,o(n)),t(n,"sfOpenAudio",V,o(n)),t(n,"spIcon",W,o(n)),t(n,"aniChoose",j,o(n)),t(n,"aniEndless",x,o(n)),t(n,"aniLimitTime",J,o(n)),t(n,"aniSwitch",q,o(n)),t(n,"dotNode",K,o(n)),t(n,"languageZhLabel",Q,o(n)),t(n,"languageEnLabel",X,o(n)),n._ndEndless=null,n._ndLimitTime=null,n._colliderEndless=null,n._colliderLimitTime=null,n._isMusicOpen=!1,n}e(n,i);var s=n.prototype;return s.onEnable=function(){m.on(b.EVENT_NAME.REFRESH_AUDIO_STATE,this._refreshAudioState,this)},s.onDisable=function(){m.off(b.EVENT_NAME.REFRESH_AUDIO_STATE,this._refreshAudioState,this)},s._initLanguage=function(){var i=this.dotNode.position;T===b.I18_LANGUAGE.ENGLISH?(this.dotNode.setPosition(27,i.y,i.z),this.languageZhLabel.color=Y.NONE,this.languageEnLabel.color=Y.CHOOSE):(this.dotNode.setPosition(-27,i.y,i.z),this.languageZhLabel.color=Y.CHOOSE,this.languageEnLabel.color=Y.NONE)},s.changeLanguage=function(){var i,n=this.dotNode.position;T===b.I18_LANGUAGE.CHINESE?(i=b.I18_LANGUAGE.ENGLISH,this.dotNode.setPosition(27,n.y,n.z),this.languageZhLabel.color=Y.NONE,this.languageEnLabel.color=Y.CHOOSE):(i=b.I18_LANGUAGE.CHINESE,this.dotNode.setPosition(-27,n.y,n.z),this.languageZhLabel.color=Y.CHOOSE,this.languageEnLabel.color=Y.NONE),A(i),O()},s.show=function(){var i=this;this._initLanguage(),O(),this.aniChoose.play(),this.aniChoose.once(h.EventType.FINISHED,(function(){i._ndEndless=N.instance.getNode(i.pfEndless,g("fightManager")),i._ndLimitTime=N.instance.getNode(i.pfLimitTime,g("fightManager")),i._ndEndless.setWorldPosition(-.65,.1,0),i._ndLimitTime.setWorldPosition(.65,.1,0),i._ndEndless.on("onTrigger",i._onTrigger,i),i._ndLimitTime.on("onTrigger",i._onTrigger,i),i._colliderEndless=i._ndEndless.getComponent(E),i._colliderLimitTime=i._ndLimitTime.getComponent(E),i._colliderLimitTime.enabled=!0,i._colliderEndless.enabled=!0})),this.aniLimitTime.play(),this.aniEndless.play(),this.aniSwitch.play(),_.instance.stopAll(),_.instance.playMusic(b.AUDIO_SOUND.MAIN_PANEL_BGM,!0),this._isMusicOpen=_.instance.getAudioSetting(!0),this.spIcon.spriteFrame=this._isMusicOpen?this.sfOpenAudio:this.sfCloseAudio},s.onBtnEndlessClick=function(){this._hideDialog((function(){L.instance.hideDialog("choose/choose"),m.dispatchEvent(b.EVENT_NAME.ON_GAME_START,b.GAME_MODE.ENDLESS)})),_.instance.playSound(b.AUDIO_SOUND.BTN,!1)},s.onBtnLimitTimeClick=function(){this._hideDialog((function(){L.instance.hideDialog("choose/choose"),m.dispatchEvent(b.EVENT_NAME.ON_GAME_START,b.GAME_MODE.LIMIT_TIME)})),_.instance.playSound(b.AUDIO_SOUND.BTN,!1)},s._hideDialog=function(i){this._ndEndless.off("onTrigger",this._onTrigger,this),this._ndLimitTime.off("onTrigger",this._onTrigger,this),N.instance.putNode(this._ndEndless),N.instance.putNode(this._ndLimitTime),this.aniChoose.play("chooseNewOut"),this.aniChoose.once(h.EventType.FINISHED,(function(){L.instance.hideDialog("choose/choose"),i()}))},s._onTrigger=function(i){var n=this,e=this._colliderEndless,t="chooseBtn07Click",o=this.aniEndless,s=this.onBtnEndlessClick.bind(this);i.name===this._ndLimitTime.name&&(t="chooseBtn08Click",o=this.aniLimitTime,s=this.onBtnLimitTimeClick.bind(this),e=this._colliderLimitTime),e.enabled&&(this._colliderLimitTime.enabled=!1,this._colliderEndless.enabled=!1,o.play(t),o.once(h.EventType.FINISHED,(function(){n.aniSwitch.play("btnAnimationOut")})),s())},s.onSwitchBtnClick=function(){this.aniSwitch.play("btnAnimationClick"),_.instance.playSound(b.AUDIO_SOUND.BTN,!1),this._isMusicOpen=!this._isMusicOpen,this._isMusicOpen?(this.spIcon.spriteFrame=this.sfOpenAudio,_.instance.openMusic(),_.instance.openSound()):(_.instance.closeMusic(),_.instance.closeSound(),this.spIcon.spriteFrame=this.sfCloseAudio)},s._refreshAudioState=function(){this._isMusicOpen=_.instance.getAudioSetting(!0),this.spIcon.spriteFrame=this._isMusicOpen?this.sfOpenAudio:this.sfCloseAudio},n}(f)).prototype,"pfEndless",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=n(P.prototype,"pfLimitTime",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=n(P.prototype,"sfCloseAudio",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=n(P.prototype,"sfOpenAudio",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=n(P.prototype,"spIcon",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=n(P.prototype,"aniChoose",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=n(P.prototype,"aniEndless",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=n(P.prototype,"aniLimitTime",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=n(P.prototype,"aniSwitch",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=n(P.prototype,"dotNode",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=n(P.prototype,"languageZhLabel",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=n(P.prototype,"languageEnLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=P))||F));s._RF.pop()}}}));

System.register("chunks:///_virtual/clientEvent.ts",["cc"],(function(n){var r,e;return{setters:[function(n){r=n.cclegacy,e=n._decorator}],execute:function(){var t,a;r._RF.push({},"479c11i9b5J/KZjUPhmfv/R","clientEvent",void 0);var c=e.ccclass;e.property,n("ClientEvent",c("ClientEvent")(((a=function(){function n(){}return n.on=function(r,e,t){var a={handler:e,target:t},c=n._handlers[r];c||(c=[],n._handlers[r]=c);for(var l=0;l<c.length;l++)if(!c[l])return c[l]=a,l;return c.push(a),c.length},n.off=function(r,e,t){var a=n._handlers[r];if(a)for(var c=0;c<a.length;c++){var l=a[c];if(l.handler===e&&(!t||t===l.target)){a.splice(c,1);break}}},n.dispatchEvent=function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),a=1;a<e;a++)t[a-1]=arguments[a];var c,l=n._handlers[r],i=[];for(c=1;c<arguments.length;c++)i.push(arguments[c]);if(l)for(c=0;c<l.length;c++){var h=l[c];h.handler&&h.handler.apply(h.target,i)}},n}())._handlers={},t=a))||t);r._RF.pop()}}}));

System.register("chunks:///_virtual/constant.ts",["cc"],(function(E){var _;return{setters:[function(E){_=E.cclegacy}],execute:function(){_._RF.push({},"56aa7GsRf1HKZBMRHWbrpU8","constant",void 0);var T=E("constant",(function(){}));T.GAME_NAME="fruit",T.GAME_VERSION="1.0.1",T.GAME_FRAME=60,T.GAME_INIT_FRAME=60,T.GAME_NAME_CH="切水果",T.LOCAL_CACHE={PLAYER:"player",SETTINGS:"settings",DATA_VERSION:"dataVersion",ACCOUNT:"account",HISTORY:"history",BAG:"bag"},T.ZORDER={DIALOG:100,REWARD:900,WAITING:998,TIPS:999},T.AUDIO_SOUND={GAME_BGM:"gameBGM",MAIN_PANEL_BGM:"mainPanelBGM",DURIAN_FLY:"durianFly",DURIAN_EXPLODE:"durianExplode",BOMB_FLY:"bombFly",BOMB_EXPLODE:"bombExplode",LAUNCH_FRUIT:"launchFruit",FRUIT_DROP:"fruitDrop",BTN:"btn",COUNTDOWN:"countdown",HIT:"hit",TIME_OVER:"timeOver",SETTLEMENT:"settlement",SETTLEMENT_SCORE:"settlementScore",LINE:"line",CUT_FRUIT_1:"cutFruit1",CUT_FRUIT_2:"cutFruit2"},T.GAME_MODE={LIMIT_TIME:0,ENDLESS:1},T.LIMIT_TIME=60,T.SCORE_TYPE={NORMAL:0,HIT_COMBO:1,BOMB:2,PRECISE_HIT:3,HIT_SPECIAL:4,NO_HIT_FRUIT:5},T.DURIAN_FIRST_TIME=50,T.DURIAN_NEXT_TIME=60,T.FRUIT_TYPE={NORMAL:0,BOMB:1,SPECIAL:2},T.TIP_TYPE={MORE_HIT:0,ACCURATE_HIT:1,SPECIAL_HIT_EXPLODE:2,BOMB_HIT:3},T.GAME_DIFFICULTY=[5,15,35,60],T.DESIGN_RESOLUTION={WIDTH:1280,HEIGHT:720},T.EVENT_NAME={ON_GAME_START:"onGameStart",ON_GAME_END:"onGameEnd",ON_GAME_PAUSE:"onGamePause",ON_GAME_RESUME:"onGameResume",ON_GAME_STOP:"onGameStop",ON_GAME_SPEED_CHANGE:"onGameSpeedChange",ON_SETTLEMENT_SHOW:"onSettlementShow",ON_GET_SCORE:"onGetScore",ON_DURIAN_ENTER:"onDurianEnter",REFRESH_AUDIO_STATE:"refreshAudioState"},T.INTERVAL_PER_LAYER_DISTANCE=.4,T.INTERVAL_PER_LAYER_FORCE=15,T.LOGIN_TIME=0,T.I18_LANGUAGE={ENGLISH:"en",CHINESE:"zh"},_._RF.pop()}}}));

System.register("chunks:///_virtual/csvManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n;return{setters:[function(e){t=e.createClass},function(e){r=e.cclegacy,n=e._decorator}],execute:function(){var i,s;r._RF.push({},"0f6730qIuVM+qjWAIfum3Hv","csvManager",void 0);var u=n.ccclass,a=(n.property,[",",";","\t","|","^"]),o=["\r\n","\r","\n"],l=function(e,t,r,n){return r instanceof Array?"number"===r[t]?Number(n[t]):"boolean"===r[t]?"true"===n[t]||"t"===n[t]||"1"===n[t]:n[t]:isNaN(Number(e))?"false"==e||"true"==e||"t"==e||"f"==e?"true"===n[t]||"t"===n[t]||"1"===n[t]:n[t]:Number(n[t])},c={STANDARD_DECODE_OPTS:{skip:0,limit:!1,header:!1,cast:!1,comment:""},STANDARD_ENCODE_OPTS:{delimiter:a[0],newline:o[0],skip:0,limit:!1,header:!1},quoteMark:'"',doubleQuoteMark:'""',quoteRegex:/"/g,assign:function(){for(var e=Array.prototype.slice.call(arguments),t=e[0],r=e.slice(1),n=0,i=r.length;n<i;n++)for(var s in r[n])t[s]=r[n][s];return t},map:function(e,t){for(var r=[],n=0,i=e.length;n<i;n++)r[n]=t(e[n],n);return r},getType:function(e){return Object.prototype.toString.call(e).slice(8,-1)},getLimit:function(e,t){return!1===e?t:e},buildObjectConstructor:function(e,t,r){return function(n){var i=new Object,s=function(e,t){return i[e]=t};return r?e.forEach((function(e,i){s(e,l(t[i],i,r,n))})):e.forEach((function(e,r){s(e,l(t[r],r,null,n))})),i}},buildArrayConstructor:function(e,t,r){return function(n){var i=new Array(t.length),s=function(e,t){return i[e]=t};return r?e.forEach((function(e,i){s(e,l(t[i],i,r,n))})):e.forEach((function(e,r){s(e,l(t[r],r,null,n))})),i}},frequency:function(e,t,r){void 0===r&&(r=!1);for(var n=0,i=0,s=this.getLimit(r,e.length);i<s&&-1!==(i=e.indexOf(t,i));)i+=1,n++;return n},mostFrequent:function(e,t,r){for(var n,i=t.length-1;i>=0;i--)this.frequency(e,t[i],r)>0&&(n=t[i]);return n||t[0]},unsafeParse:function(e,t,r){var n,i,s=e.split(t.newline);function u(e){var r=e.shift();if(r.indexOf('"')>=0){for(var n=0,i=0,s=0;e.length>0&&(-1!==(n=r.indexOf('"',i))||s%2!=0);)-1!==n?(i=n+1,s++):r=r+t.newline+e.shift();var u,a=[],o=0,l=0,c=0,h=r.length;for(var f in r)if(r.hasOwnProperty(f)){var d=parseInt(f),v=r[f];0===d&&'"'===v&&(o++,l=1),'"'===v&&(o++,r[d-1]===t.delimiter&&l===d&&l++),'"'===v&&o%2==0&&(r[d+1]!==t.delimiter&&d+1!==h||(c=d,u=r.substring(l,c),a.push(u),c=l=c+2)),v===t.delimiter&&o%2==0&&((c=d)>l?(u=r.substring(l,c),a.push(u),c=l=c+1):c===l&&(a.push(""),c=l=c+1))}return(c=h)>=l&&(u=r.substring(l,c),a.push(u)),a}return r.split(t.delimiter)}for(t.skip>0&&s.splice(t.skip),t.header?(!0===t.header?(t.comment=u(s),t.cast=u(s),n=u(s)):"Array"===this.getType(t.header)&&(n=t.header),i=this.buildObjectConstructor(n,s[0].split(t.delimiter),t.cast)):i=this.buildArrayConstructor(n,s[0].split(t.delimiter),t.cast);s.length>0;){var a=u(s);a.length>1&&r(i(a),n[0])}return!0},safeParse:function(e,t,r){t.delimiter;var n=t.newline,i=e.split(n);return t.skip>0&&i.splice(t.skip),!0},encodeCells:function(e,t,r){for(var n=e.slice(0),i=0,s=n.length;i<s;i++)-1!==n[i].indexOf(this.quoteMark)&&(n[i]=n[i].replace(this.quoteRegex,this.doubleQuoteMark)),-1===n[i].indexOf(t)&&-1===n[i].indexOf(r)||(n[i]=this.quoteMark+n[i]+this.quoteMark);return n.join(t)},encodeArrays:function(e,t,r){var n=t.delimiter,i=t.newline;t.header&&"Array"===this.getType(t.header)&&r(this.encodeCells(t.header,n,i));for(var s=0,u=this.getLimit(t.limit,e.length);s<u;s++)r(this.encodeCells(e[s],n,i));return!0},encodeObjects:function(e,t,r){var n,i,s=t.delimiter,u=t.newline;for(var a in n=[],i=[],e[0])n.push(a),i.push(e[0][a]);!0===t.header?r(this.encodeCells(n,s,u)):"Array"===this.getType(t.header)&&r(this.encodeCells(t.header,s,u)),r(this.encodeCells(i,s));for(var o=1,l=this.getLimit(t.limit,e.length);o<l;o++){i=[];for(var c=0,h=n.length;c<h;c++)i.push(e[o][n[c]]);r(this.encodeCells(i,s,u))}return!0},parse:function(e,t,r){var n;if("Function"===this.getType(t)?(r=t,t={}):"Function"!==this.getType(r)?r=(n=[]).push.bind(n):n=[],t=this.assign({},this.STANDARD_DECODE_OPTS,t),this.opts=t,!t.delimiter||!t.newline){var i=Math.min(48,Math.floor(e.length/20),e.length);t.delimiter=t.delimiter||this.mostFrequent(e,a,i),t.newline=t.newline||this.mostFrequent(e,o,i)}return this.unsafeParse(e,t,r)&&(!(n.length>0)||n)},encode:function(e,t,r){var n;return"Function"===this.getType(t)?(r=t,t={}):"Function"!==this.getType(r)&&(r=(n=[]).push.bind(n)),(t=this.assign({},this.STANDARD_ENCODE_OPTS,t)).skip>0&&(e=e.slice(t.skip)),("Array"===this.getType(e[0])?this.encodeArrays:this.encodeObjects)(e,t,r)&&(!(n.length>0)||n.join(t.newline))}};e("CSVManager",u("CSVManager")(((s=function(){function e(){this._csvTables={},this._csvTableForArr={},this._tableCast={},this._tableComment={}}var r=e.prototype;return r.addTable=function(e,t,r){if(!this._csvTables[e]||r){var n={},i=[];c.parse(t,{header:!0},(function(e,t){n[e[t]]=e,i.push(e)})),this._tableCast[e]=c.opts.cast,this._tableComment[e]=c.opts.comment,this._csvTables[e]=n,this._csvTableForArr[e]=i}},r.getTableArr=function(e){return this._csvTableForArr[e]},r.getTable=function(e){return this._csvTables[e]},r.queryOne=function(e,t,r){var n=this.getTable(e);if(!n)return null;if(!t)return n[r];for(var i in n)if(n.hasOwnProperty(i)&&n[i][t]===r)return n[i]},r.queryByID=function(e,t){return this.queryOne(e,null,t)},r.queryAll=function(e,t,r){var n=this.getTable(e);if(!n||!t)return null;var i={};for(var s in n)n.hasOwnProperty(s)&&n[s][t]===r&&(i[s]=n[s]);return i},r.queryIn=function(e,t,r){var n=this.getTable(e);if(!n||!t)return null;for(var i={},s=Object.keys(n),u=s.length,a=0;a<u;a++){var o=n[s[a]];r.indexOf(o[t])>-1&&(i[s[a]]=o)}return i},r.queryByCondition=function(e,t){if(t.constructor!==Object)return null;var r=this.getTable(e);if(!r)return null;for(var n={},i=Object.keys(r),s=i.length,u=Object.keys(t),a=u.length,o=0;o<s;o++){for(var l=r[i[o]],c=!0,h=0;h<a;h++){var f=u[h];c=c&&t[f]===l[f]&&!n[i[o]]}c&&(n[i[o]]=l)}return n},r.queryOneByCondition=function(e,t){if(t.constructor!==Object)return null;var r=this.getTable(e);if(!r)return null;var n=Object.keys(t),i=n.length;for(var s in r){for(var u=r[s],a=!0,o=0;o<i;o++){var l=n[o];a=a&&t[l]===u[l]}if(a)return u}return null},t(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}())._instance=void 0,i=s))||i);r._RF.pop()}}}));

System.register("chunks:///_virtual/effectManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./poolManager.ts","./resourceUtil.ts","./fightTip.ts"],(function(n){var e,t,i,o,a,r,l,c,u,s,f,d,p;return{setters:[function(n){e=n.createClass},function(n){t=n.cclegacy,i=n._decorator,o=n.AnimationComponent,a=n.ParticleSystemComponent,r=n.isValid,l=n.AnimationClip,c=n.find,u=n.Node,s=n.director},function(n){f=n.PoolManager},function(n){d=n.resourceUtil},function(n){p=n.FightTip}],execute:function(){var v,h;t._RF.push({},"c0e274c/hdPhLTY9VN2npxM","effectManager",void 0);var g=i.ccclass;i.property,n("EffectManager",g("EffectManager")(((h=function(){function n(){this._ndParent=null}var t=n.prototype;return t.removeEffect=function(n,e){void 0===e&&(e=this.ndParent);var t=e.getChildByName(n);t&&(t.getComponentsInChildren(o).forEach((function(n){n.stop()})),(null==t?void 0:t.getComponentsInChildren(a)).forEach((function(n){null==n||n.clear(),null==n||n.stop()})),f.instance.putNode(t))},t.resetEffectState=function(n,e){if(r(n)){var t=n.getComponentsInChildren(a);t.length&&t.forEach((function(n){null==n||n.clear(),null==n||n.stop()}));var i=n.getComponentsInChildren(o);i.length&&i.forEach((function(n,t){var i;if(null!=n&&null!=(i=n.defaultClip)&&i.name){var o=null;e&&(o=n.getState(e)),o||(o=n.getState(n.defaultClip.name)),o&&(o.stop(),o.time=0,o.sample())}}))}},t.loadAndPlayEffect=function(n,e,t,i,o,a,r,l,c,u,s,p){var v=this;void 0===n&&(n=!0),void 0===i&&(i=1),void 0===r&&(r=!0),void 0===l&&(l=!0),void 0===c&&(c=1),void 0===u&&(u=!1),void 0===s&&(s=0),(!n||e&&e.parent)&&d.loadEffectRes(t).then((function(t){var d=n?e:v.ndParent,h=f.instance.getNode(t,d);n?(h.setScale(i,i,i),o&&h.setPosition(o),a&&(h.eulerAngles=a)):(h.setWorldScale(i,i,i),o&&h.setWorldPosition(o),a&&h.setWorldRotationFromEuler(a.x,a.y,a.z)),v.playEffect(h,r,l,c,u,s,p)}))},t.playEffect=function(n,e,t,i,o,a,r){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===i&&(i=1),void 0===o&&(o=!1);var l=0;if(e){var c=this.playAnimation(n,i,null,!1,!1,null,null);l=c>l?c:l}if(t){var u=this.playParticle(n,i,!1,null,null);l=u>l?u:l}l=a&&a>0?a:l,(r||o)&&setTimeout((function(){n.parent&&(r&&r(),o?f.instance.putNode(n):n.destroy())}),1e3*l)},t.playAnimation=function(n,e,t,i,a,r,c){void 0===e&&(e=1),void 0===i&&(i=!1),void 0===a&&(a=!1);var u=0,s=null;n.active||(n.active=!0);var d=n.getComponentsInChildren(o);if(d.length){d.forEach((function(n,o){var a,r=t||(null==n||null==(a=n.defaultClip)?void 0:a.name);if(r&&(s=n.getState(r))){s.time=0,s.speed=e,s.sample();var c=s.duration;u=c>u?c:u,s.wrapMode=i?l.WrapMode.Loop:l.WrapMode.Normal,null==n||n.play(r)}})),u=r&&r>0?r:u;var p=function(){n&&n.parent&&(c&&c(),a&&f.instance.putNode(n))};return(c||a)&&(1===d.length?d[0].once(o.EventType.FINISHED,(function(){p()})):setTimeout((function(){p()}),1e3*u)),u}return console.warn("###"+n.name+"节点下没有动画特效"),0},t.playParticle=function(n,e,t,i,o){void 0===e&&(e=1),void 0===t&&(t=!1);var r=0;n.active||(n.active=!0);var l=n.getComponentsInChildren(a);return l.length?(l.forEach((function(n){n.simulationSpeed=e,null==n||n.clear(),null==n||n.stop(),null==n||n.play();var t=n.duration;r=t>r?t:r})),r=i&&i>0?i:r,(o||t)&&setTimeout((function(){n&&n.parent&&(o&&o(),t&&f.instance.putNode(n))}),1e3*r),r):(console.warn("###"+n.name+"节点下没有粒子特效"),0)},t.showFightTips=function(n,e,t,i){d.getUIPrefabRes("common/fightTip",(function(o,a){if(!o){var r=f.instance.getNode(a,c("Canvas"));r.setPosition(t),r.getComponent(p).show(n,e,i)}}))},e(n,[{key:"ndParent",get:function(){if(!this._ndParent){var n,e=c("effectManager");if(e)this._ndParent=e;else this._ndParent=new u("effectManager"),null==s||null==(n=s.getScene())||n.addChild(this._ndParent)}return this._ndParent}}],[{key:"instance",get:function(){return this._instance||(this._instance=new n),this._instance}}]),n}())._instance=void 0,v=h))||v);t._RF.pop()}}}));

System.register("chunks:///_virtual/fightManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fruit.ts","./clientEvent.ts","./constant.ts","./localConfig.ts","./poolManager.ts","./resourceUtil.ts","./uiManager.ts","./util.ts"],(function(e){var t,n,i,a,s,o,r,h,u,E,_,m,c,l,f,d,g,p,N,S,G,I,A,T;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){s=e.cclegacy,o=e._decorator,r=e.CameraComponent,h=e.Vec3,u=e.director,E=e.AnimationComponent,_=e.ParticleSystemComponent,m=e.AnimationClip,c=e.find,l=e.screen,f=e.math,d=e.Component},function(e){g=e.Fruit},function(e){p=e.ClientEvent},function(e){N=e.constant},function(e){S=e.LocalConfig},function(e){G=e.PoolManager},function(e){I=e.resourceUtil},function(e){A=e.UIManager},function(e){T=e.Util}],execute:function(){var M,C,v,D,O,P;s._RF.push({},"a324abLZD1K75gGUXdHlsNX","fightManager",void 0);var y=o.ccclass,R=o.property;e("FightManager",(M=y("FightManager"),C=R(r),M(((P=function(e){function t(){for(var t,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return t=e.call.apply(e,[this].concat(s))||this,i(t,"cameraCom",O,a(t)),t.isGameEnd=!1,t.isGameStart=!1,t.isGamePause=!1,t.gameSpeed=1,t.fruitZ={},t.difficulty=0,t._updateInterval=0,t._queue=[],t._currentFragmentInfo=null,t._gameType=N.GAME_MODE.ENDLESS,t._lastGameSpeed=0,t._updateTimer=0,t._screenPos=new h,t}n(t,e);var s=t.prototype;return s.start=function(){},s.onEnable=function(){p.on(N.EVENT_NAME.ON_GAME_START,this._gameStart,this),p.on(N.EVENT_NAME.ON_GAME_END,this._onGameEnd,this),p.on(N.EVENT_NAME.ON_GAME_PAUSE,this._onGamePause,this),p.on(N.EVENT_NAME.ON_GAME_RESUME,this._onGameResume,this),p.on(N.EVENT_NAME.ON_GAME_STOP,this._onGameStop,this),p.on(N.EVENT_NAME.ON_DURIAN_ENTER,this._onDurianEnter,this),p.on(N.EVENT_NAME.ON_GAME_SPEED_CHANGE,this._onGameSpeedChange,this)},s.onDisable=function(){p.off(N.EVENT_NAME.ON_GAME_START,this._gameStart,this),p.off(N.EVENT_NAME.ON_GAME_END,this._onGameEnd,this),p.off(N.EVENT_NAME.ON_GAME_PAUSE,this._onGamePause,this),p.off(N.EVENT_NAME.ON_GAME_RESUME,this._onGameResume,this),p.off(N.EVENT_NAME.ON_GAME_STOP,this._onGameStop,this),p.off(N.EVENT_NAME.ON_DURIAN_ENTER,this._onDurianEnter,this),p.off(N.EVENT_NAME.ON_GAME_SPEED_CHANGE,this._onGameSpeedChange,this)},s._gameStart=function(e){this._gameType=e,this.gameSpeed=1,this.isGamePause=!1,this.isGameStart=!0,this.isGameEnd=!1,A.instance.showDialog("fightUI/fightUI",[this,this._gameType]),this.difficulty=1,this._getFragment()},s._getFragment=function(){this._updateTimer=0,this._updateInterval=0;var e=S.instance.getAllFragmentByDifficulty(this.difficulty),t=Object.keys(e);if(!t.length)return this.difficulty--,void this._getFragment();var n=T.getRandomInt(0,t.length-1);this._queue=e[t[n]],this._queue.sort((function(e,t){return parseInt(e.ID)-parseInt(t.ID)})),this._getFragmentItem()},s._getFragmentItem=function(){this._currentFragmentInfo=this._queue[0],this._updateInterval=this._currentFragmentInfo.time},s._throwFragmentItem=function(){this._queue.length?(this._createItem(this._currentFragmentInfo),this._queue.shift(),this._queue.length&&this._getFragmentItem()):this._getFragment()},s._onGameEnd=function(){this.isGameStart=!1,this.isGamePause=!1,this.isGameEnd=!0},s._onGamePause=function(){var e,t,n=this;this.isGameStart&&(this.isGamePause=!0,this._lastGameSpeed=this.gameSpeed,this.gameSpeed=1e-8,p.dispatchEvent(N.EVENT_NAME.ON_GAME_SPEED_CHANGE,this.gameSpeed),(null==(e=u.getScene())?void 0:e.getComponentsInChildren(E)).forEach((function(e){e.pause()})),(null==(t=u.getScene())?void 0:t.getComponentsInChildren(_)).forEach((function(e){e.simulationSpeed=n.gameSpeed})))},s._onGameResume=function(){var e,t,n=this;this.isGamePause&&(this.isGamePause=!1,this.gameSpeed=this._lastGameSpeed,p.dispatchEvent(N.EVENT_NAME.ON_GAME_SPEED_CHANGE,1/this._lastGameSpeed),(null==(e=u.getScene())?void 0:e.getComponentsInChildren(E)).forEach((function(e){e.resume()})),(null==(t=u.getScene())?void 0:t.getComponentsInChildren(_)).forEach((function(e){e.simulationSpeed=n.gameSpeed})))},s._onGameStop=function(){var e,t;for(this._onGameResume(),this._onGameEnd();this.node.children.length;)G.instance.putNode(this.node.children[0]);if(null==(e=this.cameraCom)||null==(e=e.node.parent)||e.setWorldPosition(0,0,0),30===this.cameraCom.fov){var n,i=null==(n=this.cameraCom)?void 0:n.node.getComponent(E);null==i||i.stop(),(null==i?void 0:i.getState("camera01")).wrapMode=m.WrapMode.Reverse,null==i||i.play()}G.instance.putNode(null==(t=c("Canvas"))?void 0:t.getChildByName("specialHit"))},s._onDurianEnter=function(){var e={positionX:-500,forceX:100,forceY:160,fruitId:1007},t=l.windowSize.width/N.DESIGN_RESOLUTION.WIDTH>3?3:l.windowSize.width/N.DESIGN_RESOLUTION.WIDTH;e.forceX=100*t,f.random()>.5&&(e.positionX=N.DESIGN_RESOLUTION.WIDTH-e.positionX),this._createItem(e)},s._createItem=function(e){var t,n=this;if(-1===e.fruitId){var i=S.instance.queryAll("fruit","type",0),a=T.getRandomInt(0,Object.keys(i).length-1);t=i[Object.keys(i)[a]]}else t=S.instance.queryByID("fruit",e.fruitId);for(var s=N.DESIGN_RESOLUTION.WIDTH/l.windowSize.width,o=e.positionX/s,r=0;!(void 0===this.fruitZ[r]||null==this.fruitZ[r]||this.fruitZ[r].name&&null===this.fruitZ[r].parent);)r+=N.INTERVAL_PER_LAYER_DISTANCE;t.type===N.FRUIT_TYPE.SPECIAL&&(r=-N.INTERVAL_PER_LAYER_DISTANCE),this._screenPos.set(o,-100/s,(1+r)/(this.cameraCom.far-this.cameraCom.near));var u=new h;this.cameraCom.screenToWorld(this._screenPos,u),this.fruitZ[r]=1,I.getFruit(t.prefab,(function(i,a){var s=G.instance.getNode(a,n.node);n.fruitZ[r]=s,s.setWorldPosition(u),s.getComponent(g).show(n,e,t)}))},s._onGameSpeedChange=function(e){this.node.getComponentsInChildren(E).forEach((function(t){var n,i=null==t||null==(n=t.defaultClip)?void 0:n.name;i&&(t.getState(i).speed=e)})),this.node.getComponentsInChildren(_).forEach((function(t){t.simulationSpeed=e}))},s.update=function(e){this.isGameStart?this.isGamePause||(this._updateTimer+=e*this.gameSpeed,this._updateTimer<this._updateInterval||this._throwFragmentItem()):this.isGameEnd&&this.node.children.length<1&&(this.isGameEnd=!1,p.dispatchEvent(N.EVENT_NAME.ON_SETTLEMENT_SHOW))},t}(d)).isGameInit=!1,O=t((D=P).prototype,"cameraCom",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=D))||v));s._RF.pop()}}}));

System.register("chunks:///_virtual/fightTip.ts",["./rollupPluginModLoBabelHelpers.js","cc","./poolManager.ts","./constant.ts","./LanguageData.ts"],(function(e){var t,n,i,o,s,a,c,r,l,h,u,p;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,i=e._decorator,o=e.LabelComponent,s=e.UITransform,a=e.screen,c=e.tween,r=e.Vec3,l=e.Component},function(e){h=e.PoolManager},function(e){u=e.constant},function(e){p=e.updateSceneRenderers}],execute:function(){var g;n._RF.push({},"a40a7IoP99BQpnL1VHiLpfx","fightTip",void 0);var d=i.ccclass;i.property,e("FightTip",d("FightTip")(g=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this)._tweenTip=null,t._costTime=1.5,t._oriEuler=new r,t._scale1=new r,t._scale2=new r,t}t(n,e);var i=n.prototype;return i.start=function(){},i.show=function(e,t,n){var i,r,l,g=this;p(),this._closeTweenTip(),this._oriEuler.set(0,0,0),this.node.eulerAngles=this._oriEuler,this.node.setScale(.7,.7,.7);var d,_,w,f=this.node.children;(f.forEach((function(e){e.active=!1})),f[e].active=!0,(d=null==(i=f[e].getChildByName("hitNum"))?void 0:i.getComponent(o))&&(d.string=String(t)),e===u.TIP_TYPE.SPECIAL_HIT_EXPLODE)&&((_=null==(w=f[e].getChildByName("score"))||null==(w=w.getChildByName("scoreNum"))?void 0:w.getComponent(o))&&(_.string=String(t)));var T=this.node.getPosition(),v=null==(r=f[e].getComponent(s))?void 0:r.width,m=null==(l=f[e].getComponent(s))?void 0:l.height;if(Math.abs(T.x)+v/2>a.windowSize.width/2){var y=a.windowSize.width/2-v/2;T.x=T.x>0?y:-y}if(Math.abs(T.y)+m/2>a.windowSize.height/2){var C=a.windowSize.height/2-m/2;T.y=T.y>0?C:-C}this.node.setPosition(T),this._scale1.set(1,1,1),this._scale2.set(1,1,1),this._tweenTip=c(this.node).to(.4*this._costTime,{scale:this._scale1},{easing:"backOutIn"}).to(.2*this._costTime,{scale:this._scale2}).call((function(){g._closeTweenTip(),h.instance.putNode(g.node),n&&n()})).start()},i._closeTweenTip=function(){this._tweenTip&&(this._tweenTip.stop(),this._tweenTip=null)},n}(l))||g);n._RF.pop()}}}));

System.register("chunks:///_virtual/fightUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./poolManager.ts","./util.ts","./audioManager.ts","./constant.ts","./effectManager.ts","./resourceUtil.ts","./clientEvent.ts","./uiManager.ts","./LanguageData.ts"],(function(e){var t,i,n,a,s,o,r,h,_,u,l,c,m,E,p,g,T,f,d,M,S,N,I,C,O,G,b,A;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){s=e.cclegacy,o=e._decorator,r=e.SpriteFrame,h=e.Node,_=e.LabelComponent,u=e.Prefab,l=e.SpriteComponent,c=e.AnimationComponent,m=e.UIOpacityComponent,E=e.find,p=e.UITransform,g=e.view,T=e.ParticleSystemComponent,f=e.profiler,d=e.Component},function(e){M=e.PoolManager},function(e){S=e.Util},function(e){N=e.AudioManager},function(e){I=e.constant},function(e){C=e.EffectManager},function(e){O=e.resourceUtil},function(e){G=e.ClientEvent},function(e){b=e.UIManager},function(e){A=e.updateSceneRenderers}],execute:function(){var v,D,P,y,w,B,H,U,R,F,L,k,V,Y,z,x,W,j,X,J,q,K,Q;s._RF.push({},"1b432mxIV5JjYmyA05APPcw","fightUI",void 0);var Z=o.ccclass,$=o.property;e("FightUI",(v=Z("FightUI"),D=$(r),P=$(r),y=$(h),w=$(h),B=$(_),H=$(_),U=$(u),R=$(l),F=$([r]),L=$(h),v((Y=t((V=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return t=e.call.apply(e,[this].concat(s))||this,n(t,"sfHeartActive",Y,a(t)),n(t,"sfHeartDisable",z,a(t)),n(t,"ndTimer",x,a(t)),n(t,"ndHeart",W,a(t)),n(t,"lbScore",j,a(t)),n(t,"lbTime",X,a(t)),n(t,"pfHeartBreak",J,a(t)),n(t,"spCountdown",q,a(t)),n(t,"sfCountdown",K,a(t)),n(t,"ndBtnPause",Q,a(t)),t._gameScore=0,t._raiseTime=0,t._updateInterval=1,t._gameTime=0,t._gameMode=I.GAME_MODE.ENDLESS,t._isGameStart=!1,t._isGamePause=!1,t._isGameStop=!1,t._isGameEnd=!1,t._heartNum=5,t._scriptFightManager=null,t._durianEnterTime=0,t._arrNdHeartBreak=[],t._debugClickTimes=0,t._debugTimer=null,t}i(t,e);var s=t.prototype;return s.start=function(){},s.onEnable=function(){G.on(I.EVENT_NAME.ON_SETTLEMENT_SHOW,this._onSettlementShow,this),G.on(I.EVENT_NAME.ON_GET_SCORE,this._onGetScore,this),G.on(I.EVENT_NAME.ON_GAME_END,this._onGameEnd,this),G.on(I.EVENT_NAME.ON_GAME_RESUME,this._onGameResume,this),G.on(I.EVENT_NAME.ON_GAME_STOP,this._onGameStop,this)},s.onDisable=function(){for(;this._arrNdHeartBreak.length;){var e=this._arrNdHeartBreak.shift();M.instance.putNode(e)}G.off(I.EVENT_NAME.ON_SETTLEMENT_SHOW,this._onSettlementShow,this),G.off(I.EVENT_NAME.ON_GET_SCORE,this._onGetScore,this),G.off(I.EVENT_NAME.ON_GAME_END,this._onGameEnd,this),G.off(I.EVENT_NAME.ON_GAME_RESUME,this._onGameResume,this),G.off(I.EVENT_NAME.ON_GAME_STOP,this._onGameStop,this)},s.show=function(e,t){var i;(A(),this._scriptFightManager=e,this._isGameStart=!1,this._isGamePause=!1,this._isGameStop=!1,this._durianEnterTime=I.DURIAN_FIRST_TIME,this._gameMode=t,this.ndBtnPause.active=!0,t==I.GAME_MODE.ENDLESS)?(this.ndHeart.active=!0,this.ndHeart.children.forEach((function(e){var t=e.getChildByName("heart");t.getComponent(c).stop(),t.getComponent(m).opacity=255,e.getChildByName("heartHide").active=!1})),this._heartNum=5,this.ndTimer.active=!1):t===I.GAME_MODE.LIMIT_TIME&&(this.ndHeart.active=!1,this.ndTimer.active=!0);this._gameScore=0,this._gameTime=-3,this.spCountdown.node.parent.active=!0,this.spCountdown.spriteFrame=this.sfCountdown[-this._gameTime-1],null==(i=this.spCountdown.node.getComponent(c))||i.play(),this._isGameStart=!0,this.lbScore.string=this._gameScore+"",this.lbTime.string=S.formatDate(new Date(1e3*I.LIMIT_TIME),"mm:ss"),N.instance.stopAll(),N.instance.playMusic(I.AUDIO_SOUND.GAME_BGM,!0)},s._onSettlementShow=function(){this._isGameStop?b.instance.showDialog("choose/choose"):this._isGameEnd&&b.instance.showDialog("settlement/settlement",[this._gameScore]),b.instance.hideDialog("pause/pause"),b.instance.hideDialog("fightUI/fightUI")},s._onGetScore=function(e,t,i){var n=this;if(t!==I.SCORE_TYPE.HIT_SPECIAL){if(this._gameMode===I.GAME_MODE.ENDLESS&&t===I.SCORE_TYPE.BOMB||(this._gameScore+=e),this._gameScore<0&&(this._gameScore=0),this.lbScore.string=this._gameScore+"",this._gameMode===I.GAME_MODE.ENDLESS&&(t===I.SCORE_TYPE.NO_HIT_FRUIT||t===I.SCORE_TYPE.BOMB)&&this._heartNum>0){this._heartNum--;var a=this.ndHeart.children[this._heartNum].getChildByName("heart"),s=this.ndHeart.children[this._heartNum].getChildByName("heartHide"),o=a.getComponent(c);if(null==o||o.play(),s.active=!0,this._heartNum<1&&this._playBoom("heartBoom/heartBoom01",(function(){G.dispatchEvent(I.EVENT_NAME.ON_GAME_END)})),t===I.SCORE_TYPE.BOMB)return;var r=M.instance.getNode(this.pfHeartBreak,E("Canvas"));this._arrNdHeartBreak.push(r);var h=r.getComponent(p);r.setPosition(i.x,-g.getDesignResolutionSize().height/2+h.height/2,0),this.scheduleOnce((function(){M.instance.putNode(r),n._arrNdHeartBreak.shift()}),1)}if(t===I.SCORE_TYPE.HIT_COMBO){if(C.instance.showFightTips(I.TIP_TYPE.MORE_HIT,e,i),e>=3){var _=e<6?e:e>=6?6:e;N.instance.playSound(""+I.AUDIO_SOUND.HIT+_,!1)}}else t===I.SCORE_TYPE.PRECISE_HIT?C.instance.showFightTips(I.TIP_TYPE.ACCURATE_HIT,e,i):t===I.SCORE_TYPE.BOMB&&this._gameMode===I.GAME_MODE.LIMIT_TIME&&C.instance.showFightTips(I.TIP_TYPE.BOMB_HIT,e,i)}else C.instance.showFightTips(I.TIP_TYPE.SPECIAL_HIT_EXPLODE,e,i)},s._onGameEnd=function(){this._isGameStart=!1,this._isGamePause=!1,this._isGameEnd=!0},s._onGameResume=function(){this._isGamePause=!1,this.ndBtnPause.active||(this.ndBtnPause.active=!0)},s._onGameStop=function(){this._isGameStart=!1,this._isGamePause=!1,this._isGameStop=!0},s.onPauseBtnClick=function(){this._isGamePause||!this._isGameStart||this._isGameStop||(this._isGamePause=!0,this.ndBtnPause.active=!1,G.dispatchEvent(I.EVENT_NAME.ON_GAME_PAUSE),b.instance.showDialog("pause/pause"))},s._playBoom=function(e,t){var i=this;O.getEffect(e,(function(e,n){var a=M.instance.getNode(n,E("fightManager"));t&&t();var s=a.getComponent(c);null==s||s.play(),null==s||s.once(c.EventType.FINISHED,(function(){M.instance.putNode(a);for(var e=E("fightManager");e.children.length;)M.instance.putNode(null==e?void 0:e.children[0])})),a.getComponentsInChildren(T).forEach((function(e){null==e||e.clear(),null==e||e.stop(),null==e||e.play(),e.simulationSpeed=i._scriptFightManager.gameSpeed}))}))},s.onBtnDebugClick=function(){var e=this,t=function(){e._debugClickTimes=0,clearTimeout(e._debugTimer),e._debugTimer=null};this._debugTimer||(this._debugTimer=setTimeout((function(){t()}),1e3)),this._debugClickTimes+=1,this._debugClickTimes>2&&!f.isShowingStats()?(f.showStats(),t()):f.isShowingStats()&&f.hideStats()},s.update=function(e){if(this._isGameStart&&!this._isGamePause&&(this._raiseTime+=e*this._scriptFightManager.gameSpeed,!(this._raiseTime<this._updateInterval))){this._raiseTime=0,this._gameTime++,this._durianEnterTime<this._gameTime&&(this._durianEnterTime+=I.DURIAN_NEXT_TIME,G.dispatchEvent(I.EVENT_NAME.ON_DURIAN_ENTER)),this._scriptFightManager.difficulty<=I.GAME_DIFFICULTY.length&&I.GAME_DIFFICULTY[this._scriptFightManager.difficulty-1]<this._gameTime&&this._scriptFightManager.difficulty++;var t,i=this.spCountdown.node.parent;if(this._gameTime<0)i.active=!0,this.spCountdown.spriteFrame=this.sfCountdown[-this._gameTime-1],null==(t=this.spCountdown.node.getComponent(c))||t.play();else 0===this._gameTime&&(i.active=!1);if(this._gameMode===I.GAME_MODE.LIMIT_TIME){var n=this._gameTime>0?this._gameTime:0;this.lbTime.string=S.formatDate(new Date(1e3*(I.LIMIT_TIME-n)),"mm:ss");var a=I.LIMIT_TIME-this._gameTime;3===a||2===a||1===a?N.instance.playSound(I.AUDIO_SOUND.COUNTDOWN):0===a&&N.instance.playSound(I.AUDIO_SOUND.TIME_OVER),this._gameTime>=I.LIMIT_TIME&&this._playBoom("clockBoom/clockBoom01",(function(){G.dispatchEvent(I.EVENT_NAME.ON_GAME_END)}))}}},t}(d)).prototype,"sfHeartActive",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(V.prototype,"sfHeartDisable",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(V.prototype,"ndTimer",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(V.prototype,"ndHeart",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(V.prototype,"lbScore",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(V.prototype,"lbTime",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(V.prototype,"pfHeartBreak",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(V.prototype,"spCountdown",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(V.prototype,"sfCountdown",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Q=t(V.prototype,"ndBtnPause",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=V))||k));s._RF.pop()}}}));

System.register("chunks:///_virtual/fruit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util.ts","./poolManager.ts","./clientEvent.ts","./audioManager.ts","./constant.ts","./resourceUtil.ts","./effectManager.ts"],(function(e){var t,i,o,n,s,r,a,c,h,l,_,d,g,u,p,f,P,N,m,E,S,y,v,T,O,C,I,R,M,F,A,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){s=e.cclegacy,r=e._decorator,a=e.Quat,c=e.Vec2,h=e.Vec3,l=e.Node,_=e.Prefab,d=e.ModelComponent,g=e.director,u=e.CameraComponent,p=e.RigidBodyComponent,f=e.ColliderComponent,P=e.screen,N=e.game,m=e.ParticleSystemComponent,E=e.find,S=e.AnimationComponent,y=e.AnimationClip,v=e.math,T=e.toDegree,O=e.Component},function(e){C=e.Util},function(e){I=e.PoolManager},function(e){R=e.ClientEvent},function(e){M=e.AudioManager},function(e){F=e.constant},function(e){A=e.resourceUtil},function(e){w=e.EffectManager}],execute:function(){var U,B,D,L,b,Y,G,H,x,V,z;s._RF.push({},"929b2OFUe5KerXUYCyETkcy","fruit",void 0);var W=r.ccclass,X=r.property,Z=new a,k=new c,j=new c,K=new c,Q=new h;e("Fruit",(U=W("Fruit"),B=X(l),D=X(l),L=X(l),b=X(_),U((H=t((G=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s))||this,o(t,"onePieceNode",H,n(t)),o(t,"leftPieceNode",x,n(t)),o(t,"rightPieceNode",V,n(t)),o(t,"effectPrefabArray",z,n(t)),t.colliderOne=null,t.fruitInfo=null,t.isTriggered=!1,t._rigidBodyOne=null,t._rigidBodyLeft=null,t._rigidBodyRight=null,t._rotationOne=new a,t._rotationLeft=new a,t._rotationRight=new a,t._positionOne=new h,t._positionLeft=new h,t._positionRight=new h,t._scaleOne=new h,t._ndTrail=null,t._gameCamera=null,t._scriptFightManager=null,t._triggerNum=0,t._ndSuperCut=null,t._ndBoomEffect=null,t._timeTrigger=0,t._hitPoint=new h,t._endTouchPos=null,t._previousPos=null,t._scriptSpecialHit=null,t._screenPos=new h,t._forcePoint=new h(1,0,0),t._forcePoint1=new h(1,0,0),t._forcePoint2=new h(1,0,0),t._force=new h,t._force1=new h,t._force2=new h,t._rotateCenterPoint=new h,t._forceOne=new h,t._forceLeft=new h,t._forceRight=new h,t._uiPoint1=new h,t._uiPoint2=new h,t._uiPoint3=new h,t._velocity=new h,t._scale=new h,t}i(t,e);var s=t.prototype;return s.onLoad=function(){var e;this.node.getComponentsInChildren(d).forEach((function(e){var t;null==(t=e.mesh)||t._nativeAsset.slice(0,0)})),this._gameCamera=null==(e=g.getScene())?void 0:e.getComponentInChildren(u),this.onePieceNode.active=!0,this.leftPieceNode&&(this.leftPieceNode.active=!1),this.rightPieceNode&&(this.rightPieceNode.active=!1),this._rigidBodyOne=this.onePieceNode.getComponent(p),this.leftPieceNode&&(this._rigidBodyLeft=this.leftPieceNode.getComponent(p)),this.rightPieceNode&&(this._rigidBodyRight=this.rightPieceNode.getComponent(p)),this.colliderOne=this.onePieceNode.getComponent(f),this._rotationOne=this.onePieceNode.getRotation(),this.leftPieceNode&&(this._rotationLeft=this.leftPieceNode.getRotation()),this.rightPieceNode&&(this._rotationRight=this.rightPieceNode.getRotation()),this._positionOne=this.onePieceNode.getPosition(),this.leftPieceNode&&(this._positionLeft=this.leftPieceNode.getPosition()),this.rightPieceNode&&(this._positionRight=this.rightPieceNode.getPosition()),this._scaleOne.set(this.node.scale)},s.onEnable=function(){this.isTriggered=!1,this.onePieceNode.on("onTrigger",this._onTrigger,this),R.on(F.EVENT_NAME.ON_GAME_SPEED_CHANGE,this._onGameSpeedChange,this)},s.onDisable=function(){this.onePieceNode.off("onTrigger",this._onTrigger,this),R.off(F.EVENT_NAME.ON_GAME_SPEED_CHANGE,this._onGameSpeedChange,this)},s.start=function(){},s.show=function(e,t,i){var o,n=this;this._scriptFightManager=e,this._triggerNum=0,this.fruitInfo=i,this.colliderOne.enabled=!0,this.onePieceNode.active=!0,this.leftPieceNode&&(this.leftPieceNode.active=!1),this.rightPieceNode&&(this.rightPieceNode.active=!1),this.onePieceNode.setRotation(this._rotationOne),this.leftPieceNode&&this.leftPieceNode.setRotation(this._rotationLeft),this.rightPieceNode&&this.rightPieceNode.setRotation(this._rotationRight),this.onePieceNode.setPosition(this._positionOne),this.leftPieceNode&&this.leftPieceNode.setPosition(this._positionLeft),this.rightPieceNode&&this.rightPieceNode.setPosition(this._positionRight),this._rigidBodyOne.clearState(),this.rightPieceNode&&this._rigidBodyRight.clearState(),this.leftPieceNode&&this._rigidBodyLeft.clearState();var s=(0-this.node.position.z)/F.INTERVAL_PER_LAYER_DISTANCE*this.fruitInfo.scale;this.node.setScale(this._scaleOne.x+s,this._scaleOne.y+s,this._scaleOne.z+s);var r=t.forceX;null==(o=this._gameCamera)||o.worldToScreen(this.node.position,this._screenPos),this._screenPos.x>P.windowSize.width/2&&(r=-r);var a=(0-this.node.position.z)/F.INTERVAL_PER_LAYER_DISTANCE*F.INTERVAL_PER_LAYER_FORCE+t.forceY+15,c=Number(N.frameRate)/F.GAME_INIT_FRAME;if(this._force.set(r*this._scriptFightManager.gameSpeed*c,a*this._scriptFightManager.gameSpeed*c,0),this._rigidBodyOne.applyForce(this._force,this._forcePoint),this.fruitInfo.type===F.FRUIT_TYPE.SPECIAL?(M.instance.playSound(F.AUDIO_SOUND.DURIAN_FLY,!0),M.instance.pauseSingleSound(F.AUDIO_SOUND.BOMB_FLY)):this.fruitInfo.type===F.FRUIT_TYPE.BOMB?M.instance.playSound(F.AUDIO_SOUND.BOMB_FLY,!0):M.instance.playSound(F.AUDIO_SOUND.LAUNCH_FRUIT,!1),this.fruitInfo.trailPath&&this.fruitInfo.type===F.FRUIT_TYPE.BOMB){var h=this.onePieceNode.getChildByName("detonator");A.getEffect(this.fruitInfo.trailPath,(function(e,t){n._ndTrail=I.instance.getNode(t,h);var i=n._ndTrail.getComponent(m);n.fruitInfo.type===F.FRUIT_TYPE.BOMB&&(i=n._ndTrail.getComponentInChildren(m)),i.simulationSpeed=n._scriptFightManager.gameSpeed,i.clear(),i.stop(),i.play(),n._ndTrail.setScale(Number(n.fruitInfo.trailScale),Number(n.fruitInfo.trailScale),Number(n.fruitInfo.trailScale))}))}},s._onTrigger=function(e,t,i){var o,n=this;if(this._scriptFightManager.isGameStart&&!this._scriptFightManager.isGamePause&&this.isTriggered&&!(this._gameCamera.worldToScreen(this.onePieceNode.worldPosition).y<-400))if(this._hitPoint=e,this._endTouchPos=t.clone(),this._previousPos=i.clone(),null==(o=this._gameCamera)||o.convertToUINode(this.onePieceNode.worldPosition,E("Canvas"),this._uiPoint1),this.fruitInfo.type===F.FRUIT_TYPE.SPECIAL&&this.onePieceNode.active){if(!this._triggerNum){var s,r,a;this._scriptFightManager.gameSpeed=.001,R.dispatchEvent(F.EVENT_NAME.ON_GAME_SPEED_CHANGE,this._scriptFightManager.gameSpeed);var c=null==(s=this._gameCamera)||null==(s=s.node.parent)?void 0:s.worldPosition;null==(r=this._gameCamera)||null==(r=r.node.parent)||r.setWorldPosition(this.onePieceNode.worldPosition.x,this.onePieceNode.worldPosition.y,null==c?void 0:c.z);var h=null==(a=this._gameCamera)?void 0:a.node.getComponent(S);(null==h?void 0:h.getState("camera01")).wrapMode=y.WrapMode.Normal,null==h||h.play(),this._timeTrigger=5}if(this._triggerNum++,this._triggerNum>1){var l;this._scriptSpecialHit?this._scriptSpecialHit.show(this._triggerNum):this._playSpecialHit(this._uiPoint1);var _=null==(l=this._gameCamera)?void 0:l.node.getComponent(S);if(null==_||_.play("camera02"),this._triggerNum%10==0){var d,g,u=null==(d=this._gameCamera)||null==(d=d.node.parent)?void 0:d.worldPosition,p=u.x+(v.random()>.5?v.randomRange(.1,.2):-v.randomRange(.1,.2)),f=u.y+(v.random()>.5?v.randomRange(.1,.2):-v.randomRange(.1,.2));console.log("camera",p-u.x+":"+(f-u.y)),null==(g=this._gameCamera)||null==(g=g.node.parent)||g.setWorldPosition(p,f,u.z)}}this._playSuperCut(),R.dispatchEvent(F.EVENT_NAME.ON_GET_SCORE,1,F.SCORE_TYPE.NORMAL,this._uiPoint1),M.instance.playSound(Math.random()>=.5?F.AUDIO_SOUND.CUT_FRUIT_1:F.AUDIO_SOUND.CUT_FRUIT_2,!1)}else this.fruitInfo.type===F.FRUIT_TYPE.BOMB?(this.colliderOne.enabled=!1,this._playBoom((function(){R.dispatchEvent(F.EVENT_NAME.ON_GET_SCORE,-10,F.SCORE_TYPE.BOMB,n._uiPoint1)}))):(this.colliderOne.enabled=!1,R.dispatchEvent(F.EVENT_NAME.ON_GET_SCORE,1,F.SCORE_TYPE.NORMAL,this._uiPoint1),this._hitCenter(t,i)&&R.dispatchEvent(F.EVENT_NAME.ON_GET_SCORE,10,F.SCORE_TYPE.PRECISE_HIT,this._uiPoint1),this._playBoom(),M.instance.playSound(Math.random()>=.5?F.AUDIO_SOUND.CUT_FRUIT_1:F.AUDIO_SOUND.CUT_FRUIT_2,!1),this._explode(e,1))},s._offScreen=function(e){return e&&e.active&&this._gameCamera.worldToScreen(e.worldPosition).y<-200/720*P.windowSize.height},s._explode=function(e,t){I.instance.putNode(this._ndTrail),this.onePieceNode.active=!1,this.leftPieceNode.active=!0,this.rightPieceNode.active=!0,this.leftPieceNode.setPosition(this.onePieceNode.getPosition()),this.rightPieceNode.setPosition(this.onePieceNode.getPosition()),c.subtract(k,this._previousPos,this._endTouchPos);var i=new c(0,1).signAngle(c.normalize(k,k));a.rotateZ(Z,this.leftPieceNode.rotation,i),Q.set(k.x,k.y,0),this.leftPieceNode.setRotation(Z),this.rightPieceNode.setRotation(Z),h.multiplyScalar(this._scale,this._scaleOne,1/this.fruitInfo.scale);var o=Number(N.frameRate)/F.GAME_INIT_FRAME,n=v.toRadian(90);h.rotateZ(this._force1,Q,this._rotateCenterPoint,n),h.multiplyScalar(this._force1,this._force1,C.getRandomInt(30,40)*this._scriptFightManager.gameSpeed*t*o),this._force1.z=0,this._forcePoint1.set(i>0?-this._scale.x:this._scale.x,i>0?-this._scale.y:this._scale.y,this._scale.z),this._rigidBodyLeft.applyForce(this._force1,this._forcePoint1),n=v.toRadian(-90),h.rotateZ(this._force2,Q,this._rotateCenterPoint,n),h.multiplyScalar(this._force2,this._force2,C.getRandomInt(30,40)*this._scriptFightManager.gameSpeed*t*o),this._force2.z=0,this._forcePoint2.set(i>0?-this._scale.x:this._scale.x,i>0?-this._scale.y:this._scale.y,this._scale.z),this._rigidBodyRight.applyForce(this._force2,this._forcePoint2)},s._playBoom=function(e){var t=C.getRandomInt(0,this.effectPrefabArray.length-1);if(this._ndBoomEffect=I.instance.getNode(this.effectPrefabArray[t],this.node.parent),this.fruitInfo.type===F.FRUIT_TYPE.BOMB){var i;I.instance.putNode(this.node),I.instance.putNode(this._ndTrail);var o=null==(i=this._gameCamera)?void 0:i.node.getComponent(S);null==o||o.play("cameraBomb"),M.instance.stopSingleSound(F.AUDIO_SOUND.BOMB_FLY),M.instance.playSound(F.AUDIO_SOUND.BOMB_EXPLODE,!1)}if(this.leftPieceNode){var n=new c;c.subtract(n,this._endTouchPos,this._previousPos);var s=c.angle(new c(0,1),c.normalize(n,n)),r=v.toDegree(s),a=0;0===n.x?a=r:n.x>0&&n.y>0||n.x>0&&n.y<=0?a=-r:(n.x<0&&n.y>=0||n.x<0&&n.y<0)&&(a=r),this._ndBoomEffect.setRotationFromEuler(90,0,a)}var h=(3+this.onePieceNode.worldPosition.z)/3;this._ndBoomEffect.setWorldPosition(this.onePieceNode.worldPosition.x+1.7*h*this.onePieceNode.worldPosition.x,this.onePieceNode.worldPosition.y-.05*h*this.onePieceNode.worldPosition.y,-3);var l=this.fruitInfo.particleScale+1.5;if(this._ndBoomEffect.setScale(l,l,l),this.fruitInfo.type!==F.FRUIT_TYPE.BOMB){var _,d=null==(_=this._ndBoomEffect.getComponentInChildren(m))?void 0:_.node;d.setWorldPosition(this.onePieceNode.worldPosition.x,this.onePieceNode.worldPosition.y,this.onePieceNode.worldPosition.z);var g=this.fruitInfo.particleScale+(0-this.node.position.z)/1.5*this.fruitInfo.particleScale;d.setWorldScale(g,g,g)}w.instance.playEffect(this._ndBoomEffect,!0,!0,this._scriptFightManager.gameSpeed,!0,null,(function(){e&&e()}))},s._hitCenter=function(e,t){var i,o=null==(i=this._gameCamera)?void 0:i.worldToScreen(this.node.worldPosition);c.subtract(j,e,t),c.subtract(K,e,new c(o.x,o.y));var n=c.angle(j,K);return 180-Math.abs(T(n))<5},s._onGameSpeedChange=function(e,t,i,o,n){this.fruitInfo.type===F.FRUIT_TYPE.SPECIAL&&t||(this.onePieceNode.active&&t&&this.fruitInfo.type===F.FRUIT_TYPE.NORMAL?this._onTrigger(i,o,n):(this.rightPieceNode&&this.rightPieceNode.active&&this._setVelocity(this._rigidBodyRight,e),this.leftPieceNode&&this.leftPieceNode.active&&this._setVelocity(this._rigidBodyLeft,e),this.onePieceNode.active&&this._setVelocity(this._rigidBodyOne,e)))},s._setVelocity=function(e,t){e.getAngularVelocity(this._velocity),h.multiplyScalar(this._velocity,this._velocity,t),e.setAngularVelocity(this._velocity),e.getLinearVelocity(this._velocity),h.multiplyScalar(this._velocity,this._velocity,t),e.setLinearVelocity(this._velocity)},s._playSuperCut=function(){var e=this;A.getEffect("superCut/superCut",(function(t,i){I.instance.putNode(e._ndSuperCut);var o=I.instance.getNode(i,e.node.parent);o.setWorldPosition(e.onePieceNode.worldPosition);var n=o.getComponentInChildren(m);null==n||n.clear(),null==n||n.stop(),null==n||n.play();var s=o.getComponent(S);e._triggerNum<8?(null==s||s.play("superCut0"+e._triggerNum),null==s||s.once(S.EventType.FINISHED,(function(){I.instance.putNode(o)}))):(null==s||s.play("superCut08"),e._ndSuperCut=o)}))},s._playSuperBoom=function(){var e=this;A.getEffect("superBomb/superBombAll",(function(t,i){var o=I.instance.getNode(i,e.node.parent);o.setWorldPosition(e.onePieceNode.worldPosition),w.instance.playEffect(o,!0,!0,e._scriptFightManager.gameSpeed,!0,null,null)}))},s._playSpecialHit=function(e){var t=this;A.getUIPrefabRes("common/specialHit",(function(i,o){if(!t._scriptSpecialHit){var n=I.instance.getNode(o,E("Canvas"));n.setPosition(e),t._scriptSpecialHit=n.getComponent("SpecialHit")}t._scriptSpecialHit.show(t._triggerNum)}))},s.update=function(e){var t=this;if(this._offScreen(this.onePieceNode)||this._offScreen(this.rightPieceNode)&&this._offScreen(this.leftPieceNode)){var i;if(this._offScreen(this.onePieceNode)&&this.fruitInfo.type===F.FRUIT_TYPE.NORMAL&&1===this._scriptFightManager.gameSpeed)null==(i=this._gameCamera)||i.convertToUINode(this.onePieceNode.worldPosition,E("Canvas"),this._uiPoint2),R.dispatchEvent(F.EVENT_NAME.ON_GET_SCORE,0,F.SCORE_TYPE.NO_HIT_FRUIT,this._uiPoint2),M.instance.playSound(F.AUDIO_SOUND.FRUIT_DROP,!1);I.instance.putNode(this.node),this._ndTrail&&this._ndTrail.parent&&I.instance.putNode(this._ndTrail),this.fruitInfo.type===F.FRUIT_TYPE.BOMB&&M.instance.stopSingleSound(F.AUDIO_SOUND.BOMB_FLY),this.fruitInfo.type===F.FRUIT_TYPE.SPECIAL&&M.instance.stopSingleSound(F.AUDIO_SOUND.DURIAN_FLY)}if(this.rightPieceNode&&this.rightPieceNode.active&&this._scriptFightManager){var o=-3*this._scriptFightManager.gameSpeed;this._scriptFightManager.isGameEnd&&(o=-10*this._scriptFightManager.gameSpeed),this._forceRight.set(0,o,0),this._rigidBodyRight.applyForce(this._forceRight)}if(this.leftPieceNode&&this.leftPieceNode.active&&this._scriptFightManager){var n=-3*this._scriptFightManager.gameSpeed;this._scriptFightManager.isGameEnd&&(n=-10*this._scriptFightManager.gameSpeed),this._forceLeft.set(0,n,0),this._rigidBodyLeft.applyForce(this._forceLeft)}if(this.onePieceNode.active&&this._scriptFightManager){var s=-2*this._scriptFightManager.gameSpeed;this._scriptFightManager.isGameEnd&&(s=-10*this._scriptFightManager.gameSpeed),this._forceOne.set(0,s,0),this._rigidBodyOne.applyForce(this._forceOne)}if(this._triggerNum>0&&!this._scriptFightManager.isGamePause&&(this._timeTrigger-=e,this._timeTrigger<0||this._scriptFightManager.isGameEnd)){var r;this._scriptSpecialHit&&(I.instance.putNode(this._scriptSpecialHit.node),this._scriptSpecialHit=null),this.colliderOne.enabled=!1;var a=this._triggerNum;this._triggerNum=0;var c=null==(r=this._gameCamera)?void 0:r.node.getComponent(S);null==c||c.stop(),(null==c?void 0:c.getState("camera01")).wrapMode=y.WrapMode.Reverse,null==c||c.play(),null==c||c.once(S.EventType.FINISHED,(function(){var e,i;null==(e=t._gameCamera)||null==(e=e.node.parent)||e.setWorldPosition(0,0,0),I.instance.putNode(t._ndSuperCut),t._scriptFightManager.gameSpeed=1,t._explode(t._hitPoint,10),R.dispatchEvent(F.EVENT_NAME.ON_GAME_SPEED_CHANGE,1e3,!0,t._hitPoint,t._endTouchPos,t._previousPos),t._playSuperBoom(),null==(i=t._gameCamera)||i.convertToUINode(t._hitPoint,E("Canvas"),t._uiPoint3),R.dispatchEvent(F.EVENT_NAME.ON_GET_SCORE,a,F.SCORE_TYPE.HIT_SPECIAL,t._uiPoint3),M.instance.stopSingleSound(F.AUDIO_SOUND.DURIAN_FLY),M.instance.playSound(F.AUDIO_SOUND.DURIAN_EXPLODE,!1),M.instance.resumeSingleSound(F.AUDIO_SOUND.BOMB_FLY)}))}},t}(O)).prototype,"onePieceNode",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(G.prototype,"leftPieceNode",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(G.prototype,"rightPieceNode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(G.prototype,"effectPrefabArray",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Y=G))||Y));s._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageData.ts",["cc"],(function(e){var a,n;return{setters:[function(e){a=e.cclegacy,n=e.director}],execute:function(){e({init:r,t:function(e){var a=window;if(!a.languages)return e;for(var n=e.split("."),r=a.languages[t],o=0;o<n.length;o++)if(!(r=r[n[o]]))return"";return r||""},updateSceneRenderers:o}),a._RF.push({},"b3f01X4Ik5LEbIPKXZr3JWD","LanguageData",void 0);var t=e("_language","zh");e("ready",!1);function r(a){e("ready",!0),t=e("_language",a)}function o(){for(var e=n.getScene().children,a=[],t=[],r=[],o=0;o<e.length;++o){var i=e[o].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(a,i);var u=e[o].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(t,u);var p=e[o].getComponentsInChildren("LocalizedMaterial");Array.prototype.push.apply(r,p)}for(var g=0;g<a.length;++g){var l=a[g];l.node.active&&l.updateLabel()}for(var c=0;c<t.length;++c){var d=t[c];d.node.active&&d.updateSprite()}for(var v=0;v<r.length;++v){var s=r[v];s.node.active&&s.updateMat()}}window._languageData={get language(){return t},init:function(e){r(e)},updateSceneRenderers:function(){o()}},a._RF.pop()}}}));

System.register("chunks:///_virtual/localConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./csvManager.ts","./resourceUtil.ts"],(function(n){var t,e,r,i,a,c;return{setters:[function(n){t=n.createClass},function(n){e=n.cclegacy,r=n._decorator,i=n.resources},function(n){a=n.CSVManager},function(n){c=n.resourceUtil}],execute:function(){var o,u;e._RF.push({},"967c1LcT4hFtIZ/lOytluxE","localConfig",void 0);var s=r.ccclass;r.property,n("LocalConfig",s("LocalConfig")(((u=function(){function n(){this._csvManager=new a,this._callback=null,this._currentLoad=0,this._cntLoad=0}var e=n.prototype;return e.loadConfig=function(n){this._callback=n,this._loadCSV()},e._loadCSV=function(){var n=this;i.loadDir("datas",(function(t,e){if(!t){var r=e.filter((function(n){return".md"!==n._native}));n._cntLoad=r.length,r.length?r.forEach((function(t,e,r){c.getTextData(t.name,(function(e,r){n._csvManager.addTable(t.name,r),n._tryToCallbackOnFinished()}))})):n._tryToCallbackOnFinished()}}))},e.queryOne=function(n,t,e){return this._csvManager.queryOne(n,t,e)},e.queryByID=function(n,t){return this._csvManager.queryByID(n,t)},e.getTable=function(n){return this._csvManager.getTable(n)},e.getTableArr=function(n){return this._csvManager.getTableArr(n)},e.queryAll=function(n,t,e){return this._csvManager.queryAll(n,t,e)},e.queryIn=function(n,t,e){return this._csvManager.queryIn(n,t,e)},e.queryByCondition=function(n,t){return this._csvManager.queryByCondition(n,t)},e.queryOneByCondition=function(n,t){return this._csvManager.queryOneByCondition(n,t)},e._tryToCallbackOnFinished=function(){this._callback&&(this._currentLoad++,this._currentLoad>=this._cntLoad&&this._callback())},e.getAllFragmentByDifficulty=function(n){var t={},e=this.getTable("fragment");for(var r in e)if(e[r].difficulty===n){var i=r.substring(1,4);t[i]||(t[i]=[]),t[i].push(e[r])}return t},t(n,null,[{key:"instance",get:function(){return this._instance||(this._instance=new n),this._instance}}]),n}())._instance=void 0,o=u))||o);e._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizedLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts"],(function(e){var t,i,n,r,a,o,l,c,u,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Component},function(e){c=e.ready,u=e.init,s=e.t}],execute:function(){var p,d,f;a._RF.push({},"edf98QH2D1AUoCrtQlbxFrU","LocalizedLabel",void 0);var h=o.ccclass,b=o.property,L=o.executeInEditMode;e("LocalizedLabel",h("LocalizedLabel")(p=L((f=t((d=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).label=null,n(t,"key",f,r(t)),t}i(t,e);var a=t.prototype;return a.onLoad=function(){c||u("zh"),this.fetchRender()},a.fetchRender=function(){var e=this.getComponent("cc.Label");if(e)return this.label=e,void this.updateLabel()},a.updateLabel=function(){this.label&&(this.label.string=s(this.key))},t}(l)).prototype,"key",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=d))||p)||p);a._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizedMaterial.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts"],(function(e){var t,i,a,r,n,l,o,s,u,c,h,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty,a=e.inheritsLoose,r=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,o=e.Material,s=e.MeshRenderer,u=e.Component},function(e){c=e.ready,h=e.init,p=e._language}],execute:function(){var f,d,g,m,L,y,v,z,M,b,R;n._RF.push({},"35069qDXPFL47Ep1p+WLvRd","LocalizedMaterial",void 0);var D=l.ccclass,_=l.property,w=l.executeInEditMode,F=(f=D("LocalizedMaterialItem"),d=_({type:o}),f((L=t((m=function(){i(this,"language",L,this),i(this,"material",y,this)}).prototype,"language",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"zh"}}),y=t(m.prototype,"material",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=m))||g);e("LocalizedMaterial",(v=D("LocalizedMaterial"),z=_({type:F}),v(M=w((R=t((b=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),l=0;l<a;l++)n[l]=arguments[l];return(t=e.call.apply(e,[this].concat(n))||this).mesh=null,i(t,"materialsList",R,r(t)),t}a(t,e);var n=t.prototype;return n.onLoad=function(){c||h("zh"),this.fetchRender()},n.fetchRender=function(){var e=this.getComponent(s);if(e)return this.mesh=e,void this.updateMat()},n.updateMat=function(){for(var e=0;e<this.materialsList.length;e++){var t=this.materialsList[e];t.language===p&&this.mesh&&this.mesh.setMaterial(t.material,0)}},t}(u)).prototype,"materialsList",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=b))||M)||M));n._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizedSprite.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts"],(function(e){var t,i,r,n,a,o,p,s,c,u,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty,r=e.inheritsLoose,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,p=e.SpriteFrame,s=e.Component},function(e){c=e.ready,u=e.init,l=e._language}],execute:function(){var f,h,d,g,y,z,L,m,b,v,S;a._RF.push({},"c05c25C4xNAupWYMB93tIzp","LocalizedSprite",void 0);var F=o.ccclass,_=o.property,w=o.executeInEditMode,D=(f=F("LocalizedSpriteItem"),h=_({type:p}),f((y=t((g=function(){i(this,"language",y,this),i(this,"spriteFrame",z,this)}).prototype,"language",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"zh"}}),z=t(g.prototype,"spriteFrame",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=g))||d);e("LocalizedSprite",(L=F("LocalizedSprite"),m=_({type:D}),L(b=w((S=t((v=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).sprite=null,i(t,"spriteList",S,n(t)),t}r(t,e);var a=t.prototype;return a.onLoad=function(){c||u("zh"),this.fetchRender()},a.fetchRender=function(){var e=this.getComponent("cc.Sprite");if(e)return this.sprite=e,void this.updateSprite()},a.updateSprite=function(){for(var e=0;e<this.spriteList.length;e++){var t=this.spriteList[e];if(t.language===l){this.sprite.spriteFrame=t.spriteFrame;break}}},t}(s)).prototype,"spriteList",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=v))||b)||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/lodash.ts",["cc"],(function(r){var n,t;return{setters:[function(r){n=r.cclegacy,t=r._decorator}],execute:function(){var e,u;n._RF.push({},"73cbciKsBZNKoNVI2fRrdw4","lodash",void 0);var i=t.ccclass;r("Lodash",i("Lodash")(((u=function(){function r(){}return r.find=function(n,t){var e;if(Array.isArray(n)||(n=r._toArray(n)),(e=n.filter(t)).length)return e[0]},r.forEach=function(n,t){Array.isArray(n)?n.forEach(t):r._toArrayKey(n).forEach((function(r,e,u){var i=r.key,o=r.value;t(o,i,n)}))},r.cloneDeep=function(n){if(null===n||"object"!=typeof n)return n;var t={};for(var e in n.constructor===Array&&(t=[]),n)n.hasOwnProperty(e)&&(t[e]=r.cloneDeep(n[e]));return t},r.map=function(n,t){Array.isArray(n)||(n=r._toArray(n));var e=[];return n.forEach((function(r,n,u){e.push(t(r,n,u))})),e},r._toArrayKey=function(r){var n=[];for(var t in r)r.hasOwnProperty(t)&&n.push({key:t,value:r[t]});return n},r._toArray=function(r){var n=[];for(var t in r)r.hasOwnProperty(t)&&n.push(r[t]);return n},r.filter=function(n,t){return Array.isArray(n)||(n=r._toArray(n)),n.filter(t)},r.isEqual=function(n,t){if(!(n instanceof Object)||!(t instanceof Object))return n===t;if(Object.keys(n).length!==Object.keys(t).length)return!1;for(var e in n){var u=n[e]instanceof Object,i=t[e]instanceof Object;if(u&&i)return r.isEqual(n[e],t[e]);if(n[e]!==t[e])return!1}return!0},r.pullAllWith=function(r,n,t){return n.forEach((function(n){r.filter((function(r){return t(r,n)})).forEach((function(n){var t=r.indexOf(n);-1!==r.indexOf(n)&&r.splice(t,1)}))})),r},r.now=function(){return Date.now()},r.pullAll=function(r,n){return n.forEach((function(n){var t=r.indexOf(n);-1!==r.indexOf(n)&&r.splice(t,1)})),r},r.forEachRight=function(n,t){Array.isArray(n)||(n=r._toArray(n));for(var e=n.length-1;e>=0;e--){if(!t(n[e]))break}},r.startsWith=function(r,n,t){return(r=r.substr(t)).startsWith(n)},r.endsWith=function(r,n,t){return(r=r.substr(t)).endsWith(n)},r.remove=function(n,t){var e=[],u=[];return n.forEach((function(r,n){t(r)&&(e.push(r),u.push(n))})),r._basePullAt(n,u),e},r._basePullAt=function(r,n){for(var t,e=r?n.length:0,u=e-1;e--;){var i=n[e];e!==u&&i===t||(t=i,Array.prototype.splice.call(r,i,1))}return r},r.findIndex=function(r,n,t){var e;if(r=r.slice(t),"function"==typeof n){for(e=0;e<r.length;e++)if(n(r[e]))return e}else if(Array.isArray(n))for(e=0;e<r.length;e++){var u=n[0],i=!0;if(n.length>1&&(i=n[1]),r[e][u]===i)return e}else for(e=0;e<r.length;e++)if(r[e]===n)return e;return-1},r.concat=function(){var r=arguments.length;if(!r)return[];for(var n=arguments[0],t=1;t<r;)n=n.concat(arguments[t]),t++;return n},r.isNumber=function(r){return"number"==typeof r},r.indexOf=function(r,n,t){return(r=r.slice(t)).indexOf(n)},r.join=function(r,n){if(null===r)return"";var t="";return r.forEach((function(r){t+=r+n})),t.substr(0,t.length-1)},r.split=function(r,n,t){return r.split(n,t)},r.max=function(r){if(r&&r.length){for(var n,t=0;t<r.length;t++)0===t?n=r[0]:n<r[t]&&(n=r[t]);return n}},r.drop=function(r,n){return(null===r?0:r.length)?r.slice(n):[]},r.flattenDeep=function(n){return n.reduce((function(n,t){return n.concat(Array.isArray(t)?r.flattenDeep(t):t)}),[])},r.uniq=function(r){var n=[];return r.forEach((function(r){-1===n.indexOf(r)&&n.push(r)})),n},r.isNaN=function(n){return r.isNumber(n)&&n!==+n},r.chunk=function(r,n){if(!(null===r?0:r.length)||n<1)return[];for(var t=[];r.length>n;)t.push(r.slice(0,n)),r=r.slice(n);return t.push(r),t},r.toFinite=function(r){var n=1/0;return r?(r=Number(r))===n||r===-1/0?17976931348623157e292*(r<0?-1:1):r==r?r:0:0===r?r:0},r.isObject=function(r){var n=typeof r;return null!==r&&("object"===n||"function"===n)},r.isLength=function(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=r.MAX_SAFE_INTEGER},r._isArrayLike=function(n){return null!==n&&r.isLength(n.length)},r.maxBy=function(r,n){if(r&&r.length){for(var t,e,u=0;u<r.length;u++)0===u?(t=n(r[0]),e=r[0]):t<r[u]&&(t=r[u],e=r[u]);return e}},r.minBy=function(r,n){if(r&&r.length){for(var t,e,u=0;u<r.length;u++)0===u?(t=n(r[0]),e=r[0]):t>r[u]&&(t=n(r[u]),e=r[u]);return e}},r.sumBy=function(r,n){var t=0;for(var e in r)t+=n(r[e]);return t},r.countBy=function(r,n){var t={};for(var e in r){var u=n(e);t.hasOwnProperty(u)?t[u]+=1:t[u]=1}return t},r}()).MAX_SAFE_INTEGER=9007199254740991,e=u))||e);n._RF.pop()}}}));

System.register("chunks:///_virtual/login.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constant.ts"],(function(n){var o,t,e,i,r,c,s,u;return{setters:[function(n){o=n.inheritsLoose},function(n){t=n.cclegacy,e=n._decorator,i=n.game,r=n.assetManager,c=n.director,s=n.Component},function(n){u=n.constant}],execute:function(){var a;t._RF.push({},"74fean0Wn1I8JsuDrqOYuhh","login",void 0);var l=e.ccclass;e.property,n("login",l("login")(a=function(n){function t(){return n.apply(this,arguments)||this}return o(t,n),t.prototype.start=function(){console.log("login"),i.addPersistRootNode(this.node),u.LOGIN_TIME=Date.now();var n=[];window.wx?(["resources","main"].forEach((function(o){var t=new Promise((function(n,t){r.loadBundle(o,(function(o,e){if(o)return t(o);n(e)}))}));n.push(t)})),Promise.all(n).then((function(){c.loadScene("main",(function(){}),(function(){}))}))):c.loadScene("main",(function(){}),(function(){}))},t}(s))||a);t._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./migrate-canvas.ts","./bg.ts","./effectManager.ts","./fightManager.ts","./fruit.ts","./mouseControl.ts","./audioManager.ts","./btnAdapter.ts","./clientEvent.ts","./constant.ts","./csvManager.ts","./localConfig.ts","./lodash.ts","./playerData.ts","./poolManager.ts","./resourceUtil.ts","./storageManager.ts","./uiManager.ts","./util.ts","./wxAdapter.ts","./login.ts","./main.ts","./choose.ts","./fightTip.ts","./specialHit.ts","./fightUI.ts","./pause.ts","./numItem.ts","./numScroll.ts","./settlement.ts","./LanguageData.ts","./LocalizedLabel.ts","./LocalizedMaterial.ts","./LocalizedSprite.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/main.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util.ts","./wxAdapter.ts","./audioManager.ts","./constant.ts","./localConfig.ts","./uiManager.ts","./LanguageData.ts","./storageManager.ts","./fightManager.ts"],(function(n){var t,o,i,a,e,r,s,c,u,l,f,d,g,h,p,m,y,M,w,D,_,v;return{setters:[function(n){t=n.applyDecoratedDescriptor,o=n.inheritsLoose,i=n.initializerDefineProperty,a=n.assertThisInitialized},function(n){e=n.cclegacy,r=n._decorator,s=n.Node,c=n.game,u=n.PhysicsSystem,l=n.sys,f=n.director,d=n.find,g=n.Component},function(n){h=n.Util},function(n){p=n.wxAdapter},function(n){m=n.AudioManager},function(n){y=n.constant},function(n){M=n.LocalConfig},function(n){w=n.UIManager},function(n){D=n.init},function(n){_=n.StorageManager},function(n){v=n.FightManager}],execute:function(){var A,L,R,I,G;e._RF.push({},"7e3c4eFIf5GSJUWiqOQRzRd","main",void 0);var N=r.ccclass,b=r.property;n("Main",(A=N("Main"),L=b(s),A((G=t((I=function(n){function t(){for(var t,o=arguments.length,e=new Array(o),r=0;r<o;r++)e[r]=arguments[r];return t=n.call.apply(n,[this].concat(e))||this,i(t,"audioNode",G,a(t)),t._minLoadDuration=4,t}o(t,n);var e=t.prototype;return e.onLoad=function(){D("zh")},e.start=function(){var n=this,t=_.instance.getGlobalData("frameRate");"number"!=typeof t&&(t=y.GAME_FRAME,window.wx&&h.checkIsLowPhone()&&(t=30),_.instance.setGlobalData("frameRate",t)),console.log("###frameRate",t),c.frameRate=t,u.instance.fixedTimeStep=1/t,window.cocosAnalytics&&window.cocosAnalytics.init({appID:"699861599",version:"1.0.0",storeID:l.platform.toString(),engine:"cocos"}),M.instance.loadConfig((function(){p.shareGame(y.GAME_NAME_CH,""),n._loadFinish()})),f.addPersistRootNode(this.audioNode),m.instance.init(this.audioNode)},e._loadFinish=function(){this.scheduleOnce((function(){w.instance.showDialog("choose/choose",[],(function(){var n;v.isGameInit=!0,null==(n=d("CanvasLogin"))||n.destroy(),console.log("###开屏界面展示时长",Date.now()-y.LOGIN_TIME)}))}),this._minLoadDuration)},t}(g)).prototype,"audioNode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=I))||R));e._RF.pop()}}}));

System.register("chunks:///_virtual/migrate-canvas.ts",["cc"],(function(){var n,e,t,i,r,o;return{setters:[function(a){n=a.cclegacy,e=a.director,t=a.Director,i=a.Canvas,r=a.Camera,o=a.game}],execute:function(){n._RF.push({},"228dd1bExdFqIscc69mYjFy","migrate-canvas",void 0);var a=1048575;function c(n,e){for(var t=0,i=n.children.length;t<i;t++)n.children[t].layer=e,c(n.children[t],e)}e.on(t.EVENT_AFTER_SCENE_LAUNCH,(function(){var n,t,l,s=null==(n=e.getScene())?void 0:n.children,m=null==(t=e.getScene())?void 0:t.getComponentsInChildren(i);if(!(m.length<=1)){m=m.filter((function(n){return!!n.cameraComponent}));var v=null==(l=e.getScene())?void 0:l.getComponentsInChildren(r),u=0;v.forEach((function(n){return u|=n.visibility&a}));for(var p=[],f=0,d=s.length;f<d;f++){var C=s[f];if(o.isPersistRootNode(C)){var h=C.getComponentsInChildren(i);0!==h.length&&p.push.apply(p,h.filter((function(n){return!!n.cameraComponent})))}}p.forEach((function(n){if(m.find((function(e){return e!==n&&e.cameraComponent.visibility&n.cameraComponent.visibility&a}))){var e=~u,t=e&~(e-1);n.cameraComponent.visibility=t|4293918720&n.cameraComponent.visibility,c(n.node,t),u|=e}}))}}));var l=cc.Node.prototype.setParent;function s(n){var e=null,t=n.getComponent(i);return t&&t.cameraComponent?e=t.cameraComponent.visibility&t.node.layer?t.node.layer:t.cameraComponent.visibility&~(t.cameraComponent.visibility-1):(n.parent&&(e=s(n.parent)),e)}cc.Node.prototype.setParent=function(n,e){if(l.call(this,n,e),n){var t=s(this);t&&(this.layer=t,c(this,t))}},n._RF.pop()}}}));

System.register("chunks:///_virtual/mouseControl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./audioManager.ts","./constant.ts","./fruit.ts","./poolManager.ts","./resourceUtil.ts","./fightManager.ts"],(function(e){var t,i,s,n,o,h,r,c,_,a,l,u,d,P,g,T,f,C,p,v,m,M,S;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,s=e._decorator,n=e.Vec3,o=e.geometry,h=e.find,r=e.Line,c=e.director,_=e.CameraComponent,a=e.Node,l=e.screen,u=e.Vec2,d=e.PhysicsSystem,P=e.GradientRange,g=e.Color,T=e.Component},function(e){f=e.ClientEvent},function(e){C=e.AudioManager},function(e){p=e.constant},function(e){v=e.Fruit},function(e){m=e.PoolManager},function(e){M=e.resourceUtil},function(e){S=e.FightManager}],execute:function(){var O;i._RF.push({},"8925bmVgRpCS4e3E5PTELLZ","mouseControl",void 0);var w=s.ccclass,y=(s.property,new n),E=new o.Ray;e("MouseControl",w("MouseControl")(O=function(e){function i(){for(var t,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(t=e.call.apply(e,[this].concat(s))||this)._score=0,t._previousPos=new u,t._hitPoint=new n,t._needOneCut=!1,t._startTouchPos=null,t._endTouchPos=null,t._isMove=!1,t._curMoveDistance=0,t._isAchieveSpeed=!1,t._lineCom=null,t._linePosList=new Array,t._linePosIndex=0,t._trailAlpha=0,t._camera=null,t._lineCamera=null,t._startPos=new u,t._endPos=new u,t._zOrder=.3/999,t._offsetDir=new u,t._uiPos=new n,t._colorMax=new g(255,255,255,0),t._colorMin=new g(0,0,0,0),t._screenPos=new n,t._gradientRange=new P,t._offsetPoints=[new u(-.2,.2),new u(0,.2),new u(.2,.2),new u(-.2,0),new u(0,0),new u(.2,0),new u(-.2,-.2),new u(0,-.2),new u(.2,-.2)],t}t(i,e);var s=i.prototype;return s.onLoad=function(){var e,t,i=this;M.loadEffectRes("line/line").then((function(e){var t=m.instance.getNode(e,h("lineCamera"));i._lineCom=t.getComponent(r)})),this._camera=null==(e=c.getScene())?void 0:e.getComponentInChildren(_),this._lineCamera=null==(t=c.getScene())||null==(t=t.getChildByName("lineCamera"))?void 0:t.getComponent(_)},s.start=function(){this.node.on(a.EventType.TOUCH_START,this._onTouchStart,this),this.node.on(a.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.on(a.EventType.TOUCH_END,this._onTouchEnd,this),this.node.on(a.EventType.TOUCH_CANCEL,this._onTouchCancel,this)},s._onTouchStart=function(e){var t=e.getTouches()[0].getLocation();this._startPos.set(t),this._endPos.set(t),this._linePosIndex=0,this._trailAlpha=1,this._updateTrailPoint(),this._resetScore(),this._needOneCut=!1,this._previousPos.set(t)},s._onTouchMove=function(e){var t=e.getTouches();null==this._startTouchPos?this._startTouchPos=t[0].getStartLocation():this._startTouchPos=t[0].getPreviousLocation(),this._endTouchPos=t[0].getLocation();var i=l.windowSize;this._endTouchPos.x>i.width||this._endTouchPos.x<0||this._endTouchPos.y<0||this._endTouchPos.y>i.height||(this._isMove=!0,u.subtract(this._offsetDir,this._endTouchPos,this._startTouchPos),this._curMoveDistance=this._offsetDir.length(),this._endPos.set(this._endTouchPos),u.distance(this._startPos,this._endPos)>=.1&&(this._trailAlpha=1,++this._linePosIndex,this._updateTrailPoint()),this._startPos.set(this._endTouchPos),!this._needOneCut&&this._offsetDir.length()>5&&(this._trigger(this._endTouchPos),this._previousPos.set(this._endTouchPos)))},s._onTouchEnd=function(e){this._endScore(),this._isMove=!1,this._curMoveDistance=0,this._startTouchPos=null,this._endTouchPos=null},s._onTouchCancel=function(e){this._endScore(),this._isMove=!1,this._curMoveDistance=0,this._startTouchPos=null,this._endTouchPos=null},s._endScore=function(){this._hitCombo(),this._score=0,this.unschedule(this._callbackFun),this.unschedule(this._resetScore)},s._resetScore=function(){this._hitCombo(),this._score=0},s._callbackFun=function(){this._hitCombo(),this._score=0},s._hitCombo=function(){this._score>=3&&(this._camera.convertToUINode(this._hitPoint,h("Canvas"),this._uiPos),f.dispatchEvent(p.EVENT_NAME.ON_GET_SCORE,this._score,p.SCORE_TYPE.HIT_COMBO,this._uiPos))},s._getScore=function(){this._score++,this.unschedule(this._callbackFun),this.unschedule(this._resetScore),this.scheduleOnce(this._callbackFun,.3),this.scheduleOnce(this._resetScore,1)},s._trigger=function(e){var t=this;this._offsetPoints.forEach((function(i){t._camera.screenPointToRay(e.x+i.x,e.y+i.y,E);d.instance.raycast(E,4294967295,100,!0)&&d.instance.raycastResults.forEach((function(i){var s,n=i.collider.node,o=null==(s=n.parent)||null==(s=s.parent)?void 0:s.getComponent(v);o&&o.fruitInfo.type===p.FRUIT_TYPE.SPECIAL?t._needOneCut||(t._needOneCut=!0,t.scheduleOnce((function(){t._needOneCut=!1}),.2),o.isTriggered=!0,n.emit("onTrigger",i.hitPoint,e,t._previousPos)):o&&o.colliderOne.enabled&&o.fruitInfo.type===p.FRUIT_TYPE.BOMB?(o.colliderOne.enabled=!1,o.isTriggered=!0,n.emit("onTrigger",i.hitPoint,e,t._previousPos)):o&&o.colliderOne.enabled?(o.colliderOne.enabled=!1,o.isTriggered=!0,n.emit("onTrigger",i.hitPoint,e,t._previousPos.clone()),t._getScore()):n.emit("onTrigger",n),t._hitPoint.set(n.worldPosition)}))}))},s._setLineColor=function(e){this._trailAlpha>0&&(this._gradientRange.mode=P.Mode.TwoColors,this._colorMax.set(255,255,255,255*this._trailAlpha),this._colorMin.set(0,0,0,255*this._trailAlpha),this._gradientRange.colorMax=this._colorMax,this._gradientRange.colorMin=this._colorMin,this._lineCom.color=this._gradientRange,this._trailAlpha-=6*e,this._trailAlpha<0&&(this._colorMax.set(255,255,255,0),this._colorMin.set(0,0,0,0),this._gradientRange.colorMax=this._colorMax,this._gradientRange.colorMin=this._colorMin,this._lineCom.color=this._gradientRange))},s._updateTrailPoint=function(){if(this._linePosIndex<10)for(var e=this._linePosIndex;e<10;++e)this._screenPos.set(this._endPos.x,this._endPos.y,this._zOrder),this._lineCamera.screenToWorld(this._screenPos,y),this._linePosList[e]?this._linePosList[e].set(y):this._linePosList[e]=n.clone(y);else{for(var t=0;t<9;++t)this._linePosList[t]=this._linePosList[t+1];this._screenPos.set(this._endPos.x,this._endPos.y,this._zOrder),this._lineCamera.screenToWorld(this._screenPos,y),this._linePosList[9]=n.clone(y)}},s._setLinePos=function(){this._lineCom.positions=this._linePosList},s.update=function(e){if(this._lineCom){if(this._setLinePos(),this._setLineColor(e),this._curMoveDistance/(60*e)>=10){if(this._isAchieveSpeed)return;this._isAchieveSpeed=!0}else this._isAchieveSpeed=!1;this._isMove&&this._isAchieveSpeed&&S.isGameInit&&C.instance.playSound(p.AUDIO_SOUND.LINE)}},i}(T))||O);i._RF.pop()}}}));

System.register("chunks:///_virtual/numItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,o,r,u;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,r=t.LabelComponent,u=t.Component}],execute:function(){var i;e._RF.push({},"2f418aVQoNGmpQuWcTOnOdo","numItem",void 0);var c=o.ccclass;o.property,t("NumItem",c("NumItem")(i=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e.prototype.init=function(t){this.node.getComponent(r).string=String(t%10)},e}(u))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/numScroll.ts",["./rollupPluginModLoBabelHelpers.js","cc","./poolManager.ts","./numItem.ts"],(function(t){var n,e,i,o,r,s,u,l,c,h,a,d,m,p;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,u=t.Node,l=t.Prefab,c=t.Vec3,h=t.UITransform,a=t.tween,d=t.Component},function(t){m=t.PoolManager},function(t){p=t.NumItem}],execute:function(){var g,f,_,N,C,v,w;r._RF.push({},"486dcmstW5IQqEUPDgOvllC","numScroll",void 0);var y=s.ccclass,P=s.property;t("NumScroll",(g=y("NumScroll"),f=P(u),_=P(l),g((v=n((C=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return n=t.call.apply(t,[this].concat(r))||this,i(n,"ndContent",v,o(n)),i(n,"pfNumItem",w,o(n)),n._tweenNum=null,n._unitHeight=0,n._targetNum=0,n._curNum=0,n._targetPos=new c,n}e(n,t);var r=n.prototype;return r.start=function(){},r.onDisable=function(){this._recycle()},r.startScroll=function(t,n,e){var i,o=this;this._curNum=1,this._targetNum=t;var r=m.instance.getNode(this.pfNumItem,this.ndContent),s=r.getComponent(p);null==s||s.init(this._curNum);var u=null==(i=r.getComponent(h))?void 0:i.contentSize.height;u&&(this._unitHeight=u),this.ndContent.setPosition(0,0,0);var l=10*(2+n)+this._targetNum+1,c=(l-.5)*this._unitHeight,d=.1*l;this._closeTween();var g=this.ndContent.position;this.ndContent.setPosition(g.x,.5*u,g.z),this._targetPos.set(g.x,c,g.z),this._tweenNum=a(this.ndContent).delay(.2*n).to(d,{position:this._targetPos},{easing:"quadInOut"}).call((function(){e&&e(),o._closeTween(),o._unitHeight=0})).start()},r._closeTween=function(){this._tweenNum&&(this._tweenNum.stop(),this._tweenNum=null)},r._recycle=function(){for(var t=this.ndContent.children.length-1;t>=0;t--)if(this.ndContent.children.length>=2){var n=this.ndContent.children[t-1];n&&m.instance.putNode(n)}this.ndContent.children[0].setPosition(0,0,0),this.ndContent.setPosition(0,0,0)},r.update=function(t){if(this.ndContent.children.length&&this._unitHeight&&this.ndContent.children[this.ndContent.children.length-1].worldPosition.y>=this.node.worldPosition.y){this._curNum+=1;var n=m.instance.getNode(this.pfNumItem,this.ndContent).getComponent(p);null==n||n.init(this._curNum)}},n}(d)).prototype,"ndContent",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=n(C.prototype,"pfNumItem",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=C))||N));r._RF.pop()}}}));

System.register("chunks:///_virtual/pause.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiManager.ts","./clientEvent.ts","./audioManager.ts","./constant.ts"],(function(n){var t,e,a,c,i,o,s,u;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,a=n._decorator,c=n.Component},function(n){i=n.UIManager},function(n){o=n.ClientEvent},function(n){s=n.AudioManager},function(n){u=n.constant}],execute:function(){var r;e._RF.push({},"a4c06Cq159Gm6OXSOlc7geL","pause",void 0);var p=a.ccclass;a.property,n("Pause",p("Pause")(r=function(n){function e(){return n.apply(this,arguments)||this}t(e,n);var a=e.prototype;return a.start=function(){},a.show=function(){s.instance.stopAll()},a.onBtnBackClick=function(){o.dispatchEvent(u.EVENT_NAME.ON_GAME_STOP),i.instance.hideDialog("pause/pause")},a.onBtnPlayClick=function(){o.dispatchEvent(u.EVENT_NAME.ON_GAME_RESUME),i.instance.hideDialog("pause/pause")},e}(c))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/playerData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constant.ts","./storageManager.ts"],(function(t){var e,n,a,i,s,o,r;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){a=t.cclegacy,i=t._decorator,s=t.Component},function(t){o=t.constant},function(t){r=t.StorageManager}],execute:function(){var l,c;a._RF.push({},"98a07c7835JX7ic6+JOh45v","playerData",void 0);var f=i.ccclass;i.property,t("playerData",f("playerData")(((c=function(t){function a(){for(var e,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))||this).userId="",e.playerInfo=null,e.history=null,e.settings=null,e.isNewBee=!1,e.dataVersion="",e.signInInfo=null,e.isLoadFinished=!1,e.serverTime=0,e.localTime=0,e.showCar=0,e.isComeFromBalance=!1,e}e(a,t);var i=a.prototype;return i.loadGlobalCache=function(){var t=r.instance.getUserId();t&&(this.userId=t)},i.loadFromCache=function(){this.playerInfo=this.loadDataByKey(o.LOCAL_CACHE.PLAYER),this.history=this.loadDataByKey(o.LOCAL_CACHE.HISTORY),this.settings=this.loadDataByKey(o.LOCAL_CACHE.SETTINGS)},i.loadDataByKey=function(t){var e={},n=r.instance.getConfigData(t);if(n)try{e=JSON.parse(n)}catch(t){e={}}return e},i.createPlayerInfo=function(t){if(this.playerInfo={},this.playerInfo.diamond=0,this.playerInfo.gold=0,this.playerInfo.heart=0,this.playerInfo.level=1,this.playerInfo.fishingLevel=1,this.playerInfo.gardenLevel=1,this.playerInfo.farmlandLevel=1,this.playerInfo.createDate=new Date,this.playerInfo.dictBuyTask={},this.playerInfo.signInInfo={},this.isNewBee=!0,t)for(var e in t)this.playerInfo[e]=t[e];this.savePlayerInfoToLocalCache()},i.generateRandomAccount=function(){this.userId=""+Date.now()+10,r.instance.setUserId(this.userId)},i.saveAccount=function(t){this.userId=t,r.instance.setUserId(t)},i.savePlayerInfoToLocalCache=function(){r.instance.setConfigData(o.LOCAL_CACHE.PLAYER,JSON.stringify(this.playerInfo))},i.saveAll=function(){r.instance.setConfigDataWithoutSave(o.LOCAL_CACHE.PLAYER,JSON.stringify(this.playerInfo)),r.instance.setConfigDataWithoutSave(o.LOCAL_CACHE.HISTORY,JSON.stringify(this.history)),r.instance.setConfigDataWithoutSave(o.LOCAL_CACHE.SETTINGS,JSON.stringify(this.settings)),r.instance.setConfigData(o.LOCAL_CACHE.DATA_VERSION,this.dataVersion)},i.updatePlayerInfo=function(t,e){var n=!1;this.playerInfo.hasOwnProperty(t)&&("number"==typeof e?(n=!0,this.playerInfo[t]+=e,this.playerInfo[t]<0&&(this.playerInfo[t]=0)):"boolean"!=typeof e&&"string"!=typeof e||(n=!0,this.playerInfo[t]=e)),n&&r.instance.setConfigData(o.LOCAL_CACHE.PLAYER,JSON.stringify(this.playerInfo))},i.clear=function(){this.playerInfo={},this.settings={},this.saveAll()},n(a,null,[{key:"instance",get:function(){return this._instance||(this._instance=new a),this._instance}}]),a}(s))._instance=void 0,l=c))||l);a._RF.pop()}}}));

System.register("chunks:///_virtual/poolManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,e,n,i,r;return{setters:[function(t){o=t.createClass},function(t){e=t.cclegacy,n=t._decorator,i=t.instantiate,r=t.NodePool}],execute:function(){var a,c;e._RF.push({},"6556f9eR7lI/JstC+lShrGe","poolManager",void 0);var s=n.ccclass;n.property,t("PoolManager",s("PoolManager")(((c=function(){function t(){this._dictPool={},this._dictPrefab={}}var e=t.prototype;return e.getNode=function(t,o){var e=t.name;t.position||(e=t.data.name),this._dictPrefab[e]=t;var n=null;if(this._dictPool.hasOwnProperty(e)){var a=this._dictPool[e];n=a.size()>0?a.get():i(t)}else{var c=new r;this._dictPool[e]=c,n=i(t)}return n.parent=o,n.active=!0,n},e.putNode=function(t){if(t){var o=t.name,e=null;this._dictPool.hasOwnProperty(o)?e=this._dictPool[o]:(e=new r,this._dictPool[o]=e),e.put(t)}},e.clearPool=function(t){this._dictPool.hasOwnProperty(t)&&this._dictPool[t].clear()},e.prePool=function(t,o){var e=t.name,n=new r;this._dictPool[e]=n;for(var a=0;a<o;a++){var c=i(t);n.put(c)}},o(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,a=c))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/resourceUtil.ts",["cc"],(function(e){var t,n,i,r,o,s,a,f,c;return{setters:[function(e){t=e.cclegacy,n=e._decorator,i=e.resources,r=e.error,o=e.Prefab,s=e.instantiate,a=e.find,f=e.SpriteFrame,c=e.isValid}],execute:function(){var u;t._RF.push({},"ae83aVxL39PnZdrO90+LiwZ","resourceUtil",void 0);var l=n.ccclass;e("resourceUtil",l("resourceUtil")(u=function(){function e(){}return e.loadRes=function(e,t,n){i.load(e,(function(e,t){if(e)return r(e.message||e),void n(e,t);n(null,t)}))},e.loadEffectRes=function(e){var t=this;return new Promise((function(n,i){t.loadRes("prefab/effect/"+e,o,(function(e,t){e||n&&n(t)}))}))},e.loadModelRes=function(e){var t=this;return new Promise((function(n,i){t.loadRes("prefab/model/"+e,o,(function(e,t){e||n&&n(t)}))}))},e.getMap=function(e,t){var n="map";n+=e>=100?e:e>=10?"0"+e:"00"+e,this.loadRes("map/config/"+n,null,(function(e,n){if(e)t(e,n);else{var i="";if(n._file){window.LZString&&(i=window.LZString.decompressFromEncodedURIComponent(n._file));var r=JSON.parse(i);t(null,r)}else if(n.text){window.LZString&&(i=window.LZString.decompressFromEncodedURIComponent(n.text));var o=JSON.parse(i);t(null,o)}else n.json?t(null,n.json):t("failed")}}))},e.getMapObj=function(e,t,n,r){for(var s=[],a=0;a<t.length;a++)s.push("map/"+e+"/"+t[a]);i.load(s,o,n,r)},e.getUIPrefabRes=function(e,t){void 0===t&&(t=function(){}),this.loadRes("prefab/ui/"+e,o,t)},e.createUI=function(e,t,n){this.getUIPrefabRes(e,(function(e,i){if(!e){var r=s(i);r.setPosition(0,0,0),n||(n=a("Canvas")),n.addChild(r),t&&t(null,r)}}))},e.getTextData=function(e,t){this.loadRes("datas/"+e,null,(function(e,n){if(e)r(e.message||e);else{var i=n.text;t(e,i)}}))},e.setSpriteFrame=function(e,t,n){this.loadRes(e+"/spriteFrame",f,(function(i,r){if(i)return console.error("set sprite frame failed! err:",e,i),void n(i);t&&c(t)&&(t.spriteFrame=r,n(null))}))},e.getEffect=function(e,t){this.loadRes("prefab/effect/"+e,o,t)},e.getFruit=function(e,t){var n="prefab/fruit/"+e;this.loadRes(n,o,t)},e}())||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/settlement.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util.ts","./uiManager.ts","./poolManager.ts","./clientEvent.ts","./audioManager.ts","./constant.ts","./numScroll.ts","./LanguageData.ts"],(function(i){var e,n,t,o,l,r,s,a,c,u,d,h,p,m,f,_,g,T,S,E,b,N,y,A;return{setters:[function(i){e=i.applyDecoratedDescriptor,n=i.inheritsLoose,t=i.initializerDefineProperty,o=i.assertThisInitialized},function(i){l=i.cclegacy,r=i._decorator,s=i.AnimationComponent,a=i.Node,c=i.Prefab,u=i.SpriteFrame,d=i.SpriteComponent,h=i.UITransform,p=i.view,m=i.find,f=i.ColliderComponent,_=i.Component},function(i){g=i.Util},function(i){T=i.UIManager},function(i){S=i.PoolManager},function(i){E=i.ClientEvent},function(i){b=i.AudioManager},function(i){N=i.constant},function(i){y=i.NumScroll},function(i){A=i.updateSceneRenderers}],execute:function(){var C,O,v,L,M,w,I,D,B,z,U,F,P,k,R,V,H,G,W,j,x,Y,q,J,K,Q,X,Z,$,ii,ei,ni,ti,oi,li,ri,si;l._RF.push({},"c54afsh9MlE87keVAdYBwTV","settlement",void 0);var ai=r.ccclass,ci=r.property;i("Settlement",(C=ai("Settlement"),O=ci(s),v=ci(a),L=ci(a),M=ci(c),w=ci(a),I=ci(a),D=ci(a),B=ci(c),z=ci(c),U=ci(u),F=ci(u),P=ci(d),k=ci(s),R=ci(s),V=ci(s),H=ci(s),G=ci(h),C((x=e((j=function(i){function e(){for(var e,n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return e=i.call.apply(i,[this].concat(l))||this,t(e,"aniScore",x,o(e)),t(e,"ndScore",Y,o(e)),t(e,"ndNumParent",q,o(e)),t(e,"pfNumScroll",J,o(e)),t(e,"ndBtnEndLess",K,o(e)),t(e,"ndBtnLimitTime",Q,o(e)),t(e,"ndTitle",X,o(e)),t(e,"pfEndless",Z,o(e)),t(e,"pfLimitTime",$,o(e)),t(e,"sfCloseAudio",ii,o(e)),t(e,"sfOpenAudio",ei,o(e)),t(e,"spIcon",ni,o(e)),t(e,"aniChoose",ti,o(e)),t(e,"aniEndless",oi,o(e)),t(e,"aniLimitTime",li,o(e)),t(e,"aniSwitch",ri,o(e)),t(e,"bgUitra",si,o(e)),e._ndEndless=null,e._ndLimitTime=null,e._colliderLimitTime=null,e._endlessCollider=null,e._scrollOverTimes=0,e._score=0,e._isCollider=!1,e._isMusicOpen=!1,e}n(e,i);var l=e.prototype;return l.onEnable=function(){E.on(N.EVENT_NAME.REFRESH_AUDIO_STATE,this._refreshAudioState,this)},l.onDisable=function(){E.off(N.EVENT_NAME.REFRESH_AUDIO_STATE,this._refreshAudioState,this)},l.start=function(){this.bgUitra.width=p.getVisibleSize().width},l.show=function(i){A(),this._score=i,this.aniScore.stop(),b.instance.stopAll(),b.instance.playSound(N.AUDIO_SOUND.SETTLEMENT),b.instance.playSound(N.AUDIO_SOUND.SETTLEMENT_SCORE,!0),this.aniSwitch.play(),this.ndBtnEndLess.active=!1,this.ndBtnLimitTime.active=!1,this.ndTitle.active=!1,this.ndScore.setScale(1.5,1.5,1.5),this.ndScore.setPosition(0,0,0),this._showScroll(),this._isMusicOpen=b.instance.getAudioSetting(!0),this.spIcon.spriteFrame=this._isMusicOpen?this.sfOpenAudio:this.sfCloseAudio},l._clearFightManagerNode=function(){this._ndEndless.off("onTrigger",this._onTrigger,this),this._ndLimitTime.off("onTrigger",this._onTrigger,this),S.instance.putNode(this._ndEndless),S.instance.putNode(this._ndLimitTime)},l.onBtnEndlessClick=function(){this._clearFightManagerNode(),E.dispatchEvent(N.EVENT_NAME.ON_GAME_START,N.GAME_MODE.ENDLESS),T.instance.hideDialog("settlement/settlement"),b.instance.playSound(N.AUDIO_SOUND.BTN,!1)},l.onBtnLimitTimeClick=function(){this._clearFightManagerNode(),E.dispatchEvent(N.EVENT_NAME.ON_GAME_START,N.GAME_MODE.LIMIT_TIME),T.instance.hideDialog("settlement/settlement"),b.instance.playSound(N.AUDIO_SOUND.BTN,!1)},l._showScroll=function(){var i=this;this._scrollOverTimes=0,this.ndNumParent.children.forEach((function(i){i&&(i.active=!1)}));for(var e=g.numToArray(this._score).reverse(),n=0;n<e.length;n++){var t=void 0;(t=n>=this.ndNumParent.children.length?S.instance.getNode(this.pfNumScroll,this.ndNumParent):this.ndNumParent.children[n]).active=!0;var o=t.getComponent(y),l=e[n];null==o||o.startScroll(l,n,(function(){i._checkScrollOver()}))}},l._checkScrollOver=function(){var i=this;this._scrollOverTimes+=1,this._scrollOverTimes>=String(this._score).length&&(this.aniScore.play(),this.aniScore.once(s.EventType.FINISHED,(function(){var e;i._ndEndless=S.instance.getNode(i.pfEndless,m("fightManager")),i._ndLimitTime=S.instance.getNode(i.pfLimitTime,m("fightManager")),i._ndEndless.setWorldPosition(-.7,-.65,-.7),i._ndLimitTime.setWorldPosition(.7,-.65,-.7),i._ndEndless.on("onTrigger",i._onTrigger,i),i._ndLimitTime.on("onTrigger",i._onTrigger,i),i._endlessCollider=i._ndEndless.getComponent(f),i._colliderLimitTime=i._ndLimitTime.getComponent(f),i._colliderLimitTime.enabled=!0,i._endlessCollider.enabled=!0,i._isCollider=!1;var n=i.aniChoose.getState("chooseSettlementIn");n.time=0,n.sample(),n.stop(),i.aniChoose.play("chooseSettlementIn"),i.aniEndless.play("chooseBtn07Idle"),i.aniLimitTime.play("chooseBtn08Idle"),i.ndBtnEndLess.active=!0,i.ndBtnLimitTime.active=!0,null==(e=i.ndTitle.getComponentInChildren(s))||e.play(),i.ndTitle.active=!0,b.instance.stopSingleSound(N.AUDIO_SOUND.SETTLEMENT_SCORE)})))},l._onTrigger=function(i){var e;if(!this._isCollider){this._isCollider=!0;var n=this._endlessCollider,t="chooseBtn07Click",o=this.aniEndless,l=this.onBtnEndlessClick.bind(this);i.name===this._ndLimitTime.name&&(t="chooseBtn08Click",o=this.aniLimitTime,l=this.onBtnLimitTimeClick.bind(this),n=this._colliderLimitTime),n.enabled&&(this._colliderLimitTime.enabled=!1,this._endlessCollider.enabled=!1,o.play(t),this.aniSwitch.play("btnAnimationOut"),null==(e=this.ndTitle.getComponentInChildren(s))||e.play("settlementNewWinOut"),this.aniChoose.play("chooseSettlementOut"),this.aniChoose.once(s.EventType.FINISHED,(function(){l()})))}},l.onSwitchBtnClick=function(){b.instance.playSound(N.AUDIO_SOUND.BTN,!1),this.aniSwitch.play("btnAnimationClick"),this._isMusicOpen=!this._isMusicOpen,this._isMusicOpen?(this.spIcon.spriteFrame=this.sfOpenAudio,b.instance.openMusic(),b.instance.openSound()):(b.instance.closeMusic(),b.instance.closeSound(),this.spIcon.spriteFrame=this.sfCloseAudio)},l._refreshAudioState=function(){this._isMusicOpen=b.instance.getAudioSetting(!0),this.spIcon.spriteFrame=this._isMusicOpen?this.sfOpenAudio:this.sfCloseAudio},e}(_)).prototype,"aniScore",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(j.prototype,"ndScore",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(j.prototype,"ndNumParent",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(j.prototype,"pfNumScroll",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(j.prototype,"ndBtnEndLess",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(j.prototype,"ndBtnLimitTime",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(j.prototype,"ndTitle",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(j.prototype,"pfEndless",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(j.prototype,"pfLimitTime",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ii=e(j.prototype,"sfCloseAudio",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ei=e(j.prototype,"sfOpenAudio",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ni=e(j.prototype,"spIcon",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ti=e(j.prototype,"aniChoose",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oi=e(j.prototype,"aniEndless",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),li=e(j.prototype,"aniLimitTime",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ri=e(j.prototype,"aniSwitch",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),si=e(j.prototype,"bgUitra",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=j))||W));l._RF.pop()}}}));

System.register("chunks:///_virtual/specialHit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts"],(function(e){var t,i,n,s,a,o,l,c,r,h,p,u,w,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.LabelComponent,c=e.Vec3,r=e.math,h=e.tween,p=e.UITransform,u=e.screen,w=e.Component},function(e){_=e.updateSceneRenderers}],execute:function(){var d,g,f,T,m;a._RF.push({},"6c32caYQA5IMKKRvDYX4Xhv","specialHit",void 0);var v=o.ccclass,b=o.property;e("SpecialHit",(d=v("SpecialHit"),g=b(l),d((m=t((T=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"lbHitNum",m,s(t)),t._tweenTip=null,t._scale1=new c,t._scale2=new c,t._scale3=new c,t}i(t,e);var a=t.prototype;return a.start=function(){},a.show=function(e){var t,i,n=this;if(_(),this._closeTweenTip(),2===e){var s=r.randomRange(.6,1.5),a=r.randomRange(.6,1.5);this._scale1.set(s,s,s),this._scale2.set(a,a,a),this.lbHitNum.string=String(e),this._tweenTip=h(this.node).to(.05,{scale:this._scale1},{easing:"backOutIn"}).to(.05,{scale:this._scale2}).call((function(){n._closeTweenTip()})).start()}else{var o=r.randomRange(.6,1.5),l=r.randomRange(.6,1.5),c=r.randomRange(.6,1.5);this._scale1.set(o,o,o),this._scale2.set(l,l,l),this._scale3.set(c,c,c),this._tweenTip=h(this.node).to(.05,{scale:this._scale1}).call((function(){n._closeTweenTip(),n.lbHitNum.string=String(e),n._tweenTip=h(n.node).to(.05,{scale:n._scale2}).to(.05,{scale:n._scale3}).call((function(){n._closeTweenTip()})).start()})).start()}var w=this.node.getPosition(),d=null==(t=this.node.getComponent(p))?void 0:t.width,g=null==(i=this.node.getComponent(p))?void 0:i.height;if(Math.abs(w.x)+d/2>u.windowSize.width/2){var f=u.windowSize.width/2-d/2;w.x=w.x>0?f:-f}if(Math.abs(w.y)+g/2>u.windowSize.height/2){var T=u.windowSize.height/2-g/2;w.y=w.y>0?T:-T}this.node.setPosition(w)},a._closeTweenTip=function(){this._tweenTip&&(this._tweenTip.stop(),this._tweenTip=null)},t}(w)).prototype,"lbHitNum",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=T))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/storageManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util.ts"],(function(t){var a,s,e,i,n,o;return{setters:[function(t){a=t.createClass},function(t){s=t.cclegacy,e=t._decorator,i=t.sys,n=t.log},function(t){o=t.Util}],execute:function(){var r,c;s._RF.push({},"eee40uYq/5HB479eXMM9y8j","storageManager",void 0);var h=e.ccclass;e.property,t("StorageManager",h("StorageManager")(((c=function(){function t(){this.jsonData=null,this.path=null,this.KEY_CONFIG="fruitConfig",this.markSave=!1,this.saveTimer=-1}var s=t.prototype;return s.start=function(){var t,a=this;(this.jsonData={userId:""},this.path=this.getConfigPath(),i.isNative)?t=jsb.fileUtils.getValueMapFromFile(this.path)[this.KEY_CONFIG]:t=i.localStorage.getItem(this.KEY_CONFIG);if(t&&t.length){t.startsWith("@")&&(t=t.substring(1),t=o.decrypt(t));try{var s=JSON.parse(t);this.jsonData=s}catch(t){}}this.saveTimer=setInterval((function(){a.scheduleSave()}),5e3)},s.setConfigDataWithoutSave=function(t,a){var s=this.jsonData.userId;this.jsonData[s]?this.jsonData[s][t]=a:console.error("no account can not save")},s.setConfigData=function(t,a){this.setConfigDataWithoutSave(t,a),this.markSave=!0},s.getConfigData=function(t){var a=this.jsonData.userId;if(this.jsonData[a]){var s=this.jsonData[a][t];return s||""}return n("no account can not load"),""},s.setGlobalData=function(t,a){this.jsonData[t]=a,this.save()},s.getGlobalData=function(t){return this.jsonData[t]},s.setUserId=function(t){this.jsonData.userId=t,this.jsonData[t]||(this.jsonData[t]={}),this.save()},s.getUserId=function(){return this.jsonData.userId},s.scheduleSave=function(){this.markSave&&this.save()},s.markModified=function(){this.markSave=!0},s.save=function(){var t=JSON.stringify(this.jsonData),a="@"+o.encrypt(t);if(this.markSave=!1,i.isNative){var s={};s[this.KEY_CONFIG]=a,jsb.fileUtils.writeToFile(s,this.path)}else{i.localStorage.setItem(this.KEY_CONFIG,a)}},s.getConfigPath=function(){var t=i.platform,a="";return t===i.OS.WINDOWS?a="src/conf":t===i.OS.LINUX?a="./conf":i.isNative?(a=jsb.fileUtils.getWritablePath(),a+="conf"):a="src/conf",a},a(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t,this._instance.start()),this._instance}}]),t}())._instance=void 0,r=c))||r);s._RF.pop()}}}));

System.register("chunks:///_virtual/uiManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resourceUtil.ts"],(function(i){var t,a,e,n,o,r;return{setters:[function(i){t=i.createClass},function(i){a=i.cclegacy,e=i._decorator,n=i.isValid,o=i.find},function(i){r=i.resourceUtil}],execute:function(){var s,p;a._RF.push({},"cb40eCKDPJMiKDyXkXOCmN3","uiManager",void 0);var c=e.ccclass;i("UIManager",c("UIManager")(((p=function(){function i(){this._dictSharedPanel={},this._dictLoading={},this._arrPopupDialog=[]}var a=i.prototype;return a.isDialogVisible=function(i){if(!this._dictSharedPanel.hasOwnProperty(i))return!1;var t=this._dictSharedPanel[i];return n(t)&&t.active&&t.parent},a.showDialog=function(i,t,a){var e=this;if(!this._dictLoading[i]){var s=i.lastIndexOf("/"),p=i.slice(s+1);if(t||(t=[]),this._dictSharedPanel.hasOwnProperty(i)){var c=this._dictSharedPanel[i];if(n(c)){c.parent=o("Canvas"),c.active=!0;var h=c.getComponent(p),l=c.getComponent(p.charAt(0).toUpperCase()+p.slice(1));if(h&&h.show)h.show.apply(h,t),a&&a(h);else{if(!l||!l.show)throw"查找不到脚本文件"+p;l.show.apply(l,t),a&&a(l)}return}}this._dictLoading[i]=!0,r.createUI(i,(function(n,o){var r=!1;if(e._dictLoading[i]||(r=!0),e._dictLoading[i]=!1,n)console.error(n);else{e._dictSharedPanel[i]=o;var s=o.getComponent(p),c=o.getComponent(p.charAt(0).toUpperCase()+p.slice(1));if(s&&s.show)s.show.apply(s,t),a&&a(s);else{if(!c||!c.show)throw"查找不到脚本文件"+p;c.show.apply(c,t),a&&a(c)}r&&e.hideDialog(i)}}))}},a.hideDialog=function(i,t){if(this._dictSharedPanel.hasOwnProperty(i)){var a=this._dictSharedPanel[i];if(a&&n(a)){var e=a.getComponent("animationUI");e?e.close((function(){a.parent=null,t&&"function"==typeof t&&t()})):(a.parent=null,t&&"function"==typeof t&&t())}else t&&"function"==typeof t&&t()}this._dictLoading[i]=!1},a.pushToPopupSeq=function(i,t,a){var e={panelPath:i,scriptName:t,param:a,isShow:!1};this._arrPopupDialog.push(e),this._checkPopupSeq()},a.insertToPopupSeq=function(i,t,a){var e={panelPath:t,param:a,isShow:!1};this._arrPopupDialog.splice(i,0,e)},a.shiftFromPopupSeq=function(i){var t=this;this.hideDialog(i,(function(){t._arrPopupDialog[0]&&t._arrPopupDialog[0].panelPath===i&&(t._arrPopupDialog.shift(),t._checkPopupSeq())}))},a._checkPopupSeq=function(){if(this._arrPopupDialog.length>0){var i=this._arrPopupDialog[0];i.isShow||(this.showDialog(i.panelPath,i.param),this._arrPopupDialog[0].isShow=!0)}},t(i,null,[{key:"instance",get:function(){return this._instance||(this._instance=new i),this._instance}}]),i}())._instance=void 0,s=p))||s);a._RF.pop()}}}));

System.register("chunks:///_virtual/util.ts",["cc"],(function(e){var r,t;return{setters:[function(e){r=e.cclegacy,t=e._decorator}],execute:function(){var n;r._RF.push({},"79f3dEUTIpMcb18aZgP4HrM","util",void 0);var o=t.ccclass;e("Util",o("Util")(n=function(){function e(){}return e.clone=function(e){if(null===e||"object"!=typeof e)return e;var r={};for(var t in e.constructor===Array&&(r=[]),e)e.hasOwnProperty(t)&&(r[t]=this.clone(e[t]));return r},e.objectToArray=function(e){var r=[];for(var t in e)e.hasOwnProperty(t)&&r.push(e[t]);return r},e.arrayToObject=function(e,r){var t={};for(var n in e)e.hasOwnProperty(n)&&e[n][r]&&(t[e[n][r]]=e[n]);return t},e.getWeightRandIndex=function(e,r){for(var t=Math.floor(Math.random()*r),n=0,o=0;o<e.length&&!(t<(n+=e[o]));o++);return o},e.getRandomNFromM=function(e,r){for(var t=[],n=0,o=0;o<r&&!(o>=e+1);){n=this.getRandomInt(0,e);for(var a=0,i=0;i<o;i++)if(t[i]===n){a=1;break}0===a&&(t[o]=n,o++)}return t},e.getRandomInt=function(e,r){var t=Math.random()*(r-e+1)+e;return Math.floor(t)},e.getStringLength=function(e){for(var r=e,t=0,n=0,o=r.length;n<o;n++){t+=r.charCodeAt(n)<=255?1:2}return Math.ceil(t/2)},e.isEmptyObject=function(e){var r=!0;if(e&&e.constructor===Object){for(var t in e)if(e.hasOwnProperty(t)){r=!1;break}}else r=!1;return r},e.isNewDay=function(e){var r=new Date(e),t=new Date,n=r.getYear(),o=r.getMonth(),a=r.getDate(),i=t.getYear(),f=t.getMonth(),u=t.getDate();return i>n||(f>o||u>a)},e.getPropertyCount=function(e){var r,t=0;for(r in e)e.hasOwnProperty(r)&&t++;return t},e.difference=function(e,r){var t=[];if(e.constructor!==Array||r.constructor!==Array)return t;for(var n=e.length,o=0;o<n;o++)-1===r.indexOf(e[o])&&t.push(e[o]);return t},e._stringToArray=function(e){var r,t="\\ufe0e\\ufe0f",n="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",o=RegExp("[\\u200d\\ud800-\\udfff"+n+t+"]"),a="\\ud83c[\\udffb-\\udfff]",i="[\\ufe0e\\ufe0f]?",f="["+n+"]",u="(?:"+f+"|"+a+")"+"?",h="[\\ud800-\\udfff]",c="[^\\ud800-\\udfff]",g="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",l=i+u+("(?:\\u200d(?:"+[c,g,d].join("|")+")"+i+u+")*"),s="(?:"+[c+f+"?",f,g,d,h].join("|")+")",v=RegExp(a+"(?="+a+")|"+s+l,"g");return r=e,o.test(r)?function(e){return e.match(v)||[]}(e):function(e){return e.split("")}(e)},e.simulationUUID=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},e.trim=function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},e.isNowValid=function(e,r){var t=new Date(e),n=new Date(r),o=!1;if(t.getDate()+""!="NaN"&&n.getDate()+""!="NaN"){var a=new Date;o=a<n&&a>t}return o},e.getDeltaDays=function(e,r){e=new Date(e),r=new Date(r);var t=e.getFullYear(),n=e.getMonth()+1,o=e.getDate(),a=r.getFullYear(),i=r.getMonth()+1,f=r.getDate();e=new Date(t+"/"+n+"/"+o+" GMT+0800").getTime();var u=(r=new Date(a+"/"+i+"/"+f+" GMT+0800").getTime())-e;return Math.floor(u/864e5)},e.getMin=function(e){var r=null;if(e.constructor===Array)for(var t=e.length,n=0;n<t;n++)r=0===n?Number(e[0]):r>Number(e[n])?Number(e[n]):r;return r},e.formatTwoDigits=function(e){return(Array(2).join(0)+e).slice(-2)},e.formatDate=function(e,r){var t={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var n in/(y+)/.test(r)&&(r=r.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+n+")").test(r)&&(r=r.replace(RegExp.$1,1===RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return r},e.getDay=function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},e.formatName=function(e,r){r=r||6;var t=this._stringToArray(e),n="";if(t.length>r){for(var o=0;o<r;o++)n+=t[o];n+="..."}else n=e;return n},e.formatMoney=function(e){for(var r=["","K","M","G","T","P","E","Z","Y","B","N","D"],t="",n=0;n<r.length;n++){if(!(e>=1e4)){t=Math.floor(e)+r[n];break}e/=1e3}return""===t&&(t=Math.floor(e)+"U"),t},e.formatValue=function(e){for(var r=[],t="",n=0;n<26;n++)r.push(String.fromCharCode(97+n));for(var o=0;o<r.length;o++){if(!(e>=1e4)){t=Math.floor(e)+r[o];break}e/=1e3}return t},e.formatTimeForSecond=function(e,r){void 0===r&&(r=!1);var t="",n=e%60,o=Math.floor(e/60);o=o<0?0:o;var a=Math.floor(o/60),i=o%60;return a>0?(t+=a>9?a.toString():"0"+a,t+=":"):t+="00:",t+=i>9?i.toString():"0"+i,r||(t+=":",t+=n>9?n.toString():"0"+n),t},e.formatTimeForMillisecond=function(e){var r=Math.floor(e/1e3%60),t=Math.floor(e/1e3/60%60);return{hour:Math.floor(e/1e3/60/60),minute:t,second:r}},e.rand=function(e){for(var r=this.clone(e),t=r.length-1;t>=0;t--){var n=Math.floor(Math.random()*(t+1)),o=r[n];r[n]=r[t],r[t]=o}return r},e.getOffsetMimutes=function(e,r){var t=r-e;return Math.floor(t%36e5/6e4)},e.formatNumToFixed=function(e,r){return void 0===r&&(r=0),Number(e.toFixed(r))},e.lerp=function(e,r,t){void 0===t&&(t=.25);var n=r;return e>r?n=r+(e-r)*t:e<r&&(n=r-(r-e)*t),n},e.decrypt=function(e){var r=6;e.length%2==0&&(r=7);for(var t="",n=0;n<e.length-r;n+=2)t+=e[n+1],t+=e[n];return t+=e.slice(e.length-r+1),t=this._base64Decode(t)},e.encrypt=function(e){var r=this._base64encode(e),t=6;r.length%2==0&&(t=7);for(var n="",o=0;o<(r.length-t+1)/2;o++)n+=r[2*o+1],n+=r[2*o];return n+=r.slice(r.length-t+1)},e._base64encode=function(e){var r,t,n,o,a,i,f,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h="",c=0;for(e=this._utf8Encode(e);c<e.length;)o=(r=e.charCodeAt(c++))>>2,a=(3&r)<<4|(t=e.charCodeAt(c++))>>4,i=(15&t)<<2|(n=e.charCodeAt(c++))>>6,f=63&n,isNaN(t)?i=f=64:isNaN(n)&&(f=64),h=h+u.charAt(o)+u.charAt(a)+u.charAt(i)+u.charAt(f);return h},e._utf8Encode=function(e){e=e.replace(/\r\n/g,"\n");for(var r="",t=0;t<e.length;t++){var n=e.charCodeAt(t);n<128?r+=String.fromCharCode(n):n>127&&n<2048?(r+=String.fromCharCode(n>>6|192),r+=String.fromCharCode(63&n|128)):(r+=String.fromCharCode(n>>12|224),r+=String.fromCharCode(n>>6&63|128),r+=String.fromCharCode(63&n|128))}return r},e._utf8Decode=function(e){for(var r="",t=0,n=0,o=0,a=0;t<e.length;)(n=e.charCodeAt(t))<128?(r+=String.fromCharCode(n),t++):n>191&&n<224?(o=e.charCodeAt(t+1),r+=String.fromCharCode((31&n)<<6|63&o),t+=2):(o=e.charCodeAt(t+1),a=e.charCodeAt(t+2),r+=String.fromCharCode((15&n)<<12|(63&o)<<6|63&a),t+=3);return r},e._base64Decode=function(e){var r,t,n,o,a,i,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",h=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<e.length;)r=f.indexOf(e.charAt(h++))<<2|(o=f.indexOf(e.charAt(h++)))>>4,t=(15&o)<<4|(a=f.indexOf(e.charAt(h++)))>>2,n=(3&a)<<6|(i=f.indexOf(e.charAt(h++))),u+=String.fromCharCode(r),64!=a&&(u+=String.fromCharCode(t)),64!=i&&(u+=String.fromCharCode(n));return u=this._utf8Decode(u)},e.checkIsLowPhone=function(){if(window.wx){var e=-1,r=window.wx.getSystemInfoSync();if(r.system.indexOf("iOS")>=0){for(var t=r.model,n=["iPhone1,1","iPhone1,2","iPhone2,1","iPhone3,1","iPhone3,3","iPhone4,1","iPhone5,1","iPhone5,2","iPhone5,3","iPhone5,4","iPhone6,1","iPhone6,2"],o=["iPhone6,2","iPhone7,1","iPhone7,2","iPhone8,1","iPhone8,2","iPhone8,4"],a=["iPhone9,1","iPhone9,2","iPhone9,3","iPhone9,4","iPhone10,1","iPhone10,2","iPhone10,3","iPhone10,4","iPhone10,5","iPhone10,6"],i=["iPhone11,2","iPhone11,4","iPhone11,6","iPhone11,8","iPhone12,1","iPhone12,3","iPhone12,5","iPhone12,8","iPhone 13"],f=0;f<n.length;f++)t.indexOf(n[f])>=0&&(e=5);for(var u=0;u<o.length;u++)t.indexOf(o[u])>=0&&(e=10);for(var h=0;h<a.length;h++)t.indexOf(a[h])>=0&&(e=20);for(var c=0;c<i.length;c++)t.indexOf(i[c])>=0&&(e=30)}else e=r.benchmarkLevel;return e<20}return!1},e.numToArray=function(e){for(var r=e+"",t=[],n=0;n<r.length;n++)t.push(parseInt(r[n]));return t},e}())||n);r._RF.pop()}}}));

System.register("chunks:///_virtual/wxAdapter.ts",["cc"],(function(e){var t,n;return{setters:[function(e){t=e.cclegacy,n=e._decorator}],execute:function(){var a;t._RF.push({},"1610cSgeCdNOa1GP4/5VOz+","wxAdapter",void 0);var r=n.ccclass;n.property,e("wxAdapter",r("wxAdapter")(a=function(){function e(){}return e.start=function(){this._checkUpdate()},e.shareGame=function(e,t){window.wx&&(wx.showShareMenu({withShareTicket:!0,complete:function(){}}),wx.aldOnShareAppMessage?wx.aldOnShareAppMessage((function(){return{title:e,imageUrl:t}})):wx.onShareAppMessage((function(){return{title:e,imageUrl:t}})))},e._checkUpdate=function(){if(window.wx&&wx.getUpdateManager){var e=wx.getUpdateManager();e.onUpdateReady((function(){wx.showModal({title:"温馨提示",content:"新版本已经准备好，需重启应用",confirmText:"重启更新",success:function(t){t.confirm&&e.applyUpdate()}})}))}},e}())||a);t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});