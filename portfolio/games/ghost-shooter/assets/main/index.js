System.register("chunks:///_virtual/arrow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util.ts","./gameManager.ts","./resourceUtil.ts","./constant.ts","./monster.ts","./poolManager.ts"],(function(e){var t,o,r,i,s,n,a,h,c,l,d,_,u,f,w,g;return{setters:[function(e){t=e.inheritsLoose,o=e.createClass},function(e){r=e.cclegacy,i=e._decorator,s=e.BoxColliderComponent,n=e.ParticleSystemComponent,a=e.Vec3,h=e.math,c=e.Node,l=e.Component},function(e){d=e.Util},function(e){_=e.GameManager},function(e){u=e.ResourceUtil},function(e){f=e.Constant},function(e){w=e.Monster},function(e){g=e.PoolManager}],execute:function(){var p;r._RF.push({},"9b706mx99ZI/ZmcpsAOpihz","arrow",void 0);var P=i.ccclass;i.property,e("Arrow",P("Arrow")(p=function(e){function r(){for(var t,o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this)._isAutoRotate=!0,t._isArrowLaunch=!1,t._ndBody=null,t._curSpeed=0,t._targetSpeed=0,t._oriPos=null,t._oriEulerAngles=null,t._offsetPos=new a,t._curWorPos=new a,t._disappearRange=25,t._isLoadEffectOver=!1,t._isNeedShowEffect=!1,t._targetWorPos=new a,t._curEulerAngles=new a,t._oriForward=null,t._curForward=new a,t._releaseWorPos=new a,t._offsetPos_1=new a,t._offsetPos_2=new a,t._cross=new a,t._colliderCom=null,t}t(r,e);var i=r.prototype;return i.onLoad=function(){this._colliderCom=this.node.getComponent(s)},i.onEnable=function(){this._colliderCom.on("onTriggerEnter",this._onTriggerEnterCb,this)},i.onDisable=function(){this._colliderCom.off("onTriggerEnter",this._onTriggerEnterCb,this)},i.start=function(){},i.init=function(e,t,o){void 0===o&&(o=!1),this._releaseWorPos.set(t),this._ndBody||(this._ndBody=this.node.getChildByName("body")),this._isLoadEffectOver=!1,this._isNeedShowEffect=!1,this._disappearRange=o?5:25,this.isArrowLaunch=!1,this._oriPos||(this._oriPos=this.node.position.clone()),this._oriEulerAngles||(this._oriEulerAngles=this.node.eulerAngles.clone()),this._oriForward||(this._oriForward=this.node.forward.clone()),this.node.active=!1,this.node.setPosition(this._oriPos),this.node.eulerAngles=this._oriEulerAngles,this._curForward.set(this._oriForward),this._targetSpeed=e,this._curSpeed=.5*e,this._ndBody.children.forEach((function(e){e.name.startsWith("arrow")&&(e.active=!1)}));var r=_.scriptPlayer.isArrowIce,i=_.scriptPlayer.isArrowFire,s=_.scriptPlayer.isArrowLightning;i||r||s?(this._isNeedShowEffect=!0,i&&r&&s?this._showTrail("arrowAll"):i&&r||i&&s||r&&s?i&&r?this._showTrail("arrowFireIce"):s&&i?this._showTrail("arrowLightningFire"):s&&r&&this._showTrail("arrowLightningIce"):i?this._showTrail("arrowFire"):r?this._showTrail("arrowIce"):s&&this._showTrail("arrowLightning")):(this._ndBody.children.forEach((function(e){e.name.startsWith("arrow")&&(e.active=!1)})),this.node.active=!0)},i._showTrail=function(e){var t=this,o=this._ndBody.getChildByName(e);o?(o.active=!0,this.node.active=!0,this._isLoadEffectOver=!0):u.loadEffectRes("arrow/"+e).then((function(e){o=g.instance.getNode(e,t._ndBody),t.node.active=!0,t._isLoadEffectOver=!0}))},i.recycleArrowGroup=function(){this.node.parent&&g.instance.putNode(this.node.parent)},i.hideArrow=function(){var e;this.node.parent&&(this._ndBody.getComponentsInChildren(n).forEach((function(e){e.simulationSpeed=1,null==e||e.clear(),null==e||e.stop()})),this.node.active=!1,(null==(e=this.node.parent)?void 0:e.children.every((function(e){return!1===e.active})))&&this.recycleArrowGroup())},i.playArrowLaunch=function(e){this.isArrowLaunch=!0;var t=_.getNearbyMonster(e);if(t.length){var o=t[0];this._offsetPos_1.set(this._releaseWorPos.x-this.node.worldPosition.x,0,this._releaseWorPos.z-this.node.worldPosition.z),this._offsetPos_2.set(this.node.worldPosition.x-o.worldPosition.x,0,this.node.worldPosition.z-o.worldPosition.z);var r=a.angle(this._offsetPos_1,this._offsetPos_2),i=h.toDegree(r);a.cross(this._cross,this._offsetPos_1,this._offsetPos_2),this._cross.y>0?this._curEulerAngles.y=i:this._curEulerAngles.y=-i,this.node.eulerAngles=this._curEulerAngles}},i._onTriggerEnterCb=function(e){if(!_.isGameOver&&_.isGameStart){var t=e.otherCollider;if(t.getGroup()===f.PHY_GROUP.OBSTACLE)this.node.getComponent(r).hideArrow();else if(t.getGroup()===f.PHY_GROUP.MONSTER){var o=t.node,i=o.getComponent(w),s=this.node.getComponent(r);_.scriptPlayer.isArrowLaunch?s.isArrowLaunch?s.hideArrow():s.playArrowLaunch(o):_.scriptPlayer.isArrowPenetrate||s.hideArrow(),i.playHit(s.isArrowLaunch),"dragon"===o.name&&i.changeDragonMat()}}},i.update=function(e){!this.node.parent||!_.ndPlayer||_.isGameOver||_.isGamePause||this._isNeedShowEffect&&!this._isLoadEffectOver||(this._curSpeed=d.lerp(this._targetSpeed,this._curSpeed,.25),this._targetWorPos.set(0,0,-e*this._curSpeed),this.node.translate(this._targetWorPos,c.NodeSpace.LOCAL),this._curWorPos.set(this.node.worldPosition),a.subtract(this._offsetPos,this._curWorPos,_.ndPlayer.worldPosition),this._offsetPos&&this._offsetPos.length()>=this._disappearRange&&this.hideArrow())},o(r,[{key:"isAutoRotate",get:function(){return this._isAutoRotate},set:function(e){this._isAutoRotate=e}},{key:"isArrowLaunch",get:function(){return this._isArrowLaunch},set:function(e){this._isArrowLaunch=e}}]),r}(l))||p);r._RF.pop()}}}));

System.register("chunks:///_virtual/audioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constant.ts","./resourceUtil.ts","./storageManager.ts"],(function(t){var e,s,i,u,n,o,c,a,r,l,h,m,d,p;return{setters:[function(t){e=t.createForOfIteratorHelperLoose,s=t.createClass,i=t.asyncToGenerator,u=t.regeneratorRuntime},function(t){n=t.cclegacy,o=t.Node,c=t.director,a=t.game,r=t.AudioSource,l=t.assetManager,h=t.AudioClip},function(t){m=t.Constant},function(t){d=t.ResourceUtil},function(t){p=t.StorageManager}],execute:function(){n._RF.push({},"5e2ecZFEJFEHoCgx6lXVYHB","audioManager",void 0),t("AudioManager",function(){function t(){this.dictWeaponSoundIndex={},this.mainVolume=1,this.environmentalVolume=1,this._musicVolume=1,this._soundVolume=1,this._musicSwitch=1,this._soundSwitch=1,this._mapSound=new Map,this._mapMusic=new Map,this._persistRootNode=null,this._musicSource=null,this._curSounds=[]}var n=t.prototype;return n.init=function(){var t,e,s,i;this._persistRootNode||(this._persistRootNode=new o("audio"),c.getScene().addChild(this._persistRootNode),a.addPersistRootNode(this._persistRootNode),this._musicSwitch=this.getAudioSetting(!0)?1:0,this._soundSwitch=this.getAudioSetting(!1)?1:0,this.mainVolume=null!=(t=p.instance.getGlobalData("mainVolume"))?t:1,this.soundVolume=null!=(e=p.instance.getGlobalData("soundVolume"))?e:1,this.musicVolume=null!=(s=p.instance.getGlobalData("musicVolume"))?s:1,this.environmentalVolume=null!=(i=p.instance.getGlobalData("environmentalVolume"))?i:1)},n._setCurMusicVolume=function(){for(var t,s=e(this._mapMusic.values());!(t=s()).done;){t.value.volume=this.musicVolume}},n._setCurSoundVolume=function(){for(var t,s=this,i=e(this._mapSound.values());!(t=i()).done;){t.value.forEach((function(t){t.volume=s.soundVolume}))}},n.getAudioSetting=function(t){var e;return!(e=t?p.instance.getGlobalData("music"):p.instance.getGlobalData("sound"))||"true"===e},n._getAudioSource=function(t){var e,s=this;return this._mapSound.forEach((function(i,u){if(t.name!=u);else if(i.length>0){var n=i.pop();e=n,s._mapSound.set(u,i)}})),e||(e=this._persistRootNode.addComponent(r)),e.clip=t,e.currentTime=0,e},n.playMusic=function(){var t=i(u().mark((function t(e,s,i){var n,o,c,a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=m.RESOURCES_FILE_NAME.AUDIO+"/"+m.AUDIO_FILE_NAME.MUSIC+"/"+e,(o=this._musicSource)&&o.stop(),!o||o.clip.name!=e){t.next=6;break}t.next=19;break;case 6:if(!this._mapMusic.get(e)){t.next=11;break}o&&!this._mapMusic.get(o.clip.name)&&this._mapMusic.set(o.clip.name,o),o=this._mapMusic.get(e),t.next=19;break;case 11:if(c=this._getExistMusicSource(e)){t.next=18;break}return t.next=15,d.loadRes(n,h);case 15:a=t.sent,(c=this._getExistMusicSource(e))||((c=this._persistRootNode.addComponent(r)).clip=a,this._mapMusic.set(e,c));case 18:o=c;case 19:o.currentTime=0,o.volume=this.musicVolume*this.mainVolume,o.loop=s,o.playOnAwake=!1,this._musicSource=o,this._musicSwitch&&o.play(),i&&i();case 26:case"end":return t.stop()}}),t,this)})));return function(e,s,i){return t.apply(this,arguments)}}(),n._getExistMusicSource=function(t){for(var e=this._persistRootNode.components.length-1;e>=0;e--){var s=this._persistRootNode.components[e];if(s instanceof r&&s.clip.name==t)return console.log("###已经有这个音乐组件了",t),s}return null},n.playSound=function(){var t=i(u().mark((function t(e,s,i){var n,o,c,a=this;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===s&&(s=!1),n=m.RESOURCES_FILE_NAME.AUDIO+"/"+m.AUDIO_FILE_NAME.SOUND+"/"+e,t.next=4,d.loadRes(n,h);case 4:o=t.sent,(c=this._getAudioSource(o)).volume=this.soundVolume*this.mainVolume,c.loop=s,c.playOnAwake=!1,this._curSounds.push(c),this._soundSwitch&&(c.play(),setTimeout((function(){if(a._curSounds.indexOf(c)>=0&&a._curSounds.splice(a._curSounds.indexOf(c),1),a._mapSound.get(e)){var t=a._mapSound.get(e);t.push(c),a._mapSound.set(e,t)}else a._mapSound.set(e,[c]);null==i||i()}),1e3*c.duration));case 11:case"end":return t.stop()}}),t,this)})));return function(e,s,i){return t.apply(this,arguments)}}(),n.isSoundPlaying=function(t){return this._curSounds.some((function(e){var s;return(null==(s=e.clip)?void 0:s.name)==t}))},n.isMusicExist=function(t){return null!=this._mapMusic.get(t)},n.isMusicPlaying=function(t){return this._musicSource&&this._musicSource.clip.name==t&&this._musicSource.playing},n.preLoadMusics=function(){var t=i(u().mark((function t(e){var s,i,n,o,c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=0;case 1:if(!(s<e.length)){t.next=11;break}return i=e[s],n=m.RESOURCES_FILE_NAME.AUDIO+"/"+m.AUDIO_FILE_NAME.MUSIC+"/"+i,t.next=6,d.loadRes(n,h);case 6:(o=t.sent)&&((c=this._persistRootNode.addComponent(r)).clip=o,this._mapMusic.set(i,c));case 8:s++,t.next=1;break;case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.switchMusic=function(t){t?this.resumeMusic():this.stopMusic(),p.instance.setGlobalData("music",""+t)},n.switchSound=function(t){t?this.resumeSound():this.pauseSound(),p.instance.setGlobalData("sound",""+t)},n.stopAllAudio=function(){this.stopMusic(),this.pauseSound()},n.stopMusic=function(){this._musicSwitch=0,this._musicSource&&this._musicSource.pause()},n.stopAllMusic=function(){for(var t,s=e(this._mapMusic.values());!(t=s()).done;){var i=t.value;i&&i.playing&&i.stop()}},n.destroyMusic=function(){this._musicSource.clip&&(this._mapMusic.has(this._musicSource.clip.name)&&this._mapMusic.delete(this._musicSource.clip.name),this._musicSource&&(this._musicSource.destroy(),this._musicSource=null))},n.pauseSound=function(){this._soundSwitch=0,this._curSounds.forEach((function(t){t.playing&&t.pause()}))},n.stopAllSound=function(){for(var t,s=e(this._mapSound.values());!(t=s()).done;){var i=t.value;i&&i.length&&i.forEach((function(t){t&&t.playing&&t.stop()}))}for(var u=0;u<this._curSounds.length;u++){var n=this._curSounds[u];n&&n.playing&&n.stop()}},n.stopSoundArr=function(t){for(var s,i=e(this._mapSound.values());!(s=i()).done;){var u=s.value;u&&u.length&&u.forEach((function(e){e&&e.playing&&-1!=t.indexOf(e.clip.name)&&e.stop()}))}for(var n=0;n<this._curSounds.length;n++){var o=this._curSounds[n];o&&o.playing&&-1!=t.indexOf(o.clip.name)&&o.stop()}},n.stopMusicArr=function(t){for(var s,i=e(this._mapMusic.values());!(s=i()).done;){var u=s.value;u&&u.playing&&-1!=t.indexOf(u.clip.name)&&u.stop()}},n.resumeAll=function(){this.resumeMusic(),this.resumeSound()},n.resumeMusic=function(){this._musicSwitch=1,this._musicSource&&(this._musicSource.volume=this.musicVolume,this._musicSource.play())},n.resumeSound=function(){var t=this;this._soundSwitch=1,this._curSounds.forEach((function(e){e.state==r.AudioState.PAUSED&&(e.volume=t.soundVolume,e.play())}))},n.removeMusic=function(t){for(var e=0;e<t.length;e++){var s=t[e],i=this._mapMusic.get(s);this._mapMusic.delete(s),i&&(l.releaseAsset(i.clip),i.destroy(),this._mapMusic[s]=null)}},n.removeSound=function(t){for(var e=0;e<t.length;e++){var s=t[e],i=this._mapSound.get(s);i&&i.length&&(this._mapSound.delete(s),i.forEach((function(t){l.releaseAsset(t.clip),t.destroy()})))}},n.setMusic=function(t){this.musicVolume=t;for(var s,i=e(this._mapMusic.values());!(s=i()).done;){var u=s.value;u&&(u.volume=this.musicVolume*this.mainVolume)}},n.setMusicWithoutSave=function(t){for(var s,i=e(this._mapMusic.values());!(s=i()).done;){var u=s.value;u&&(u.volume=t*this.mainVolume)}},n.setSound=function(t){var s=this;this.soundVolume=t;for(var i,u=e(this._mapSound.values());!(i=u()).done;){var n=i.value;n&&n.length&&n.forEach((function(t){t.volume=s.soundVolume*s.mainVolume}))}for(var o=0;o<this._curSounds.length;o++){this._curSounds[o].volume=this.soundVolume*this.mainVolume}},s(t,[{key:"musicSource",get:function(){return this._musicSource}},{key:"musicVolume",get:function(){return this._musicVolume*this._musicSwitch},set:function(t){this._musicVolume=t,this._setCurMusicVolume()}},{key:"soundVolume",get:function(){return this._soundVolume*this._soundSwitch},set:function(t){this._soundVolume=t,this._setCurSoundVolume()}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/backPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiManager.ts","./LanguageData.ts"],(function(n){var a,c,e,t,i,l;return{setters:[function(n){a=n.inheritsLoose},function(n){c=n.cclegacy,e=n._decorator,t=n.Component},function(n){i=n.UIManager},function(n){l=n.updateSceneRenderers}],execute:function(){var o;c._RF.push({},"cb044J/UWlCka6m1ViHFqYi","backPanel",void 0);var r=e.ccclass;e.property,n("BackPanel",r("BackPanel")(o=function(n){function c(){for(var a,c=arguments.length,e=new Array(c),t=0;t<c;t++)e[t]=arguments[t];return(a=n.call.apply(n,[this].concat(e))||this)._callback=null,a}a(c,n);var e=c.prototype;return e.show=function(n){l(),this._callback=n},e.onBtnYesClick=function(){i.instance.hideDialog("back/backPanel"),this._callback&&this._callback()},e.onBtnNoClick=function(){i.instance.hideDialog("back/backPanel")},c}(t))||o);c._RF.pop()}}}));

System.register("chunks:///_virtual/boss.ts",["./rollupPluginModLoBabelHelpers.js","cc","./monster.ts","./clientEvent.ts","./uiManager.ts","./constant.ts","./effectManager.ts","./gameManager.ts","./resourceUtil.ts","./jetFires.ts","./energyBall.ts","./fireBall.ts","./dispersion.ts","./tornado.ts","./fireBallBig.ts","./dispersionSurround.ts","./laser.ts","./audioManager.ts","./util.ts","./poolManager.ts"],(function(n){var t,e,i,o,a,s,l,r,c,f,u,d,g,h,p,S,I,m,_,k,E,D,R,b,L,M,v,y,N,P;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){a=n.cclegacy,s=n._decorator,l=n.Node,r=n.Material,c=n.MeshRenderer,f=n.Vec3,u=n.ParticleSystemComponent,d=n.AnimationComponent},function(n){g=n.Monster},function(n){h=n.ClientEvent},function(n){p=n.UIManager},function(n){S=n.Constant},function(n){I=n.EffectManager},function(n){m=n.GameManager},function(n){_=n.ResourceUtil},function(n){k=n.JetFires},function(n){E=n.EnergyBall},function(n){D=n.FireBall},function(n){R=n.Dispersion},function(n){b=n.Tornado},function(n){L=n.FireBallBig},function(n){M=n.DispersionSurround},function(n){v=n.Laser},function(n){y=n.AudioManager},function(n){N=n.Util},function(n){P=n.PoolManager}],execute:function(){var w,T,B,O,C,A,F,H,K,z,U;a._RF.push({},"2b656AN2JJJ2KGEYhDM/3Bh","boss",void 0);var J=s.ccclass,W=s.property;n("Boss",(w=J("Boss"),T=W(l),B=W(r),O=W(r),C=W(c),w((H=t((F=function(n){function t(){for(var t,e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return t=n.call.apply(n,[this].concat(a))||this,i(t,"ndSocketDragonHead",H,o(t)),i(t,"matDragon",K,o(t)),i(t,"matDragonHit",z,o(t)),i(t,"meshDragon",U,o(t)),t._countdown=.2,t._oriSkillEuler=new f,t._isSkillReleasing=!1,t}e(t,n);var a=t.prototype;return a.init=function(t,e){var i;n.prototype.init.call(this,t,e),this._bloodTipOffsetPos.set(0,50,0),this._hitEffectPos.set(0,.04,0),this._isSkillReleasing=!1,this._countdown=.2,null==(i=this.meshDragon)||i.setMaterial(this.matDragon,0)},a.refreshBlood=function(n,t){h.dispatchEvent(S.EVENT_TYPE.REFRESH_BOSS_BLOOD,n),p.instance.showBloodTips(this,t,n,this._bloodTipOffsetPos)},a.playAttackAni=function(){n.prototype.playAttackAni.call(this),this._isSkillReleasing=!1},a.releaseSkillToPlayer=function(n){var t=this;(void 0===n&&(n=!1),this._isSkillReleasing)||(this._allSkillInfo.length?n&&this.skillInfo.ID!==S.MONSTER_SKILL.JET_FIRES?(this._isSkillReleasing=!0,_.loadEffectRes(this.skillInfo.resName+"/"+this.skillInfo.resName).then((function(n){if(!t.isMoving){var e=P.instance.getNode(n,m.ndGameManager);e.setWorldPosition(t.node.worldPosition.x,2.5,t.node.worldPosition.z),e.forward=t.attackForward.negative();switch(t.skillInfo.ID){case S.MONSTER_SKILL.ENERGY_BALL:e.setWorldPosition(t.ndSocketDragonHead.worldPosition.x,2.5,t.ndSocketDragonHead.worldPosition.z),e.getComponent(E).init(t.skillInfo,t.baseInfo,t);break;case S.MONSTER_SKILL.FIRE_BALL:e.setWorldPosition(t.ndSocketDragonHead.worldPosition),e.getComponent(D).init(t.skillInfo,t.baseInfo,t);break;case S.MONSTER_SKILL.DISPERSION:e.children.forEach((function(n,e){n.getComponent(R).init(t.skillInfo,t.baseInfo)}));break;case S.MONSTER_SKILL.TORNADO:e.setWorldPosition(t.ndSocketDragonHead.worldPosition),e.getComponent(b).init(t.skillInfo,t.baseInfo,t);break;case S.MONSTER_SKILL.FIRE_BALL_BIG:e.getComponent(L).init(t.skillInfo,t.baseInfo,t);break;case S.MONSTER_SKILL.DISPERSION_SURROUND:e.children.forEach((function(n){n.getComponent(M).init(t.skillInfo,t.baseInfo)}));break;case S.MONSTER_SKILL.LASER:e.setWorldPosition(t.ndSocketDragonHead.worldPosition),e.getComponent(v).init(t.skillInfo,t.baseInfo,t)}t._refreshSkill()}}))):n||this.skillInfo.ID!==S.MONSTER_SKILL.JET_FIRES||(this._isSkillReleasing=!0,_.loadEffectRes(this.skillInfo.resName+"/"+this.skillInfo.resName).then((function(n){var e,i;if(!t.isMoving){var o=P.instance.getNode(n,t.ndSocketDragonHead);o.eulerAngles=t._oriSkillEuler;var a=o.getChildByName("boxCollider");a.active=!0;var s=o.getComponent(k),l={ndEffect:o};I.instance.playParticle(l),s.init(t.skillInfo,t.baseInfo,t),y.instance.playSound(S.SOUND.JET_FIRE),o.getComponentsInChildren(u).forEach((function(n){n.simulationSpeed=1,null==n||n.clear(),null==n||n.stop(),null==n||n.play()}));var r=o.getComponent(d),c=null==(e=r.defaultClip)?void 0:e.name;c&&(r.getState(c).time=0,r.getState(c).sample(),r.play(),r.getState(c).speed=m.gameSpeed),r.once(d.EventType.FINISHED,(function(){a.active=!1})),null==(i=t.scriptWarning)||i.hideWarning(),setTimeout((function(){P.instance.putNode(o)}),4e3),t._refreshSkill()}}))):N.getTwoNodeXZLength(this.node,m.ndPlayer)<=this._minLength*this._minLengthRatio&&m.scriptPlayer.reduceBlood(this.baseInfo))},a.changeDragonMat=function(){var n;this._countdown<=0&&(null==(n=this.meshDragon)||n.setMaterial(this.matDragonHit,0),this._countdown=.2)},a.lateUpdate=function(n){var t;this._countdown>0&&!this.isDie&&(this._countdown-=n,this._countdown<=0&&(null==(t=this.meshDragon)||t.setMaterial(this.matDragon,0)))},t}(g)).prototype,"ndSocketDragonHead",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(F.prototype,"matDragon",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(F.prototype,"matDragonHit",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(F.prototype,"meshDragon",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=F))||A));a._RF.pop()}}}));

System.register("chunks:///_virtual/bossBloodBar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameManager.ts","./clientEvent.ts","./constant.ts"],(function(t){var o,i,e,s,r,a,n,l,B,h,c,d,u;return{setters:[function(t){o=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,n=t.UITransform,l=t.clamp,B=t.tween,h=t.Component},function(t){c=t.GameManager},function(t){d=t.ClientEvent},function(t){u=t.Constant}],execute:function(){var _,m,f,p,E,v,C;r._RF.push({},"320dc/VulBCMLlzDmV4dtU0","bossBloodBar",void 0);var g=a.ccclass,y=a.property;t("BossBloodBar",(_=g("BossBloodBar"),m=y(n),f=y(n),_((v=o((E=function(t){function o(){for(var o,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return o=t.call.apply(t,[this].concat(r))||this,e(o,"UIComWhiteBar",v,s(o)),e(o,"UIComRedBar",C,s(o)),o._whiteBarHeight=28,o._redBarHeight=28,o._totalBlood=0,o._curBlood=0,o._maxBossWhiteBarWidth=560,o._maxBossRedBarWidth=560,o._isBloodEmpty=!1,o}i(o,t);var r=o.prototype;return r.onEnable=function(){d.on(u.EVENT_TYPE.REFRESH_BOSS_BLOOD,this._refreshBossBlood,this)},r.onDisable=function(){d.off(u.EVENT_TYPE.REFRESH_BOSS_BLOOD,this._refreshBossBlood,this)},r.show=function(t,o,i){void 0===i&&(i=!0),this.node.active=!0,this._totalBlood=o,this._isBloodEmpty=!1,i&&(this._curBlood=this._totalBlood);var e=this._curBlood/this._totalBlood;e=l(e,0,1),this.UIComWhiteBar.setContentSize(e*this._maxBossWhiteBarWidth,this._whiteBarHeight),this.UIComRedBar.setContentSize(e*this._maxBossRedBarWidth,this._redBarHeight)},r._refreshBossBlood=function(t){var o=this;this._curBlood+=t;var i=this._curBlood/this._totalBlood;i=i<=0?0:i,t<0&&(this.UIComRedBar.setContentSize(this._maxBossRedBarWidth*i,this._whiteBarHeight),this._isBloodEmpty||(this._isBloodEmpty=i<=0,B(this.UIComWhiteBar).to(.7,{width:this._maxBossWhiteBarWidth*i}).call((function(){i<=0&&(o.node.active=!1,c.scriptBoss.isDie=!0)})).start()))},o}(h)).prototype,"UIComWhiteBar",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=o(E.prototype,"UIComRedBar",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=E))||p));r._RF.pop()}}}));

System.register("chunks:///_virtual/btn_adapter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts"],(function(e){var t,n,i,r,o,a,c,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,c=e.Button,l=e.Component},function(e){u=e.AudioManager}],execute:function(){var p,s,d,b,f,m,y,v,S,g,h,k,P;o._RF.push({},"5bcfd/5sbxDwocuPm/Zm+cA","btn_adapter",void 0);var w=a.ccclass,C=a.property,z=a.menu,A=a.requireComponent,_=a.disallowMultiple;e("btnAdapter",(p=w("btnAdapter"),s=z("自定义组件/btnAdapter"),d=A(c),b=C({tooltip:"点击后是否播放点击音效"}),f=C({tooltip:"点击音效名"}),m=C({tooltip:"是否禁止快速二次点击"}),y=C({tooltip:"点击后多久才能再次点击,仅isPreventSecondClick为true生效"}),p(v=s(v=d(v=_((g=t((S=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"isPlaySound",g,r(t)),i(t,"clickSoundName",h,r(t)),i(t,"isPreventSecondClick",k,r(t)),i(t,"preventTime",P,r(t)),t}return n(t,e),t.prototype.start=function(){var e=this,t=this.node.getComponent(c);this.node.on("click",(function(){e.isPreventSecondClick&&(t.interactable=!1,e.scheduleOnce((function(){t.node&&(t.interactable=!0)}),e.preventTime)),e.isPlaySound&&u.instance.playSound(e.clickSoundName,!1)}))},t}(l)).prototype,"isPlaySound",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),h=t(S.prototype,"clickSoundName",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"click"}}),k=t(S.prototype,"isPreventSecondClick",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),P=t(S.prototype,"preventTime",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),v=S))||v)||v)||v)||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/camera.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,n,s,i,a,h,_,r,u,c,l;return{setters:[function(t){e=t.inheritsLoose,o=t.createClass},function(t){n=t.cclegacy,s=t._decorator,i=t.input,a=t.Input,h=t.macro,_=t.EventMouse,r=t.Quat,u=t.Node,c=t.Vec3,l=t.Component}],execute:function(){var p;n._RF.push({},"f3a75nrXmNBnonqqdUdW9xz","camera",void 0);var E=s.ccclass;s.property,t("Camera",E("Camera")(p=function(t){function n(){for(var e,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))||this)._lookButtonDown=!1,e._targetPos=new c,e._vertical=0,e._horizontal=0,e._speed=50,e._rotateSpeed=.1,e._panButtonDown=!1,e._ratio=.2,e._translatePos=new c,e._mouseWheelPos=new c,e}e(n,t);var s=n.prototype;return s.onLoad=function(){},s.start=function(){this._targetPos=this.node.position},s.onEnable=function(){this._addEvents()},s.onDisable=function(){this._removeEvents()},s._addEvents=function(){i.on(a.EventType.MOUSE_WHEEL,this._onMouseWheel,this),i.on(a.EventType.MOUSE_MOVE,this._onMouseMove,this),i.on(a.EventType.MOUSE_UP,this._onMouseUp,this),i.on(a.EventType.MOUSE_DOWN,this._onMouseDown,this),i.on(a.EventType.KEY_DOWN,this._onKeyDown,this),i.on(a.EventType.KEY_UP,this._onKeyUp,this)},s._removeEvents=function(){i.off(a.EventType.MOUSE_WHEEL,this._onMouseWheel,this),i.off(a.EventType.MOUSE_MOVE,this._onMouseMove,this),i.off(a.EventType.MOUSE_UP,this._onMouseUp,this),i.off(a.EventType.MOUSE_DOWN,this._onMouseDown,this),i.off(a.EventType.KEY_DOWN,this._onKeyDown,this),i.off(a.EventType.KEY_UP,this._onKeyUp,this)},s._onKeyDown=function(t){t.keyCode==h.KEY.w?this._vertical=-1*this._ratio:t.keyCode==h.KEY.s?this._vertical=1*this._ratio:t.keyCode==h.KEY.a?this._horizontal=-1*this._ratio:t.keyCode==h.KEY.d&&(this._horizontal=1*this._ratio)},s._onKeyUp=function(t){t.keyCode==h.KEY.w&&this._vertical<0||t.keyCode==h.KEY.s&&this._vertical>0?this._vertical=0:(t.keyCode==h.KEY.a&&this._horizontal<0||t.keyCode==h.KEY.d&&this._horizontal>0)&&(this._horizontal=0)},s._onMouseDown=function(t){switch(t.getButton()){case _.BUTTON_LEFT:break;case _.BUTTON_RIGHT:this._panButtonDown=!0}},s._onMouseUp=function(t){switch(t.getButton()){case _.BUTTON_LEFT:break;case _.BUTTON_RIGHT:this._panButtonDown=!1}},s._onMouseMove=function(t){if(this._panButtonDown){var e=t.getDelta();this.node.rotate(r.fromEuler(new r,0,-e.x*this._rotateSpeed,0),u.NodeSpace.WORLD),this.node.rotate(r.fromEuler(new r,e.y*this._rotateSpeed,0,0),u.NodeSpace.LOCAL)}},s._onMouseWheel=function(t){var e=0;t.getScrollY()>0?e=-1*this._ratio:t.getScrollY()<0&&(e=1*this._ratio),this._mouseWheelPos.set(0,0,10*e),this.node.translate(this._mouseWheelPos,u.NodeSpace.LOCAL)},s.update=function(t){this._translatePos.set(this._horizontal*t*this._speed,0,this._vertical*t*this._speed),this.node.translate(this._translatePos,u.NodeSpace.LOCAL)},o(n,[{key:"lookButtonDown",get:function(){return this._lookButtonDown},set:function(t){this._lookButtonDown=t}}]),n}(l))||p);n._RF.pop()}}}));

System.register("chunks:///_virtual/characterRigid.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constant.ts"],(function(t){var i,e,n,r,a,o,s,c,l,h,u,d;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,a=t.createClass},function(t){o=t.cclegacy,s=t._decorator,c=t.Vec3,l=t.RigidBodyComponent,h=t.EPSILON,u=t.Component},function(t){d=t.Constant}],execute:function(){var p,y,_,g;o._RF.push({},"661afbK8/hPNbWGsBzk8GsI","characterRigid",void 0);var v=s.ccclass,f=s.property,m=new c,A=new c;t("CharacterRigid",v("CharacterRigid")((_=i((y=function(t){function i(){for(var i,e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return i=t.call.apply(t,[this].concat(a))||this,n(i,"damping",_,r(i)),n(i,"gravity",g,r(i)),i._rigidBody=null,i._grounded=!0,i._velocity=new c,i._curMaxSpeed=0,i._prevAngleY=0,i._stateX=0,i._stateZ=0,i}e(i,t);var o=i.prototype;return o.onLoad=function(){this._rigidBody=this.getComponent(l)},o.start=function(){this._prevAngleY=this.node.eulerAngles.y},o.initSpeed=function(t,i){void 0===i&&(i=1),this._curMaxSpeed=t*i},o.move=function(t,i){(t>0&&this._stateX<0||t<0&&this._stateX>0||i>0&&this._stateZ<0||i<0&&this._stateZ>0)&&this.clearVelocity(),this._stateX=t,this._stateZ=i},o.stopMove=function(){this._stateX=0,this._stateZ=0,this.clearVelocity()},o._updateCharacter=function(t){this.updateFunction(t),this.onGround&&(this._stateX||this._stateZ)&&(m.set(this._stateX,0,this._stateZ),m.normalize().negative(),this.rigidMove(m,1))},o.clearVelocity=function(){this._rigidBody.clearVelocity()},o.rigidMove=function(t,i){this._rigidBody.getLinearVelocity(A),c.scaleAndAdd(A,A,t,i);var e=this._curMaxSpeed,n=1;A.lengthSqr()>e&&(Math.abs(this.node.eulerAngles.y-this._prevAngleY)>=10&&(n=2),this._prevAngleY=this.node.eulerAngles.y,A.normalize(),A.multiplyScalar(e/n)),this._rigidBody.setLinearVelocity(A)},o.updateFunction=function(t){this._applyGravity(),this._applyDamping(),this._saveState()},o._applyDamping=function(t){void 0===t&&(t=1/d.GAME_FRAME),this._rigidBody.getLinearVelocity(A),A.lengthSqr()>h&&(A.multiplyScalar(Math.pow(1-this.damping,t)),this._rigidBody.setLinearVelocity(A))},o._applyGravity=function(){var t=this.gravity,i=this._rigidBody.mass;A.set(0,i*t,0),this._rigidBody.applyForce(A)},o._saveState=function(){this._rigidBody.getLinearVelocity(this._velocity)},o.update=function(t){var i=1e3/d.GAME_FRAME;this._updateCharacter(i)},a(i,[{key:"velocity",get:function(){return this._velocity}},{key:"onGround",get:function(){return this._grounded}}]),i}(u)).prototype,"damping",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),g=i(y.prototype,"gravity",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-10}}),p=y))||p);o._RF.pop()}}}));

System.register("chunks:///_virtual/clientEvent.ts",["cc"],(function(r){var n,e;return{setters:[function(r){n=r.cclegacy,e=r._decorator}],execute:function(){var t,a;n._RF.push({},"e55dbzBNn1NUrh8r5zusvCZ","clientEvent",void 0);var l=e.ccclass;e.property,r("ClientEvent",l("ClientEvent")(((a=function(){function r(){}return r.on=function(n,e,t){var a={handler:e,target:t},l=r._handlers[n];l||(l=[],r._handlers[n]=l);for(var c=0;c<l.length;c++)if(!l[c])return l[c]=a,c;return l.push(a),l.length},r.off=function(n,e,t){var a=r._handlers[n];if(a)for(var l=0;l<a.length;l++){var c=a[l];if(c.handler===e&&(!t||t===c.target)){a.splice(l,1);break}}},r.dispatchEvent=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),a=1;a<e;a++)t[a-1]=arguments[a];var l,c=r._handlers[n],h=[];for(l=1;l<arguments.length;l++)h.push(arguments[l]);if(c)for(l=0;l<c.length;l++){var i=c[l];i.handler&&i.handler.apply(i.target,h)}},r}())._handlers={},t=a))||t);n._RF.pop()}}}));

System.register("chunks:///_virtual/cocosAnalytics.min.js",["./cjs-loader.mjs"],(function(t,e){var n;return{setters:[function(t){n=t.default}],execute:function(){t("default",void 0);var r=t("__cjsMetaURL",e.meta.url);n.define(r,(function(e,n,r,i,o){!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/assets/",n(n.s=3)}([function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){var n={utf8:{stringToBytes:function(t){return n.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(n.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}};t.exports=n},function(t,e,n){(function(t,r){var i,o;!function(s,a,u){var h={function:!0,object:!0},l=h[typeof window]&&window||this,c=h[typeof e]&&e,f=h[typeof t]&&t&&!t.nodeType&&t,p=c&&f&&"object"==typeof r&&r;!p||p.global!==p&&p.window!==p&&p.self!==p||(l=p),void 0===(o="function"==typeof(i=u)?i.call(e,n,e,t):i)||(t.exports=o),l.cocosAnalytics=u()}(0,window,(function(){return n(4)}))}).call(this,n(1)(t),n(0))},function(t,e,n){var r=n(5),i=n(11),o=n(12),s=n(15),a=n(16),u=n(17),h=n(18),l=n(19),c=n(20),f=n(21),p=n(22),d=n(23),g=n(24),v={data:{msgPlus:0,isInit:!1,isShowLog:!1,msgPool:[],apiURL:"https://logstorage.cocos.com/log/v2",apiURLReserved:"http://logstorage.cocos.com/log/v2",versionCode:"v2"},version:"2.2.1",browserVersion:void 0,isActive:!0,init:function(t){this.CAAccount=new a(this),this.CAEvent=new u(this),this.CAPayment=new h(this),this.CALevels=new l(this),this.CATask=new c(this),this.CAItem=new f(this),this.CAVirtual=new p(this),this.CATaskType=new d(this),this.CACustomEvent=new s(this),this.CAAdvertising=new g(this),i.manufacturer=i.manufacturer||"",this.data.appVersion=t.version,this.data.appBuild=t.build,this.data.engine=t.engine||"",this.data.resolution=this._getScreenResolution(),this.data.uniqueID=this._getUniqueID(),this.data.CCID=this._getCCID(),this.data.age=0,this.data.sex=0,this._runInterval(),this._bindPageVisibilityEvent(),this.data.isInit=!0,console.log("cocos analytics version :"+this.version);var e=this._getLocalStorage("_SDK_APPID_")||"",n=this._getLocalStorage("_SDK_STORE_")||"",r=this._getLocalStorage("_SDK_CALLNUMBER_")||"";if(e.length>0&&e!=t.appID||n.length>0&&n!=t.storeID||r.length>0&&r!=t.callNumber){var o=this._getLocalStorage("onlineDuration"),v=this._getLocalStorage("_UID_"+e)||"";v.length>0&&parseInt(o)>0&&(this.data.appID=e,this.data.userID=v,this.data.storeID=n,this.data.callNumber=r,this.CAAccount.logout())}return t.appID?(this.data.appID=t.appID,t.storeID=t.storeID,t.storeID&&0!=t.storeID.replace(/\s/g,"").length?(this.data.storeID=t.storeID,this.data.callNumber=t.callNumber||"",this.data.userID="",this.data.channel="",this._addLocalStorage("_SDK_STORE_",this.data.storeID),this._addLocalStorage("_SDK_APPID_",t.appID),this._addLocalStorage("_SDK_CALLNUMBER_",this.data.callNumber),void this._sendInitEvent()):(console.log("storeID 不能为空!"),void(this.data.isInit=!1))):(console.log("appID 不能为空!"),void(this.data.isInit=!1))},isInited:function(){return this.data.isInit},onPause:function(){this.isActive=!1,this.data.end=((new Date).getTime()+"").substr(0,10);var t=this.data.end-this.data.start;this.log("duration..."+t+"s");var e=this._generatePostData({eventValue:{action:"background",start:this.data.start,end:this.data.end},eventTag:"successed",eventID:"view"});this._upload(e)},onResume:function(){this.isActive=!0,this.data.start=((new Date).getTime()+"").substr(0,10),this.data.end&&this.data.start-this.data.end>3600&&this._sendInitEvent()},enableDebug:function(t){this.data.isShowLog=t},_sendInitEvent:function(){if(i.runtimeMask){var t=null;t=setInterval(function(){if(!i.runtimeMask){clearInterval(t);var e=this._generatePostData({eventTag:"successed",eventID:"init"});this._upload(e)}}.bind(this),10)}else{var e=this._generatePostData({eventTag:"successed",eventID:"init"});this._upload(e)}},_runInterval:function(){var t=this;this.isInited()||(setInterval((function(){t.log("cocos analytics check and upload log...");for(var e=t._getLocalStorage("_MSG_"+t.data.appID),n=JSON.parse(e||"[]")||t.data.msgPool;0!==n.length;)if(n.length<=100)n.forEach((function(e){t._submit(e)})),n=[],t.data.msgPool=n,t._addLocalStorage("_MSG_"+t.data.appID,t._toJson(t.data.msgPool));else{var r=n.splice(0,100);t._submit(r),t.data.msgPool=n,t._addLocalStorage("_MSG_"+t.data.appID,t._toJson(t.data.msgPool))}}),3e4),setInterval((function(){t.isActive&&t.data.heartBeat&&(t.data.onlineTime=parseInt(t.data.onlineTime||0)+1,t._addLocalStorage("onlineDuration",t.data.onlineTime))}),1e3))},_bindPageVisibilityEvent:function(){var t="hidden";t in document?document.addEventListener("visibilitychange",n):(t="mozHidden")in document?document.addEventListener("mozvisibilitychange",n):(t="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",n):(t="msHidden")in document?document.addEventListener("msvisibilitychange",n):"onfocusin"in document?document.onfocusin=document.onfocusout=n:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=n;var e=this;function n(){var t=document.visibilityState;"visible"===t&&e.onResume(),"hidden"===t&&e.onPause()}void 0!==document[t]&&n()},_generatePostData:function(t){var e=this._generateBasePostData();if(null==t)return e;for(var n in t)null!=t[n]&&e[n]!==t[n]&&(e[n]=t[n]);return e},_lastMsgID:function(){return this.data.saveMsgID||""},_msgID:function(){return this.data.saveMsgID=o(this.data.CCID+((new Date).getTime()+this.data.msgPlus)),this.data.msgPlus=this.data.msgPlus+1,this.data.saveMsgID},_generateBasePostData:function(){var t=((new Date).getTime()+"").substr(0,10),e={appVersion:this.data.appVersion,versionCode:this.data.versionCode,uniqueID:this.data.uniqueID,appID:this.data.appID,channelID:this.data.channel,platform:"H5",engine:this.data.engine,chargeTime:t,userID:this.data.userID,resolution:this.data.resolution,osVersion:i.os.version,language:this._getLanguage(),manufacturer:i.manufacturer||"",store:this.data.storeID,age:this.data.age,sex:this.data.sex,callNumber:this.data.callNumber,model:i.product};return e.lastMsgID=this._lastMsgID(),e.msgID=this._msgID(),e},_toJson:function(t){return JSON.stringify(t)},_fromJson:function(t){return JSON.parse(t)},_upload:function(t){this.data.isInit?this._submit(t):console.log("Please init first!")},log:function(){if(!0===this.data.isShowLog)for(var t in arguments)console.log(arguments[t])},_submit:function(t){var e;e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");var n=this;e.onreadystatechange=function(){if(4==e.readyState){if(0==e.status&&n.data.apiURL!=n.data.apiURLReserved)return n.data.apiURL=n.data.apiURLReserved,void n._msgPersist(t);200==e.status&&n.log(n._toJson(t))}},e.onerror=function(e){n._msgPersist(t)};var i=r.encryptPostData(this._toJson(t));e.open("POST",this.data.apiURL,!0),e.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),e.send(i)},_msgPersist:function(t){this.data.msgPool.push(t),this._addLocalStorage("_MSG_"+this.data.appID,this._toJson(this.data.msgPool))},_getUniqueID:function(){var t="_SDK_UNIQUE_ID_",e=this._getLocalStorage(t);return e||(e=r.random32Str(),this._addLocalStorage(t,e)),e},_getCCID:function(){var t=r.x64hash128(),e=this._getLocalStorage(t);return e||(e=r.random32Str(),this._addLocalStorage(t,e)),e},extends:function(t){t.data=this.data,t.log=this.log,t._toJson=this._toJson,t._upload=this._upload,t._submit=this._submit,t._msgPersist=this._msgPersist,t._generatePostData=this._generatePostData,t._generateBasePostData=this._generateBasePostData,t._addLocalStorage=this._addLocalStorage,t._delLocalStorage=this._delLocalStorage,t._getLocalStorage=this._getLocalStorage,t._getLanguage=this._getLanguage,t._setHeartBeat=this._setHeartBeat,t._lastMsgID=this._lastMsgID,t._msgID=this._msgID},_addLocalStorage:function(t,e){e=e.toString(),window.localStorage&&("sessionId"==t&&window.sessionStorage?sessionStorage.setItem("__CA_"+t,e):window.wx&&wx.setStorage?wx.setStorage({key:"__CA_"+t,data:e}):localStorage.setItem("__CA_"+t,e))},_delLocalStorage:function(t){window.localStorage&&("sessionId"==t&&window.sessionStorage?sessionStorage.removeItem("__CA_"+t):window.wx&&wx.removeStorageSync?wx.removeStorageSync("__CA_"+t):localStorage.removeItem("__CA_"+t))},_getLocalStorage:function(t){if(window.localStorage)return"sessionId"==t&&window.sessionStorage?sessionStorage.getItem("__CA_"+t):window.wx&&wx.getStorageSync?wx.getStorageSync("__CA_"+t):localStorage.getItem("__CA_"+t)},_getScreenResolution:function(){if(null!=window.BK&&null!=window.BK.Director){var t=window.BK.Director.renderSize;return t.width+"*"+t.height}return null==window.screen.width?window.screen.availWidth+"*"+window.screen.availHeight:window.screen.width+"*"+window.screen.height},_getBrowserVersion:function(){if(!this.browserVersion){var t=window.navigator.userAgent.toLowerCase(),e=/micromessenger|qqbrowser|sogou|qzone|liebao|ucbrowser|360 aphone|360browser|edge|baiduboxapp|bidubrowser|baidubrowser|maxthon|mxbrowser|trident|miuibrowser/i.exec(t);e||(e=/chrome|safari|firefox|opr|oupeng|opera/i.exec(t));var n=e?e[0]:"unknown";"micromessenger"===n?n="wechat":"safari"===n&&t.match(/android.*applewebkit/)?n="androidbrowser":"trident"===n?n="ie":"360 aphone"===n?n="360browser":"mxbrowser"===n?n="maxthon":"opr"===n?n="opera":"bidubrowser"===n&&(n="baidubrowser");var r=t.match(/(micromessenger|qq|mx|maxthon|edge|bidu|baidu|sogou)(mobile)?(browserType)?\/?([\d.]+)/i);r||(r=t.match(/(msie |rv:|firefox|chrome|ucbrowser|oupeng|opera|opr|safari|miui)(mobile)?(browserType)?\/?([\d.]+)/i));var i=r?r[4]:"";this.browserVersion=n,i&&(this.browserVersion+="-"+i)}return this.browserVersion},_getLanguage:function(){var t=window.navigator.language;return(t=t||window.navigator.browserLanguage)?t.split("-")[0]:"en"},_setHeartBeat:function(t){this.data.heartBeat=t||!1,this.data.onlineTime=this._getLocalStorage("onlineDuration")||0}};t.exports=v},function(t,e,n){(function(e){function r(t,e){var n=0,r=t.length;if(!t)return 0;for(;e<r;){var i=e,o=t.charCodeAt(e);if((n+=o<=127?1:o<=2047?2:o<=65535?3:o<=2097151?4:o<=67108863?5:6)>117){e=i;break}e++}return e}function i(t){var e=new JSEncrypt;return e.setPublicKey("-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC9LCzyypg24REurnyflGy2LdFj\nc63hBk/69r84TAJHlE7x92kUpZBF+7cRf0bFRIRA52OsKlF/ljzCjfOPBE9JfNIq\n+dwF/rSqns+eyQHPQFd5lY692loz9Mo1pNgElpHuJbfydju7F5KTnQYqviCWompm\nLKKdzAPcY1AVJfWd+QIDAQAB\n-----END PUBLIC KEY-----"),e.key.encrypt(t)}n(10);var o={urlsafe_b64encode:function(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},encryptPostData:function(t){for(var n=new e(0),o=0,s=t.length;s-o>0;){var a=o,u=r(t,o),h="";do{h=i(t.substr(a,u-a))}while(256!=h.length);n+=h,o=u}var l=e.from(n,"hex").toString("base64");return this.urlsafe_b64encode(l)},x64Add:function(t,e){t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var n=[0,0,0,0];return n[3]+=t[3]+e[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=t[2]+e[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=t[1]+e[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=t[0]+e[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]},x64Multiply:function(t,e){t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var n=[0,0,0,0];return n[3]+=t[3]*e[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=t[2]*e[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=t[3]*e[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=t[1]*e[3],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=t[2]*e[2],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=t[3]*e[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=t[0]*e[3]+t[1]*e[2]+t[2]*e[1]+t[3]*e[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]},x64Rotl:function(t,e){return 32==(e%=64)?[t[1],t[0]]:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e|t[0]>>>32-e]:(e-=32,[t[1]<<e|t[0]>>>32-e,t[0]<<e|t[1]>>>32-e])},x64LeftShift:function(t,e){return 0==(e%=64)?t:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e]:[t[1]<<e-32,0]},x64Xor:function(t,e){return[t[0]^e[0],t[1]^e[1]]},x64Fmix:function(t){return t=this.x64Xor(t,[0,t[0]>>>1]),t=this.x64Multiply(t,[4283543511,3981806797]),t=this.x64Xor(t,[0,t[0]>>>1]),t=this.x64Multiply(t,[3301882366,444984403]),this.x64Xor(t,[0,t[0]>>>1])},x64hash128:function(t,e){e=e||0;for(var n=(t=t||"0").length%16,r=t.length-n,i=[0,e],o=[0,e],s=[0,0],a=[0,0],u=[2277735313,289559509],h=[1291169091,658871167],l=0;l<r;l+=16)s=[255&t.charCodeAt(l+4)|(255&t.charCodeAt(l+5))<<8|(255&t.charCodeAt(l+6))<<16|(255&t.charCodeAt(l+7))<<24,255&t.charCodeAt(l)|(255&t.charCodeAt(l+1))<<8|(255&t.charCodeAt(l+2))<<16|(255&t.charCodeAt(l+3))<<24],a=[255&t.charCodeAt(l+12)|(255&t.charCodeAt(l+13))<<8|(255&t.charCodeAt(l+14))<<16|(255&t.charCodeAt(l+15))<<24,255&t.charCodeAt(l+8)|(255&t.charCodeAt(l+9))<<8|(255&t.charCodeAt(l+10))<<16|(255&t.charCodeAt(l+11))<<24],s=this.x64Multiply(s,u),s=this.x64Rotl(s,31),s=this.x64Multiply(s,h),i=this.x64Xor(i,s),i=this.x64Rotl(i,27),i=this.x64Add(i,o),i=this.x64Add(this.x64Multiply(i,[0,5]),[0,1390208809]),a=this.x64Multiply(a,h),a=this.x64Rotl(a,33),a=this.x64Multiply(a,u),o=this.x64Xor(o,a),o=this.x64Rotl(o,31),o=this.x64Add(o,i),o=this.x64Add(this.x64Multiply(o,[0,5]),[0,944331445]);switch(s=[0,0],a=[0,0],n){case 15:a=this.x64Xor(a,this.x64LeftShift([0,t.charCodeAt(l+14)],48));case 14:a=this.x64Xor(a,this.x64LeftShift([0,t.charCodeAt(l+13)],40));case 13:a=this.x64Xor(a,this.x64LeftShift([0,t.charCodeAt(l+12)],32));case 12:a=this.x64Xor(a,this.x64LeftShift([0,t.charCodeAt(l+11)],24));case 11:a=this.x64Xor(a,this.x64LeftShift([0,t.charCodeAt(l+10)],16));case 10:a=this.x64Xor(a,this.x64LeftShift([0,t.charCodeAt(l+9)],8));case 9:a=this.x64Xor(a,[0,t.charCodeAt(l+8)]),a=this.x64Multiply(a,h),a=this.x64Rotl(a,33),a=this.x64Multiply(a,u),o=this.x64Xor(o,a);case 8:s=this.x64Xor(s,this.x64LeftShift([0,t.charCodeAt(l+7)],56));case 7:s=this.x64Xor(s,this.x64LeftShift([0,t.charCodeAt(l+6)],48));case 6:s=this.x64Xor(s,this.x64LeftShift([0,t.charCodeAt(l+5)],40));case 5:s=this.x64Xor(s,this.x64LeftShift([0,t.charCodeAt(l+4)],32));case 4:s=this.x64Xor(s,this.x64LeftShift([0,t.charCodeAt(l+3)],24));case 3:s=this.x64Xor(s,this.x64LeftShift([0,t.charCodeAt(l+2)],16));case 2:s=this.x64Xor(s,this.x64LeftShift([0,t.charCodeAt(l+1)],8));case 1:s=this.x64Xor(s,[0,t.charCodeAt(l)]),s=this.x64Multiply(s,u),s=this.x64Rotl(s,31),s=this.x64Multiply(s,h),i=this.x64Xor(i,s)}return i=this.x64Xor(i,[0,t.length]),o=this.x64Xor(o,[0,t.length]),i=this.x64Add(i,o),o=this.x64Add(o,i),i=this.x64Fmix(i),o=this.x64Fmix(o),i=this.x64Add(i,o),o=this.x64Add(o,i),("00000000"+(i[0]>>>0).toString(16)).slice(-8)+("00000000"+(i[1]>>>0).toString(16)).slice(-8)+("00000000"+(o[0]>>>0).toString(16)).slice(-8)+("00000000"+(o[1]>>>0).toString(16)).slice(-8)},random32Str:function(){var t,e=Date.now().toString(32).toUpperCase();return t=Date.now(),(e||"")+"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n;return n=(t+16*Math.random())%16|0,t=Math.floor(t/16),"x"===e?n.toString(16):(7&n|8).toString(16)})).replace(/-/g,"").toUpperCase()}};t.exports=o}).call(this,n(6).Buffer)},function(t,e,n){(function(t){var r=n(7),i=n(8),o=n(9);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return h(this,t,e,n)}function h(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=f(t,e),t}(t,e,n,r):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,n),i=(t=a(t,r)).write(e,n);return i!==r&&(t=t.slice(0,i)),t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|p(e.length);return 0===(t=a(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?a(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function c(t,e){if(l(e),t=a(t,e<0?0:0|p(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function f(t,e){var n=e.length<0?0:0|p(e.length);t=a(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return F(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return j(t).length;default:if(r)return F(t).length;e=(""+e).toLowerCase(),r=!0}}function g(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,n);case"utf8":case"utf-8":return A(this,e,n);case"ascii":return T(this,e,n);case"latin1":case"binary":return E(this,e,n);case"base64":return I(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function v(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:b(t,e,n,r,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):b(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(t,e,n,r,i){var o,s=1,a=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}function h(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var l=-1;for(o=n;o<a;o++)if(h(t,o)===h(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var c=!0,f=0;f<u;f++)if(h(t,o+f)!==h(e,f)){c=!1;break}if(c)return o}return-1}function m(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function w(t,e,n,r){return X(F(e,t.length-n),t,n,r)}function S(t,e,n,r){return X(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function _(t,e,n,r){return S(t,e,n,r)}function x(t,e,n,r){return X(j(e),t,n,r)}function D(t,e,n,r){return X(function(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)r=(n=t.charCodeAt(s))>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function I(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function A(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,u,h=t[i],l=null,c=h>239?4:h>223?3:h>191?2:1;if(i+c<=n)switch(c){case 1:h<128&&(l=h);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&h)<<6|63&o)>127&&(l=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(u=(15&h)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&h)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,c=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=c}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}function T(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function E(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function P(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=V(t[o]);return i}function B(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function C(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function M(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function O(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function L(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function k(t,e,n,r,o){return o||L(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function N(t,e,n,r,o){return o||L(t,0,n,8),i.write(t,e,n,r,52,8),n+8}e.Buffer=u,e.SlowBuffer=function(t){return+t!=t&&(t=0),u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return h(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return l(e),e<=0?a(t,e):void 0!==n?"string"==typeof r?a(t,e).fill(n,r):a(t,e).fill(n):a(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return c(null,t)},u.allocUnsafeSlow=function(t){return c(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?A(this,0,t):g.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),h=this.slice(r,i),l=t.slice(e,n),c=0;c<a;++c)if(h[c]!==l[c]){o=h[c],s=l[c];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return m(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return S(this,t,e,n);case"latin1":case"binary":return _(this,t,e,n);case"base64":return x(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},u.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||C(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||C(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||C(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||C(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||C(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||C(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||C(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||C(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||C(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||C(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||C(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||C(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||C(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||C(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):O(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):O(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):O(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):O(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return k(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return k(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return N(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return N(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=u.isBuffer(t)?t:F(new u(t,r).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function V(t){return t<16?"0"+t.toString(16):t.toString(16)}function F(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function j(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(U,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function X(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(0))},function(t,e,n){e.byteLength=function(t){var e=h(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=h(t),s=r[0],a=r[1],u=new o(function(t,e,n){return 3*(e+n)/4-n}(0,s,a)),l=0,c=a>0?s-4:s;for(n=0;n<c;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;return 2===a&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,u[l++]=255&e),1===a&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e),u},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(l(t,s,s+16383>a?a:s+16383));return 1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function h(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var i,o,s=[],a=e;a<n;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,h=u>>1,l=-7,c=n?i-1:0,f=n?-1:1,p=t[e+c];for(c+=f,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+t[e+c],c+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+t[e+c],c+=f,l-=8);if(0===o)o=1-h;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=h}return(p?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,u,h=8*o-i-1,l=(1<<h)-1,c=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+c>=1?f/u:f*Math.pow(2,1-c))*u>=2&&(s++,u/=2),s+c>=l?(a=0,s=l):s+c>=1?(a=(e*u-1)*Math.pow(2,i),s+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,i),s=0));i>=8;t[n+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,h+=i;h>0;t[n+p]=255&s,p+=d,s/=256,h-=8);t[n+p-d]|=128*g}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){!function(t){function e(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function n(t,e){return t&e}function r(t,e){return t|e}function i(t,e){return t^e}function o(t,e){return t&~e}function s(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function a(t){for(var e=0;0!=t;)t&=t-1,++e;return e}var u,h,l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},c={decode:function(t){var e;if(void 0===u){for(u=Object.create(null),e=0;e<64;++e)u["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)]=e;for(e=0;e<"= \f\n\r\t \u2028\u2029".length;++e)u["= \f\n\r\t \u2028\u2029".charAt(e)]=-1}var n=[],r=0,i=0;for(e=0;e<t.length;++e){var o=t.charAt(e);if("="==o)break;if(-1!=(o=u[o])){if(void 0===o)throw new Error("Illegal character at offset "+e);r|=o,++i>=4?(n[n.length]=r>>16,n[n.length]=r>>8&255,n[n.length]=255&r,r=0,i=0):r<<=6}}switch(i){case 1:throw new Error("Base64 encoding incomplete: at least 2 bits missing");case 2:n[n.length]=r>>10;break;case 3:n[n.length]=r>>16,n[n.length]=r>>8&255}return n},re:/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,unarmor:function(t){var e=c.re.exec(t);if(e)if(e[1])t=e[1];else{if(!e[2])throw new Error("RegExp out of sync");t=e[2]}return c.decode(t)}},f=function(){function t(e,n){this.hexDigits="0123456789ABCDEF",e instanceof t?(this.enc=e.enc,this.pos=e.pos):(this.enc=e,this.pos=n)}return t.prototype.get=function(t){if(void 0===t&&(t=this.pos++),t>=this.enc.length)throw new Error("Requesting byte offset "+t+" on a stream of length "+this.enc.length);return"string"==typeof this.enc?this.enc.charCodeAt(t):this.enc[t]},t.prototype.hexByte=function(t){return this.hexDigits.charAt(t>>4&15)+this.hexDigits.charAt(15&t)},t.prototype.hexDump=function(t,e,n){for(var r="",i=t;i<e;++i)if(r+=this.hexByte(this.get(i)),!0!==n)switch(15&i){case 7:r+="  ";break;case 15:r+="\n";break;default:r+=" "}return r},t}(),p=function(){function t(t,e,n,r,i){if(!(r instanceof d))throw new Error("Invalid tag value.");this.stream=t,this.header=e,this.length=n,this.tag=r,this.sub=i}return t.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(null===this.sub?"null":this.sub.length)+"]"},t.prototype.posStart=function(){return this.stream.pos},t.prototype.posContent=function(){return this.stream.pos+this.header},t.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},t.prototype.toHexString=function(){return this.stream.hexDump(this.posStart(),this.posEnd(),!0)},t.decodeLength=function(t){var e=t.get(),n=127&e;if(n==e)return n;if(n>6)throw new Error("Length over 48 bits not supported at position "+(t.pos-1));if(0===n)return null;e=0;for(var r=0;r<n;++r)e=256*e+t.get();return e},t.prototype.getHexStringValue=function(){var t=this.toHexString(),e=2*this.header,n=2*this.length;return t.substr(e,n)},t.decode=function(e){var n;n=e instanceof f?e:new f(e,0);var r=new f(n),i=new d(n),o=t.decodeLength(n),s=n.pos,a=s-r.pos,u=null,h=function(){var e=[];if(null!==o){for(var r=s+o;n.pos<r;)e[e.length]=t.decode(n);if(n.pos!=r)throw new Error("Content size is not correct for container starting at offset "+s)}else try{for(;;){var i=t.decode(n);if(i.tag.isEOC())break;e[e.length]=i}o=s-n.pos}catch(t){throw new Error("Exception while decoding undefined length content: "+t)}return e};if(i.tagConstructed)u=h();else if(i.isUniversal()&&(3==i.tagNumber||4==i.tagNumber))try{if(3==i.tagNumber&&0!=n.get())throw new Error("BIT STRINGs with unused bits cannot encapsulate.");u=h();for(var l=0;l<u.length;++l)if(u[l].tag.isEOC())throw new Error("EOC is not supposed to be actual content.")}catch(t){u=null}if(null===u){if(null===o)throw new Error("We can't skip over an invalid tag with undefined length at offset "+s);n.pos=s+Math.abs(o)}return new t(r,a,o,i,u)},t}(),d=function(){function t(t){var e=t.get();this.tagClass=e>>6,this.tagConstructed=0!=(32&e),this.tagNumber=31&e,31==this.tagNumber&&null.error(0)}return t.prototype.isUniversal=function(){return 0===this.tagClass},t.prototype.isEOC=function(){return 0===this.tagClass&&0===this.tagNumber},t}(),g=function(){function t(t,e,n){null!=t&&("number"==typeof t?this.fromNumber(t,e,n):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}return t.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var n;if(16==t)n=4;else if(8==t)n=3;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)return this.toRadix(t);n=2}var r,i=(1<<n)-1,o=!1,s="",a=this.t,u=this.DB-a*this.DB%n;if(a-- >0)for(u<this.DB&&(r=this[a]>>u)>0&&(o=!0,s=e(r));a>=0;)u<n?(r=(this[a]&(1<<u)-1)<<n-u,r|=this[--a]>>(u+=this.DB-n)):(r=this[a]>>(u-=n)&i,u<=0&&(u+=this.DB,--a)),r>0&&(o=!0),o&&(s+=e(r));return o?s:"0"},t.prototype.negate=function(){var e=m();return t.ZERO.subTo(this,e),e},t.prototype.abs=function(){return this.s<0?this.negate():this},t.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(0!=(e=n-t.t))return this.s<0?-e:e;for(;--n>=0;)if(0!=(e=this[n]-t[n]))return e;return 0},t.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+A(this[this.t-1]^this.s&this.DM)},t.prototype.mod=function(e){var n=m();return this.abs().divRemTo(e,null,n),this.s<0&&n.compareTo(t.ZERO)>0&&e.subTo(n,n),n},t.prototype.modPowInt=function(t,e){var n;return n=t<256||e.isEven()?new y(e):new b(e),this.exp(t,n)},t.prototype.clone=function(){var t=m();return this.copyTo(t),t},t.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},t.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},t.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},t.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},t.prototype.equals=function(t){return 0==this.compareTo(t)},t.prototype.min=function(t){return this.compareTo(t)<0?this:t},t.prototype.max=function(t){return this.compareTo(t)>0?this:t},t.prototype.and=function(t){var e=m();return this.bitwiseTo(t,n,e),e},t.prototype.or=function(t){var e=m();return this.bitwiseTo(t,r,e),e},t.prototype.xor=function(t){var e=m();return this.bitwiseTo(t,i,e),e},t.prototype.andNot=function(t){var e=m();return this.bitwiseTo(t,o,e),e},t.prototype.not=function(){for(var t=m(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},t.prototype.shiftLeft=function(t){var e=m();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},t.prototype.shiftRight=function(t){var e=m();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},t.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+s(this[t]);return this.s<0?this.t*this.DB:-1},t.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=a(this[n]^e);return t},t.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},t.prototype.setBit=function(t){return this.changeBit(t,r)},t.prototype.clearBit=function(t){return this.changeBit(t,o)},t.prototype.flipBit=function(t){return this.changeBit(t,i)},t.prototype.add=function(t){var e=m();return this.addTo(t,e),e},t.prototype.subtract=function(t){var e=m();return this.subTo(t,e),e},t.prototype.multiply=function(t){var e=m();return this.multiplyTo(t,e),e},t.prototype.divide=function(t){var e=m();return this.divRemTo(t,e,null),e},t.prototype.remainder=function(t){var e=m();return this.divRemTo(t,null,e),e},t.prototype.divideAndRemainder=function(t){var e=m(),n=m();return this.divRemTo(t,e,n),[e,n]},t.prototype.pow=function(t){return this.exp(t,new v)},t.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},t.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},t.prototype.fromString=function(e,n){var r;if(16==n)r=4;else if(8==n)r=3;else if(256==n)r=8;else if(2==n)r=1;else if(32==n)r=5;else{if(4!=n)return void this.fromRadix(e,n);r=2}this.t=0,this.s=0;for(var i=e.length,o=!1,s=0;--i>=0;){var a=8==r?255&+e[i]:D(e,i);a<0?"-"==e.charAt(i)&&(o=!0):(o=!1,0==s?this[this.t++]=a:s+r>this.DB?(this[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this[this.t++]=a>>this.DB-s):this[this.t-1]|=a<<s,(s+=r)>=this.DB&&(s-=this.DB))}8==r&&0!=(128&+e[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),o&&t.ZERO.subTo(this,this)},t.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},t.prototype.dlShiftTo=function(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s},t.prototype.drShiftTo=function(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s},t.prototype.lShiftTo=function(t,e){for(var n=t%this.DB,r=this.DB-n,i=(1<<r)-1,o=Math.floor(t/this.DB),s=this.s<<n&this.DM,a=this.t-1;a>=0;--a)e[a+o+1]=this[a]>>r|s,s=(this[a]&i)<<n;for(a=o-1;a>=0;--a)e[a]=0;e[o]=s,e.t=this.t+o+1,e.s=this.s,e.clamp()},t.prototype.rShiftTo=function(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)e.t=0;else{var r=t%this.DB,i=this.DB-r,o=(1<<r)-1;e[0]=this[n]>>r;for(var s=n+1;s<this.t;++s)e[s-n-1]|=(this[s]&o)<<i,e[s-n]=this[s]>>r;r>0&&(e[this.t-n-1]|=(this.s&o)<<i),e.t=this.t-n,e.clamp()}},t.prototype.subTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]-t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t[n],e[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[n++]=this.DV+r:r>0&&(e[n++]=r),e.t=n,e.clamp()},t.prototype.multiplyTo=function(e,n){var r=this.abs(),i=e.abs(),o=r.t;for(n.t=o+i.t;--o>=0;)n[o]=0;for(o=0;o<i.t;++o)n[o+r.t]=r.am(0,i[o],n,o,0,r.t);n.s=0,n.clamp(),this.s!=e.s&&t.ZERO.subTo(n,n)},t.prototype.squareTo=function(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()},t.prototype.divRemTo=function(e,n,r){var i=e.abs();if(!(i.t<=0)){var o=this.abs();if(o.t<i.t)return null!=n&&n.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=m());var s=m(),a=this.s,u=e.s,h=this.DB-A(i[i.t-1]);h>0?(i.lShiftTo(h,s),o.lShiftTo(h,r)):(i.copyTo(s),o.copyTo(r));var l=s.t,c=s[l-1];if(0!=c){var f=c*(1<<this.F1)+(l>1?s[l-2]>>this.F2:0),p=this.FV/f,d=(1<<this.F1)/f,g=1<<this.F2,v=r.t,y=v-l,b=null==n?m():n;for(s.dlShiftTo(y,b),r.compareTo(b)>=0&&(r[r.t++]=1,r.subTo(b,r)),t.ONE.dlShiftTo(l,b),b.subTo(s,s);s.t<l;)s[s.t++]=0;for(;--y>=0;){var w=r[--v]==c?this.DM:Math.floor(r[v]*p+(r[v-1]+g)*d);if((r[v]+=s.am(0,w,r,y,0,l))<w)for(s.dlShiftTo(y,b),r.subTo(b,r);r[v]<--w;)r.subTo(b,r)}null!=n&&(r.drShiftTo(l,n),a!=u&&t.ZERO.subTo(n,n)),r.t=l,r.clamp(),h>0&&r.rShiftTo(h,r),a<0&&t.ZERO.subTo(r,r)}}},t.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},t.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},t.prototype.exp=function(e,n){if(e>4294967295||e<1)return t.ONE;var r=m(),i=m(),o=n.convert(this),s=A(e)-1;for(o.copyTo(r);--s>=0;)if(n.sqrTo(r,i),(e&1<<s)>0)n.mulTo(i,o,r);else{var a=r;r=i,i=a}return n.revert(r)},t}(),v=function(){function t(){}return t.prototype.convert=function(t){return t},t.prototype.revert=function(t){return t},t.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n)},t.prototype.sqrTo=function(t,e){t.squareTo(e)},t}(),y=function(){function t(t){this.m=t}return t.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},t.prototype.revert=function(t){return t},t.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},t.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},t.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},t}(),b=function(){function t(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}return t.prototype.convert=function(t){var e=m();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(g.ZERO)>0&&this.m.subTo(e,e),e},t.prototype.revert=function(t){var e=m();return t.copyTo(e),this.reduce(e),e},t.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],r=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[n=e+this.m.t]+=this.m.am(0,r,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},t.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},t.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},t}();function m(){return new g(null)}function w(t,e){return new g(t,e)}"Microsoft Internet Explorer"==window.navigator.appName?(g.prototype.am=function(t,e,n,r,i,o){for(var s=32767&e,a=e>>15;--o>=0;){var u=32767&this[t],h=this[t++]>>15,l=a*u+h*s;i=((u=s*u+((32767&l)<<15)+n[r]+(1073741823&i))>>>30)+(l>>>15)+a*h+(i>>>30),n[r++]=1073741823&u}return i},h=30):"Netscape"!=window.navigator.appName?(g.prototype.am=function(t,e,n,r,i,o){for(;--o>=0;){var s=e*this[t++]+n[r]+i;i=Math.floor(s/67108864),n[r++]=67108863&s}return i},h=26):(g.prototype.am=function(t,e,n,r,i,o){for(var s=16383&e,a=e>>14;--o>=0;){var u=16383&this[t],h=this[t++]>>14,l=a*u+h*s;i=((u=s*u+((16383&l)<<14)+n[r]+i)>>28)+(l>>14)+a*h,n[r++]=268435455&u}return i},h=28),g.prototype.DB=h,g.prototype.DM=(1<<h)-1,g.prototype.DV=1<<h,g.prototype.FV=Math.pow(2,52),g.prototype.F1=52-h,g.prototype.F2=2*h-52;var S,_,x=[];for(S="0".charCodeAt(0),_=0;_<=9;++_)x[S++]=_;for(S="a".charCodeAt(0),_=10;_<36;++_)x[S++]=_;for(S="A".charCodeAt(0),_=10;_<36;++_)x[S++]=_;function D(t,e){var n=x[t.charCodeAt(e)];return null==n?-1:n}function I(t){var e=m();return e.fromInt(t),e}function A(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}g.ZERO=I(0),g.ONE=I(1);var T,E,P=function(){function t(){this.i=0,this.j=0,this.S=[]}return t.prototype.init=function(t){var e,n,r;for(e=0;e<256;++e)this.S[e]=e;for(n=0,e=0;e<256;++e)n=n+this.S[e]+t[e%t.length]&255,r=this.S[e],this.S[e]=this.S[n],this.S[n]=r;this.i=0,this.j=0},t.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]},t}(),B=null;if(null==B){B=[],E=0;var C=void 0;if(window.crypto&&window.crypto.getRandomValues){var R=new Uint32Array(256);for(window.crypto.getRandomValues(R),C=0;C<R.length;++C)B[E++]=255&R[C]}var M=function t(e){if(this.count=this.count||0,this.count>=256||E>=256)window.removeEventListener?window.removeEventListener("mousemove",t,!1):window.detachEvent&&window.detachEvent("onmousemove",t);else try{var n=e.x+e.y;B[E++]=255&n,this.count+=1}catch(e){}};window.addEventListener?window.addEventListener("mousemove",M,!1):window.attachEvent&&window.attachEvent("onmousemove",M)}function O(){if(null==T){for(T=new P;E<256;){var t=Math.floor(65536*Math.random());B[E++]=255&t}for(T.init(B),E=0;E<B.length;++E)B[E]=0;E=0}return T.next()}var L=function(){function t(){}return t.prototype.nextBytes=function(t){for(var e=0;e<t.length;++e)t[e]=O()},t}(),k=function(t){function e(n){var r=t.call(this)||this;return n&&("string"==typeof n?r.parseKey(n):(e.hasPrivateKeyProperty(n)||e.hasPublicKeyProperty(n))&&r.parsePropertiesFrom(n)),r}return function(t,e){function n(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.parseKey=function(t){try{var e=0,n=0,r=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/.test(t)?Hex.decode(t):c.unarmor(t),i=p.decode(r);if(3===i.sub.length&&(i=i.sub[2].sub[0]),9===i.sub.length){e=i.sub[1].getHexStringValue(),this.n=w(e,16),n=i.sub[2].getHexStringValue(),this.e=parseInt(n,16);var o=i.sub[3].getHexStringValue();this.d=w(o,16);var s=i.sub[4].getHexStringValue();this.p=w(s,16);var a=i.sub[5].getHexStringValue();this.q=w(a,16);var u=i.sub[6].getHexStringValue();this.dmp1=w(u,16);var h=i.sub[7].getHexStringValue();this.dmq1=w(h,16);var l=i.sub[8].getHexStringValue();this.coeff=w(l,16)}else{if(2!==i.sub.length)return!1;var f=i.sub[1].sub[0];e=f.sub[0].getHexStringValue(),this.n=w(e,16),n=f.sub[1].getHexStringValue(),this.e=parseInt(n,16)}return!0}catch(t){return!1}},e}(function(){function t(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}return t.prototype.doPublic=function(t){return t.modPowInt(this.e,this.n)},t.prototype.setPublic=function(t,e){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=w(t,16),this.e=parseInt(e,16)):console.error("Invalid RSA public key")},t.prototype.encrypt=function(t){var e=function(t,e){if(e<t.length+11)return console.error("Message too long for RSA"),null;for(var n=[],r=t.length-1;r>=0&&e>0;){var i=t.charCodeAt(r--);i<128?n[--e]=i:i>127&&i<2048?(n[--e]=63&i|128,n[--e]=i>>6|192):(n[--e]=63&i|128,n[--e]=i>>6&63|128,n[--e]=i>>12|224)}n[--e]=0;for(var o=new L,s=[];e>2;){for(s[0]=0;0==s[0];)o.nextBytes(s);n[--e]=s[0]}return n[--e]=2,n[--e]=0,new g(n)}(t,this.n.bitLength()+7>>3);if(null==e)return null;var n=this.doPublic(e);if(null==n)return null;var r=n.toString(16);return 0==(1&r.length)?r:"0"+r},t}()),N=function(){function t(t){t=t||{},this.default_key_size=parseInt(t.default_key_size,10)||1024,this.default_public_exponent=t.default_public_exponent||"010001",this.log=t.log||!1,this.key=null}return t.prototype.setKey=function(t){this.log&&this.key&&console.warn("A key was already set, overriding existing."),this.key=new k(t)},t.prototype.setPublicKey=function(t){this.setKey(t)},t.version="3.0.0-rc.1",t}();window.JSEncrypt=N,t.JSEncrypt=N,t.default=N,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,n){(function(t,r){var i;(function(){var o={function:!0,object:!0},s=o[typeof window]&&window||this,a=o[typeof e]&&e,u=o[typeof t]&&t&&!t.nodeType&&t,h=a&&u&&"object"==typeof r&&r;!h||h.global!==h&&h.window!==h&&h.self!==h||(s=h);var l=Math.pow(2,53)-1,c=/\bOpera/,f=Object.prototype,p=f.hasOwnProperty,d=f.toString;function g(t){return(t=String(t)).charAt(0).toUpperCase()+t.slice(1)}function v(t){return t=S(t),/^(?:webOS|i(?:OS|P))/.test(t)?t:g(t)}function y(t,e){for(var n in t)p.call(t,n)&&e(t[n],n,t)}function b(t){return null==t?g(t):d.call(t).slice(8,-1)}function m(t){return String(t).replace(/([ -])(?!$)/g,"$1?")}function w(t,e){var n=null;return function(t,e){var n=-1,r=t?t.length:0;if("number"==typeof r&&r>-1&&r<=l)for(;++n<r;)e(t[n],n);else y(t,e)}(t,(function(r,i){n=e(n,r,i,t)})),n}function S(t){return String(t).replace(/^ +| +$/g,"")}var _=function t(e){var n=s,r=e&&"object"==typeof e&&"String"!=b(e);r&&(n=e,e=null);var i=n.navigator||{},o=i.userAgent||"";e||(e=o);var a,u,h,l,f,p=r?!!i.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(d.toString()),g=r?"Object":"ScriptBridgingProxyObject",_=r?"Object":"Environment",x=r&&n.java?"JavaPackage":b(n.java),D=r?"Object":"RuntimeObject",I=/\bJava/.test(x)&&n.java,A=I&&b(n.environment)==_,T=I?"a":"α",E=I?"b":"β",P=n.document||{},B=n.operamini||n.opera,C=c.test(C=r&&B?B["[[Class]]"]:b(B))?C:B=null,R=e,M=[],O=null,L=e==o,k=L&&B&&"function"==typeof B.version&&B.version(),N=w([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],(function(t,n){return t||RegExp("\\b"+(n.pattern||m(n))+"\\b","i").exec(e)&&(n.label||n)})),U=w(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"],(function(t,n){return t||RegExp("\\b"+(n.pattern||m(n))+"\\b","i").exec(e)&&(n.label||n)})),V=Y([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),F=w({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}},(function(t,n,r){return t||(n[V]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(V)]||RegExp("\\b"+m(r)+"(?:\\b|\\w*\\d)","i").exec(e))&&r})),j=w(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],(function(t,n){var r=n.pattern||m(n);return!t&&(t=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(t=function(t,e,n){var r={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return e&&n&&/^Win/i.test(t)&&!/^Windows Phone /i.test(t)&&(r=r[/[\d.]+$/.exec(t)])&&(t="Windows "+r),t=String(t),e&&n&&(t=t.replace(RegExp(e,"i"),n)),v(t.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(t,r,n.label||n)),t}));if(window.BK){var X=BK.getSystemInfoSync();-1!=(V=X.platform).indexOf("ios")?(V=V.replace(/ios/,"iPhone"),e=" OS "+X.osVersion+") "):(V=V.replace(/ios/,"Android"),e=" Android "+X.osVersion+"; ",j="Android "+X.osVersion),k=X.osVersion}function Y(t){return w(t,(function(t,n){var r=n.pattern||m(n);return!t&&(t=RegExp("\\b"+r+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+r+" *\\w+-[\\w]*","i").exec(e)||RegExp("\\b"+r+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=String(n.label&&!RegExp(r,"i").test(n.label)?n.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),n=n.label||n,t=v(t[0].replace(RegExp(r,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),t}))}if(N&&(N=[N]),F&&!V&&(V=Y([F])),(a=/\bGoogle TV\b/.exec(V))&&(V=a[0]),/\bSimulator\b/i.test(e)&&(V=(V?V+" ":"")+"Simulator"),"Opera Mini"==U&&/\bOPiOS\b/.test(e)&&M.push("running in Turbo/Uncompressed mode"),"IE"==U&&/\blike iPhone OS\b/.test(e)?(F=(a=t(e.replace(/like iPhone OS/,""))).manufacturer,V=a.product):/^iP/.test(V)?(U||(U="Safari"),j="iOS"+((a=/ OS ([\d_]+)/i.exec(e))||(a=/ OS[^]+?([\d\.]+?) /i.exec(e))?" "+a[1].replace(/_/g,"."):"")):"Konqueror"!=U||/buntu/i.test(j)?F&&"Google"!=F&&(/Chrome/.test(U)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test(V))||/\bAndroid\b/.test(j)&&/^Chrome/.test(U)&&/\bVersion\//i.test(e)?(U="Android Browser",j=/\bAndroid\b/.test(j)?j:"Android"):"Silk"==U?(/\bMobi/i.test(e)||(j="Android",M.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&M.unshift("accelerated")):"PaleMoon"==U&&(a=/\bFirefox\/([\d.]+)\b/.exec(e))?M.push("identifying as Firefox "+a[1]):"Firefox"==U&&(a=/\b(Mobile|Tablet|TV)\b/i.exec(e))?(j||(j="Firefox OS"),V||(V=a[1])):!U||(a=!/\bMinefield\b/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(U))?(U&&!V&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(a+"/")+8))&&(U=null),(a=V||F||j)&&(V||F||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(j))&&(U=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(j)?j:a)+" Browser")):"Electron"==U&&(a=(/\bChrome\/([\d.]+)\b/.exec(e)||0)[1])&&M.push("Chromium "+a):j="Kubuntu",k||(j&&-1!=j.indexOf("Android")&&(V=V||"Android",(a=/ Android[^]+?([\d\.]+?)[\)|;]/i.exec(e))&&(j="Android "+((k=a[1].replace(/_/g,"."))||""))),k||(k=w(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",m(U),"(?:Firefox|Minefield|NetFront)"],(function(t,n){return t||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null})))),(a=("iCab"==N&&parseFloat(k)>3?"WebKit":/\bOpera\b/.test(U)&&(/\bOPR\b/.test(e)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&!/^(?:Trident|EdgeHTML)$/.test(N)&&"WebKit"||!N&&/\bMSIE\b/i.test(e)&&("Mac OS"==j?"Tasman":"Trident")||"WebKit"==N&&/\bPlayStation\b(?! Vita\b)/i.test(U)&&"NetFront")&&(N=[a]),"IE"==U&&(a=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(U+=" Mobile",j="Windows Phone "+(/\+$/.test(a)?a:a+".x"),M.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(U="IE Mobile",j="Windows Phone 8.x",M.unshift("desktop mode"),k||(k=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=U&&"Trident"==N&&(a=/\brv:([\d.]+)/.exec(e))&&(U&&M.push("identifying as "+U+(k?" "+k:"")),U="IE",k=a[1]),L){if(l="global",f=null!=(h=n)?typeof h[l]:"number",/^(?:boolean|number|string|undefined)$/.test(f)||"object"==f&&!h[l])b(a=n.runtime)==g?(U="Adobe AIR",j=a.flash.system.Capabilities.os):b(a=n.phantom)==D?(U="PhantomJS",k=(a=a.version||null)&&a.major+"."+a.minor+"."+a.patch):"number"==typeof P.documentMode&&(a=/\bTrident\/(\d+)/i.exec(e))?(k=[k,P.documentMode],(a=+a[1]+4)!=k[1]&&(M.push("IE "+k[1]+" mode"),N&&(N[1]=""),k[1]=a),k="IE"==U?String(k[1].toFixed(1)):k[0]):"number"==typeof P.documentMode&&/^(?:Chrome|Firefox)\b/.test(U)&&(M.push("masking as "+U+" "+k),U="IE",k="11.0",N=["Trident"],j="Windows");else if(I&&(R=(a=I.lang.System).getProperty("os.arch"),j=j||a.getProperty("os.name")+" "+a.getProperty("os.version")),A){try{k=n.require("ringo/engine").version.join("."),U="RingoJS"}catch(t){(a=n.system)&&a.global.system==n.system&&(U="Narwhal",j||(j=a[0].os||null))}U||(U="Rhino")}else"object"==typeof n.process&&!n.process.browser&&(a=n.process)&&("object"==typeof a.versions&&("string"==typeof a.versions.electron?(M.push("Node "+a.versions.node),U="Electron",k=a.versions.electron):"string"==typeof a.versions.nw&&(M.push("Chromium "+k,"Node "+a.versions.node),U="NW.js",k=a.versions.nw)),U||(U="Node.js",R=a.arch,j=a.platform,k=(k=/[\d.]+/.exec(a.version))?k[0]:null));j=j&&v(j)}if(k&&(a=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(k)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(L&&i.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&(O=/b/i.test(a)?"beta":"alpha",k=k.replace(RegExp(a+"\\+?$"),"")+("beta"==O?E:T)+(/\d+\+?/.exec(a)||"")),"Fennec"==U||"Firefox"==U&&/\b(?:Android|Firefox OS)\b/.test(j))U="Firefox Mobile";else if("Maxthon"==U&&k)k=k.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(V))"Xbox 360"==V&&(j=null),"Xbox 360"==V&&/\bIEMobile\b/.test(e)&&M.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(U)&&(!U||V||/Browser|Mobi/.test(U))||"Windows CE"!=j&&!/Mobi/i.test(e))if("IE"==U&&L)try{null===n.external&&M.unshift("platform preview")}catch(t){M.unshift("embedded")}else(/\bBlackBerry\b/.test(V)||/\bBB10\b/.test(e))&&(a=(RegExp(V.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||k)?(j=((a=[a,/BB10/.test(e)])[1]?(V=null,F="BlackBerry"):"Device Software")+" "+a[0],k=null):this!=y&&"Wii"!=V&&(L&&B||/Opera/.test(U)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==U&&/\bOS X (?:\d+\.){2,}/.test(j)||"IE"==U&&(j&&!/^Win/.test(j)&&k>5.5||/\bWindows XP\b/.test(j)&&k>8||8==k&&!/\bTrident\b/.test(e)))&&!c.test(a=t.call(y,e.replace(c,"")+";"))&&a.name&&(a="ing as "+a.name+((a=a.version)?" "+a:""),c.test(U)?(/\bIE\b/.test(a)&&"Mac OS"==j&&(j=null),a="identify"+a):(a="mask"+a,U=C?v(C.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(a)&&(j=null),L||(k=null)),N=["Presto"],M.push(a));else U+=" Mobile";(a=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1])&&(a=[parseFloat(a.replace(/\.(\d)$/,".0$1")),a],"Safari"==U&&"+"==a[1].slice(-1)?(U="WebKit Nightly",O="alpha",k=a[1].slice(0,-1)):k!=a[1]&&k!=(a[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1])||(k=null),a[1]=(/\bChrome\/([\d.]+)/i.exec(e)||0)[1],537.36==a[0]&&537.36==a[2]&&parseFloat(a[1])>=28&&"WebKit"==N&&(N=["Blink"]),L&&(p||a[1])?(N&&(N[1]="like Chrome"),a=a[1]||((a=a[0])<530?1:a<532?2:a<532.05?3:a<533?4:a<534.03?5:a<534.07?6:a<534.1?7:a<534.13?8:a<534.16?9:a<534.24?10:a<534.3?11:a<535.01?12:a<535.02?"13+":a<535.07?15:a<535.11?16:a<535.19?17:a<536.05?18:a<536.1?19:a<537.01?20:a<537.11?"21+":a<537.13?23:a<537.18?24:a<537.24?25:a<537.36?26:"Blink"!=N?"27":"28")):(N&&(N[1]="like Safari"),a=(a=a[0])<400?1:a<500?2:a<526?3:a<533?4:a<534?"4+":a<535?5:a<537?6:a<538?7:a<601?8:"8"),N&&(N[1]+=" "+(a+="number"==typeof a?".x":/[.+]/.test(a)?"":"+")),"Safari"==U&&(!k||parseInt(k)>45)&&(k=a)),"Opera"==U&&(a=/\bzbov|zvav$/.exec(j))?(U+=" ",M.unshift("desktop mode"),"zvav"==a?(U+="Mini",k=null):U+="Mobile",j=j.replace(RegExp(" *"+a+"$"),"")):"Safari"==U&&/\bChrome\b/.exec(N&&N[1])&&(M.unshift("desktop mode"),U="Chrome Mobile",k=null,/\bOS X\b/.test(j)?(F="Apple",j="iOS 4.3+"):j=null),k&&0==k.indexOf(a=/[\d.]+$/.exec(j))&&e.indexOf("/"+a+"-")>-1&&(j=S(j.replace(a,""))),N&&!/\b(?:Avant|Nook)\b/.test(U)&&(/Browser|Lunascape|Maxthon/.test(U)||"Safari"!=U&&/^iOS/.test(j)&&/\bSafari\b/.test(N[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(U)&&N[1])&&(a=N[N.length-1])&&M.push(a),M.length&&(M=["("+M.join("; ")+")"]),F&&V&&V.indexOf(F)<0&&M.push("on "+F),V&&M.push((/^on /.test(M[M.length-1])?"":"on ")+V),j&&(a=/ ([\d.+]+)$/.exec(j),u=a&&"/"==j.charAt(j.length-a[0].length-1),j={architecture:32,family:a&&!u?j.replace(a[0],""):j,version:a?a[1]:null,toString:function(){var t=this.version;return this.family+(t&&!u?" "+t:"")+(64==this.architecture?" 64-bit":"")}}),(a=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(R))&&!/\bi686\b/i.test(R)?(j&&(j.architecture=64,j.family=j.family.replace(RegExp(" *"+a),"")),U&&(/\bWOW64\b/i.test(e)||L&&/\w(?:86|32)$/.test(i.cpuClass||i.platform)&&!/\bWin64; x64\b/i.test(e))&&M.unshift("32-bit")):j&&/^OS X/.test(j.family)&&"Chrome"==U&&parseFloat(k)>=39&&(j.architecture=64),e||(e=null);var K={};K.description=e,K.layout=N&&N[0],K.manufacturer=F,K.name=U,K.prerelease=O,K.product=V,K.ua=e,K.version=U&&k,K.os=j||{architecture:null,family:null,version:null,toString:function(){return"null"}};var W=window.my||window.hbs||window.qg||window.wx||window.tt||window.loadRuntime&&window.loadRuntime();return W&&W.getSystemInfo&&(K.runtimeMask=!0,K.product="",K.manufacturer="",K.os.version="",W.getSystemInfo({success:function(t){K.product=t.model,K.manufacturer=t.brand||"";var e=/Android[^]+?([\d\.]+?)\s/i.exec(t.system+" ");e&&e.length>1?K.os.version=e[1].replace(/_/g,"."):K.os.version=t.system,K.runtimeMask=!1},fail:function(){K.runtimeMask=!1},complete:function(){K.runtimeMask=!1}})),K.parse=t,K.toString=function(){return this.description||""},K.version&&M.unshift(k),K.name&&M.unshift(U),j&&U&&(j!=String(j).split(" ")[0]||j!=U.split(" ")[0]&&!V)&&M.push(V?"("+j+")":"on "+j),M.length&&(K.description=M.join(" ")),K}();s.platform=_,void 0===(i=function(){return _}.call(e,n,e,t))||(t.exports=i)}).call(this)}).call(this,n(1)(t),n(0))},function(t,e,n){var r,i,o,s,a;r=n(13),i=n(2).utf8,o=n(14),s=n(2).bin,(a=function(t,e){t.constructor==String?t=e&&"binary"===e.encoding?s.stringToBytes(t):i.stringToBytes(t):o(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||(t=t.toString());for(var n=r.bytesToWords(t),u=8*t.length,h=1732584193,l=-271733879,c=-1732584194,f=271733878,p=0;p<n.length;p++)n[p]=16711935&(n[p]<<8|n[p]>>>24)|4278255360&(n[p]<<24|n[p]>>>8);n[u>>>5]|=128<<u%32,n[14+(u+64>>>9<<4)]=u;var d=a._ff,g=a._gg,v=a._hh,y=a._ii;for(p=0;p<n.length;p+=16){var b=h,m=l,w=c,S=f;h=d(h,l,c,f,n[p+0],7,-680876936),f=d(f,h,l,c,n[p+1],12,-389564586),c=d(c,f,h,l,n[p+2],17,606105819),l=d(l,c,f,h,n[p+3],22,-1044525330),h=d(h,l,c,f,n[p+4],7,-176418897),f=d(f,h,l,c,n[p+5],12,1200080426),c=d(c,f,h,l,n[p+6],17,-1473231341),l=d(l,c,f,h,n[p+7],22,-45705983),h=d(h,l,c,f,n[p+8],7,1770035416),f=d(f,h,l,c,n[p+9],12,-1958414417),c=d(c,f,h,l,n[p+10],17,-42063),l=d(l,c,f,h,n[p+11],22,-1990404162),h=d(h,l,c,f,n[p+12],7,1804603682),f=d(f,h,l,c,n[p+13],12,-40341101),c=d(c,f,h,l,n[p+14],17,-1502002290),h=g(h,l=d(l,c,f,h,n[p+15],22,1236535329),c,f,n[p+1],5,-165796510),f=g(f,h,l,c,n[p+6],9,-1069501632),c=g(c,f,h,l,n[p+11],14,643717713),l=g(l,c,f,h,n[p+0],20,-373897302),h=g(h,l,c,f,n[p+5],5,-701558691),f=g(f,h,l,c,n[p+10],9,38016083),c=g(c,f,h,l,n[p+15],14,-660478335),l=g(l,c,f,h,n[p+4],20,-405537848),h=g(h,l,c,f,n[p+9],5,568446438),f=g(f,h,l,c,n[p+14],9,-1019803690),c=g(c,f,h,l,n[p+3],14,-187363961),l=g(l,c,f,h,n[p+8],20,1163531501),h=g(h,l,c,f,n[p+13],5,-1444681467),f=g(f,h,l,c,n[p+2],9,-51403784),c=g(c,f,h,l,n[p+7],14,1735328473),h=v(h,l=g(l,c,f,h,n[p+12],20,-1926607734),c,f,n[p+5],4,-378558),f=v(f,h,l,c,n[p+8],11,-2022574463),c=v(c,f,h,l,n[p+11],16,1839030562),l=v(l,c,f,h,n[p+14],23,-35309556),h=v(h,l,c,f,n[p+1],4,-1530992060),f=v(f,h,l,c,n[p+4],11,1272893353),c=v(c,f,h,l,n[p+7],16,-155497632),l=v(l,c,f,h,n[p+10],23,-1094730640),h=v(h,l,c,f,n[p+13],4,681279174),f=v(f,h,l,c,n[p+0],11,-358537222),c=v(c,f,h,l,n[p+3],16,-722521979),l=v(l,c,f,h,n[p+6],23,76029189),h=v(h,l,c,f,n[p+9],4,-640364487),f=v(f,h,l,c,n[p+12],11,-421815835),c=v(c,f,h,l,n[p+15],16,530742520),h=y(h,l=v(l,c,f,h,n[p+2],23,-995338651),c,f,n[p+0],6,-198630844),f=y(f,h,l,c,n[p+7],10,1126891415),c=y(c,f,h,l,n[p+14],15,-1416354905),l=y(l,c,f,h,n[p+5],21,-57434055),h=y(h,l,c,f,n[p+12],6,1700485571),f=y(f,h,l,c,n[p+3],10,-1894986606),c=y(c,f,h,l,n[p+10],15,-1051523),l=y(l,c,f,h,n[p+1],21,-2054922799),h=y(h,l,c,f,n[p+8],6,1873313359),f=y(f,h,l,c,n[p+15],10,-30611744),c=y(c,f,h,l,n[p+6],15,-1560198380),l=y(l,c,f,h,n[p+13],21,1309151649),h=y(h,l,c,f,n[p+4],6,-145523070),f=y(f,h,l,c,n[p+11],10,-1120210379),c=y(c,f,h,l,n[p+2],15,718787259),l=y(l,c,f,h,n[p+9],21,-343485551),h=h+b>>>0,l=l+m>>>0,c=c+w>>>0,f=f+S>>>0}return r.endian([h,l,c,f])})._ff=function(t,e,n,r,i,o,s){var a=t+(e&n|~e&r)+(i>>>0)+s;return(a<<o|a>>>32-o)+e},a._gg=function(t,e,n,r,i,o,s){var a=t+(e&r|n&~r)+(i>>>0)+s;return(a<<o|a>>>32-o)+e},a._hh=function(t,e,n,r,i,o,s){var a=t+(e^n^r)+(i>>>0)+s;return(a<<o|a>>>32-o)+e},a._ii=function(t,e,n,r,i,o,s){var a=t+(n^(e|~r))+(i>>>0)+s;return(a<<o|a>>>32-o)+e},a._blocksize=16,a._digestsize=16,t.exports=function(t,e){if(null==t)throw new Error("Illegal argument "+t);var n=r.wordsToBytes(a(t,e));return e&&e.asBytes?n:e&&e.asString?s.bytesToString(n):r.bytesToHex(n)}},function(t,e){var n,r;n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&r.rotl(t,8)|4278255360&r.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=r.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var e=[],r=0;r<t.length;r+=3)for(var i=t[r]<<16|t[r+1]<<8|t[r+2],o=0;o<4;o++)8*r+6*o<=8*t.length?e.push(n.charAt(i>>>6*(3-o)&63)):e.push("=");return e.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var e=[],r=0,i=0;r<t.length;i=++r%4)0!=i&&e.push((n.indexOf(t.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|n.indexOf(t.charAt(r))>>>6-2*i);return e}},t.exports=r},function(t,e){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(n(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}(t)||!!t._isBuffer)}},function(t,e,n){var r=function(t){t.extends(this)};r.prototype={onStarted:function(t,e){if(e&&t&&0!=t.replace(/\s/g,"").length){var n=this._generatePostData({eventTag:"started",eventID:t,eventValue:e});this._upload(n)}else console.log("eventID 不能为空!")},onSuccess:function(t,e){if(e&&t&&0!=t.replace(/\s/g,"").length){var n=this._generatePostData({eventTag:"successed",eventID:t,eventValue:e});this._upload(n)}else console.log("eventID 不能为空!")},onCancelled:function(t,e){if(e&&t&&0!=t.replace(/\s/g,"").length){var n=this._generatePostData({eventTag:"cancelled",eventID:t,eventValue:e});this._upload(n)}else console.log("eventID 不能为空!")},onFailed:function(t,e,n){if(e&&t&&0!=t.replace(/\s/g,"").length){var r=this._generatePostData({eventTag:"failed",eventID:t,eventFailDesc:n,eventValue:e});this._upload(r)}else console.log("eventID 不能为空!")}},t.exports=r},function(t,e,n){var r=function(t){t.extends(this)};r.prototype={loginStart:function(t){this.data.channel=t&&t.channel||"";var e=this._generatePostData({eventTag:"started",eventID:"login"});this._upload(e)},loginSuccess:function(t){if(t&&t.userID){this.data.age=t.age||0,this.data.sex=t.sex||0;var e=t.channel||this.data.channel,n=this._getLocalStorage("onlineDuration"),r=this._getLocalStorage("_UID_"+this.data.appID)||"";r.length>0&&parseInt(n)>0&&(this.data.userID=r,this.logout()),this.data.channel=e,this.data.userID=t.userID,this._addLocalStorage("_UID_"+this.data.appID,this.data.userID),this._addLocalStorage("__SDK_CHANNEL_",this.data.channel);var i=this._generatePostData({onlineDuration:0,eventTag:"successed",eventID:"login"});this._upload(i),this._addLocalStorage("onlineDuration",0),this._setHeartBeat(!0)}else console.log("userID 不能为空!")},loginFailed:function(t){if(t){var e=t;"string"!=typeof t&&(this.data.channel=t.channel,e=t.reason);var n=this._generatePostData({exitFailDesc:e||"",eventTag:"failed",eventID:"login"});this._upload(n)}else console.log("loginFailed 参数不能为空!")},logout:function(){this.data.channel=this._getLocalStorage("__SDK_CHANNEL_")||"";var t=this._getLocalStorage("onlineDuration")||0,e=this._generatePostData({onlineDuration:t,exitTag:"successed",eventID:"logout"});this._upload(e),this.data.userID="",this._setHeartBeat(!1),this._addLocalStorage("onlineDuration",0),this._addLocalStorage("__SDK_CHANNEL_",""),this._addLocalStorage("_UID_"+this.data.appID,"")},setAccountType:function(t){var e=this._generatePostData({eventTag:"successed",eventID:"role",eventValue:{action:"update",accountType:t}});this._upload(e)},setAge:function(t){t&&(this.data.age=t)},setGender:function(t){0==t||1==t||2==t?t&&(this.data.aex=t):console.log("gender 为 int 类型：0 未知、1 男性、 2 女性")},createRole:function(t){var e={action:"createRole",roleID:t.roleID,userName:t.userName,race:t.race,class:t.class,gameServer:t.gameServer},n=this._generatePostData({eventTag:"successed",eventID:"role",eventValue:e});this._upload(n)},setLevel:function(t){var e=this._generatePostData({eventTag:"successed",eventID:"role",eventValue:{action:"update",level:t}});this._upload(e)}},t.exports=r},function(t,e,n){var r=function(t){t.extends(this)};r.prototype={onEvent:function(t){if(t&&t.eventName&&0!=t.eventName.replace(/\s/g,"").length){var e=this._generatePostData({eventTag:"successed",eventID:t.eventName});this._upload(e)}else console.log("eventName 不能为空或者包含空格!")},onEventStart:function(t){if(t&&t.eventName&&0!=t.eventName.replace(/\s/g,"").length){var e=this._generatePostData({eventTag:"started",eventID:t.eventName});this._upload(e)}else console.log("eventName 不能为空或者包含空格!")},onEventEnd:function(t){if(t&&t.eventName&&0!=t.eventName.replace(/\s/g,"").length){var e=this._generatePostData({eventTag:"successed",eventID:t.eventName});this._upload(e)}else console.log("eventName 不能为空或者包含空格!")}},t.exports=r},function(t,e,n){var r=function(t){t.extends(this)};r.prototype={payBegin:function(t){var e=this._generatePostData({expendTag:"started",eventID:"pay",eventValue:{orderID:t.orderID,accountID:t.accountID,partner:t.partner||"",currencyAmount:t.amount,currencyType:t.currencyType,virtualCurrencyAmount:t.virtualCurrencyAmount||"0",subjectID:t.iapID||"",paymentType:t.payType||"",gameServer:t.gameServer||"",level:t.level||"",mission:t.mission||""}});this._upload(e)},paySuccess:function(t){var e=this._generatePostData({expendTag:"successed",eventID:"pay",eventValue:{orderID:t.orderID,accountID:t.accountID,partner:t.partner||"",currencyAmount:t.amount,currencyType:t.currencyType,virtualCurrencyAmount:t.virtualCurrencyAmount||"0",subjectID:t.iapID||"",paymentType:t.payType||"",gameServer:t.gameServer||"",level:t.level||"",mission:t.mission||""}});this._upload(e)},payFailed:function(t){var e=this._generatePostData({expendTag:"failed",eventID:"pay",expendFailDesc:t.reason||"",eventValue:{orderID:t.orderID,accountID:t.accountID,partner:t.partner||"",currencyAmount:t.amount,currencyType:t.currencyType,virtualCurrencyAmount:t.virtualCurrencyAmount||"0",subjectID:t.iapID||"",paymentType:t.payType||"",gameServer:t.gameServer||"",level:t.level||"",mission:t.mission||""}});this._upload(e)},payCanceled:function(t){var e=this._generatePostData({expendTag:"cancelled",eventID:"pay",eventValue:{orderID:t.orderID,accountID:t.accountID,partner:t.partner||"",currencyAmount:t.amount,currencyType:t.currencyType,virtualCurrencyAmount:t.virtualCurrencyAmount||"0",subjectID:t.iapID||"",paymentType:t.payType||"",gameServer:t.gameServer||"",level:t.level||"",mission:t.mission||""}});this._upload(e)}},t.exports=r},function(t,e,n){var r=function(t){t.extends(this)};r.prototype={begin:function(t){if(t&&t.level){var e=this._generatePostData({eventTag:"started",eventID:"barrier",eventValue:{level:t.level}});this._upload(e)}else console.log("level 不能为空!")},complete:function(t){if(t&&t.level){var e=this._generatePostData({eventTag:"successed",eventID:"barrier",eventValue:{level:t.level}});this._upload(e)}else console.log("level 不能为空!")},failed:function(t,e){if(t&&t.level){var n=this._generatePostData({eventTag:"failed",eventID:"barrier",eventFailDesc:t.reason||e,eventValue:{level:t.level}});this._upload(n)}else console.log("level 不能为空!")}},t.exports=r},function(t,e,n){var r=function(t){t.extends(this)};r.prototype={begin:function(t){if(t&&t.taskID){var e=this._generatePostData({eventTag:"started",eventID:"task",eventValue:{taskID:t.taskID,taskType:t.type}});this._upload(e)}else console.log("taskID 不能为空!")},complete:function(t){if(t&&t.taskID){var e=this._generatePostData({eventTag:"successed",eventID:"task",eventValue:{taskID:t.taskID}});this._upload(e)}else console.log("taskID 不能为空!")},failed:function(t){if(t&&t.taskID){var e=this._generatePostData({eventTag:"failed",eventID:"task",eventFailDesc:t.reason||"",eventValue:{taskID:t.taskID}});this._upload(e)}else console.log("taskID 不能为空!")}},t.exports=r},function(t,e,n){var r=function(t){t.extends(this)};r.prototype={buy:function(t){var e={action:"buy",itemID:t.itemID,itemType:t.itemType,itemCount:t.itemCount,virtualCoin:t.virtualCoin,virtualType:t.virtualType,consumePoint:t.consumePoint},n=this._generatePostData({eventTag:"successed",eventID:"item",eventValue:e});this._upload(n)},get:function(t){var e={action:"get",itemID:t.itemID,itemType:t.itemType,itemCount:t.itemCount,reason:t.reason},n=this._generatePostData({eventTag:"successed",eventID:"item",eventValue:e});this._upload(n)},consume:function(t){var e={action:"consume",itemID:t.itemID,itemType:t.itemType,itemCount:t.itemCount,reason:t.reason},n=this._generatePostData({eventTag:"successed",eventID:"item",eventValue:e});this._upload(n)}},t.exports=r},function(t,e,n){var r=function(t){t.extends(this)};r.prototype={setVirtualNum:function(t){var e={action:"set",type:t.type,count:t.count},n=this._generatePostData({eventTag:"successed",eventID:"virtual",eventValue:e});this._upload(n)},get:function(t){var e={action:"get",type:t.type,count:t.count,reason:t.reason},n=this._generatePostData({eventTag:"successed",eventID:"virtual",eventValue:e});this._upload(n)},consume:function(t){var e={action:"consume",type:t.type,count:t.count,reason:t.reason},n=this._generatePostData({eventTag:"successed",eventID:"virtual",eventValue:e});this._upload(n)}},t.exports=r},function(t,e,n){var r=function(t){};r.prototype={GuideLine:1,MainLine:2,BranchLine:3,Daily:4,Activity:5,Other:100},t.exports=r},function(t,e,n){var r=function(t){t.extends(this)};r.prototype={begin:function(t){if(t&&t.adID){var e=this._generatePostData({eventTag:"started",eventID:"advertising",eventValue:{ID:t.adID}});this._upload(e)}else console.log("adID 不能为空!")},complete:function(t){if(t&&t.adID&&t.timeLong&&t.profit){var e=this._generatePostData({eventTag:"successed",eventID:"advertising",eventValue:{ID:t.adID,timeLong:t.timeLong,profit:t.profit}});this._upload(e)}else console.log("adID 不能为空!")},failed:function(t){if(t&&t.adID){var e=this._generatePostData({eventTag:"failed",eventID:"advertising",eventFailDesc:t.reason||"",eventValue:{ID:t.adID}});this._upload(e)}else console.log("adID 不能为空!")}},t.exports=r}]),t("default",r.exports)}),{})}}}));

System.register("chunks:///_virtual/cocosAnalytics.min.mjs_cjs=&original=.js",["./cocosAnalytics.min.js","./cjs-loader.mjs"],(function(t,s){var c,e;return{setters:[function(s){c=s.__cjsMetaURL;var e={};e.__cjsMetaURL=s.__cjsMetaURL,e.default=s.default,t(e)},function(t){e=t.default}],execute:function(){c||e.throwInvalidWrapper("./cocosAnalytics.min.js",s.meta.url),e.require(c)}}}));

System.register("chunks:///_virtual/colliderItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./playerData.ts","./uiManager.ts","./gameManager.ts","./constant.ts","./poolManager.ts"],(function(e){var i,t,n,o,r,l,s,a,c,d,h,u,p,g,C,_,m,P,f,y,E;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.createClass},function(e){l=e.cclegacy,s=e._decorator,a=e.Enum,c=e.Quat,d=e.BoxColliderComponent,h=e.CylinderColliderComponent,u=e.CapsuleColliderComponent,p=e.MeshColliderComponent,g=e.isValid,C=e.PhysicsSystem,_=e.Component},function(e){m=e.PlayerData},function(e){P=e.UIManager},function(e){f=e.GameManager},function(e){y=e.Constant},function(e){E=e.PoolManager}],execute:function(){var A,T,I,N,R,G;l._RF.push({},"a3c3eSoUrFKl5IFTQQGWnRd","colliderItem",void 0);var M=s.ccclass,S=s.property,b=a({HEART_BIG:1,WARP_GATE:2,NPC_BUSINESS_MAN:3,NPC_WISE_MAN:4});e("ColliderItem",(A=M("ColliderItem"),T=S({type:b,displayOrder:1}),A(((G=function(e){function i(){for(var i,t=arguments.length,r=new Array(t),l=0;l<t;l++)r[l]=arguments[l];return i=e.call.apply(e,[this].concat(r))||this,n(i,"colliderName",R,o(i)),i._curHeartBigQuat=new c,i._timer=null,i._colliderCom=null,i}t(i,e);var l=i.prototype;return l.onLoad=function(){this._colliderCom=this.node.getComponent(d)||this.node.getComponent(h)||this.node.getComponent(u)||this.node.getComponent(p),this._colliderCom||console.error("this node does not have collider component")},l.onEnable=function(){this._colliderCom.isTrigger?this._colliderCom.on("onTriggerEnter",this._onTriggerEnterCb,this):this._colliderCom.on("onCollisionEnter",this._onCollisionEnterCb,this)},l.onDisable=function(){this._colliderCom.isTrigger?this._colliderCom.off("onTriggerEnter",this._onTriggerEnterCb,this):this._colliderCom.off("onCollisionEnter",this._onCollisionEnterCb,this)},l.start=function(){},l.init=function(){},l._onTriggerEnterCb=function(e){this._hitTarget(e.otherCollider,e.selfCollider)},l._onCollisionEnterCb=function(e){this._hitTarget(e.otherCollider,e.selfCollider)},l._hitTarget=function(e,i){var t=this;if(!f.isGameOver&&f.isGameStart&&e.getGroup()==y.PHY_GROUP.PLAYER&&g(f.ndPlayer))switch(this.colliderName){case b.HEART_BIG:f.scriptPlayer.addBlood(300),E.instance.putNode(this.node),f.checkTriggerAll();break;case b.WARP_GATE:f.scriptPlayer.playAction({action:y.PLAYER_ACTION.STOP_MOVE}),f.scriptPlayer.scriptCharacterRigid.stopMove(),f.ndPlayer.active=!1,C.PHYSICS_PHYSX?this.node.destroy():E.instance.putNode(this.node),f.isWin=!0;break;case b.NPC_BUSINESS_MAN:f.isGamePause=!0,f.scriptPlayer.scriptCharacterRigid.stopMove(),f.scriptPlayer.scriptPlayerModel.playAni(y.PLAYER_ANI_TYPE.IDLE,!0),m.instance.isPlayerSkillAllUnlock?(P.instance.showTips("所有技能均已解锁"),E.instance.putNode(this.node),f.isGamePause=!1):(P.instance.hideDialog("fight/fightPanel"),P.instance.showDialog("shop/shopPanel",[function(){f.isGamePause=!1,E.instance.putNode(t.node)}],(function(){}),y.PRIORITY.DIALOG)),f.checkTriggerAll();break;case b.NPC_WISE_MAN:f.isGamePause=!0,f.scriptPlayer.scriptCharacterRigid.stopMove(),f.scriptPlayer.scriptPlayerModel.playAni(y.PLAYER_ANI_TYPE.IDLE,!0),m.instance.isPlayerSkillAllUnlock?(P.instance.showTips("所有技能均已解锁"),E.instance.putNode(this.node),f.isGamePause=!1):(P.instance.hideDialog("fight/fightPanel"),P.instance.showDialog("skill/skillPanel",[function(){E.instance.putNode(t.node),f.isGamePause=!1}],(function(){}),y.PRIORITY.DIALOG)),f.checkTriggerAll()}},l.update=function(e){!f.isGameOver&&f.ndPlayer&&this.node.parent&&this.colliderName===b.HEART_BIG&&(c.fromEuler(this._curHeartBigQuat,0,120*e,0),this.node.rotate(this._curHeartBigQuat))},r(i,[{key:"timer",set:function(e){this._timer&&(clearTimeout(this._timer),this._timer=null)}}]),i}(_)).COLLIDER_NAME=b,R=i((N=G).prototype,"colliderName",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.HEART_BIG}}),I=N))||I));l._RF.pop()}}}));

System.register("chunks:///_virtual/constant.ts",["cc","./LanguageData.ts"],(function(E){var _,A;return{setters:[function(E){_=E.cclegacy},function(E){A=E._language}],execute:function(){_._RF.push({},"b08f08kiOlEA7e6qUWa7AnA","constant",void 0);var R=E("Constant",function(){function E(){}return E.playerSkillName=function(){return this.PLAYER_SKILL_CSV_NAME[A]},E}());R.GAME_NAME="archero",R.GAME_VERSION="1.0.1",R.GAME_FRAME=60,R.GAME_INIT_FRAME=60,R.GAME_NAME_CH="幽灵射手",R.LOCAL_CACHE={PLAYER:"player",SETTINGS:"settings",DATA_VERSION:"dataVersion",ACCOUNT:"account",HISTORY:"history",BAG:"bag"},R.SETTINGS_KEY={FIGHT_TIMES:"fightTimes"},R.PLAYER_ANI_TYPE={IDLE:"idle",RUN:"run",ATTACK:"attack",DIE:"die",REVIVE:"revive"},R.MONSTER_ANI_TYPE={IDLE:"idle",RUN:"run",ATTACK:"attack",DIE:"die",HIT:"hit",ATTACK_1:"attack1",ATTACK_2:"attack2"},R.PLAYER_ACTION={MOVE:1,STOP_MOVE:2},R.MONSTER_ACTION={MOVE:1,STOP_MOVE:2},R.PHY_GROUP={DEFAULT:1,PLAYER:2,COLLIDER_ITEM:4,MONSTER:8,REWARD:16,MONSTER_SKILL_COLLIDER:32,OBSTACLE:64},R.BLOOD_BAR={PLAYER:1,MONSTER:2,BOSS:3},R.EVENT_TYPE={ATTACK_PLAYER:"attackPlayer",CHANGE_SKIN:"changeSkin",ON_GAME_INIT:"onInitGame",ON_GAME_OVER:"onGameOver",ON_GAME_PAUSE:"onGamePause",ON_REVIVE:"onRevive",REFRESH_DIAMOND:"refreshDiamond",REFRESH_GOLD:"refreshGold",REFRESH_LEVEL:"refreshLevel",REFRESH_BOSS_BLOOD:"refreshBossBlood",RECYCLE_ALL:"recycleAll",REMOVE_NODE_GAME_START:"removeNodeGameStart",HIDE_LOADING_PANEL:"hideLoadingPanel",HIDE_BOSS_BLOOD_BAR:"hideBossBloodBar",HIDE_SKILL_ICON_SELECTED:"hideSkillIconSelected",HIDE_DEBUG_LEVEL_SELECTED:"hideDebugLevelSelected",SHOW_LOADING_PANEL:"showLoadingPanel",SHOW_BOSS_BLOOD_BAR:"showBossBloodBar",SHOW_WARP_GATE:"showWarpGate",INHALE_REWARD:"inhaleReward",PARSE_PLAYER_SKILL:"parsePlayerSkill",MONSTER_MOVE:"monsterMove"},R.FIGHT_TIP={ADD_BLOOD:0,REDUCE_BLOOD:1,CRITICAL_HIT:2},R.PRIORITY={ZERO:0,BLOOD:5,BLOOD_TIP:6,BLOOD_CRITICAL_TIP:7,NORMAL:10,DIALOG:100,REWARD:200,WAITING:300,TIPS:400},R.BLOOD_TIP_DIRECTION={MID_UP:0,LEFT_UP:1,RIGHT_UP:2},R.OPEN_REWARD_TYPE={AD:0,SHARE:1,NULL:2},R.PLAYER_SKILL={ARROW_DOUBLE:"10101",ARROW_CONTINUOUS:"10201",ARROW_UMBRELLA:"10301",ARROW_REVERSE:"10401",ARROW_SIDE:"10501",ARROW_PENETRATE:"10601",RAISE_ATTACK_01:"20101",RAISE_ATTACK_02:"20102",RAISE_DODGE:"20201",RAISE_CRITICAL_HIT_DAMAGE_01:"20301",RAISE_CRITICAL_HIT_DAMAGE_02:"20302",RAISE_ATTACK_SPEED_01:"20401",RAISE_ATTACK_SPEED_02:"20402",RAISE_HP_LIMIT:"20501",RECOVERY:"20601",MOVE_SPEED:"20701",ARROW_ICE:"30101",ARROW_FIRE:"30201",ARROW_LIGHTNING:"40101",BLOODTHIRSTY:"40201",ARROW_LAUNCH:"40301"},R.GAME_LEVEL_TYPE={DARK_CASTLE:1,HOT_HELL:2},R.BASE={PLAYER_01:"1001",AULA:"2001",BOOM_DRAGON:"2002",MAGICIAN:"2003",HELL_FIRE:"2004",BOSS_01:"3001",BLOOD_BAG:"4001",SHOP_NPC:"5001",SKILL_NPC:"6001"},R.BASE_TYPE={PLAYER:"player",MONSTER:"monster",BOSS:"boss",HEART:"heart",NPC:"npc",OBSTACLE:"obstacle"},R.MAX_SKILL_ICON_NUM=12,R.PLAYER_SKILL_USE={FORM_CHANGE:"1",VALUE:"2",BUFF:"3",TRIGGER:"4"},R.MONSTER_SKILL={ENERGY_BALL:"101",FIRE_BALL:"102",JET_FIRES:"103",DISPERSION:"104",TORNADO:"105",FIRE_BALL_BIG:"106",DISPERSION_SURROUND:"107",LASER:"108"},R.MONSTER_MOVE_PATTERN={RANDOM:1,FORWARD_PLAYER:2,NO_MOVE:3},R.MONSTER_MOVE_MODE={WALK:1,FLY:2},R.SOUND={CLICK:"click",HOME_PANEL_CLICK:"homePanelClick",AULA_DIE:"aulaDie",BOOM_DRAGON_DIE:"boomDragonDie",DRAGON_DIE:"dragonDie",HELL_FIRE_DIE:"hellFireDie",MAGICIAN_DIE:"magicianDie",PLAYER_01_DIE:"player01Die",FOOT_STEP:["footStep1","footStep2"],GOLD_DROP:"goldDrop",HIT_PLAYER:"hitPlayer",HIT_MONSTER:"hitMonster",SELL:"sell",SHOW_WRAP_GATE:"showWarpGate",ENERGY_BALL:"energyBall",TORNADO:"tornado",JET_FIRE:"jetFire",LASER:"laser",FIRE_BALL:"fireBall",FIRE_BALL_BIG:"fireBallBig",REVIVE:"revive",LOOSE:"loose",GET_SKILL:"getSkill",ICE:"ice",RECOVERY:"recovery",LIGHTNING:"lightning",FIRE:"fire",GOLD_COLLECT:"goldCollect"},R.LOGIN_TIME=0,R.RESOURCES_FILE_NAME={AUDIO:"audio",DATA:"datas",PREFAB:"prefab",TEXTURE:"texture"},R.AUDIO_FILE_NAME={MUSIC:"music",SOUND:"sound"},R.PREFAB_FILE_NAME={UI:"ui",EFFECT:"effect",MODEL:"model"},R.PLAYER_SKILL_CSV_NAME={zh:"playerSkill",en:"playerSkillEn"},R.I18_LANGUAGE={ENGLISH:"en",CHINESE:"zh"},_._RF.pop()}}}));

System.register("chunks:///_virtual/csvManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n;return{setters:[function(e){t=e.createClass},function(e){r=e.cclegacy,n=e._decorator}],execute:function(){var i,s;r._RF.push({},"d7554BuqnJLAKibwVUWte5P","csvManager",void 0);var u=n.ccclass,a=(n.property,[",",";","\t","|","^"]),o=["\r\n","\r","\n"],l=function(e,t,r,n){return r instanceof Array?"number"===r[t]?Number(n[t]):"boolean"===r[t]?"true"===n[t]||"t"===n[t]||"1"===n[t]:n[t]:isNaN(Number(e))?"false"==e||"true"==e||"t"==e||"f"==e?"true"===n[t]||"t"===n[t]||"1"===n[t]:n[t]:Number(n[t])},c={STANDARD_DECODE_OPTS:{skip:0,limit:!1,header:!1,cast:!1,comment:""},STANDARD_ENCODE_OPTS:{delimiter:a[0],newline:o[0],skip:0,limit:!1,header:!1},quoteMark:'"',doubleQuoteMark:'""',quoteRegex:/"/g,assign:function(){for(var e=Array.prototype.slice.call(arguments),t=e[0],r=e.slice(1),n=0,i=r.length;n<i;n++)for(var s in r[n])t[s]=r[n][s];return t},map:function(e,t){for(var r=[],n=0,i=e.length;n<i;n++)r[n]=t(e[n],n);return r},getType:function(e){return Object.prototype.toString.call(e).slice(8,-1)},getLimit:function(e,t){return!1===e?t:e},buildObjectConstructor:function(e,t,r){return function(n){var i=new Object,s=function(e,t){return i[e]=t};return r?e.forEach((function(e,i){s(e,l(t[i],i,r,n))})):e.forEach((function(e,r){s(e,l(t[r],r,null,n))})),i}},buildArrayConstructor:function(e,t,r){return function(n){var i=new Array(t.length),s=function(e,t){return i[e]=t};return r?e.forEach((function(e,i){s(e,l(t[i],i,r,n))})):e.forEach((function(e,r){s(e,l(t[r],r,null,n))})),i}},frequency:function(e,t,r){void 0===r&&(r=!1);for(var n=0,i=0,s=this.getLimit(r,e.length);i<s&&-1!==(i=e.indexOf(t,i));)i+=1,n++;return n},mostFrequent:function(e,t,r){for(var n,i=t.length-1;i>=0;i--)this.frequency(e,t[i],r)>0&&(n=t[i]);return n||t[0]},unsafeParse:function(e,t,r){var n,i,s=e.split(t.newline);function u(e){var r=e.shift();if(r.indexOf('"')>=0){for(var n=0,i=0,s=0;e.length>0&&(-1!==(n=r.indexOf('"',i))||s%2!=0);)-1!==n?(i=n+1,s++):r=r+t.newline+e.shift();var u,a=[],o=0,l=0,c=0,h=r.length;for(var f in r)if(r.hasOwnProperty(f)){var d=parseInt(f),v=r[f];0===d&&'"'===v&&(o++,l=1),'"'===v&&(o++,r[d-1]===t.delimiter&&l===d&&l++),'"'===v&&o%2==0&&(r[d+1]!==t.delimiter&&d+1!==h||(c=d,u=r.substring(l,c),a.push(u),c=l=c+2)),v===t.delimiter&&o%2==0&&((c=d)>l?(u=r.substring(l,c),a.push(u),c=l=c+1):c===l&&(a.push(""),c=l=c+1))}return(c=h)>=l&&(u=r.substring(l,c),a.push(u)),a}return r.split(t.delimiter)}for(t.skip>0&&s.splice(t.skip),t.header?(!0===t.header?(t.comment=u(s),t.cast=u(s),n=u(s)):"Array"===this.getType(t.header)&&(n=t.header),i=this.buildObjectConstructor(n,s[0].split(t.delimiter),t.cast)):i=this.buildArrayConstructor(n,s[0].split(t.delimiter),t.cast);s.length>0;){var a=u(s);a.length>1&&r(i(a),n[0])}return!0},safeParse:function(e,t,r){t.delimiter;var n=t.newline,i=e.split(n);return t.skip>0&&i.splice(t.skip),!0},encodeCells:function(e,t,r){for(var n=e.slice(0),i=0,s=n.length;i<s;i++)-1!==n[i].indexOf(this.quoteMark)&&(n[i]=n[i].replace(this.quoteRegex,this.doubleQuoteMark)),-1===n[i].indexOf(t)&&-1===n[i].indexOf(r)||(n[i]=this.quoteMark+n[i]+this.quoteMark);return n.join(t)},encodeArrays:function(e,t,r){var n=t.delimiter,i=t.newline;t.header&&"Array"===this.getType(t.header)&&r(this.encodeCells(t.header,n,i));for(var s=0,u=this.getLimit(t.limit,e.length);s<u;s++)r(this.encodeCells(e[s],n,i));return!0},encodeObjects:function(e,t,r){var n,i,s=t.delimiter,u=t.newline;for(var a in n=[],i=[],e[0])n.push(a),i.push(e[0][a]);!0===t.header?r(this.encodeCells(n,s,u)):"Array"===this.getType(t.header)&&r(this.encodeCells(t.header,s,u)),r(this.encodeCells(i,s));for(var o=1,l=this.getLimit(t.limit,e.length);o<l;o++){i=[];for(var c=0,h=n.length;c<h;c++)i.push(e[o][n[c]]);r(this.encodeCells(i,s,u))}return!0},parse:function(e,t,r){var n;if("Function"===this.getType(t)?(r=t,t={}):"Function"!==this.getType(r)?r=(n=[]).push.bind(n):n=[],t=this.assign({},this.STANDARD_DECODE_OPTS,t),this.opts=t,!t.delimiter||!t.newline){var i=Math.min(48,Math.floor(e.length/20),e.length);t.delimiter=t.delimiter||this.mostFrequent(e,a,i),t.newline=t.newline||this.mostFrequent(e,o,i)}return this.unsafeParse(e,t,r)&&(!(n.length>0)||n)},encode:function(e,t,r){var n;return"Function"===this.getType(t)?(r=t,t={}):"Function"!==this.getType(r)&&(r=(n=[]).push.bind(n)),(t=this.assign({},this.STANDARD_ENCODE_OPTS,t)).skip>0&&(e=e.slice(t.skip)),("Array"===this.getType(e[0])?this.encodeArrays:this.encodeObjects)(e,t,r)&&(!(n.length>0)||n.join(t.newline))}};e("CSVManager",u("CSVManager")(((s=function(){function e(){this._csvTables={},this._csvTableForArr={},this._tableCast={},this._tableComment={}}var r=e.prototype;return r.addTable=function(e,t,r){if(!this._csvTables[e]||r){var n={},i=[];c.parse(t,{header:!0},(function(e,t){n[e[t]]=e,i.push(e)})),this._tableCast[e]=c.opts.cast,this._tableComment[e]=c.opts.comment,this._csvTables[e]=n,this._csvTableForArr[e]=i}},r.getTableArr=function(e){return this._csvTableForArr[e]},r.getTable=function(e){return this._csvTables[e]},r.queryOne=function(e,t,r){var n=this.getTable(e);if(!n)return null;if(!t)return n[r];for(var i in n)if(n.hasOwnProperty(i)&&n[i][t]===r)return n[i]},r.queryByID=function(e,t){return this.queryOne(e,null,t)},r.queryAll=function(e,t,r){var n=this.getTable(e);if(!n||!t)return null;var i={};for(var s in n)n.hasOwnProperty(s)&&n[s][t]===r&&(i[s]=n[s]);return i},r.queryIn=function(e,t,r){var n=this.getTable(e);if(!n||!t)return null;for(var i={},s=Object.keys(n),u=s.length,a=0;a<u;a++){var o=n[s[a]];r.indexOf(o[t])>-1&&(i[s[a]]=o)}return i},r.queryByCondition=function(e,t){if(t.constructor!==Object)return null;var r=this.getTable(e);if(!r)return null;for(var n={},i=Object.keys(r),s=i.length,u=Object.keys(t),a=u.length,o=0;o<s;o++){for(var l=r[i[o]],c=!0,h=0;h<a;h++){var f=u[h];c=c&&t[f]===l[f]&&!n[i[o]]}c&&(n[i[o]]=l)}return n},r.queryOneByCondition=function(e,t){if(t.constructor!==Object)return null;var r=this.getTable(e);if(!r)return null;var n=Object.keys(t),i=n.length;for(var s in r){for(var u=r[s],a=!0,o=0;o<i;o++){var l=n[o];a=a&&t[l]===u[l]}if(a)return u}return null},t(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}())._instance=void 0,i=s))||i);r._RF.pop()}}}));

System.register("chunks:///_virtual/debugLevelItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constant.ts","./uiManager.ts","./playerData.ts","./clientEvent.ts"],(function(e){var t,n,i,l,o,r,c,s,a,u,E,f,_,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,c=e.LabelComponent,s=e.SpriteComponent,a=e.Color,u=e.Component},function(e){E=e.Constant},function(e){f=e.UIManager},function(e){_=e.PlayerData},function(e){h=e.ClientEvent}],execute:function(){var p,d,v,L,b,D,g;o._RF.push({},"1cca3We2mBMHb1+U22HEfn6","debugLevelItem",void 0);var m=r.ccclass,S=r.property;e("DebugLevelItem",(p=m("DebugLevelItem"),d=S(c),v=S(s),p((D=t((b=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,i(t,"lbLevelTxt",D,l(t)),i(t,"spCom",g,l(t)),t._colorSelected=(new a).fromHEX("#3CE649"),t._colorUnSelected=(new a).fromHEX("#ffffff"),t._isSelected=!1,t._level=0,t._itemInfo=null,t}n(t,e);var o=t.prototype;return o.onEnable=function(){h.on(E.EVENT_TYPE.HIDE_DEBUG_LEVEL_SELECTED,this._hideDebugLevelSelected,this)},o.onDisable=function(){h.off(E.EVENT_TYPE.HIDE_DEBUG_LEVEL_SELECTED,this._hideDebugLevelSelected,this)},o.start=function(){},o.init=function(e){this._level=e.ID,this.lbLevelTxt.string=""+this._level,this._itemInfo=e,this._refreshState()},o._refreshState=function(){this._isSelected=_.instance.playerInfo.level===this._itemInfo.ID,this._isSelected?this.spCom.color=this._colorSelected:this.spCom.color=this._colorUnSelected},o.onBtnClick=function(){h.dispatchEvent(E.EVENT_TYPE.HIDE_DEBUG_LEVEL_SELECTED),this._isSelected=!0,this._refreshState(),h.dispatchEvent(E.EVENT_TYPE.RECYCLE_ALL),_.instance.playerInfo.level=Number(this._level),_.instance.savePlayerInfoToLocalCache(),h.dispatchEvent(E.EVENT_TYPE.ON_GAME_INIT,(function(){f.instance.hideDialog("debug/debugPanel"),f.instance.hideDialog("fight/fightPanel")}))},o._hideDebugLevelSelected=function(){this._isSelected=!1,this._refreshState()},t}(u)).prototype,"lbLevelTxt",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(b.prototype,"spCom",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=b))||L));o._RF.pop()}}}));

System.register("chunks:///_virtual/debugPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameManager.ts","./debugSkillItem.ts","./constant.ts","./debugLevelItem.ts","./playerData.ts","./uiManager.ts","./localConfig.ts","./storageManager.ts","./clientEvent.ts","./effectManager.ts","./audioManager.ts","./poolManager.ts","./LanguageData.ts"],(function(e){var n,t,i,a,l,o,r,c,s,u,f,g,p,d,h,S,v,b,y,m,P,L,C,k,E;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){l=e.cclegacy,o=e._decorator,r=e.Node,c=e.Prefab,s=e.game,u=e.PhysicsSystem,f=e.profiler,g=e.Component},function(e){p=e.GameManager},function(e){d=e.DebugSkillItem},function(e){h=e.Constant},function(e){S=e.DebugLevelItem},function(e){v=e.PlayerData},function(e){b=e.UIManager},function(e){y=e.LocalConfig},function(e){m=e.StorageManager},function(e){P=e.ClientEvent},function(e){L=e.EffectManager},function(e){C=e.AudioManager},function(e){k=e.PoolManager},function(e){E=e.updateSceneRenderers}],execute:function(){var I,_,w,D,T,R,A,M,V,G,N;l._RF.push({},"2be6523odhOBpHGGn8NMbw1","debugPanel",void 0);var Y=o.ccclass,z=o.property;e("DebugPanel",(I=Y("DebugPanel"),_=z(r),w=z(r),D=z(c),T=z(c),I((M=n((A=function(e){function n(){for(var n,t=arguments.length,l=new Array(t),o=0;o<t;o++)l[o]=arguments[o];return n=e.call.apply(e,[this].concat(l))||this,i(n,"ndContentLevel",M,a(n)),i(n,"ndContentPlayerSkill",V,a(n)),i(n,"pbLevelItem",G,a(n)),i(n,"pbSkillItem",N,a(n)),n}t(n,e);var l=n.prototype;return l.show=function(){E(),p.isGamePause=!0,this._initLevelView(),this._initSkillView()},l._initLevelView=function(){var e=this,n=y.instance.getTableArr("checkpoint");this.ndContentLevel.children.forEach((function(e){e.active=!1})),n.forEach((function(n,t,i){var a=null;(a=t<e.ndContentLevel.children.length?e.ndContentLevel.children[t]:k.instance.getNode(e.pbLevelItem,e.ndContentLevel)).active=!0,a.getComponent(S).init(n)}))},l._initSkillView=function(){var e=this,n=y.instance.getTableArr(h.playerSkillName());n=n.concat().filter((function(e){return e.ID!==h.PLAYER_SKILL.RECOVERY})),this.ndContentPlayerSkill.children.forEach((function(e){e.active=!1})),n.forEach((function(n,t,i){var a=null;(a=t<e.ndContentPlayerSkill.children.length?e.ndContentPlayerSkill.children[t]:k.instance.getNode(e.pbSkillItem,e.ndContentPlayerSkill)).active=!0,a.getComponent(d).init(n)}))},l.onBtnCloseClick=function(){b.instance.hideDialog("debug/debugPanel"),p.isGamePause=!1},l.onBtnClearStorageClick=function(){v.instance.playerInfo={},v.instance.history={},v.instance.settings={},v.instance.saveAll(),m.instance.jsonData={},m.instance.save(),b.instance.showTips("游戏缓存已清除，请完全关闭游戏并重新打开！")},l.onToggleFrame30Click=function(){b.instance.showTips("游戏已经切换为30帧"),m.instance.setGlobalData("frameRate",30),s.frameRate=30,u.instance.fixedTimeStep=1/30,this._showState()},l.onToggleFrame60Click=function(){b.instance.showTips("游戏已经切换为60帧"),m.instance.setGlobalData("frameRate",60),s.frameRate=60,u.instance.fixedTimeStep=1/60,this._showState()},l.onBtnClearPlayerSkillClick=function(){v.instance.playerInfo.arrSkill=[],v.instance.savePlayerInfoToLocalCache(),P.dispatchEvent(h.EVENT_TYPE.PARSE_PLAYER_SKILL),this._initSkillView()},l.onBtnSelectAllPlayerSkillClick=function(){C.instance.playSound(h.SOUND.GET_SKILL);var e=y.instance.getTableArr(h.playerSkillName()),n=[];e.forEach((function(e){e.ID!==h.PLAYER_SKILL.RECOVERY&&n.push(e.ID)})),v.instance.playerInfo.arrSkill=n,v.instance.savePlayerInfoToLocalCache(),P.dispatchEvent(h.EVENT_TYPE.PARSE_PLAYER_SKILL),this._initSkillView();var t={effectPath:"levelUp/levelUp",ndTarget:p.ndPlayer,isPlayAnimation:!1,speed:p.gameSpeed,isRecycle:!0};L.instance.loadAndPlayEffect(t)},l._showState=function(){var e;null!=(e=m.instance.getGlobalData("debug"))&&e?f.showStats():f.hideStats()},n}(g)).prototype,"ndContentLevel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=n(A.prototype,"ndContentPlayerSkill",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=n(A.prototype,"pbLevelItem",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=n(A.prototype,"pbSkillItem",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=A))||R));l._RF.pop()}}}));

System.register("chunks:///_virtual/debugSkillItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./playerData.ts","./constant.ts","./gameManager.ts","./effectManager.ts","./audioManager.ts"],(function(e){var t,n,i,l,o,a,r,c,s,f,u,p,d,m,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,r=e.LabelComponent,c=e.SpriteComponent,s=e.Color,f=e.Component},function(e){u=e.PlayerData},function(e){p=e.Constant},function(e){d=e.GameManager},function(e){m=e.EffectManager},function(e){h=e.AudioManager}],execute:function(){var S,g,_,y,b,v,I;o._RF.push({},"46cbc5Ll/lDvotI3m9eD0Of","debugSkillItem",void 0);var C=a.ccclass,D=a.property;e("DebugSkillItem",(S=C("DebugSkillItem"),g=D(r),_=D(c),S((v=t((b=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"lbLevelTxt",v,l(t)),i(t,"spCom",I,l(t)),t._colorSelected=(new s).fromHEX("#3CE649"),t._colorUnSelected=(new s).fromHEX("#ffffff"),t._isSelected=!1,t._itemInfo=null,t}n(t,e);var o=t.prototype;return o.init=function(e){this.lbLevelTxt.string=e.name,this._itemInfo=e,this._changeState()},o._changeState=function(){this._isSelected=u.instance.playerInfo.arrSkill.includes(this._itemInfo.ID),this._isSelected?this.spCom.color=this._colorSelected:this.spCom.color=this._colorUnSelected},o.onBtnClick=function(){if(h.instance.playSound(p.SOUND.GET_SKILL),this._isSelected)u.instance.reducePlayerSkill(this._itemInfo);else{u.instance.addPlayerSkill(this._itemInfo);var e={effectPath:"levelUp/levelUp",ndTarget:d.ndPlayer,isPlayAnimation:!1,speed:d.gameSpeed,isRecycle:!0};m.instance.loadAndPlayEffect(e)}this._changeState()},t}(f)).prototype,"lbLevelTxt",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(b.prototype,"spCom",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=b))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/dispersion.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts","./constant.ts","./effectManager.ts","./poolManager.ts","./util.ts","./gameManager.ts"],(function(e){var t,n,s,o,i,r,a,l,c,u,h,f,d;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){s=e.cclegacy,o=e._decorator,i=e.Node,r=e.Vec3,a=e.Component},function(e){l=e.AudioManager},function(e){c=e.Constant},function(e){u=e.EffectManager},function(e){h=e.PoolManager},function(e){f=e.Util},function(e){d=e.GameManager}],execute:function(){var p;s._RF.push({},"bac69sUZyxD3pVsY06Z2vf1","dispersion",void 0);var _=o.ccclass;o.property,e("Dispersion",_("Dispersion")(p=function(e){function s(){for(var t,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(t=e.call.apply(e,[this].concat(s))||this)._baseInfo=null,t._skillInfo=null,t._curSpeed=0,t._targetSpeed=0,t._oriPos=null,t._oriEulerAngles=null,t._offsetPos=new r,t._curWorPos=new r,t._disappearRange=20,t._targetWorPos=new r,t}t(s,e);var o=s.prototype;return o.init=function(e,t){this.skillInfo=e,this.baseInfo=t,this.node.active=!0,this._oriPos||(this._oriPos=this.node.position.clone()),this._oriEulerAngles||(this._oriEulerAngles=this.node.eulerAngles.clone()),this.node.setPosition(this._oriPos),this.node.eulerAngles.set(this._oriEulerAngles),this._targetSpeed=e.flySpeed,this._curSpeed=.5*e.flySpeed;var n={ndEffect:this.node};u.instance.playParticle(n),l.instance.playSound(c.SOUND.ENERGY_BALL)},o.hide=function(){var e;this.node.parent&&(this.node.active=!1,(null==(e=this.node.parent)?void 0:e.children.every((function(e){return!1===e.active})))&&this.node.parent&&h.instance.putNode(this.node.parent))},o.update=function(e){this.node.parent&&d.ndPlayer&&!d.isGameOver&&!d.isGamePause&&(this._curSpeed=f.lerp(this._targetSpeed,this._curSpeed,.25),this._targetWorPos.set(0,0,-e*this._curSpeed),this.node.translate(this._targetWorPos,i.NodeSpace.LOCAL),this._curWorPos.set(this.node.worldPosition),r.subtract(this._offsetPos,this._curWorPos,d.ndPlayer.worldPosition),this._offsetPos&&this._offsetPos.length()>=this._disappearRange&&this.hide())},n(s,[{key:"baseInfo",get:function(){return this._baseInfo},set:function(e){this._baseInfo=e}},{key:"skillInfo",get:function(){return this._skillInfo},set:function(e){this._skillInfo=e}}]),s}(a))||p);s._RF.pop()}}}));

System.register("chunks:///_virtual/dispersionSurround.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util.ts","./effectManager.ts","./gameManager.ts","./audioManager.ts","./constant.ts","./poolManager.ts"],(function(e){var t,n,s,o,i,r,a,u,l,c,d,h,f;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){s=e.cclegacy,o=e._decorator,i=e.Node,r=e.Vec3,a=e.Component},function(e){u=e.Util},function(e){l=e.EffectManager},function(e){c=e.GameManager},function(e){d=e.AudioManager},function(e){h=e.Constant},function(e){f=e.PoolManager}],execute:function(){var p;s._RF.push({},"1fdcfxvDc9CIZfp1zEdq2Yu","dispersionSurround",void 0);var _=o.ccclass;o.property,e("DispersionSurround",_("DispersionSurround")(p=function(e){function s(){for(var t,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(t=e.call.apply(e,[this].concat(s))||this)._baseInfo=null,t._skillInfo=null,t._curSpeed=0,t._targetSpeed=0,t._oriPos=null,t._oriEulerAngles=null,t._offsetPos=new r,t._curWorPos=new r,t._disappearRange=20,t._targetWorPos=new r,t._oriScale=new r,t}t(s,e);var o=s.prototype;return o.init=function(e,t){this.skillInfo=e,this.baseInfo=t,this.node.active=!0,this._oriPos||(this._oriPos=this.node.position.clone()),this._oriEulerAngles||(this._oriEulerAngles=this.node.eulerAngles.clone()),this.node.setPosition(this._oriPos),this.node.eulerAngles.set(this._oriEulerAngles),this._targetSpeed=e.flySpeed,this._curSpeed=.5*e.flySpeed;var n={ndEffect:this.node};l.instance.playParticle(n),d.instance.playSound(h.SOUND.ENERGY_BALL)},o.hide=function(){var e;this.node.parent&&(this.node.active=!1,(null==(e=this.node.parent)?void 0:e.children.every((function(e){return!1===e.active})))&&this.node.parent&&f.instance.putNode(this.node.parent))},o.update=function(e){this.node.parent&&c.ndPlayer&&!c.isGameOver&&!c.isGamePause&&(this._curSpeed=u.lerp(this._targetSpeed,this._curSpeed,.25),this._targetWorPos.set(0,0,-e*this._curSpeed),this.node.translate(this._targetWorPos,i.NodeSpace.LOCAL),this._curWorPos.set(this.node.worldPosition),r.subtract(this._offsetPos,this._curWorPos,c.ndPlayer.worldPosition),this._offsetPos&&this._offsetPos.length()>=this._disappearRange&&this.hide())},n(s,[{key:"baseInfo",get:function(){return this._baseInfo},set:function(e){this._baseInfo=e}},{key:"skillInfo",get:function(){return this._skillInfo},set:function(e){this._skillInfo=e}}]),s}(a))||p);s._RF.pop()}}}));

System.register("chunks:///_virtual/effectManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./poolManager.ts","./resourceUtil.ts","./warningCircle.ts","./warningStrip.ts","./warningLine.ts"],(function(e){var n,t,i,a,r,o,c,l,s,u,f,d,p,v,g,m,h,y;return{setters:[function(e){n=e.createClass,t=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){a=e.cclegacy,r=e._decorator,o=e.isValid,c=e.ParticleSystemComponent,l=e.AnimationComponent,s=e.AnimationClip,u=e.find,f=e.Node,d=e.director,p=e.Vec3},function(e){v=e.PoolManager},function(e){g=e.ResourceUtil},function(e){m=e.WarningCircle},function(e){h=e.WarningStrip},function(e){y=e.WarningLine}],execute:function(){var P,w;a._RF.push({},"554baRvdXVCaZZeXFSvvApe","effectManager",void 0);var C=r.ccclass;r.property,e("EffectManager",C("EffectManager")(((w=function(){function e(){this._ndParent=null}var a=e.prototype;return a.resetEffectState=function(e,n){if(o(e)){var t=e.getComponentsInChildren(c);t.length&&t.forEach((function(e){null==e||e.stop(),null==e||e.clear()}));var i=e.getComponentsInChildren(l);i.length&&i.forEach((function(e,t){if(e.defaultClip&&e.defaultClip.name){var i=null;n&&(i=e.getState(n)),i||(i=e.getState(e.defaultClip.name)),i&&(i.stop(),i.time=0,i.sample())}}))}},a.loadAndPlayEffect=function(){var e=t(i().mark((function e(n){var t,a,r,o,c,l,s,u,f,d,m,h,y,P,w,C,E,M,R,W,S,_,N,T,x,A;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.effectPath,a=void 0===t?"":t,r=n.ndTarget,o=void 0===r?null:r,c=n.isLocal,l=void 0===c||c,s=n.pos,u=void 0===s?null:s,f=n.eulerAngles,d=void 0===f?null:f,m=n.isPlayAnimation,h=void 0===m||m,y=n.isPlayParticle,P=void 0===y||y,w=n.scale,C=void 0===w?1:w,E=n.speed,M=void 0===E?1:E,R=n.isRecycle,W=void 0!==R&&R,S=n.recycleTime,_=void 0===S?0:S,!l||o&&o.parent){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,g.loadEffectRes(a);case 5:N=e.sent,T=l?o:this.ndParent,x=v.instance.getNode(N,T),l?(x.setScale(C,C,C),u&&u instanceof p&&x.setPosition(u),d&&d instanceof p&&x.setRotationFromEuler(d.x,d.y,d.z)):(x.setWorldScale(C,C,C),u&&u instanceof p&&x.setWorldPosition(u),d&&d instanceof p&&x.setWorldRotationFromEuler(d.x,d.y,d.z)),A={ndEffect:x,isPlayAnimation:h,isPlayParticle:P,speed:M,isRecycle:W,recycleTime:_},this.playEffect(A);case 11:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),a.playEffect=function(e){var n=this;return new Promise((function(t,i){var a=e.ndEffect,r=e.isPlayAnimation,o=void 0===r||r,c=e.isPlayParticle,l=void 0===c||c,s=e.speed,u=void 0===s?1:s,f=e.isRecycle,d=void 0!==f&&f,p=e.recycleTime,g=void 0===p?0:p,m=[];if(o){var h={ndEffect:a,animationName:"",speed:u},y=n.playAnimation(h);m.push(y)}if(l){var P={ndEffect:a,speed:u},w=n.playParticle(P);m.push(w)}var C=function(){a&&a.parent&&(d&&v.instance.putNode(a),null==t||t(null))};d&&g?setTimeout(C,1e3*g):Promise.all(m).then((function(){C()}))}))},a.playAnimation=function(e){return new Promise((function(n,t){var i=e.ndEffect,a=e.speed,r=void 0===a?1:a,o=e.animationName,c=void 0===o?"":o,u=e.wrapMode,f=void 0===u?s.WrapMode.Default:u,d=e.isRecycle,p=void 0!==d&&d,g=e.recycleTime,m=void 0===g?0:g;i.active||(i.active=!0);var h=i.getComponentsInChildren(l),y=0;if((h=h.filter((function(e){return e.node.activeInHierarchy&&e.enabled}))).length){h.forEach((function(e,n){var t,i,a=c||(null==e||null==(t=e.defaultClip)?void 0:t.name);if(a&&(i=e.getState(a))){switch(i.time=0,i.speed=r,i.sample(),f&&(i.wrapMode=f),i.wrapMode){case s.WrapMode.Normal:case s.WrapMode.Reverse:y+=1,e.once(l.EventType.FINISHED,(function(){0!==(y-=1)||p&&m||P()}));break;case s.WrapMode.Loop:case s.WrapMode.PingPong:case s.WrapMode.PingPongReverse:case s.WrapMode.Default:}null==e||e.play(a)}}));var P=function(){i&&i.parent&&(p&&v.instance.putNode(i),null==n||n(null))};p&&m?setTimeout(P,1e3*m):y||P()}else console.warn("###"+i.name+"节点下没有可以播放的动画组件，直接返回播放完成状态"),null==n||n(null)}))},a.playParticle=function(e){return new Promise((function(n,t){var i=e.ndEffect,a=e.speed,r=void 0===a?1:a,o=e.isRecycle,l=void 0!==o&&o,s=e.recycleTime,u=void 0===s?0:s,f=0;i.active||(i.active=!0);var d=i.getComponentsInChildren(c);(d=d.filter((function(e){return e.node.activeInHierarchy&&e.enabled}))).length?(d.forEach((function(e){e.simulationSpeed=r,null==e||e.clear(),null==e||e.stop(),null==e||e.play();var n=e.duration;f=n>f?n:f})),f=u&&u>0?u:f,setTimeout((function(){i&&i.parent&&(l&&v.instance.putNode(i),null==n||n(null))}),1e3*f)):(console.warn("###"+i.name+"节点下没有可以播放的粒子组件，直接返回播放完成状态"),null==n||n(null))}))},a.showWarning=function(){var e=t(i().mark((function e(n,t,a){var r,o,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.loadEffectRes("warning/"+n);case 2:r=e.sent,o=v.instance.getNode(r,this.ndParent),c=null,"warningLine"===n?c=o.getComponent(y):"warningStrip"===n?c=o.getComponent(h):"warningCircle"===n&&(c=o.getComponent(m)),c.init(t,a),a.scriptWarning=c;case 8:case"end":return e.stop()}}),e,this)})));return function(n,t,i){return e.apply(this,arguments)}}(),a.showLightningChain=function(){var e=t(i().mark((function e(n,t){var a,r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.loadEffectRes("lightningChain/lightningChain");case 2:a=e.sent,(r=v.instance.getNode(a,n)).setWorldPosition(n.worldPosition.x,2.3,n.worldPosition.z),o=new p,p.subtract(o,t.worldPosition,n.worldPosition),r.setWorldScale(1,o.length(),1),r.forward=o.normalize().negative(),setTimeout((function(){v.instance.putNode(r)}),100);case 10:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),n(e,[{key:"ndParent",get:function(){if(!this._ndParent){var e,n=u("effectManager");if(n)this._ndParent=n;else this._ndParent=new f("effectManager"),null==(e=d.getScene())||e.addChild(this._ndParent)}return this._ndParent}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}())._instance=void 0,P=w))||P);a._RF.pop()}}}));

System.register("chunks:///_virtual/energyBall.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util.ts","./gameManager.ts","./effectManager.ts","./audioManager.ts","./constant.ts","./poolManager.ts"],(function(e){var t,n,s,o,r,a,i,c,l,u,f,p,d;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){s=e.cclegacy,o=e._decorator,r=e.Node,a=e.Vec3,i=e.Component},function(e){c=e.Util},function(e){l=e.GameManager},function(e){u=e.EffectManager},function(e){f=e.AudioManager},function(e){p=e.Constant},function(e){d=e.PoolManager}],execute:function(){var h;s._RF.push({},"37dc2IA7blBo4bx2LK3KFIH","energyBall",void 0);var _=o.ccclass;o.property,e("EnergyBall",_("EnergyBall")(h=function(e){function s(){for(var t,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(t=e.call.apply(e,[this].concat(s))||this)._baseInfo=null,t._skillInfo=null,t._curSpeed=0,t._targetSpeed=0,t._offsetPos=new a,t._curWorPos=new a,t._disappearRange=25,t._targetWorPos=new a,t}t(s,e);var o=s.prototype;return o.init=function(e,t,n){var s;this.skillInfo=e,this.baseInfo=t,null==(s=n.scriptWarning)||s.hideWarning(),this._targetSpeed=e.flySpeed,this._curSpeed=.5*e.flySpeed;var o={ndEffect:this.node};u.instance.playParticle(o),f.instance.playSound(p.SOUND.ENERGY_BALL)},o.update=function(e){this.node.parent&&l.ndPlayer&&!l.isGameOver&&!l.isGamePause&&(this._curSpeed=c.lerp(this._targetSpeed,this._curSpeed,.25),this._targetWorPos.set(0,0,-e*this._curSpeed),this.node.translate(this._targetWorPos,r.NodeSpace.LOCAL),this._curWorPos.set(this.node.worldPosition),a.subtract(this._offsetPos,this._curWorPos,l.ndPlayer.worldPosition),this._offsetPos&&this._offsetPos.length()>=this._disappearRange&&d.instance.putNode(this.node))},n(s,[{key:"baseInfo",get:function(){return this._baseInfo},set:function(e){this._baseInfo=e}},{key:"skillInfo",get:function(){return this._skillInfo},set:function(e){this._skillInfo=e}}]),s}(i))||h);s._RF.pop()}}}));

System.register("chunks:///_virtual/fightPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiManager.ts","./bossBloodBar.ts","./gameManager.ts","./util.ts","./playerData.ts","./constant.ts","./clientEvent.ts","./localConfig.ts","./LanguageData.ts"],(function(e){var n,t,i,o,s,l,r,a,u,c,f,h,d,g,p,b,E,_;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){s=e.cclegacy,l=e._decorator,r=e.Node,a=e.Label,u=e.Component},function(e){c=e.UIManager},function(e){f=e.BossBloodBar},function(e){h=e.GameManager},function(e){d=e.Util},function(e){g=e.PlayerData},function(e){p=e.Constant},function(e){b=e.ClientEvent},function(e){E=e.LocalConfig},function(e){_=e.updateSceneRenderers}],execute:function(){var B,v,y,L,P,m,T,R,D,C,G;s._RF.push({},"f952f4sQGRHoaTmPC6i11vU","fightPanel",void 0);var I=l.ccclass,k=l.property;e("FightPanel",(B=I("FightPanel"),v=k(r),y=k(a),L=k(a),P=k(r),B((R=n((T=function(e){function n(){for(var n,t=arguments.length,s=new Array(t),l=0;l<t;l++)s[l]=arguments[l];return n=e.call.apply(e,[this].concat(s))||this,i(n,"ndJoystick",R,o(n)),i(n,"lbGold",D,o(n)),i(n,"lbLevel",C,o(n)),i(n,"ndBossBloodBar",G,o(n)),n._debugClickTimes=0,n}t(n,e);var s=n.prototype;return s.onEnable=function(){b.on(p.EVENT_TYPE.REFRESH_GOLD,this._refreshGold,this),b.on(p.EVENT_TYPE.REFRESH_LEVEL,this._refreshLevel,this)},s.onDisable=function(){b.off(p.EVENT_TYPE.REFRESH_GOLD,this._refreshGold,this),b.off(p.EVENT_TYPE.REFRESH_LEVEL,this._refreshLevel,this)},s.show=function(){if(_(),this.ndBossBloodBar.active=!1,this._refreshGold(),this._refreshLevel(),h.ndBoss){var e=E.instance.queryByID("base",p.BASE.BOSS_01);this.ndBossBloodBar.getComponent(f).show(h.scriptBoss,e.hp)}this._debugClickTimes=0},s._refreshGold=function(){this.lbGold.string=d.formatMoney(g.instance.playerInfo.gold)},s._refreshLevel=function(){this.lbLevel.string="level "+g.instance.playerInfo.level},s.onBtnPauseClick=function(){c.instance.showDialog("pause/pausePanel",[],(function(){}),p.PRIORITY.DIALOG),h.isGamePause=!0},s.onBtnDebugClick=function(){this._debugClickTimes+=1,this._debugClickTimes>=1&&(this._debugClickTimes=0,c.instance.showDialog("debug/debugPanel",[],(function(){}),p.PRIORITY.DIALOG))},n}(u)).prototype,"ndJoystick",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=n(T.prototype,"lbGold",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=n(T.prototype,"lbLevel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=n(T.prototype,"ndBossBloodBar",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=T))||m));s._RF.pop()}}}));

System.register("chunks:///_virtual/fightTip.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constant.ts","./util.ts","./poolManager.ts"],(function(t){var e,i,o,n,s,a,r,h,c,l,_,d,g,T,u;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass},function(t){o=t.cclegacy,n=t._decorator,s=t.LabelComponent,a=t.UITransform,r=t.view,h=t.tween,c=t.find,l=t.Vec3,_=t.CameraComponent,d=t.Component},function(t){g=t.Constant},function(t){T=t.Util},function(t){u=t.PoolManager}],execute:function(){var P;o._RF.push({},"4caf7l6Ri5P6JX9Le02LsCW","fightTip",void 0);var p=n.ccclass;n.property,t("FightTip",p("FightTip")(P=function(t){function o(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))||this)._tweenTip=null,e._costTime=1.5,e._arrDirection=T.objectToArray(g.BLOOD_TIP_DIRECTION),e._isChangePos=!1,e._targetPos=new l(0,200,0),e._oriWorPos=new l,e._curWorPos=new l,e._oriScale=new l(.7,.7,.7),e._oriAngle=new l,e._scale_1=new l(1,1,1),e._scale_2=new l,e}e(o,t);var n=o.prototype;return n.start=function(){},n.show=function(t,e,i,o){var n,c,l,_=this;this._closeTweenTip(),this.node.eulerAngles=this._oriAngle,this.node.setScale(this._oriScale),this._isChangePos=!1,this._oriWorPos.set(t.node.worldPosition),this.node.children.forEach((function(t){t.active=!1})),this.node.setSiblingIndex(g.PRIORITY.BLOOD_TIP),i=Math.round(i);var d=String(i),T=null;e===g.FIGHT_TIP.ADD_BLOOD?(T=this.node.getChildByName("addBlood"),d="+"+d):e===g.FIGHT_TIP.REDUCE_BLOOD?T=this.node.getChildByName("reduceBlood"):e===g.FIGHT_TIP.CRITICAL_HIT&&(T=this.node.getChildByName("criticalHit"),this.node.setSiblingIndex(g.PRIORITY.BLOOD_CRITICAL_TIP));var P=null==(n=T.getChildByName("num"))?void 0:n.getComponent(s);P&&(P.string=d),T.active=!0;var p=this.node.getPosition(),I=null==(c=T.getComponent(a))?void 0:c.width,C=null==(l=T.getComponent(a))?void 0:l.height,f=r.getViewportRect();if(Math.abs(p.x)+I/2>f.width/2){var w=f.width/2-I/2;p.x=p.x>0?w:-w}if(Math.abs(p.y)+C/2>f.height/2){var m=f.height/2-C/2;p.y=p.y>0?m:-m}this.node.setPosition(p),this.getTargetPos(t),this._isChangePos=!0,this._tweenTip=h(this.node).to(.4*this._costTime,{scale:this._scale_1},{easing:"smooth"}).to(.2*this._costTime,{scale:this._scale_2},{easing:"backIn"}).call((function(){_._closeTweenTip(),u.instance.putNode(_.node),o&&o(),_._isChangePos=!1})).start()},n.getTargetPos=function(t){var e,i=this._arrDirection.concat();switch(e=(i=i.filter((function(e){return e!==t.bloodTipDirection})))[Math.floor(Math.random()*i.length)]){case g.BLOOD_TIP_DIRECTION.LEFT_UP:this._targetPos.set(-2,5,0);break;case g.BLOOD_TIP_DIRECTION.MID_UP:this._targetPos.set(0,4,0);break;case g.BLOOD_TIP_DIRECTION.RIGHT_UP:this._targetPos.set(2,2,0)}this._targetPos.add(t.node.worldPosition.clone()),t.bloodTipDirection=e},n._closeTweenTip=function(){this._tweenTip&&(this._tweenTip.stop(),this._tweenTip=null)},n.update=function(t){var e;this._isChangePos&&(this._oriWorPos.lerp(this._targetPos,.05),null==(e=this._mainCamera)||e.convertToUINode(this._oriWorPos,c("Canvas"),this._curWorPos),this.node.setPosition(this._curWorPos))},i(o,[{key:"_mainCamera",get:function(){var t;return null==(t=c("Main Camera"))?void 0:t.getComponent(_)}}]),o}(d))||P);o._RF.pop()}}}));

System.register("chunks:///_virtual/fireBall.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts","./constant.ts","./effectManager.ts","./poolManager.ts","./resourceUtil.ts","./gameManager.ts"],(function(t){var i,e,s,o,n,r,a,l,h,c,_,u;return{setters:[function(t){i=t.inheritsLoose,e=t.createClass},function(t){s=t.cclegacy,o=t._decorator,n=t.Vec3,r=t.Component},function(t){a=t.AudioManager},function(t){l=t.Constant},function(t){h=t.EffectManager},function(t){c=t.PoolManager},function(t){_=t.ResourceUtil},function(t){u=t.GameManager}],execute:function(){var f;s._RF.push({},"90320FRD9ZBib7MUibgkbJA","fireBall",void 0);var p=o.ccclass;o.property,t("FireBall",p("FireBall")(f=function(t){function s(){for(var i,e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return(i=t.call.apply(t,[this].concat(s))||this)._isPlayHitFireBall=!1,i._groundWorPosY=1.8,i._scriptWarning=null,i._baseInfo=null,i._skillInfo=null,i._isAutoRotate=!0,i._posStart=new n,i._posEnd=new n,i._posOffset=new n,i._totalFlyTime=0,i._maxFlyHeight=0,i._curFlyTime=0,i._rotateCoolTime=0,i._posNextTarget=new n,i._scriptParent=null,i._targetPos=new n,i}i(s,t);var o=s.prototype;return o.start=function(){},o.init=function(t,i,e){this.skillInfo=t,this.baseInfo=i,this._scriptParent=e,this._totalFlyTime=0,this._maxFlyHeight=0,this._curFlyTime=0,this._posStart.set(this.node.worldPosition.x,this.groundWorPosY,this.node.worldPosition.z),this._posEnd.set(e.attackPos),n.subtract(this._posOffset,this._posEnd,this._posStart),this._totalFlyTime=this._posOffset.length()/t.flySpeed,this._maxFlyHeight=3*this._totalFlyTime,this.isPlayHitFireBall=!1,this.node.children.forEach((function(t){t.active=!0}));var s={ndEffect:this.node};h.instance.playParticle(s),a.instance.playSound(l.SOUND.FIRE_BALL)},o.update=function(t){var i=this;if(this.node.parent&&u.ndPlayer&&!u.isGameOver&&!u.isGamePause&&this._totalFlyTime>0&&this.node.parent&&this._curFlyTime<this._totalFlyTime){this._curFlyTime+=t,this._curFlyTime=this._curFlyTime>=this._totalFlyTime?this._totalFlyTime:this._curFlyTime;var e,s=Number((this._curFlyTime/this._totalFlyTime).toFixed(2)),o=this._maxFlyHeight*Math.cos(s*Math.PI-Math.PI/2);if(this._targetPos.set(this._posStart.x+this._posOffset.x*s,this._posStart.y+o,this._posStart.z+this._posOffset.z*s),this.node.setWorldPosition(this._targetPos),this._isAutoRotate&&(this._rotateCoolTime-=t,this._rotateCoolTime<0&&(this._rotateCoolTime=.1,(s=Number(((this._curFlyTime+t)/this._totalFlyTime).toFixed(2)))<1&&(o=this._maxFlyHeight*Math.cos(s*Math.PI-Math.PI/2),this._posNextTarget.set(this._posStart.x+this._posOffset.x*s,this._posStart.y+o,this._posStart.z+this._posOffset.z*s),this.node.forward=this._posNextTarget.subtract(this._targetPos).normalize()))),Number(this.node.position.y.toFixed(2))<=this.groundWorPosY&&!this.isPlayHitFireBall&&this._curFlyTime>0)this.isPlayHitFireBall=!0,null==(e=this._scriptParent.scriptWarning)||e.hideWarning(),this.node.children.forEach((function(t){t.active=!1})),_.loadEffectRes("hit/hitFireBall1").then((function(t){var e=c.instance.getNode(t,i.node);e.setWorldPosition(i.node.worldPosition);var s={ndEffect:e,speed:u.gameSpeed,isRecycle:!0,recycleTime:1.1};h.instance.playParticle(s)}))}},e(s,[{key:"baseInfo",get:function(){return this._baseInfo},set:function(t){this._baseInfo=t}},{key:"skillInfo",get:function(){return this._skillInfo},set:function(t){this._skillInfo=t}},{key:"isPlayHitFireBall",get:function(){return this._isPlayHitFireBall},set:function(t){this._isPlayHitFireBall=t}},{key:"groundWorPosY",get:function(){return this._groundWorPosY},set:function(t){this._groundWorPosY=t}},{key:"scriptWarning",get:function(){return this._scriptWarning},set:function(t){this._scriptWarning=t}}]),s}(r))||f);s._RF.pop()}}}));

System.register("chunks:///_virtual/fireBallBig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constant.ts","./effectManager.ts","./resourceUtil.ts","./audioManager.ts","./poolManager.ts","./gameManager.ts"],(function(n){var t,i,e,a,o,s,r,l,c,f,u,h;return{setters:[function(n){t=n.inheritsLoose,i=n.createClass},function(n){e=n.cclegacy,a=n._decorator,o=n.tween,s=n.Component},function(n){r=n.Constant},function(n){l=n.EffectManager},function(n){c=n.ResourceUtil},function(n){f=n.AudioManager},function(n){u=n.PoolManager},function(n){h=n.GameManager}],execute:function(){var g;e._RF.push({},"07328JA8aFLSbjSpxzXqaIZ","fireBallBig",void 0);var d=a.ccclass;a.property,n("FireBallBig",d("FireBallBig")(g=function(n){function e(){for(var t,i=arguments.length,e=new Array(i),a=0;a<i;a++)e[a]=arguments[a];return(t=n.call.apply(n,[this].concat(e))||this)._baseInfo=null,t._skillInfo=null,t._scriptWarning=null,t._isPlayHitFireBall=!1,t}t(e,n);var a=e.prototype;return a.start=function(){},a.init=function(n,t,i){var e=this;this.skillInfo=n,this.baseInfo=t,this.isPlayHitFireBall=!1;var a=i.attackPos;this.node.setWorldPosition(a.x,23,a.z),this.node.children.forEach((function(n){n.active=!0}));var s={ndEffect:this.node};l.instance.playParticle(s),o(this.node).to(1/n.flySpeed,{position:a},{easing:"elasticIn"}).call((function(){var n;f.instance.playSound(r.SOUND.FIRE_BALL_BIG),e.isPlayHitFireBall=!0,null==i||null==(n=i.scriptWarning)||n.hideWarning(),e.node.children.forEach((function(n){n.active=!1})),c.loadEffectRes("hit/hitFireBall2").then((function(n){var t=u.instance.getNode(n,e.node);t.setWorldPosition(e.node.worldPosition);var i={ndEffect:t,speed:h.gameSpeed,isRecycle:!0,recycleTime:1.1};l.instance.playParticle(i).then((function(){u.instance.putNode(e.node)}))}))})).start()},i(e,[{key:"baseInfo",get:function(){return this._baseInfo},set:function(n){this._baseInfo=n}},{key:"skillInfo",get:function(){return this._skillInfo},set:function(n){this._skillInfo=n}},{key:"scriptWarning",get:function(){return this._scriptWarning},set:function(n){this._scriptWarning=n}},{key:"isPlayHitFireBall",get:function(){return this._isPlayHitFireBall},set:function(n){this._isPlayHitFireBall=n}}]),e}(s))||g);e._RF.pop()}}}));

System.register("chunks:///_virtual/gameCamera.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var r,t,e,a,s,i;return{setters:[function(o){r=o.inheritsLoose,t=o.createClass},function(o){e=o.cclegacy,a=o._decorator,s=o.Vec3,i=o.Component}],execute:function(){var n;e._RF.push({},"7b36dlhjPBALJv1VQ9Wc7M+","gameCamera",void 0);var l=a.ccclass;a.property,o("GameCamera",l("GameCamera")(n=function(o){function e(){for(var r,t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];return(r=o.call.apply(o,[this].concat(e))||this)._ndFollowTarget=null,r._oriCameraWorPos=new s,r._targetCameraWorPos=new s,r._curCameraWorPos=new s,r}r(e,o);var a=e.prototype;return a.start=function(){this._oriCameraWorPos=this.node.worldPosition.clone()},a.resetCamera=function(){this._targetCameraWorPos.set(this._oriCameraWorPos)},a.lateUpdate=function(){this.ndFollowTarget&&this.ndFollowTarget.worldPosition&&this.ndFollowTarget.active&&(this._targetCameraWorPos=this._targetCameraWorPos.lerp(this.ndFollowTarget.worldPosition,.5),this._curCameraWorPos.set(this._oriCameraWorPos.x+this._targetCameraWorPos.x,this._oriCameraWorPos.y,this._oriCameraWorPos.z+this._targetCameraWorPos.z),this.node.setWorldPosition(this._curCameraWorPos))},t(e,[{key:"ndFollowTarget",get:function(){return this._ndFollowTarget},set:function(o){this._ndFollowTarget=o}}]),e}(i))||n);e._RF.pop()}}}));

System.register("chunks:///_virtual/gameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./playerData.ts","./uiManager.ts","./gameCamera.ts","./resourceUtil.ts","./constant.ts","./localConfig.ts","./audioManager.ts","./util.ts","./poolManager.ts"],(function(e){var n,t,i,a,o,r,s,c,l,d,f,u,h,g,p,_,m,M,E,v,P,y,A,G,S,k;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.createClass},function(e){r=e.cclegacy,s=e._decorator,c=e.Node,l=e.Vec3,d=e.CameraComponent,f=e.find,u=e.AnimationComponent,h=e.SkeletalAnimationComponent,g=e.ParticleSystemComponent,p=e.Prefab,_=e.Component},function(e){m=e.ClientEvent},function(e){M=e.PlayerData},function(e){E=e.UIManager},function(e){v=e.GameCamera},function(e){P=e.ResourceUtil},function(e){y=e.Constant},function(e){A=e.LocalConfig},function(e){G=e.AudioManager},function(e){S=e.Util},function(e){k=e.PoolManager}],execute:function(){var N,T,w,L,C,I,R,O;r._RF.push({},"74bb5fEKqJBI7792FWkxSP/","gameManager",void 0);var W=s.ccclass,V=s.property;e("GameManager",(N=W("GameManager"),T=V(v),w=V(c),N(((O=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return n=e.call.apply(e,[this].concat(o))||this,i(n,"camera",I,a(n)),i(n,"ndLight",R,a(n)),n._dictMonsterSkill={},n._oriMainLightWorPos=null,n._offsetWorPosMainLight=new l,n._scriptMapManager=null,n._mapInfo={},n}t(n,e);var r=n.prototype;return r.onEnable=function(){m.on(y.EVENT_TYPE.ON_GAME_INIT,this._onGameInit,this),m.on(y.EVENT_TYPE.ON_GAME_OVER,this._onGameOver,this),m.on(y.EVENT_TYPE.ON_GAME_PAUSE,this._onGamePause,this),m.on(y.EVENT_TYPE.REFRESH_LEVEL,this._refreshLevel,this),m.on(y.EVENT_TYPE.RECYCLE_ALL,this._recycleAll,this)},r.onDisable=function(){m.off(y.EVENT_TYPE.ON_GAME_INIT,this._onGameInit,this),m.off(y.EVENT_TYPE.ON_GAME_OVER,this._onGameOver,this),m.off(y.EVENT_TYPE.ON_GAME_PAUSE,this._onGamePause,this),m.off(y.EVENT_TYPE.REFRESH_LEVEL,this._refreshLevel,this),m.off(y.EVENT_TYPE.RECYCLE_ALL,this._recycleAll,this)},r.start=function(){var e,t,i;n.mainCamera=null==(e=this.camera)?void 0:e.getComponent(d),n.scriptGameCamera=null==(t=this.camera)?void 0:t.getComponent(v),n.ndGameManager=this.node,n.ndMapManager=f("mapManager"),n.ndEffectManager=f("effectManager"),this._oriMainLightWorPos=this.ndLight.worldPosition.clone(),this.scriptMapManager=null==(i=f("mapManager"))?void 0:i.getComponent("MapManager"),n.isTesting&&(window.uiManager=E.instance,window.AudioManager=G.instance,window.playerData=M.instance,window.clientEvent=m,window.ndGameManager=n.ndGameManager,window.GameManager=n,window.ndMapManager=n.ndMapManager,window.ndEffectManager=n.ndEffectManager,window.constant=y)},r._onGameInit=function(e){var t=this,i=M.instance.playerInfo.level,a=A.instance.getTableArr("checkpoint").length;i>a&&(i=a-10+(i-a)%10),this.mapInfo=A.instance.queryByID("checkpoint",String(i)),n.attackAddition=this.mapInfo.attackAddition,n.defenseAddition=this.mapInfo.defenseAddition,n.hpAddition=this.mapInfo.hpAddition,n.moveSpeedAddition=this.mapInfo.moveSpeedAddition,n.attackSpeedAddition=this.mapInfo.attackSpeedAddition,n.isGameStart=!1,n.isGamePause=!1,n.isGameOver=!1,n.isWin=!1,n.isRevive=!1,n.arrMonster=[],n.gameSpeed=1,n.ndBoss=null,n.existentNum=0,M.instance.addFightTimes(),G.instance.stopAllSound(),G.instance.stopMusic(),E.instance.showDialog("loading/loadingPanel",[function(){t._refreshLevel()}],e)},r._refreshLevel=function(){var e=this,t=this.mapInfo.mapName.split("#"),i=t[Math.floor(Math.random()*t.length)];this.preloadMonsterSkill(i).then((function(){e._recycleAll(),e._loadMap(i,(function(){n.ndPlayer?n.scriptPlayer.preloadArrow((function(){console.log("###_refreshLevel1"),m.dispatchEvent(y.EVENT_TYPE.HIDE_LOADING_PANEL,(function(){n.scriptPlayer.resetPlayerState()}))})):e._createPlayer()}))}))},r._loadMap=function(e,n){void 0===n&&(n=function(){}),this.scriptMapManager.buildMap(e,(function(){}),(function(){n&&n()}))},r._createPlayer=function(){var e=this;P.loadModelRes("player/player01").then((function(t){var i,a;n.ndPlayer=k.instance.getNode(t,e.node),(null==(i=n.mainCamera)?void 0:i.node.getComponent(v)).ndFollowTarget=n.ndPlayer;var o=null==(a=n.ndPlayer)?void 0:a.getComponent("Player");n.scriptPlayer=o,null==o||o.init(),o.preloadArrow((function(){m.dispatchEvent(y.EVENT_TYPE.HIDE_LOADING_PANEL)}))}))},r._recycleAll=function(){this.scriptMapManager.recycle();for(var e=this.node.children.length-1;e>=0;e--){var t=this.node.children[e];"player01"!==t.name&&k.instance.putNode(t)}for(;n.ndEffectManager.children.length;)k.instance.putNode(n.ndEffectManager.children[0])},r._onGameOver=function(){var e=this;if(!n.isGameOver)if(n.isGamePause=!0,console.log("game over!","isWin ?",n.isWin),n.isWin){E.instance.hideDialog("fight/fightPanel"),n.isGameOver=!0,this._recycleAll();var t=Number(M.instance.playerInfo.level)+1;M.instance.playerInfo.level=t,t>M.instance.playerInfo.highestLevel&&(M.instance.playerInfo.highestLevel=t),m.dispatchEvent(y.EVENT_TYPE.ON_GAME_INIT)}else E.instance.showDialog("revive/revivePanel",[function(){n.ndPlayer&&(k.instance.putNode(n.ndPlayer),n.ndPlayer=null,n.scriptPlayer=null),e._recycleAll()}])},r._onGamePause=function(){n.isGamePause=!0},n.getNearestMonster=function(){if(n.arrMonster.length){var e=n.arrMonster.sort((function(e,t){return S.getTwoNodeXZLength(n.ndPlayer,e)-S.getTwoNodeXZLength(n.ndPlayer,t)}));return(e=e.filter((function(e){var n=e.getComponent("Monster");return null!==e.parent&&!n.isDie})))[0]}return null},n.getNearbyMonster=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=7);var a=[];if(n.arrMonster.length&&(a=n.arrMonster.concat()),(a=a.filter((function(t){var a=t.getComponent("Monster"),o=S.getTwoNodeXZLength(n.ndPlayer,t);return null!==t.parent&&!a.isDie&&o<=i&&e.worldPosition!==t.worldPosition}))).length){if(t)return a;var o=Math.floor(Math.random()*a.length);return a.filter((function(e,n){return n===o}))}return a},n.refreshEffectSpeed=function(e,n){e&&(e.getComponentsInChildren(u).forEach((function(e){e.clips.forEach((function(t){var i=null==t?void 0:t.name;e.getState(i).speed=n}))})),e.getComponentsInChildren(h).forEach((function(e){e.clips.forEach((function(t){var i=null==t?void 0:t.name;e.getState(i).speed=n}))})),e.getComponentsInChildren(g).forEach((function(e){e.simulationSpeed=n})))},n.addGold=function(e){void 0===e&&(e=1),M.instance.updatePlayerInfo("gold",Math.ceil(e)),m.dispatchEvent(y.EVENT_TYPE.REFRESH_GOLD)},r.preloadMonsterSkill=function(e){var t=this;return new Promise((function(i,a){var o=[],r=A.instance.getTableArr(e);if((r=r.filter((function(e){return e.ID.startsWith("2")}))).length){var s=[];r.forEach((function(e){s=s.concat(""===e.skill?[]:e.skill.split("#"))})),s.length&&s.forEach((function(e){t._dictMonsterSkill[e]?s.filter((function(n){return n===e})).length>t._dictMonsterSkill[e].num&&(o.push(e),t._dictMonsterSkill[e].num+=1):(o.push(e),t._dictMonsterSkill[e]={num:1})}));var c=[];if(o.length){for(var l=0;l<o.length;l++){var d=o[l],f=A.instance.queryByID("monsterSkill",d),u=P.loadEffectRes(f.resName+"/"+f.resName).then((function(e){k.instance.getNode(e,n.ndGameManager).setWorldPosition(t.node.worldPosition.x,30,t.node.worldPosition.z)}));c.push(u)}Promise.all(c).then((function(){i(null)})).catch((function(e){console.error("预加载敌人技能报错",e)}))}else i(null)}else i(null)}))},n.checkTriggerAll=function(){n.existentNum-=1,n.existentNum<=0&&m.dispatchEvent(y.EVENT_TYPE.SHOW_WARP_GATE)},n.preloadArrowEffects=function(e){return new Promise((function(n,t){P.loadDirRes("prefab/effect/arrow",p,(function(i,a){i?(console.error(i),t(i)):(a.forEach((function(n){k.instance.preloadPool(n,e)})),n(null))}))}))},n.preloadArrow=function(e,n){P.loadModelRes("weapon/arrow/"+e).then((function(e){k.instance.preloadPool(e,n)}))},n.showRewardBounce=function(e,t,i,a){void 0===i&&(i=1),void 0===a&&(a=function(){});var o=i<=10?.15:.07;P.loadModelRes(t).then((function(t){for(var r=0;r<i;r++){var s=k.instance.getNode(t,n.ndEffectManager);s.setWorldPosition(e.worldPosition.x,1.65,e.worldPosition.z),s.active=!1,s.getComponent("Reward").init((r+1)*o,n.ndEffectManager)}a&&a()}))},r.update=function(e){n.scriptPlayer&&n.scriptPlayer.node&&!n.isGameOver&&(l.subtract(this._offsetWorPosMainLight,n.ndPlayer.worldPosition,this._oriMainLightWorPos),this._offsetWorPosMainLight.set(this._offsetWorPosMainLight.x,0,this._offsetWorPosMainLight.z),this.ndLight.setWorldPosition(this._offsetWorPosMainLight.add(this._oriMainLightWorPos)))},o(n,[{key:"scriptMapManager",get:function(){return this._scriptMapManager},set:function(e){this._scriptMapManager=e}},{key:"mapInfo",get:function(){return this._mapInfo},set:function(e){this._mapInfo=e}}],[{key:"mainCamera",get:function(){return this._mainCamera},set:function(e){this._mainCamera=e}},{key:"isGameStart",get:function(){return this._isGameStart},set:function(e){this._isGameStart=e}},{key:"isGamePause",get:function(){return this._isGamePause},set:function(e){this._isGamePause=e}},{key:"isGameOver",get:function(){return this._isGameOver},set:function(e){this._isGameOver=e}},{key:"scriptPlayer",get:function(){return this._scriptPlayer},set:function(e){this._scriptPlayer=e}},{key:"scriptGameCamera",get:function(){return this._scriptGameCamera},set:function(e){this._scriptGameCamera=e}},{key:"ndPlayer",get:function(){return this._ndPlayer},set:function(e){this._ndPlayer=e}},{key:"ndBoss",get:function(){return this._ndBoss},set:function(e){this._ndBoss=e}},{key:"scriptBoss",get:function(){return this._scriptBoss},set:function(e){this._scriptBoss=e}},{key:"ndGameManager",get:function(){return this._ndGameManager},set:function(e){this._ndGameManager=e}},{key:"ndEffectManager",get:function(){return this._ndEffectManager},set:function(e){this._ndEffectManager=e}},{key:"ndMapManager",get:function(){return this._ndMapManager},set:function(e){this._ndMapManager=e}},{key:"isRevive",get:function(){return this._isRevive},set:function(e){this._isRevive=e}},{key:"isTesting",get:function(){return this._isTesting},set:function(e){this._isTesting=e}},{key:"isFirstLoad",get:function(){return this._isFirstLoad},set:function(e){this._isFirstLoad=e}},{key:"arrMonster",get:function(){return this._arrMonster},set:function(e){this._arrMonster=e}},{key:"existentNum",get:function(){return this._existentNum},set:function(e){this._existentNum=e}},{key:"attackAddition",get:function(){return this._attackAddition},set:function(e){this._attackAddition=e}},{key:"defenseAddition",get:function(){return this._defenseAddition},set:function(e){this._defenseAddition=e}},{key:"hpAddition",get:function(){return this._hpAddition},set:function(e){this._hpAddition=e}},{key:"moveSpeedAddition",get:function(){return this._moveSpeedAddition},set:function(e){this._moveSpeedAddition=e}},{key:"attackSpeedAddition",get:function(){return this._attackSpeedAddition},set:function(e){this._attackSpeedAddition=e}},{key:"isWin",get:function(){return this._isWin},set:function(e){this._isWin=e,n.isGameStart&&m.dispatchEvent(y.EVENT_TYPE.ON_GAME_OVER)}},{key:"gameSpeed",get:function(){return this._gameSpeed},set:function(e){console.log("gameSpeed",n.gameSpeed),this._gameSpeed=e,n.refreshEffectSpeed(n.ndGameManager,this._gameSpeed),n.refreshEffectSpeed(n.ndPlayer,this._gameSpeed),n.refreshEffectSpeed(n.ndEffectManager,this._gameSpeed)}}]),n}(_))._gameSpeed=1,O._isWin=!1,O._mainCamera=null,O._isGameStart=!1,O._isGamePause=!1,O._isGameOver=!1,O._scriptPlayer=null,O._scriptGameCamera=void 0,O._ndPlayer=null,O._ndBoss=null,O._scriptBoss=null,O._ndGameManager=void 0,O._ndEffectManager=null,O._ndMapManager=null,O._isRevive=!1,O._isTesting=!0,O._isFirstLoad=!1,O._arrMonster=[],O._existentNum=0,O._attackAddition=1,O._defenseAddition=1,O._hpAddition=1,O._moveSpeedAddition=1,O._attackSpeedAddition=1,I=n((C=O).prototype,"camera",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=n(C.prototype,"ndLight",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=C))||L));r._RF.pop()}}}));

System.register("chunks:///_virtual/homePanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiManager.ts","./playerData.ts","./clientEvent.ts","./constant.ts","./audioManager.ts","./LanguageData.ts"],(function(e){var t,n,o,i,a,l,r,s,u,c,g,h,p,E,b,f,L,N,d,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,l=e.Color,r=e._decorator,s=e.Label,u=e.Node,c=e.Sprite,g=e.Vec3,h=e.Component},function(e){p=e.UIManager},function(e){E=e.PlayerData},function(e){b=e.ClientEvent},function(e){f=e.Constant},function(e){L=e.AudioManager},function(e){N=e._language,d=e.init,_=e.updateSceneRenderers}],execute:function(){var P,y,O,v,D,I,S,m,C,A,G,H,w;a._RF.push({},"f5e45oxGR1Ka5fIEbXV4xsh","homePanel",void 0);var z={NONE:new l(255,255,255),CHOOSE:new l(226,129,24)},M=r.ccclass,R=r.property;e("HomePanel",(P=M("HomePanel"),y=R(s),O=R(s),v=R(u),D=R(c),I=R(s),P((C=t((m=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return t=e.call.apply(e,[this].concat(a))||this,o(t,"languageZhLabel",C,i(t)),o(t,"languageEnLabel",A,i(t)),o(t,"dotNode",G,i(t)),o(t,"spLevelName",H,i(t)),o(t,"lbLevel",w,i(t)),t._callback=null,t._curDotPos=new g,t}n(t,e);var a=t.prototype;return a.show=function(e){this._initLanguage(),this._callback=e,this.lbLevel.string="level "+E.instance.playerInfo.highestLevel},a.onBtnSettingClick=function(){p.instance.showDialog("setting/settingPanel",[],(function(){}),f.PRIORITY.DIALOG)},a.onBtnStartClick=function(){L.instance.playSound(f.SOUND.HOME_PANEL_CLICK),b.dispatchEvent(f.EVENT_TYPE.ON_GAME_INIT,(function(){p.instance.hideDialog("home/homePanel")}))},a._initLanguage=function(){var e=this.dotNode.position;N===f.I18_LANGUAGE.ENGLISH?(this._curDotPos.set(27,e.y,e.z),this.dotNode.setPosition(this._curDotPos),this.languageZhLabel.color=z.NONE,this.languageEnLabel.color=z.CHOOSE):(this._curDotPos.set(-27,e.y,e.z),this.dotNode.setPosition(this._curDotPos),this.languageZhLabel.color=z.CHOOSE,this.languageEnLabel.color=z.NONE)},a.changeLanguage=function(){var e,t=this.dotNode.position;N===f.I18_LANGUAGE.CHINESE?(e=f.I18_LANGUAGE.ENGLISH,this._curDotPos.set(27,t.y,t.z),this.dotNode.setPosition(this._curDotPos),this.languageZhLabel.color=z.NONE,this.languageEnLabel.color=z.CHOOSE):(e=f.I18_LANGUAGE.CHINESE,this._curDotPos.set(-27,t.y,t.z),this.dotNode.setPosition(this._curDotPos),this.languageZhLabel.color=z.CHOOSE,this.languageEnLabel.color=z.NONE),d(e),_()},t}(h)).prototype,"languageZhLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(m.prototype,"languageEnLabel",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(m.prototype,"dotNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(m.prototype,"spLevelName",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(m.prototype,"lbLevel",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=m))||S));a._RF.pop()}}}));

System.register("chunks:///_virtual/jetFires.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,s,o,i;return{setters:[function(t){n=t.inheritsLoose,e=t.createClass},function(t){s=t.cclegacy,o=t._decorator,i=t.Component}],execute:function(){var r;s._RF.push({},"20cb3raNbRA/YYlE7ckG1Nj","jetFires",void 0);var c=o.ccclass;o.property,t("JetFires",c("JetFires")(r=function(t){function s(){for(var n,e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return(n=t.call.apply(t,[this].concat(s))||this)._baseInfo=null,n._skillInfo=null,n}n(s,t);var o=s.prototype;return o.start=function(){},o.init=function(t,n,e){this.skillInfo=t,this.baseInfo=n},e(s,[{key:"baseInfo",get:function(){return this._baseInfo},set:function(t){this._baseInfo=t}},{key:"skillInfo",get:function(){return this._skillInfo},set:function(t){this._skillInfo=t}}]),s}(i))||r);s._RF.pop()}}}));

System.register("chunks:///_virtual/joystick.ts",["./rollupPluginModLoBabelHelpers.js","cc","./playerData.ts","./constant.ts","./gameManager.ts","./clientEvent.ts"],(function(t){var i,n,e,o,s,r,a,c,h,u,l,_,g,d,p,v,y;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized,s=t.createClass},function(t){r=t.cclegacy,a=t._decorator,c=t.Enum,h=t.view,u=t.Node,l=t.Vec3,_=t.UITransform,g=t.Component},function(t){d=t.PlayerData},function(t){p=t.Constant},function(t){v=t.GameManager},function(t){y=t.ClientEvent}],execute:function(){var E,f,T,b,C,P,R,L,O,m,S,M,A,F,D,w,k,N,z;r._RF.push({},"ce11cUqRdBM+6FZLQY6qG6q","joystick",void 0);var I=a.ccclass,U=a.property,W=c({DEFAULT:0,FOLLOW:1,FOLLOW_ALWAYS:2,FOLLOW_DOT:3}),H=c({FOUR:4,EIGHT:8,ALL:0}),x=h.getVisibleSize().height;t("Joystick",(E=I("Joystick"),f=U({type:u,displayName:"摇杆背景节点"}),T=U({type:u,displayName:"摇杆节点"}),b=U({type:W,displayName:"触摸类型"}),C=U({type:H,displayName:"方向类型"}),P=U({displayName:"启动半透明"}),R=U({displayName:"点击跟随"}),L=U({displayName:"内圈大小"}),O=U(u),E((M=i((S=function(t){function i(){for(var i,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return i=t.call.apply(t,[this].concat(s))||this,e(i,"ndRing",M,o(i)),e(i,"ndDot",A,o(i)),e(i,"touchType",F,o(i)),e(i,"directionType",D,o(i)),e(i,"isEnableTransparent",w,o(i)),e(i,"isFollowStart",k,o(i)),e(i,"innerSize",N,o(i)),e(i,"ndTip",z,o(i)),i._angle=0,i._oriRingPos=null,i._targetRingPos=new l,i._touchStartLocation=new l,i._touchMoveLocation=new l,i._touchEndLocation=new l,i._isOutInnerSize=!1,i._distanceRate=0,i._checkInterval=.04,i._oldAngle=0,i._currentTime=0,i._oriDotPos=new l,i._movePos=new l,i._curRingPos_1=new l,i._curRingPos_2=new l,i._onClickCb=null,i._onEndCb=null,i._clearFECb=null,i._onBeginFECb=null,i._onSuccessFECb=null,i._isMoving=!1,i}n(i,t);var r=i.prototype;return r.start=function(){d.instance.playerInfo.level>1&&this.ndTip.active&&(this.ndTip.active=!1)},r.onEnable=function(){this.node.on(u.EventType.TOUCH_START,this._touchStartEvent,this),this.node.on(u.EventType.TOUCH_MOVE,this._touchMoveEvent,this),this.node.on(u.EventType.TOUCH_END,this._touchEndEvent,this),this.node.on(u.EventType.TOUCH_CANCEL,this._touchEndEvent,this)},r.onDisable=function(){this.node.off(u.EventType.TOUCH_START,this._touchStartEvent,this),this.node.off(u.EventType.TOUCH_MOVE,this._touchMoveEvent,this),this.node.off(u.EventType.TOUCH_END,this._touchEndEvent,this),this.node.off(u.EventType.TOUCH_CANCEL,this._touchEndEvent,this),this.isMoving=!1,this.ndDot.setPosition(this._oriDotPos),this._oriRingPos&&this.ndRing.setPosition(this._oriRingPos)},r._touchStartEvent=function(t){var i;this._targetRingPos=null;var n=t.getUILocation();this._touchStartLocation.set(n.x,n.y,0);var e=null==(i=this.node.getComponent(_))?void 0:i.convertToNodeSpaceAR(this._touchStartLocation);if(this._oriRingPos||(this._oriRingPos=this.ndRing.getPosition().clone()),this._isOutInnerSize=!1,!this.isFollowStart){var o,s,r=(e=null==(o=this.ndRing.getComponent(_))?void 0:o.convertToNodeSpaceAR(this._touchStartLocation)).length();return(null==(s=this.ndRing.getComponent(_))?void 0:s.contentSize.width)/2>r&&(this.ndDot.setPosition(e),this._updateAngle(e),!0)}this.touchType===W.FOLLOW&&(e.y=e.y>=-x/6?-x/6:e.y),this.ndRing.setPosition(e)},r._touchMoveEvent=function(t){var i,n,e=t.getUILocation();this._touchMoveLocation.set(e.x,e.y,0);var o=null==(i=this.ndRing.getComponent(_))?void 0:i.convertToNodeSpaceAR(this._touchMoveLocation),s=o.length();s>this.innerSize?(this.isMoving=!0,this._isOutInnerSize=!0):this._isOutInnerSize=!1,!v.isGameStart&&this.isMoving&&(v.isGameStart=!0,y.dispatchEvent(p.EVENT_TYPE.MONSTER_MOVE),this.ndTip.active&&(this.ndTip.active=!1),this._currentTime=this._checkInterval);var r=(null==(n=this.ndRing.getComponent(_))?void 0:n.contentSize.width)/2,a=0;if(r>s)a=Number((s/r).toFixed(3)),this.ndDot.setPosition(o);else if(this.touchType!==W.FOLLOW_DOT){a=1;var c=Math.atan2(o.y,o.x),h=Math.cos(c)*r,u=Math.sin(c)*r;if(this._movePos.set(h,u,0),this.touchType===W.FOLLOW_ALWAYS){var l;this._curRingPos_2.set(e.x-h,e.y-u,0);var g=null==(l=this.node.getComponent(_))?void 0:l.convertToNodeSpaceAR(this._curRingPos_2);this._targetRingPos=g}this.ndDot.setPosition(this._movePos)}else this.ndDot.setPosition(o);this._updateAngle(o),this._distanceRate=a},r._touchEndEvent=function(t){if(this.isMoving){var i,n=t.getUILocation();this._touchEndLocation.set(n.x,n.y,0);var e=!1;(null==(i=this.ndRing.getComponent(_))?void 0:i.convertToNodeSpaceAR(this._touchEndLocation)).length()<this.innerSize?(e=!0,this.onEndCb&&this.onEndCb(e)):this.onEndCb&&this.onEndCb(e)}else this.onClickCb&&this.onClickCb();this.isMoving=!1,this.ndDot.setPosition(this._oriDotPos),this.touchType!==W.FOLLOW&&this.touchType!==W.FOLLOW_ALWAYS&&this.touchType!==W.FOLLOW_DOT||(this._targetRingPos=null,this.ndRing.setPosition(this._oriRingPos))},r._updateAngle=function(t){return this._angle=Math.round(180*Math.atan2(t.y,t.x)/Math.PI),this._angle},r.reset=function(){this.isMoving=!1,this.ndDot.setPosition(this._oriDotPos)},r.update=function(t){v.isGameStart&&!v.isGameOver&&!v.isGamePause&&v.scriptPlayer&&(this._targetRingPos&&(this._curRingPos_1.set(0,0,0),l.lerp(this._curRingPos_1,this.ndRing.position,this._targetRingPos,20*t),this.ndRing.setPosition(this._curRingPos_1)),this._currentTime+=t,this._currentTime>=this._checkInterval&&(this._currentTime=0,this.isMoving?this.angle!==this._oldAngle&&(this._oldAngle=this.angle,v.scriptPlayer.playAction({action:p.PLAYER_ACTION.MOVE,value:this.angle})):(this.isMoving=!1,v.scriptPlayer.isMoving&&v.scriptPlayer.playAction({action:p.PLAYER_ACTION.STOP_MOVE}))))},s(i,[{key:"onClickCb",get:function(){return this._onClickCb},set:function(t){this._onClickCb=t}},{key:"onEndCb",get:function(){return this._onEndCb},set:function(t){this._onEndCb=t}},{key:"clearFECb",get:function(){return this._clearFECb},set:function(t){this._clearFECb=t}},{key:"onBeginFECb",get:function(){return this._onBeginFECb},set:function(t){this._onBeginFECb=t}},{key:"onSuccessFECb",get:function(){return this._onSuccessFECb},set:function(t){this._onSuccessFECb=t}},{key:"isMoving",get:function(){return this._isMoving},set:function(t){this._isMoving=t}},{key:"distanceRate",get:function(){return this._distanceRate}},{key:"angle",get:function(){return this._angle},set:function(t){this._angle=t}}]),i}(g)).prototype,"ndRing",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(S.prototype,"ndDot",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=i(S.prototype,"touchType",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return W.DEFAULT}}),D=i(S.prototype,"directionType",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return H.ALL}}),w=i(S.prototype,"isEnableTransparent",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k=i(S.prototype,"isFollowStart",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),N=i(S.prototype,"innerSize",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),z=i(S.prototype,"ndTip",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=S))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageData.ts",["cc"],(function(e){var a,n;return{setters:[function(e){a=e.cclegacy,n=e.director}],execute:function(){e({init:r,t:function(e){var a=window;if(!a.languages)return e;for(var n=e.split("."),r=a.languages[t],o=0;o<n.length;o++)if(!(r=r[n[o]]))return"";return r||""},updateSceneRenderers:o}),a._RF.push({},"b3f01X4Ik5LEbIPKXZr3JWD","LanguageData",void 0);var t=e("_language","zh");e("ready",!1);function r(a){e("ready",!0),t=e("_language",a)}function o(){for(var e=n.getScene().children,a=[],t=[],r=[],o=0;o<e.length;++o){var i=e[o].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(a,i);var u=e[o].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(t,u);var p=e[o].getComponentsInChildren("LocalizedMaterial");Array.prototype.push.apply(r,p)}for(var g=0;g<a.length;++g){var l=a[g];l.node.active&&l.updateLabel()}for(var c=0;c<t.length;++c){var d=t[c];d.node.active&&d.updateSprite()}for(var v=0;v<r.length;++v){var s=r[v];s.node.active&&s.updateMat()}}window._languageData={get language(){return t},init:function(e){r(e)},updateSceneRenderers:function(){o()}},a._RF.pop()}}}));

System.register("chunks:///_virtual/laser.ts",["./rollupPluginModLoBabelHelpers.js","cc","./effectManager.ts","./constant.ts","./audioManager.ts"],(function(n){var t,e,i,s,r,o,c,a;return{setters:[function(n){t=n.inheritsLoose,e=n.createClass},function(n){i=n.cclegacy,s=n._decorator,r=n.Component},function(n){o=n.EffectManager},function(n){c=n.Constant},function(n){a=n.AudioManager}],execute:function(){var l;i._RF.push({},"504049FuYdEFIRZxBEBstqp","laser",void 0);var u=s.ccclass;s.property,n("Laser",u("Laser")(l=function(n){function i(){for(var t,e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return(t=n.call.apply(n,[this].concat(i))||this)._baseInfo=null,t._skillInfo=null,t._timer=null,t._scriptWarning=null,t}t(i,n);var s=i.prototype;return s.start=function(){},s.init=function(n,t,e){var i=this;this.skillInfo=n,this.baseInfo=t,this.node.active=!1,this._closeTimer(),this._timer=setTimeout((function(){if(e.isDie)i._closeTimer();else{var t;a.instance.playSound(c.SOUND.LASER),i.node.active=!0,null==e||null==(t=e.scriptWarning)||t.hideWarning();var s={ndEffect:i.node,speed:n.flySpeed,isRecycle:!0};o.instance.playParticle(s).then((function(){i._closeTimer()}))}}),400)},s._closeTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},e(i,[{key:"baseInfo",get:function(){return this._baseInfo},set:function(n){this._baseInfo=n}},{key:"skillInfo",get:function(){return this._skillInfo},set:function(n){this._skillInfo=n}},{key:"scriptWarning",get:function(){return this._scriptWarning},set:function(n){this._scriptWarning=n}}]),i}(r))||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/loadingPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constant.ts","./uiManager.ts","./clientEvent.ts","./gameManager.ts"],(function(i){var n,e,t,o,a,l,s,r,u,d,h,c,_;return{setters:[function(i){n=i.applyDecoratedDescriptor,e=i.inheritsLoose,t=i.initializerDefineProperty,o=i.assertThisInitialized},function(i){a=i.cclegacy,l=i._decorator,s=i.Node,r=i.AnimationComponent,u=i.Component},function(i){d=i.Constant},function(i){h=i.UIManager},function(i){c=i.ClientEvent},function(i){_=i.GameManager}],execute:function(){var g,p,f,C,b,m,v;a._RF.push({},"951bd+IBg9Bz438MxpTOrH1","loadingPanel",void 0);var P=l.ccclass,E=l.property;i("LoadingPanel",(g=P("LoadingPanel"),p=E(s),f=E(r),g((m=n((b=function(i){function n(){for(var n,e=arguments.length,a=new Array(e),l=0;l<e;l++)a[l]=arguments[l];return n=i.call.apply(i,[this].concat(a))||this,t(n,"blackNode",m,o(n)),t(n,"aniCloud",v,o(n)),n._isShowOver=!1,n._isNeedHide=!1,n._showCb=null,n._hideCb=null,n}e(n,i);var a=n.prototype;return a.onEnable=function(){c.on(d.EVENT_TYPE.HIDE_LOADING_PANEL,this._hideLoadingPanel,this)},a.onDisable=function(){c.off(d.EVENT_TYPE.HIDE_LOADING_PANEL,this._hideLoadingPanel,this)},a.show=function(i){this.blackNode.active=!0,this._isShowOver=!1,this._isNeedHide=!1,this._hideCb=null,this._showCb=i,this._showLoadingPanel()},a._hideLoadingPanel=function(i){var n=this;this._hideCb=i,this._isNeedHide=!0,this._isShowOver&&(_.scriptGameCamera.resetCamera(),this.blackNode.active=!1,this._hideCb&&this._hideCb(),this.aniCloud.getState("cloudAnimationOut").time=0,this.aniCloud.getState("cloudAnimationOut").sample(),this.aniCloud.play("cloudAnimationOut"),this.aniCloud.once(r.EventType.FINISHED,(function(){h.instance.hideDialog("loading/loadingPanel"),h.instance.showDialog("fight/fightPanel",[n])})))},a._showLoadingPanel=function(){var i=this;this.aniCloud.getState("cloudAnimationIn").time=0,this.aniCloud.getState("cloudAnimationIn").sample(),this.aniCloud.play("cloudAnimationIn"),this.aniCloud.once(r.EventType.FINISHED,(function(){i._showCb&&i._showCb(),i._isShowOver=!0,i._isNeedHide&&i._hideLoadingPanel(i._hideCb)}))},n}(u)).prototype,"blackNode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=n(b.prototype,"aniCloud",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=b))||C));a._RF.pop()}}}));

System.register("chunks:///_virtual/localConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./csvManager.ts","./resourceUtil.ts"],(function(n){var t,e,a,r,i,c;return{setters:[function(n){t=n.createClass},function(n){e=n.cclegacy,a=n._decorator,r=n.resources},function(n){i=n.CSVManager},function(n){c=n.ResourceUtil}],execute:function(){var o,s;e._RF.push({},"12facSZhFRGIYa7yxiLVDOp","localConfig",void 0);var u=a.ccclass;a.property,n("LocalConfig",u("LocalConfig")(((s=function(){function n(){this._csvManager=new i,this._callback=new Function,this._currentLoad=0,this._cntLoad=0}var e=n.prototype;return e.loadConfig=function(n){this._callback=n,this._loadCSV()},e._loadCSV=function(){var n=this;r.loadDir("datas",(function(t,e){if(!t){var a=e.filter((function(n){return".md"!==n._native}));n._cntLoad=a.length,a.length?a.forEach((function(t,e,a){c.getTextData(t.name).then((function(e){n._csvManager.addTable(t.name,e),n._tryToCallbackOnFinished()}))})):n._tryToCallbackOnFinished()}}))},e.queryOne=function(n,t,e){return this._csvManager.queryOne(n,t,e)},e.queryByID=function(n,t){return this._csvManager.queryByID(n,t)},e.getTable=function(n){return this._csvManager.getTable(n)},e.getTableArr=function(n){return this._csvManager.getTableArr(n)},e.queryAll=function(n,t,e){return this._csvManager.queryAll(n,t,e)},e.queryIn=function(n,t,e){return this._csvManager.queryIn(n,t,e)},e.queryByCondition=function(n,t){return this._csvManager.queryByCondition(n,t)},e._tryToCallbackOnFinished=function(){this._callback&&(this._currentLoad++,this._currentLoad>=this._cntLoad&&this._callback())},t(n,null,[{key:"instance",get:function(){return this._instance||(this._instance=new n),this._instance}}]),n}())._instance=void 0,o=s))||o);e._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizedLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts"],(function(e){var t,i,n,r,a,o,l,c,u,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Component},function(e){c=e.ready,u=e.init,s=e.t}],execute:function(){var p,d,f;a._RF.push({},"edf98QH2D1AUoCrtQlbxFrU","LocalizedLabel",void 0);var h=o.ccclass,b=o.property,L=o.executeInEditMode;e("LocalizedLabel",h("LocalizedLabel")(p=L((f=t((d=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).label=null,n(t,"key",f,r(t)),t}i(t,e);var a=t.prototype;return a.onLoad=function(){c||u("zh"),this.fetchRender()},a.fetchRender=function(){var e=this.getComponent("cc.Label");if(e)return this.label=e,void this.updateLabel()},a.updateLabel=function(){this.label&&(this.label.string=s(this.key))},t}(l)).prototype,"key",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=d))||p)||p);a._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizedMaterial.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts"],(function(e){var t,i,a,r,n,l,o,s,u,c,h,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty,a=e.inheritsLoose,r=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,o=e.Material,s=e.MeshRenderer,u=e.Component},function(e){c=e.ready,h=e.init,p=e._language}],execute:function(){var f,d,g,m,L,y,v,z,M,b,R;n._RF.push({},"35069qDXPFL47Ep1p+WLvRd","LocalizedMaterial",void 0);var D=l.ccclass,_=l.property,w=l.executeInEditMode,F=(f=D("LocalizedMaterialItem"),d=_({type:o}),f((L=t((m=function(){i(this,"language",L,this),i(this,"material",y,this)}).prototype,"language",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"zh"}}),y=t(m.prototype,"material",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=m))||g);e("LocalizedMaterial",(v=D("LocalizedMaterial"),z=_({type:F}),v(M=w((R=t((b=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),l=0;l<a;l++)n[l]=arguments[l];return(t=e.call.apply(e,[this].concat(n))||this).mesh=null,i(t,"materialsList",R,r(t)),t}a(t,e);var n=t.prototype;return n.onLoad=function(){c||h("zh"),this.fetchRender()},n.fetchRender=function(){var e=this.getComponent(s);if(e)return this.mesh=e,void this.updateMat()},n.updateMat=function(){for(var e=0;e<this.materialsList.length;e++){var t=this.materialsList[e];t.language===p&&this.mesh&&this.mesh.setMaterial(t.material,0)}},t}(u)).prototype,"materialsList",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=b))||M)||M));n._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizedSprite.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts"],(function(e){var t,i,r,n,a,o,p,s,c,u,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty,r=e.inheritsLoose,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,p=e.SpriteFrame,s=e.Component},function(e){c=e.ready,u=e.init,l=e._language}],execute:function(){var f,h,d,g,y,z,L,m,b,v,S;a._RF.push({},"c05c25C4xNAupWYMB93tIzp","LocalizedSprite",void 0);var F=o.ccclass,_=o.property,w=o.executeInEditMode,D=(f=F("LocalizedSpriteItem"),h=_({type:p}),f((y=t((g=function(){i(this,"language",y,this),i(this,"spriteFrame",z,this)}).prototype,"language",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"zh"}}),z=t(g.prototype,"spriteFrame",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=g))||d);e("LocalizedSprite",(L=F("LocalizedSprite"),m=_({type:D}),L(b=w((S=t((v=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).sprite=null,i(t,"spriteList",S,n(t)),t}r(t,e);var a=t.prototype;return a.onLoad=function(){c||u("zh"),this.fetchRender()},a.fetchRender=function(){var e=this.getComponent("cc.Sprite");if(e)return this.sprite=e,void this.updateSprite()},a.updateSprite=function(){for(var e=0;e<this.spriteList.length;e++){var t=this.spriteList[e];if(t.language===l){this.sprite.spriteFrame=t.spriteFrame;break}}},t}(s)).prototype,"spriteList",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=v))||b)||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/lodash.ts",["cc"],(function(r){var n,t;return{setters:[function(r){n=r.cclegacy,t=r._decorator}],execute:function(){var e,u;n._RF.push({},"a40a4pGR6lCqo0coR1W4kAl","lodash",void 0);var i=t.ccclass;r("Lodash",i("Lodash")(((u=function(){function r(){}return r.find=function(n,t){var e;if(Array.isArray(n)||(n=r._toArray(n)),(e=n.filter(t)).length)return e[0]},r.forEach=function(n,t){Array.isArray(n)?n.forEach(t):r._toArrayKey(n).forEach((function(r,e,u){var i=r.key,o=r.value;t(o,i,n)}))},r.cloneDeep=function(n){if(null===n||"object"!=typeof n)return n;var t={};for(var e in n.constructor===Array&&(t=[]),n)n.hasOwnProperty(e)&&(t[e]=r.cloneDeep(n[e]));return t},r.map=function(n,t){Array.isArray(n)||(n=r._toArray(n));var e=[];return n.forEach((function(r,n,u){e.push(t(r,n,u))})),e},r._toArrayKey=function(r){var n=[];for(var t in r)r.hasOwnProperty(t)&&n.push({key:t,value:r[t]});return n},r._toArray=function(r){var n=[];for(var t in r)r.hasOwnProperty(t)&&n.push(r[t]);return n},r.filter=function(n,t){return Array.isArray(n)||(n=r._toArray(n)),n.filter(t)},r.isEqual=function(n,t){if(!(n instanceof Object)||!(t instanceof Object))return n===t;if(Object.keys(n).length!==Object.keys(t).length)return!1;for(var e in n){var u=n[e]instanceof Object,i=t[e]instanceof Object;if(u&&i)return r.isEqual(n[e],t[e]);if(n[e]!==t[e])return!1}return!0},r.pullAllWith=function(r,n,t){return n.forEach((function(n){r.filter((function(r){return t(r,n)})).forEach((function(n){var t=r.indexOf(n);-1!==r.indexOf(n)&&r.splice(t,1)}))})),r},r.now=function(){return Date.now()},r.pullAll=function(r,n){return n.forEach((function(n){var t=r.indexOf(n);-1!==r.indexOf(n)&&r.splice(t,1)})),r},r.forEachRight=function(n,t){Array.isArray(n)||(n=r._toArray(n));for(var e=n.length-1;e>=0;e--){if(!t(n[e]))break}},r.startsWith=function(r,n,t){return(r=r.substr(t)).startsWith(n)},r.endsWith=function(r,n,t){return(r=r.substr(t)).endsWith(n)},r.remove=function(n,t){var e=[],u=[];return n.forEach((function(r,n){t(r)&&(e.push(r),u.push(n))})),r._basePullAt(n,u),e},r._basePullAt=function(r,n){for(var t,e=r?n.length:0,u=e-1;e--;){var i=n[e];e!==u&&i===t||(t=i,Array.prototype.splice.call(r,i,1))}return r},r.findIndex=function(r,n,t){var e;if(r=r.slice(t),"function"==typeof n){for(e=0;e<r.length;e++)if(n(r[e]))return e}else if(Array.isArray(n))for(e=0;e<r.length;e++){var u=n[0],i=!0;if(n.length>1&&(i=n[1]),r[e][u]===i)return e}else for(e=0;e<r.length;e++)if(r[e]===n)return e;return-1},r.concat=function(){var r=arguments.length;if(!r)return[];for(var n=arguments[0],t=1;t<r;)n=n.concat(arguments[t]),t++;return n},r.isNumber=function(r){return"number"==typeof r},r.indexOf=function(r,n,t){return(r=r.slice(t)).indexOf(n)},r.join=function(r,n){if(null===r)return"";var t="";return r.forEach((function(r){t+=r+n})),t.substr(0,t.length-1)},r.split=function(r,n,t){return r.split(n,t)},r.max=function(r){if(r&&r.length){for(var n,t=0;t<r.length;t++)0===t?n=r[0]:n<r[t]&&(n=r[t]);return n}},r.drop=function(r,n){return(null===r?0:r.length)?r.slice(n):[]},r.flattenDeep=function(n){return n.reduce((function(n,t){return n.concat(Array.isArray(t)?r.flattenDeep(t):t)}),[])},r.uniq=function(r){var n=[];return r.forEach((function(r){-1===n.indexOf(r)&&n.push(r)})),n},r.isNaN=function(n){return r.isNumber(n)&&n!==+n},r.chunk=function(r,n){if(!(null===r?0:r.length)||n<1)return[];for(var t=[];r.length>n;)t.push(r.slice(0,n)),r=r.slice(n);return t.push(r),t},r.toFinite=function(r){var n=1/0;return r?(r=Number(r))===n||r===-1/0?17976931348623157e292*(r<0?-1:1):r==r?r:0:0===r?r:0},r.isObject=function(r){var n=typeof r;return null!==r&&("object"===n||"function"===n)},r.isLength=function(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=r.MAX_SAFE_INTEGER},r._isArrayLike=function(n){return null!==n&&r.isLength(n.length)},r.maxBy=function(r,n){if(r&&r.length){for(var t,e,u=0;u<r.length;u++)0===u?(t=n(r[0]),e=r[0]):t<r[u]&&(t=r[u],e=r[u]);return e}},r.minBy=function(r,n){if(r&&r.length){for(var t,e,u=0;u<r.length;u++)0===u?(t=n(r[0]),e=r[0]):t>r[u]&&(t=n(r[u]),e=r[u]);return e}},r.sumBy=function(r,n){var t=0;for(var e in r)t+=n(r[e]);return t},r.countBy=function(r,n){var t={};for(var e in r){var u=n(e);t.hasOwnProperty(u)?t[u]+=1:t[u]=1}return t},r}()).MAX_SAFE_INTEGER=9007199254740991,e=u))||e);n._RF.pop()}}}));

System.register("chunks:///_virtual/login.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constant.ts","./LanguageData.ts"],(function(n){var t,i,o,e,r,a,c,s,u,l,f,g;return{setters:[function(n){t=n.applyDecoratedDescriptor,i=n.inheritsLoose,o=n.initializerDefineProperty,e=n.assertThisInitialized},function(n){r=n.cclegacy,a=n._decorator,c=n.Node,s=n.director,u=n.assetManager,l=n.Component},function(n){f=n.Constant},function(n){g=n.init}],execute:function(){var p,d,h,v,y;r._RF.push({},"9fc5fQI+hNKNpFq7t/f/YIY","login",void 0);var L=a.ccclass,_=a.property;n("Login",(p=L("Login"),d=_(c),p((y=t((v=function(n){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=n.call.apply(n,[this].concat(r))||this,o(t,"ndCanvas",y,e(t)),t}i(t,n);var r=t.prototype;return r._initLanguage=function(n){n||(n=f.I18_LANGUAGE.CHINESE),g(n)},r.start=function(){this._initLanguage(),console.log("login"),s.addPersistRootNode(this.ndCanvas),f.LOGIN_TIME=Date.now();var n=[];window.wx?(["resources","main"].forEach((function(t){var i=new Promise((function(n,i){u.loadBundle(t,(function(t,o){if(t)return i(t);n(o)}))}));n.push(i)})),Promise.all(n).then((function(){s.loadScene("fight",(function(){}),(function(){}))}))):s.loadScene("fight",(function(){}),(function(){}))},t}(l)).prototype,"ndCanvas",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=v))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./migrate-canvas.ts","./arrow.ts","./boss.ts","./characterRigid.ts","./colliderItem.ts","./gameCamera.ts","./gameManager.ts","./mapManager.ts","./monster.ts","./monsterModel.ts","./monsterSkillCollider.ts","./dispersion.ts","./dispersionSurround.ts","./energyBall.ts","./fireBall.ts","./fireBallBig.ts","./jetFires.ts","./laser.ts","./tornado.ts","./player.ts","./playerModel.ts","./reward.ts","./test.ts","./warningCircle.ts","./warningLine.ts","./warningStrip.ts","./audioManager.ts","./clientEvent.ts","./btn_adapter.ts","./constant.ts","./csvManager.ts","./effectManager.ts","./localConfig.ts","./lodash.ts","./playerData.ts","./poolManager.ts","./resourceUtil.ts","./sdkUtil.ts","./storageManager.ts","./uiManager.ts","./util.ts","./cocosAnalytics.min.mjs_cjs=&original=.js","./login.ts","./main.ts","./backPanel.ts","./fightTip.ts","./tips.ts","./debugLevelItem.ts","./debugPanel.ts","./debugSkillItem.ts","./bossBloodBar.ts","./fightPanel.ts","./monsterBloodBar.ts","./playerBloodBar.ts","./homePanel.ts","./loadingPanel.ts","./pausePanel.ts","./skillIcon.ts","./skillList.ts","./revivePanel.ts","./settingPanel.ts","./settlementPanel.ts","./shopItem.ts","./shopPanel.ts","./skillItem.ts","./skillPanel.ts","./camera.ts","./joystick.ts","./LanguageData.ts","./LocalizedLabel.ts","./LocalizedMaterial.ts","./LocalizedSprite.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/main.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts","./gameManager.ts","./constant.ts","./playerData.ts","./storageManager.ts","./localConfig.ts","./util.ts","./sdkUtil.ts","./uiManager.ts"],(function(n){var t,a,e,o,i,s,c,r,l,u,f,g,d,h,m,p,y,M,D;return{setters:[function(n){t=n.inheritsLoose},function(n){a=n.cclegacy,e=n._decorator,o=n.game,i=n.PhysicsSystem,s=n.profiler,c=n.sys,r=n.Game,l=n.find,u=n.Component},function(n){f=n.AudioManager},function(n){g=n.GameManager},function(n){d=n.Constant},function(n){h=n.PlayerData},function(n){m=n.StorageManager},function(n){p=n.LocalConfig},function(n){y=n.Util},function(n){M=n.SdkUtil},function(n){D=n.UIManager}],execute:function(){var I;a._RF.push({},"3fbc8GNGL5CfZ4It+SsZdpq","main",void 0);var v=e.ccclass;e.property,n("Main",v("Main")(I=function(n){function a(){for(var t,a=arguments.length,e=new Array(a),o=0;o<a;o++)e[o]=arguments[o];return(t=n.call.apply(n,[this].concat(e))||this)._minLoadDuration=4,t}t(a,n);var e=a.prototype;return e.start=function(){var n,t=this,a=m.instance.getGlobalData("frameRate");"number"!=typeof a&&(a=d.GAME_FRAME,window.wx&&y.checkIsLowPhone()&&(a=30),m.instance.setGlobalData("frameRate",a)),console.log("###frameRate",a),o.frameRate=a,i.instance.fixedTimeStep=1/a,!0===(null!=(n=m.instance.getGlobalData("debug"))&&n)?s.showStats():s.hideStats(),window.cocosAnalytics&&window.cocosAnalytics.init({appID:"605630324",version:"1.0.0",storeID:c.platform.toString(),engine:"cocos"}),h.instance.loadGlobalCache(),h.instance.userId||(h.instance.generateRandomAccount(),console.log("###生成随机userId",h.instance.userId)),h.instance.loadFromCache(),h.instance.playerInfo&&h.instance.playerInfo.createDate||h.instance.createPlayerInfo(),p.instance.loadConfig((function(){M.shareGame(d.GAME_NAME_CH,""),t._loadFinish()})),f.instance.init(),o.on(r.EVENT_HIDE,(function(){h.instance.settings||(h.instance.settings={}),h.instance.settings.hideTime=Date.now(),h.instance.saveAll(),m.instance.save()}))},e._loadFinish=function(){g.isFirstLoad=!0,this.scheduleOnce((function(){D.instance.showDialog("home/homePanel",[],(function(){var n;null==(n=l("CanvasLogin"))||n.destroy(),console.log("###开屏界面展示时长",Date.now()-d.LOGIN_TIME)}))}),this._minLoadDuration)},a}(u))||I);a._RF.pop()}}}));

System.register("chunks:///_virtual/mapManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constant.ts","./monster.ts","./boss.ts","./localConfig.ts","./resourceUtil.ts","./gameManager.ts","./clientEvent.ts","./audioManager.ts","./poolManager.ts"],(function(e){var n,t,o,a,r,i,s,l,c,p,u,d,_,h,M,f,m,A;return{setters:[function(e){n=e.inheritsLoose,t=e.createClass},function(e){o=e.cclegacy,a=e._decorator,r=e.Vec3,i=e.Component,s=e.isValid,l=e.PhysicsSystem,c=e.Node},function(e){p=e.Constant},function(e){u=e.Monster},function(e){d=e.Boss},function(e){_=e.LocalConfig},function(e){h=e.ResourceUtil},function(e){M=e.GameManager},function(e){f=e.ClientEvent},function(e){m=e.AudioManager},function(e){A=e.PoolManager}],execute:function(){var g,y;o._RF.push({},"d3b32wEGk5A9ptwhpJ6lghY","mapManager",void 0);var v=a.ccclass;a.property,e("MapManager",v("MapManager")(((y=function(e){function o(){for(var n,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return(n=e.call.apply(e,[this].concat(o))||this)._ndAn=null,n._ndAnS=null,n._warpGateWorPos_1=new r(16.414,1.635,-.804),n._warpGateWorPos_2=new r(34.61,1.635,-20),n._ndWarpGate=null,n._completeListener=null,n._arrItem=[],n._arrMap=[],n._dictModuleType=void 0,n}n(o,e);var a=o.prototype;return a.onEnable=function(){f.on(p.EVENT_TYPE.SHOW_WARP_GATE,this._showWarpGate,this)},a.onDisable=function(){f.off(p.EVENT_TYPE.SHOW_WARP_GATE,this._showWarpGate,this)},a.start=function(){},a.buildMap=function(e,n,t){var a=this;this._completeListener=t,this._dictModuleType={},this._arrItem=[],this._arrMap=[],this._arrMap=_.instance.getTableArr(e).concat();var r=function(){e.startsWith("map1")?(a._ndAn&&(a._ndAn.active=!1),a._ndAnS&&(a._ndAnS.active=!0),o.isMapAnS=!0):(a._ndAn&&(a._ndAn.active=!0),a._ndAnS&&(a._ndAnS.active=!1),o.isMapAnS=!1),s(a._ndWarpGate)&&(l.PHYSICS_PHYSX?a._ndWarpGate.destroy():A.instance.putNode(a._ndWarpGate));for(var n=a._arrMap.length-1;n>=0;n--){var t=a._arrMap[n],r=_.instance.queryByID("base",t.ID);a._dictModuleType.hasOwnProperty(r.type)||(a._dictModuleType[r.type]=[]),a._dictModuleType[r.type].push(t)}var i=[];for(var c in a._dictModuleType){a._dictModuleType[c].length&&i.push(a._buildModel(c))}Promise.all(i).then((function(){a._completeListener&&a._completeListener(),console.log("load "+e+" over")})).catch((function(e){console.error("load item module err",e)}))};e.startsWith("map0")&&!this._ndAn?h.loadModelRes("scene/an").then((function(e){a._ndAn=A.instance.getNode(e,a.node.parent),r()})):e.startsWith("map1")&&!this._ndAnS?h.loadModelRes("scene/anS").then((function(e){a._ndAnS=A.instance.getNode(e,a.node.parent),r()})):r()},a._buildModel=function(e){var n=this;return new Promise((function(t,o){var a=[],i=n._dictModuleType[e];n._dictModuleType[e]=[];for(var s=function(){var t=i[l],o=_.instance.queryByID("base",t.ID),s=e+"/"+o.resName,f=h.loadModelRes(s).then((function(a){var i=e+"Group",s=n.node.getChildByName(i);s||((s=new c(i)).parent=n.node);var l=A.instance.getNode(a,s),_=t.position?t.position.split(","):o.position.split(","),h=t.angle?t.angle.split(","):o.angle.split(","),f=t.scale?t.scale.split(","):o.scale.split(",");(l.setPosition(new r(Number(_[0]),Number(_[1]),Number(_[2]))),l.eulerAngles=new r(Number(h[0]),Number(h[1]),Number(h[2])),l.setScale(new r(Number(f[0]),Number(f[1]),Number(f[2]))),o.type===p.BASE_TYPE.MONSTER)?((null==l?void 0:l.getComponent(u)).init(o,t),M.arrMonster.push(l)):o.type===p.BASE_TYPE.BOSS?(M.arrMonster.push(l),M.ndBoss=l,M.scriptBoss=null==l?void 0:l.getComponent(d),M.scriptBoss.init(o,t)):(o.type===p.BASE_TYPE.NPC||o.type===p.BASE_TYPE.HEART)&&(M.existentNum+=1);n._arrItem.push(l)}));a.push(f)},l=0;l<i.length;l++)s();Promise.all(a).then((function(){t(null)})).catch((function(e){console.error("e",e)}))}))},a.recycle=function(){for(var e=0;e<this._arrItem.length;e++){var n=this._arrItem[e];this._recycleModel(n)}this.node.removeAllChildren()},a._recycleModel=function(e){A.instance.putNode(e)},a._showWarpGate=function(){var e=this;h.loadModelRes("warpGate/warpGate").then((function(n){e._ndWarpGate=A.instance.getNode(n,e.node.parent),m.instance.playSound(p.SOUND.SHOW_WRAP_GATE),e._ndAn&&e._ndAn.active?e._ndWarpGate.setWorldPosition(e._warpGateWorPos_1):e._ndWarpGate.setWorldPosition(e._warpGateWorPos_2)}))},t(o,null,[{key:"isMapAnS",get:function(){return this._isMapAnS},set:function(e){this._isMapAnS=e}}]),o}(i))._isMapAnS=!1,g=y))||g);o._RF.pop()}}}));

System.register("chunks:///_virtual/migrate-canvas.ts",["cc"],(function(){var n,e,t,i,r,o;return{setters:[function(a){n=a.cclegacy,e=a.director,t=a.Director,i=a.Canvas,r=a.Camera,o=a.game}],execute:function(){n._RF.push({},"7bb93gANKpA/5QU2qBaDZjt","migrate-canvas",void 0);var a=1048575;function c(n,e){for(var t=0,i=n.children.length;t<i;t++)n.children[t].layer=e,c(n.children[t],e)}e.on(t.EVENT_AFTER_SCENE_LAUNCH,(function(){var n,t,l,s=null==(n=e.getScene())?void 0:n.children,m=null==(t=e.getScene())?void 0:t.getComponentsInChildren(i);if(!(m.length<=1)){m=m.filter((function(n){return!!n.cameraComponent}));var v=null==(l=e.getScene())?void 0:l.getComponentsInChildren(r),p=0;v.forEach((function(n){return p|=n.visibility&a}));for(var u=[],f=0,C=s.length;f<C;f++){var h=s[f];if(o.isPersistRootNode(h)){var d=h.getComponentsInChildren(i);0!==d.length&&u.push.apply(u,d.filter((function(n){return!!n.cameraComponent})))}}u.forEach((function(n){if(m.find((function(e){return e!==n&&e.cameraComponent.visibility&n.cameraComponent.visibility&a}))){var e=~p,t=e&~(e-1);n.cameraComponent.visibility=t|4293918720&n.cameraComponent.visibility,c(n.node,t),p|=e}}))}}));var l=cc.Node.prototype.setParent;function s(n){var e=null,t=n.getComponent(i);return t&&t.cameraComponent?e=t.cameraComponent.visibility&t.node.layer?t.node.layer:t.cameraComponent.visibility&~(t.cameraComponent.visibility-1):(n.parent&&(e=s(n.parent)),e)}cc.Node.prototype.setParent=function(n,e){if(l.call(this,n,e),n){var t=s(this);t&&(this.layer=t,c(this,t))}},n._RF.pop()}}}));

System.register("chunks:///_virtual/monster.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts","./util.ts","./localConfig.ts","./effectManager.ts","./uiManager.ts","./constant.ts","./gameManager.ts","./clientEvent.ts","./monsterModel.ts","./resourceUtil.ts","./energyBall.ts","./fireBall.ts","./dispersionSurround.ts","./dispersion.ts","./fireBallBig.ts","./tornado.ts","./laser.ts","./characterRigid.ts","./poolManager.ts"],(function(t){var i,e,s,n,o,r,a,l,h,_,c,d,g,u,f,M,p,A,m,P,v,I,y,T,k,E,S,R,w,D,N,O,L;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,s=t.initializerDefineProperty,n=t.assertThisInitialized,o=t.createClass},function(t){r=t.cclegacy,a=t.Quat,l=t.Vec3,h=t._decorator,_=t.Material,c=t.SkinnedMeshRenderer,d=t.tween,g=t.macro,u=t.Component},function(t){f=t.AudioManager},function(t){M=t.Util},function(t){p=t.LocalConfig},function(t){A=t.EffectManager},function(t){m=t.UIManager},function(t){P=t.Constant},function(t){v=t.GameManager},function(t){I=t.ClientEvent},function(t){y=t.MonsterModel},function(t){T=t.ResourceUtil},function(t){k=t.EnergyBall},function(t){E=t.FireBall},function(t){S=t.DispersionSurround},function(t){R=t.Dispersion},function(t){w=t.FireBallBig},function(t){D=t.Tornado},function(t){N=t.Laser},function(t){O=t.CharacterRigid},function(t){L=t.PoolManager}],execute:function(){var B,b,C,W,F,Y,x,z,V;r._RF.push({},"75fe4NpEqNMNZSSj5Z9vDnA","monster",void 0);var H=new a,U=new l,K=h.ccclass,G=h.property;t("Monster",(B=K("Monster"),b=G(_),C=G(_),W=G(c),B((x=i((Y=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return i=t.call.apply(t,[this].concat(o))||this,s(i,"matNormal",x,n(i)),s(i,"matDissolve",z,n(i)),s(i,"skiMeshCom",V,n(i)),i._scriptCharacterRigid=null,i._attackPos=new l,i._attackForward=new l,i._scriptWarning=null,i._curAttackSpeed=0,i._layerInfo=null,i._baseInfo=null,i._skillInfo=null,i._bloodTipDirection=P.BLOOD_TIP_DIRECTION.LEFT_UP,i._scriptBloodBar=null,i._scriptMonsterModel=null,i._isMoving=!1,i._allSkillInfo=null,i._isDie=!1,i._curAttackInterval=0,i._isHitByPlayer=!1,i._isInitBloodBar=!1,i._bloodTipOffsetPos=new l(0,50,0),i._hideBloodCountDown=3,i._hitEffectPos=new l(0,.2,0),i._isAllowToAttack=!1,i._playerMonsterOffset=new l,i._curAngleY=0,i._horizontal=0,i._vertical=0,i._iceDamageCountDown=0,i._fireDamageCountDown=0,i._ndMonsterSkill=null,i._skillIndex=0,i._minLength=3,i._curMoveSpeed=0,i._dissolveData={uEdge:1,time:1},i._moveMode=0,i._movePattern=0,i._moveFrequency=0,i._offsetPos=new l,i._offsetPos_2=new l,i._mixOffset=new l(1,0,1),i._targetWorPos=new l,i._isPlayRotate=!1,i._curAngle=new l,i._curAngle_2=new l,i._tempAngle=new l,i._rotateDirection=new l,i._forWard=new l,i._ndRunSmokeEffect=null,i._originAngle=new l(0,-90,0),i._targetAngle=new l,i._checkInterval=.04,i._currentTime=0,i._ndBody=null,i._curMoveWorPos=new l,i._isArrived=!1,i._checkMoveInterval=0,i._prevMoveWorPos=new l,i._moveUnit=new l,i._minLengthRatio=1.1,i._randomMoveTryTimes=5,i._action=0,i}e(i,t);var r=i.prototype;return r.onEnable=function(){I.on(P.EVENT_TYPE.MONSTER_MOVE,this._monsterMove,this)},r.onDisable=function(){I.off(P.EVENT_TYPE.MONSTER_MOVE,this._monsterMove,this),this.scriptBloodBar&&(this.scriptBloodBar.node.parent&&L.instance.putNode(this.scriptBloodBar.node),this.scriptBloodBar=null),this.recycleWarning(),this._ndMonsterSkill&&(L.instance.putNode(this._ndMonsterSkill),this._ndMonsterSkill=null)},r.start=function(){},r.init=function(t,i){this.baseInfo=t,this.layerInfo=i,this.isDie=!1,this.recycleWarning(),this.skiMeshCom.setMaterial(this.matNormal,0),this._ndBody=this.node.getChildByName("body"),this._scriptMonsterModel=this._ndBody.getComponent(y),this._scriptMonsterModel.playAni(P.MONSTER_ANI_TYPE.IDLE,!0),this.scriptCharacterRigid=this.node.getComponent(O),this.scriptCharacterRigid.stopMove(),this._curAttackInterval=0,this._isHitByPlayer=!1,this._isInitBloodBar=!1,this._isAllowToAttack=!1,this._isArrived=!1,this._checkMoveInterval=0,this._iceDamageCountDown=0,this._fireDamageCountDown=0,this._ndMonsterSkill=null,this._skillIndex=0,this._moveUnit.set(0,0,0),this._movePattern=i.movePattern?i.movePattern:this.baseInfo.movePattern,this._dissolveData.uEdge=1,this.scriptBloodBar=null,this._refreshSkill(),this._scriptMonsterModel.scriptMonster=this,this.curAttackSpeed=this.baseInfo.attackSpeed,this.curMoveSpeed=this.baseInfo.moveSpeed,this._getMinLength()},r._getMinLength=function(){"aula"===this.node.name?(this._minLength=2,this._dissolveData.time=3.33):"boomDragon"===this.node.name?(this._minLength=2,this._dissolveData.time=.87):"hellFire"===this.node.name?(this._minLength=2.5,this._dissolveData.time=1.06):"magician"===this.node.name?(this._minLength=2.5,this._dissolveData.time=.87):"dragon"===this.node.name&&(this._minLength=5,this._dissolveData.time=2)},r._refreshSkill=function(){if(this._allSkillInfo=""===this.layerInfo.skill?[]:this.layerInfo.skill.split("#"),this._allSkillInfo.length){this._skillIndex=this._skillIndex>=this._allSkillInfo.length?0:this._skillIndex;var t=this._allSkillInfo[this._skillIndex];this.skillInfo=p.instance.queryByID("monsterSkill",t),this._skillIndex+=1}},r.showDie=function(){var t=this;if(this.scriptCharacterRigid.stopMove(),this.recycleWarning(),f.instance.playSound(this.node.name+"Die"),v.showRewardBounce(this.node,"gold/gold",this.baseInfo.goldNum,(function(){t.baseInfo.heartDropRate>=Math.random()&&v.showRewardBounce(t.node,"heart/heart",1)})),v.scriptPlayer.isBloodthirsty){var i=.02*v.scriptPlayer.curHpLimit;v.scriptPlayer.addBlood(i)}this.skiMeshCom.setMaterial(this.matDissolve,0),d(this._dissolveData).to(this._dissolveData.time,{uEdge:.1}).start(),this._scriptMonsterModel.playAni(P.MONSTER_ANI_TYPE.DIE,!1,(function(){t.isDie&&(v.ndBoss&&(v.ndBoss=null),t.scriptBloodBar&&(t.scriptBloodBar=null),L.instance.putNode(t.node))}))},r.recycleWarning=function(){this.scriptWarning&&(this.scriptWarning.node.parent&&L.instance.putNode(this.scriptWarning.node),this.scriptWarning=null)},r.playHit=function(t,e){var s=this;if(void 0===t&&(t=!1),void 0===e&&(e=!1),!this.isDie){f.instance.playSound(P.SOUND.HIT_MONSTER);var n="hit/hit",o=[],r=1.2,a=v.scriptPlayer.isArrowIce,l=v.scriptPlayer.isArrowFire,h=v.scriptPlayer.isArrowLightning;(l||a||h)&&(l&&a&&h?o=["hit/hitFire","hit/hitIce","hit/hitLightning"]:l&&a||l&&h||a&&h?l&&a?o=["hit/hitFire","hit/hitIce"]:h&&l?o=["hit/hitFire","hit/hitLightning"]:h&&a&&(o=["hit/hitIce","hit/hitLightning"]):l?o=["hit/hitFire"]:a?o=["hit/hitIce"]:h&&(o=["hit/hitLightning"]),"hit/hitFire"===(n=o[Math.floor(Math.random()*o.length)])?r=2:"hit/hitIce"===n&&(r=1),a&&this._iceDamageCountDown<=0&&(this._iceDamageCountDown=1),l&&this._fireDamageCountDown<=0&&(this._fireDamageCountDown=2));var _={effectPath:n,ndTarget:this.node,pos:this._hitEffectPos,isPlayAnimation:!1,speed:v.gameSpeed,isRecycle:!0,recycleTime:r};if(A.instance.loadAndPlayEffect(_),this._scriptMonsterModel.isAttacking||this._scriptMonsterModel.playAni(P.MONSTER_ANI_TYPE.HIT),v.scriptPlayer.isArrowLightning&&!e){var c=v.getNearbyMonster(this.node,!0);c&&c.forEach((function(t){A.instance.showLightningChain(s.node,t),t.getComponent(i).playHit(!1,!0)}))}if(Math.random()>this.baseInfo.dodgeRate){var d=P.FIGHT_TIP.REDUCE_BLOOD,g=v.scriptPlayer.curAttackPower*(1-this.baseInfo.defensePower*v.defenseAddition/(this.baseInfo.defensePower+400));Math.random()<=v.scriptPlayer.curCriticalHitRate&&(t||e||(g*=v.scriptPlayer.curCriticalHitDamage,d=P.FIGHT_TIP.CRITICAL_HIT)),e&&(g=.05*this.baseInfo.hp*(1-this.baseInfo.defensePower/(this.baseInfo.defensePower+400))),this.refreshBlood(-g,d)}}},r.refreshBlood=function(t,i){var e=this,s=function(){e.scriptBloodBar.refreshBlood(t),m.instance.showBloodTips(e,i,t,e._bloodTipOffsetPos)};this._curAttackInterval=0,this._isInitBloodBar?this.scriptBloodBar&&(this.scriptBloodBar.node.active=!0,s()):(this._isInitBloodBar=!0,console.log("###小怪生成新的血条",this.node.name),m.instance.showMonsterBloodBar(this,this.baseInfo.hp,v.hpAddition,(function(){s()})))},r.playAction=function(t){switch(this._action=t.action,t.action){case P.MONSTER_ACTION.MOVE:var i=(t.value+135)*g.RAD;this._horizontal=Math.round(1*Math.cos(i)),this._vertical=Math.round(1*Math.sin(i)),this._curAngleY=t.value,this._curAngleY=this._curAngleY<0?this._curAngleY+360:this._curAngleY>360?this._curAngleY-360:this._curAngleY,this.isMoving=!0;break;case P.MONSTER_ACTION.STOP_MOVE:var e=(t.value+135)*g.RAD;this._horizontal=Math.round(1*Math.cos(e)),this._vertical=Math.round(1*Math.sin(e)),this._curAngleY=t.value,this._curAngleY=this._curAngleY<0?this._curAngleY+360:this._curAngleY>360?this._curAngleY-360:this._curAngleY,this.isMoving=!1,this.scriptCharacterRigid.stopMove(),v.ndPlayer?this._attackPlayer():this._scriptMonsterModel.playAni(P.MONSTER_ANI_TYPE.IDLE,!0)}},r._attackPlayer=function(){var t=this;if(!v.scriptPlayer.isDie&&!this._scriptMonsterModel.isAttacking){l.subtract(this._offsetPos_2,v.ndPlayer.worldPosition,this.node.worldPosition);var i=this._offsetPos_2.length();if(this.attackForward=this._offsetPos_2.normalize().negative(),this.attackForward.y=0,this.attackPos.set(v.ndPlayer.worldPosition),this._allSkillInfo.length&&this.skillInfo&&this.skillInfo.warning){var e=1;this.skillInfo.ID===P.MONSTER_SKILL.FIRE_BALL?e=.1:this.skillInfo.ID===P.MONSTER_SKILL.FIRE_BALL_BIG?e=.4:this.skillInfo.ID===P.MONSTER_SKILL.LASER?e=3:this.skillInfo.ID===P.MONSTER_SKILL.ENERGY_BALL&&(e=i),this.recycleWarning(),A.instance.showWarning(this.skillInfo.warning,e,this).then((function(){t.playAttackAni()}))}else this.playAttackAni()}},r.playAttackAni=function(){var t=this,i=P.MONSTER_ANI_TYPE.ATTACK;("hellFire"===this.baseInfo.resName&&(i=this._allSkillInfo.length?P.MONSTER_ANI_TYPE.ATTACK_2:P.MONSTER_ANI_TYPE.ATTACK_1),this._allSkillInfo.length)?this._scriptMonsterModel.playAni(i,!1,(function(){t.isDie||t._scriptMonsterModel.isHitting||(t._scriptMonsterModel.playAni(P.MONSTER_ANI_TYPE.IDLE,!0),t.scheduleOnce((function(){t._monsterMove()}),t.baseInfo.moveFrequency))})):M.getTwoNodeXZLength(this.node,v.ndPlayer)<=this._minLength*this._minLengthRatio?this._scriptMonsterModel.playAni(i,!1,(function(){t.isDie||t._scriptMonsterModel.isHitting||(t._scriptMonsterModel.playAni(P.MONSTER_ANI_TYPE.IDLE,!0),t.scheduleOnce((function(){t._monsterMove()}),t.baseInfo.moveFrequency))})):this.isDie||this._scriptMonsterModel.isHitting||(this._scriptMonsterModel.playAni(P.MONSTER_ANI_TYPE.IDLE,!0),this.scheduleOnce((function(){t._monsterMove()}),this.baseInfo.moveFrequency))},r._moveToRandomPos=function(){this._randomMoveTryTimes-=1;var t=M.getRandom(1,3)*M.getRandomDirector(),i=M.getRandom(1,3)*M.getRandomDirector();this._targetWorPos.set(M.toFixed(this.node.worldPosition.x+t),M.toFixed(this.node.worldPosition.y),M.toFixed(this.node.worldPosition.z+i)),M.getTwoPosXZLength(this._targetWorPos.x,this._targetWorPos.z,v.ndPlayer.worldPosition.x,v.ndPlayer.worldPosition.z)>this._minLength?(l.subtract(this._offsetPos,this._targetWorPos,this.node.worldPosition),this._offsetPos.y=0,l.normalize(this._moveUnit,this._offsetPos),this._moveToTargetWorPos(this._targetWorPos),this.isMoving=!0,this._isArrived=!1):this._randomMoveTryTimes<=0?this._stayRotateAttack():this._moveToRandomPos()},r._monsterMove=function(){if(!this.isDie)if(this._isAllowToAttack||(this._isAllowToAttack=!0),this._movePattern===P.MONSTER_MOVE_PATTERN.NO_MOVE)this._stayRotateAttack();else if(this._movePattern===P.MONSTER_MOVE_PATTERN.RANDOM)this._randomMoveTryTimes=5,this._moveToRandomPos();else if(this._movePattern===P.MONSTER_MOVE_PATTERN.FORWARD_PLAYER){this._moveToTargetWorPos(v.ndPlayer.worldPosition),l.subtract(this._offsetPos,v.ndPlayer.worldPosition,this.node.worldPosition),this._offsetPos.y=0;var t=M.getTwoNodeXZLength(this.node,v.ndPlayer);t>2*this._minLength||t>this._minLength&&t<2*this._minLength?(l.normalize(this._moveUnit,this._offsetPos),l.multiplyScalar(this._offsetPos,this._moveUnit,this._minLength),t>2*this._minLength?l.add(this._targetWorPos,this.node.worldPosition,this._offsetPos):l.subtract(this._targetWorPos,v.ndPlayer.worldPosition,this._offsetPos),this._targetWorPos.set(M.toFixed(this._targetWorPos.x),M.toFixed(this.node.worldPosition.y),M.toFixed(this._targetWorPos.z)),this._isArrived=!1,this.isMoving=!0):this._stayRotateAttack()}},r._moveToTargetWorPos=function(t){var i=this._getTwoPosAngleY(this.node.worldPosition,t);this.playAction({action:P.MONSTER_ACTION.MOVE,value:i})},r._getTwoPosAngleY=function(t,i){var e,s,n=null==(e=v.mainCamera)?void 0:e.worldToScreen(i),o=null==(s=v.mainCamera)?void 0:s.worldToScreen(t);return l.subtract(this._playerMonsterOffset,n,o),Math.round(180*Math.atan2(this._playerMonsterOffset.y,this._playerMonsterOffset.x)/Math.PI)},r._stayRotateAttack=function(){var t=this._getTwoPosAngleY(this.node.worldPosition,v.ndPlayer.worldPosition);this.playAction({action:P.MONSTER_ACTION.STOP_MOVE,value:t})},r.releaseSkillToPlayer=function(t){var i=this;this._allSkillInfo.length?T.loadEffectRes(this.skillInfo.resName+"/"+this.skillInfo.resName).then((function(t){if(!i.isMoving){i._ndMonsterSkill=L.instance.getNode(t,v.ndGameManager),i._ndMonsterSkill.setWorldPosition(i.node.worldPosition.x,2.5,i.node.worldPosition.z),i._ndMonsterSkill.forward=i.attackForward.negative();switch(i.skillInfo.ID){case P.MONSTER_SKILL.ENERGY_BALL:i._ndMonsterSkill.getComponent(k).init(i.skillInfo,i.baseInfo,i);break;case P.MONSTER_SKILL.FIRE_BALL:i._ndMonsterSkill.getComponent(E).init(i.skillInfo,i.baseInfo,i);break;case P.MONSTER_SKILL.DISPERSION:i._ndMonsterSkill.children.forEach((function(t,e){t.getComponent(R).init(i.skillInfo,i.baseInfo)}));break;case P.MONSTER_SKILL.TORNADO:i._ndMonsterSkill.getComponent(D).init(i.skillInfo,i.baseInfo,i);break;case P.MONSTER_SKILL.FIRE_BALL_BIG:i._ndMonsterSkill.getComponent(w).init(i.skillInfo,i.baseInfo,i);break;case P.MONSTER_SKILL.DISPERSION_SURROUND:i._ndMonsterSkill.children.forEach((function(t){t.getComponent(S).init(i.skillInfo,i.baseInfo)}));break;case P.MONSTER_SKILL.LASER:i._ndMonsterSkill.getComponent(N).init(i.skillInfo,i.baseInfo,i)}i._refreshSkill()}})):M.getTwoNodeXZLength(this.node,v.ndPlayer)<=this._minLength*this._minLengthRatio&&v.scriptPlayer.reduceBlood(this.baseInfo)},r.update=function(t){if(this.isDie&&this._dissolveData.uEdge>.1)this.matDissolve.setProperty("uEdge",this._dissolveData.uEdge);else if(v.isGameStart&&!v.isGameOver&&!v.isGamePause&&!this.isDie&&this._isAllowToAttack&&v.scriptPlayer&&!v.scriptPlayer.isDie){if(!this._isHitByPlayer&&this.scriptBloodBar&&(this._curAttackInterval+=t,this._curAttackInterval>=this._hideBloodCountDown&&this.scriptBloodBar.node.active&&(this.scriptBloodBar.node.active=!1)),this.isMoving)if(this._movePattern===P.MONSTER_MOVE_PATTERN.RANDOM){var i=M.getTwoPosXZLength(this.node.worldPosition.x,this.node.worldPosition.z,this._targetWorPos.x,this._targetWorPos.z),e=.05;"boomDragon"===this.baseInfo.resName&&(e=.5),i<=e&&!this._isArrived&&(this._isArrived=!0,this._stayRotateAttack())}else if(this._movePattern===P.MONSTER_MOVE_PATTERN.FORWARD_PLAYER){M.getTwoPosXZLength(this.node.worldPosition.x,this.node.worldPosition.z,this._targetWorPos.x,this._targetWorPos.z)<=.05&&!this._isArrived&&(this._isArrived=!0,this._stayRotateAttack())}if(this._isPlayRotate)this._tempAngle.set(this.node.eulerAngles),this._tempAngle.y=this._tempAngle.y<0?this._tempAngle.y+360:this._tempAngle.y,0===this._curAngle.length()&&this._curAngle.set(this._tempAngle),this.node.eulerAngles=this._tempAngle,this._curAngle.equals(this._targetAngle,.01)?(this._isPlayRotate=!1,this.node.eulerAngles=this._targetAngle,this._curAngle.set(0,0,0)):(l.lerp(this._curAngle,this._curAngle,this._targetAngle,.167),this.node.eulerAngles=this._curAngle);if(0!==this._horizontal||0!==this._vertical){if(this._rotateDirection.set(this._horizontal,0,-this._vertical),this._rotateDirection=this._rotateDirection.normalize(),a.fromViewUp(H,this._rotateDirection),a.toEuler(U,H),U.y=U.y<0?U.y+360:U.y,this._isPlayRotate=!0,this._curAngle_2.set(this.node.eulerAngles),this._curAngle_2.y<0?(this._curAngle_2.y+=360,this.node.eulerAngles=this._curAngle_2):this._curAngle_2.y>360&&(this._curAngle_2.y-=360,this.node.eulerAngles=this._curAngle_2),U.equals(this.node.eulerAngles,.01)?(this._isPlayRotate=!1,this.node.eulerAngles=U):(this._targetAngle.y=this._curAngleY+225,this._targetAngle.y=this._targetAngle.y<0?this._targetAngle.y+360:this._targetAngle.y>360?this._targetAngle.y-360:this._targetAngle.y,this._targetAngle.x=0,this._targetAngle.z=0,Math.abs(this._targetAngle.y-this._curAngle_2.y)>180&&(this._targetAngle.y>this._curAngle_2.y?this._targetAngle.y-=360:this._targetAngle.y+=360),this._curAngle.set(0,0,0)),!this.isMoving)return;this._movePattern!==P.MONSTER_MOVE_PATTERN.NO_MOVE&&this.scriptCharacterRigid.move(-this._moveUnit.x*this.curMoveSpeed*v.moveSpeedAddition*.5*t,-this._moveUnit.z*this.curMoveSpeed*v.moveSpeedAddition*.5*t),this._scriptMonsterModel.isRunning||this._movePattern===P.MONSTER_MOVE_PATTERN.NO_MOVE||this._action===P.MONSTER_ACTION.STOP_MOVE||this._scriptMonsterModel.playAni(P.MONSTER_ANI_TYPE.RUN,!0)}else this.isDie||this._scriptMonsterModel.isIdle||this._scriptMonsterModel.isAttacking||this._scriptMonsterModel.isHitting||(this._scriptMonsterModel.playAni(P.MONSTER_ANI_TYPE.IDLE,!0),this.scriptCharacterRigid.stopMove());if(this._iceDamageCountDown>0&&(this._iceDamageCountDown-=t,this.curAttackSpeed=.9*this.baseInfo.attackSpeed,this.curMoveSpeed=.5*this.baseInfo.moveSpeed,this._iceDamageCountDown<=0&&(this.curAttackSpeed=this.baseInfo.attackSpeed,this.curMoveSpeed=this.baseInfo.moveSpeed)),this._fireDamageCountDown>0){this._fireDamageCountDown-=t;var s=Number(this._fireDamageCountDown.toFixed(2));if(0===(s=100*s%50)){var n=.05*this.baseInfo.hp;this.refreshBlood(-n,P.FIGHT_TIP.REDUCE_BLOOD)}}if(this._movePattern!==P.MONSTER_MOVE_PATTERN.NO_MOVE&&!this._isArrived&&(this._checkMoveInterval+=t,this._checkMoveInterval>=.2)){this._checkMoveInterval=0;var o=M.getTwoPosXZLength(this._prevMoveWorPos.x,this._prevMoveWorPos.z,this.node.worldPosition.x,this.node.worldPosition.z);this._scriptMonsterModel.isRunning&&o<=.01?this._stayRotateAttack():this._prevMoveWorPos.set(this.node.worldPosition)}}},o(i,[{key:"curMoveSpeed",get:function(){return this._curMoveSpeed},set:function(t){this._curMoveSpeed=t,this.scriptCharacterRigid.initSpeed(t,v.moveSpeedAddition)}},{key:"isDie",get:function(){return this._isDie},set:function(t){this._isDie=t,this._isDie&&this.showDie()}},{key:"isMoving",get:function(){return this._isMoving},set:function(t){this._isMoving=t}},{key:"scriptBloodBar",get:function(){return this._scriptBloodBar},set:function(t){this._scriptBloodBar=t}},{key:"bloodTipDirection",get:function(){return this._bloodTipDirection},set:function(t){this._bloodTipDirection=t}},{key:"skillInfo",get:function(){return this._skillInfo},set:function(t){this._skillInfo=t}},{key:"baseInfo",get:function(){return this._baseInfo},set:function(t){this._baseInfo=t}},{key:"layerInfo",get:function(){return this._layerInfo},set:function(t){this._layerInfo=t}},{key:"curAttackSpeed",get:function(){return this._curAttackSpeed},set:function(t){this._curAttackSpeed=t}},{key:"scriptWarning",get:function(){return this._scriptWarning},set:function(t){this._scriptWarning=t}},{key:"attackForward",get:function(){return this._attackForward},set:function(t){this._attackForward=t}},{key:"attackPos",get:function(){return this._attackPos},set:function(t){this._attackPos=t}},{key:"scriptCharacterRigid",get:function(){return this._scriptCharacterRigid},set:function(t){this._scriptCharacterRigid=t}}]),i}(u)).prototype,"matNormal",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(Y.prototype,"matDissolve",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=i(Y.prototype,"skiMeshCom",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=Y))||F));r._RF.pop()}}}));

System.register("chunks:///_virtual/monsterBloodBar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constant.ts","./poolManager.ts"],(function(t){var o,i,e,r,n,s,a,l,h,d,c,B,u,_,p,m;return{setters:[function(t){o=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,r=t.assertThisInitialized,n=t.createClass},function(t){s=t.cclegacy,a=t._decorator,l=t.UITransform,h=t.Vec3,d=t.clamp,c=t.tween,B=t.find,u=t.CameraComponent,_=t.Component},function(t){p=t.Constant},function(t){m=t.PoolManager}],execute:function(){var f,C,g,v,P,y,I,W,w;s._RF.push({},"6a19fvFDdxLCIBJjW6IGGh4","monsterBloodBar",void 0);var U=a.ccclass,b=a.property;t("MonsterBloodBar",(f=U("MonsterBloodBar"),C=b(l),g=b(l),v=b(l),f((I=o((y=function(t){function o(){for(var o,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return o=t.call.apply(t,[this].concat(n))||this,e(o,"UIComWhiteBar",I,r(o)),e(o,"UIComRedBar",W,r(o)),e(o,"UIComBloodBar",w,r(o)),o._whiteBarHeight=19,o._redBarHeight=19,o._totalBlood=0,o._curBlood=0,o._scriptParent=null,o._maxWhiteBarWidth=104,o._maxRedBarWidth=104,o._ndTarget=null,o._offsetPos=null,o._curPos=new h,o._isBloodEmpty=!1,o._prevBloodPos=new h,o}i(o,t);var s=o.prototype;return s.show=function(t,o,i,e,r,n){void 0===n&&(n=!0),this._scriptParent=t,this._totalBlood=o*e,this._offsetPos=i,this._ndTarget=t.node,this._isBloodEmpty=!1,this._prevBloodPos.set(this._ndTarget.worldPosition),n&&(this._curBlood=this._totalBlood);var s=this._curBlood/this._totalBlood;s=d(s,0,1),this.UIComWhiteBar.setContentSize(s*this._maxWhiteBarWidth,this._whiteBarHeight),this.UIComRedBar.setContentSize(s*this._maxRedBarWidth,this._redBarHeight),this.node.setSiblingIndex(p.PRIORITY.BLOOD),r&&r()},s.refreshBlood=function(t){var o=this;this._curBlood+=t;var i=this._curBlood/this._totalBlood;t<0&&(i=i<=0?0:i,this.UIComRedBar.setContentSize(this._maxRedBarWidth*i,this._redBarHeight),this._isBloodEmpty?(m.instance.putNode(this.node),this._scriptParent.isDie=!0):(this._isBloodEmpty=i<=0,c(this.UIComWhiteBar).to(.7,{width:this._maxWhiteBarWidth*i}).call((function(){o._isBloodEmpty&&m.instance.putNode(o.node)})).start(),this._isBloodEmpty&&(this._scriptParent.isDie=!0)))},s.update=function(){if(this.node.parent&&this.node.active&&this._ndTarget&&this._ndTarget.parent){var t,o=this._ndTarget.worldPosition;this._isBloodEmpty?o=this._prevBloodPos:this._prevBloodPos.set(o),null==(t=this._mainCamera)||t.convertToUINode(o,B("Canvas"),this._curPos),this._curPos.add(this._offsetPos),this.node.setPosition(this._curPos)}},n(o,[{key:"_mainCamera",get:function(){var t;return null==(t=B("Main Camera"))?void 0:t.getComponent(u)}}]),o}(_)).prototype,"UIComWhiteBar",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=o(y.prototype,"UIComRedBar",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=o(y.prototype,"UIComBloodBar",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=y))||P));s._RF.pop()}}}));

System.register("chunks:///_virtual/monsterModel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constant.ts","./gameManager.ts"],(function(i){var t,e,n,a,s,r,o,l,c,p,_,u;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,n=i.initializerDefineProperty,a=i.assertThisInitialized,s=i.createClass},function(i){r=i.cclegacy,o=i._decorator,l=i.SkeletalAnimationComponent,c=i.AnimationClip,p=i.Component},function(i){_=i.Constant},function(i){u=i.GameManager}],execute:function(){var T,y,A,h,d;r._RF.push({},"15aa8oJcxdFKKBQnRjjhjLX","monsterModel",void 0);var g=o.ccclass,M=o.property;i("MonsterModel",(T=g("MonsterModel"),y=M(l),T((d=t((h=function(i){function t(){for(var t,e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return t=i.call.apply(i,[this].concat(s))||this,n(t,"aniComPlayer",d,a(t)),t._isAniPlaying=!1,t._scriptMonster=null,t._aniType="",t._aniState=null,t}e(t,i);var r=t.prototype;return r.start=function(){},r.onFrameAttack=function(i){void 0===i&&(i=!0),u.isGameOver||u.isGamePause||this.scriptMonster.releaseSkillToPlayer(i)},r.playAni=function(i,t,e,n){var a,s,r=this;if(void 0===t&&(t=!1),this._aniType=i,null==(a=this.aniComPlayer)||a.play(i),this.isAniPlaying=!0,this._aniState=null==(s=this.aniComPlayer)?void 0:s.getState(i),this._aniState)switch(this._aniState.wrapMode=t?c.WrapMode.Loop:c.WrapMode.Normal,i){case _.MONSTER_ANI_TYPE.ATTACK:case _.MONSTER_ANI_TYPE.ATTACK_1:case _.MONSTER_ANI_TYPE.ATTACK_2:this._aniState.speed=u.gameSpeed*u.attackSpeedAddition*this.scriptMonster.curAttackSpeed;break;case _.MONSTER_ANI_TYPE.RUN:this._aniState.speed=u.gameSpeed*(this.scriptMonster.curMoveSpeed*u.moveSpeedAddition/this.scriptMonster.baseInfo.moveSpeed);break;case _.MONSTER_ANI_TYPE.IDLE:default:this._aniState.speed=u.gameSpeed}t||this.aniComPlayer.once(l.EventType.FINISHED,(function(){r.isAniPlaying=!1,e&&e()}))},s(t,[{key:"isAniPlaying",get:function(){return this._isAniPlaying},set:function(i){this._isAniPlaying=i}},{key:"scriptMonster",get:function(){return this._scriptMonster},set:function(i){this._scriptMonster=i}},{key:"isRunning",get:function(){return this._aniType===_.MONSTER_ANI_TYPE.RUN&&this.isAniPlaying}},{key:"isIdle",get:function(){return this._aniType===_.MONSTER_ANI_TYPE.IDLE&&this.isAniPlaying}},{key:"isAttacking",get:function(){return this._aniType===_.MONSTER_ANI_TYPE.ATTACK&&this.isAniPlaying||this._aniType===_.MONSTER_ANI_TYPE.ATTACK_1&&this.isAniPlaying||this._aniType===_.MONSTER_ANI_TYPE.ATTACK_2&&this.isAniPlaying}},{key:"isHitting",get:function(){return this._aniType===_.MONSTER_ANI_TYPE.HIT&&this.isAniPlaying}}]),t}(p)).prototype,"aniComPlayer",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=h))||A));r._RF.pop()}}}));

System.register("chunks:///_virtual/monsterSkillCollider.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameManager.ts","./constant.ts","./dispersionSurround.ts","./dispersion.ts","./energyBall.ts","./jetFires.ts","./fireBall.ts","./fireBallBig.ts","./laser.ts","./tornado.ts","./poolManager.ts"],(function(e){var t,i,n,o,r,s,l,a,h,c,d,g,C,_,p,u,f,m,E,I,R,b,S,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,l=e.Enum,a=e.BoxColliderComponent,h=e.CylinderColliderComponent,c=e.SphereCollider,d=e.CapsuleColliderComponent,g=e.MeshColliderComponent,C=e.Component},function(e){_=e.GameManager},function(e){p=e.Constant},function(e){u=e.DispersionSurround},function(e){f=e.Dispersion},function(e){m=e.EnergyBall},function(e){E=e.JetFires},function(e){I=e.FireBall},function(e){R=e.FireBallBig},function(e){b=e.Laser},function(e){S=e.Tornado},function(e){y=e.PoolManager}],execute:function(){var P,O,T,N,L,k;r._RF.push({},"00815wthORNyqdwj+wC28bk","monsterSkillCollider",void 0);var v=s.ccclass,B=s.property,A=l({ENERGY_BALL:1,FIRE_BALL:2,JET_FIRES:3,DISPERSION:4,TORNADO:5,FIRE_BALL_BIG:6,DISPERSION_SURROUND:7,LASER:8});e("MonsterSkillCollider",(P=v("MonsterSkillCollider"),O=B({type:A,displayOrder:1}),P(((k=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,n(t,"colliderName",L,o(t)),t._isOnJetFires=!1,t._checkInterval=1,t._colliderCom=null,t}i(t,e);var r=t.prototype;return r.onLoad=function(){this._colliderCom=this.node.getComponent(a)||this.node.getComponent(h)||this.node.getComponent(c)||this.node.getComponent(d)||this.node.getComponent(g)||this.node.getComponent(h),this._colliderCom||console.error("this node does not have collider component")},r.onEnable=function(){this.colliderName===A.JET_FIRES?(this._colliderCom.on("onTriggerStay",this._onTriggerStayCb,this),this._colliderCom.on("onTriggerExit",this._onTriggerExitCb,this)):this._colliderCom.isTrigger?this._colliderCom.on("onTriggerEnter",this._onTriggerEnterCb,this):this._colliderCom.on("onCollisionEnter",this._onCollisionEnterCb,this)},r.onDisable=function(){this.colliderName===A.JET_FIRES?(this._colliderCom.off("onTriggerStay",this._onTriggerStayCb,this),this._colliderCom.off("onTriggerExit",this._onTriggerExitCb,this)):this._colliderCom.isTrigger?this._colliderCom.off("onTriggerEnter",this._onTriggerEnterCb,this):this._colliderCom.off("onCollisionEnter",this._onCollisionEnterCb,this)},r.start=function(){this._isOnJetFires=!1},r.init=function(){},r._onTriggerEnterCb=function(e){this._hitTarget(e.otherCollider)},r._onCollisionEnterCb=function(e){this._hitTarget(e.otherCollider)},r._hitTarget=function(e){var t,i,n,o,r;if(!_.isGameOver&&_.isGameStart)if(e.getGroup()===p.PHY_GROUP.OBSTACLE){var s=null;switch(this.colliderName){case A.ENERGY_BALL:(s=this.node.getComponent(m)).skillInfo.penetrate||y.instance.putNode(this.node);break;case A.DISPERSION:(s=this.node.getComponent(f)).skillInfo.penetrate||s.hide();break;case A.TORNADO:(s=null==(t=this.node.parent)?void 0:t.getComponent(S)).skillInfo.penetrate||y.instance.putNode(this.node.parent);break;case A.DISPERSION_SURROUND:(s=this.node.getComponent(u)).skillInfo.penetrate||s.hide()}}else if(e.getGroup()==p.PHY_GROUP.PLAYER&&_.ndPlayer){var l=null;switch(this.colliderName){case A.ENERGY_BALL:y.instance.putNode(this.node),l=this.node.getComponent(m),this._hitPlayer(l.baseInfo);break;case A.FIRE_BALL:l=null==(i=this.node.parent)?void 0:i.getComponent(I),this._hitPlayer(l.baseInfo);break;case A.DISPERSION:(l=this.node.getComponent(f)).hide(),this._hitPlayer(l.baseInfo);break;case A.TORNADO:l=null==(n=this.node.parent)?void 0:n.getComponent(S),this._hitPlayer(l.baseInfo);break;case A.FIRE_BALL_BIG:l=null==(o=this.node.parent)?void 0:o.getComponent(R),this._hitPlayer(l.baseInfo);break;case A.DISPERSION_SURROUND:(l=this.node.getComponent(u)).hide(),this._hitPlayer(l.baseInfo);break;case A.LASER:l=null==(r=this.node.parent)?void 0:r.getComponent(b),this._hitPlayer(l.baseInfo)}}},r._hitPlayer=function(e){e?_.scriptPlayer.reduceBlood(e):console.warn("###找不到技能来源敌人",this.colliderName)},r._onTriggerStayCb=function(e){e.otherCollider.getGroup()==p.PHY_GROUP.PLAYER&&_.ndPlayer&&(this._isOnJetFires=!0)},r._onTriggerExitCb=function(e){e.otherCollider.getGroup()==p.PHY_GROUP.PLAYER&&_.ndPlayer&&(this._isOnJetFires=!1)},r.update=function(e){if(!_.isGameOver&&_.ndPlayer&&this.node.parent&&this.colliderName===A.JET_FIRES&&this._isOnJetFires&&(this._checkInterval+=e,this._checkInterval>=.5)){this._checkInterval=0;var t=this.node.parent.getComponent(E);this._hitPlayer(t.baseInfo)}},t}(C)).COLLIDER_NAME=A,L=t((N=k).prototype,"colliderName",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return A.ENERGY_BALL}}),T=N))||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/pausePanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./constant.ts","./gameManager.ts","./uiManager.ts","./skillList.ts","./audioManager.ts","./resourceUtil.ts","./playerData.ts","./LanguageData.ts"],(function(i){var n,e,t,l,a,s,r,o,u,c,p,f,h,d,b,g,S,m,k,y;return{setters:[function(i){n=i.applyDecoratedDescriptor,e=i.inheritsLoose,t=i.initializerDefineProperty,l=i.assertThisInitialized},function(i){a=i.cclegacy,s=i._decorator,r=i.Sprite,o=i.Label,u=i.Node,c=i.SpriteFrame,p=i.Component},function(i){f=i.ClientEvent},function(i){h=i.Constant},function(i){d=i.GameManager},function(i){b=i.UIManager},function(i){g=i.SkillList},function(i){S=i.AudioManager},function(i){m=i.ResourceUtil},function(i){k=i.PlayerData},function(i){y=i.updateSceneRenderers}],execute:function(){var P,v,I,O,w,D,L,M,_,A,z,C,B,E,F,R,N,G,T;a._RF.push({},"18bb8GQWdpFobKK4cKvVrXH","pausePanel",void 0);var H=s.ccclass,K=s.property;i("PausePanel",(P=H("PausePanel"),v=K(r),I=K(o),O=K(o),w=K(u),D=K(c),L=K(c),M=K(r),_=K(u),P((C=n((z=function(i){function n(){for(var n,e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return n=i.call.apply(i,[this].concat(a))||this,t(n,"spSkillIcon",C,l(n)),t(n,"lbSkillName",B,l(n)),t(n,"lbSkillDesc",E,l(n)),t(n,"ndSkillList",F,l(n)),t(n,"sfMusicOn",R,l(n)),t(n,"sfMusicOff",N,l(n)),t(n,"spBtnSound",G,l(n)),t(n,"ndSkillItem",T,l(n)),n._isAudioOpen=!1,n}e(n,i);var a=n.prototype;return a.show=function(){var i=this;(y(),k.instance.playerInfo.arrSkill.length)?(this.ndSkillItem.active=!0,this.ndSkillList.active=!0,this.ndSkillList.getComponent(g).init((function(n){i.lbSkillName.string=n.name,i.lbSkillDesc.string=n.desc,m.setSpriteFrame("texture/skillIcon/"+n.icon,i.spSkillIcon)}))):(this.ndSkillItem.active=!1,this.ndSkillList.active=!1);this._isAudioOpen=S.instance.getAudioSetting(!0),this.changeState()},a.changeState=function(){this._isAudioOpen?this.spBtnSound.spriteFrame=this.sfMusicOn:this.spBtnSound.spriteFrame=this.sfMusicOff},a.onBtnSoundClick=function(){this._isAudioOpen=!this._isAudioOpen,this.changeState(),S.instance.switchSound(this._isAudioOpen),S.instance.switchMusic(this._isAudioOpen)},a.onBtnHomeClick=function(){b.instance.showDialog("back/backPanel",[function(){b.instance.hideDialog("fight/fightPanel"),b.instance.hideDialog("pause/pausePanel"),d.isGameOver=!0,f.dispatchEvent(h.EVENT_TYPE.RECYCLE_ALL),b.instance.showDialog("home/homePanel")}],(function(){}),h.PRIORITY.WAITING)},a.onBtnPlayClick=function(){b.instance.hideDialog("pause/pausePanel"),d.isGamePause=!1},n}(p)).prototype,"spSkillIcon",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=n(z.prototype,"lbSkillName",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=n(z.prototype,"lbSkillDesc",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=n(z.prototype,"ndSkillList",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=n(z.prototype,"sfMusicOn",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=n(z.prototype,"sfMusicOff",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=n(z.prototype,"spBtnSound",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=n(z.prototype,"ndSkillItem",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=z))||A));a._RF.pop()}}}));

System.register("chunks:///_virtual/player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./mapManager.ts","./util.ts","./audioManager.ts","./effectManager.ts","./playerData.ts","./localConfig.ts","./playerModel.ts","./clientEvent.ts","./constant.ts","./gameManager.ts","./resourceUtil.ts","./arrow.ts","./uiManager.ts","./characterRigid.ts","./poolManager.ts"],(function(t){var e,i,r,s,n,a,o,l,h,c,u,_,g,A,f,d,p,y,P,R,S,E,w,L,I,v,m,k,B,D;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,s=t.assertThisInitialized,n=t.createClass,a=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){l=t.cclegacy,h=t.Quat,c=t.Vec3,u=t._decorator,_=t.RigidBodyComponent,g=t.CapsuleColliderComponent,A=t.macro,f=t.Component},function(t){d=t.MapManager},function(t){p=t.Util},function(t){y=t.AudioManager},function(t){P=t.EffectManager},function(t){R=t.PlayerData},function(t){S=t.LocalConfig},function(t){E=t.PlayerModel},function(t){w=t.ClientEvent},function(t){L=t.Constant},function(t){I=t.GameManager},function(t){v=t.ResourceUtil},function(t){m=t.Arrow},function(t){k=t.UIManager},function(t){B=t.CharacterRigid},function(t){D=t.PoolManager}],execute:function(){var C,T,M,O,Y,N,H,V,b;l._RF.push({},"00abeCWTxpAwrraoA+2UT4q","player",void 0);var K=new h,F=new c,U=u.ccclass,W=u.property;t("Player",(C=U("Player"),T=W(E),M=W(_),O=W(g),C((H=e((N=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,r(e,"scriptPlayerModel",H,s(e)),r(e,"rigidComPlayer",V,s(e)),r(e,"colliderComPlayer",b,s(e)),e._curAttackPower=20,e._curDefensePower=1,e._curAttackSpeed=1,e._curDodgeRate=0,e._curCriticalHitRate=0,e._curCriticalHitDamage=0,e._curHpLimit=0,e._isBloodthirsty=!1,e._isArrowLightning=!1,e._isArrowLaunch=!1,e._isArrowIce=!1,e._isArrowFire=!1,e._isArrowDouble=!1,e._isArrowPenetrate=!1,e._isArrowContinuous=!1,e._arrFormChangeSkill=[],e._arrValueChangeSkill=[],e._arrBuffSkill=[],e._arrTriggerSkill=[],e._scriptBloodBar=null,e._isMoving=!1,e._isPlayRotate=!1,e._scriptCharacterRigid=null,e._playerBaseInfo={},e._hp=0,e._isDie=!1,e._horizontal=0,e._vertical=0,e._targetAngle=new c,e._curAngleY=0,e._ndTarget=null,e._throwArrowSpeed=30,e._arrowPos=new c,e._bloodTipOffsetPos=new c(-10,150,0),e._playerMonsterOffset=new c,e._oriPlayerPos=new c(0,1.7,0),e._oriPlayerScale=new c(4,4,4),e._oriPlayerAngle=new c(0,-90,0),e._curAngle_1=new c,e._curAngle_2=new c,e._rotateDirection=new c,e._ndRunSmokeEffect=null,e._originAngle=new c(0,-90,0),e._tempAngle=new c,e._forWard=new c,e._range=.01,e._curMoveSpeed=0,e._curBlood=0,e._rotateInterval=.3,e._arrArrowPreload=[],e}i(e,t);var l=e.prototype;return l.onEnable=function(){w.on(L.EVENT_TYPE.PARSE_PLAYER_SKILL,this._parsePlayerSkill,this),w.on(L.EVENT_TYPE.ON_REVIVE,this._onRevive,this)},l.onDisable=function(){w.off(L.EVENT_TYPE.PARSE_PLAYER_SKILL,this._parsePlayerSkill,this),w.off(L.EVENT_TYPE.ON_REVIVE,this._onRevive,this),this.scriptBloodBar&&(this._curBlood=this.scriptBloodBar.curBlood,this.scriptBloodBar.node.destroy(),this.scriptBloodBar=null)},l.start=function(){},l.init=function(){if(this.isMoving=!1,this.isDie=!1,this.isPlayRotate=!1,this.isArrowDouble=!1,this.isArrowPenetrate=!1,this.isArrowContinuous=!1,this.isArrowIce=!1,this.isArrowFire=!1,this.isBloodthirsty=!1,this.isArrowLightning=!1,this.isArrowLaunch=!1,this._horizontal=0,this._vertical=0,this._curBlood=0,this._ndTarget=null,this.scriptCharacterRigid=this.node.getComponent(B),this.playerBaseInfo=S.instance.queryByID("base",L.BASE.PLAYER_01),this.playerBaseInfo){var t=p.parseStringData(this.playerBaseInfo.scale,",");this._oriPlayerScale.set(t[0],t[1],t[2]),this.node.setScale(this._oriPlayerScale),this.resetPlayerWorPos();var e=p.parseStringData(this.playerBaseInfo.angle,",");this._oriPlayerAngle.set(e[0],e[1],e[2]),this.node.eulerAngles=this._oriPlayerAngle,this.curAttackPower=this.playerBaseInfo.attackPower,this.curDefensePower=this.playerBaseInfo.defensePower,this.curAttackSpeed=this.playerBaseInfo.attackSpeed,this.curMoveSpeed=this.playerBaseInfo.moveSpeed,this.curDodgeRate=this.playerBaseInfo.dodgeRate,this.curCriticalHitRate=this.playerBaseInfo.criticalHitRate,this.curCriticalHitDamage=this.playerBaseInfo.criticalHitDamage,this.curHpLimit=this.playerBaseInfo.hp,this._hp=this.playerBaseInfo.hp}this._parsePlayerSkill(!0),console.log("###加载血条1"),k.instance.showPlayerBloodBar(this,this._hp,this._hp,(function(){}),this._bloodTipOffsetPos),this.scriptPlayerModel.playAni(L.PLAYER_ANI_TYPE.IDLE,!0),this.scriptPlayerModel.init(),this.rigidComPlayer.clearState()},l.resetPlayerState=function(){this.node.active=!0,this.rigidComPlayer.clearState(),this.resetPlayerWorPos(),this.node.eulerAngles=this._originAngle,this.scriptPlayerModel.playAni(L.PLAYER_ANI_TYPE.IDLE,!0),this.node.children.forEach((function(t){"body"!==t.name&&(t.active=!1)})),this.scriptBloodBar||k.instance.showPlayerBloodBar(this,this.curHpLimit,this._curBlood,(function(){}),this._bloodTipOffsetPos)},l.resetPlayerWorPos=function(){var t=p.parseStringData(this.playerBaseInfo.position,",");d.isMapAnS?this._oriPlayerPos.set(-16.742,t[1],-.719):this._oriPlayerPos.set(t[0],t[1],t[2]),this.node.setPosition(this._oriPlayerPos)},l._parsePlayerSkill=function(t){void 0===t&&(t=!1);var e=R.instance.playerInfo.arrSkill,i=[],r=[],s=[],n=[];if(e.length&&e.forEach((function(t){t.startsWith(L.PLAYER_SKILL_USE.FORM_CHANGE)?i.push(t):t.startsWith(L.PLAYER_SKILL_USE.VALUE)?r.push(t):t.startsWith(L.PLAYER_SKILL_USE.BUFF)?s.push(t):t.startsWith(L.PLAYER_SKILL_USE.TRIGGER)&&n.push(t)})),this._arrFormChangeSkill=i,this._arrValueChangeSkill=r,this._arrBuffSkill=s,this._arrTriggerSkill=n,this._arrFormChangeSkill.length?(this.isArrowDouble=-1!==this._arrFormChangeSkill.indexOf(L.PLAYER_SKILL.ARROW_DOUBLE),this.isArrowPenetrate=-1!==this._arrFormChangeSkill.indexOf(L.PLAYER_SKILL.ARROW_PENETRATE),this.isArrowContinuous=-1!==this._arrFormChangeSkill.indexOf(L.PLAYER_SKILL.ARROW_CONTINUOUS)):(this.isArrowDouble=!1,this.isArrowPenetrate=!1,this.isArrowContinuous=!1),this._arrValueChangeSkill.length){var a,o=this.playerBaseInfo.attackPower;a=o*(1+this.getValueSkillRate(L.PLAYER_SKILL.RAISE_ATTACK_01));var l=this.getValueSkillRate(L.PLAYER_SKILL.RAISE_ATTACK_02);this.curAttackPower=a*(1+l);var h=this.playerBaseInfo.dodgeRate,c=this.getValueSkillRate(L.PLAYER_SKILL.RAISE_DODGE);this.curDodgeRate=h+c;var u,_=this.playerBaseInfo.attackSpeed;u=_*(1+this.getValueSkillRate(L.PLAYER_SKILL.RAISE_ATTACK_SPEED_01));var g=this.getValueSkillRate(L.PLAYER_SKILL.RAISE_ATTACK_SPEED_02);if(this.curAttackSpeed=u*(1+g),!t){var A=this.playerBaseInfo.hp,f=A*this.getValueSkillRate(L.PLAYER_SKILL.RAISE_HP_LIMIT),d=A+f;d>this.curHpLimit&&(this.addBlood(f,!0),this.curHpLimit=d,this._hp+=f)}var p=this.playerBaseInfo.moveSpeed,y=this.getValueSkillRate(L.PLAYER_SKILL.MOVE_SPEED);this.curMoveSpeed=p*(1+y);var P,S,E=this.playerBaseInfo.criticalHitRate,w=this.playerBaseInfo.criticalHitDamage;P=this.getValueSkillRateArr(L.PLAYER_SKILL.RAISE_CRITICAL_HIT_DAMAGE_01),S=this.getValueSkillRateArr(L.PLAYER_SKILL.RAISE_CRITICAL_HIT_DAMAGE_02);var I=P[0]+S[0],v=P[1]+S[1];I&&(this.curCriticalHitRate=E+I),v&&(this.curCriticalHitDamage=w+v)}else this.curAttackPower=this.playerBaseInfo.attackPower,this.curAttackSpeed=this.playerBaseInfo.attackSpeed,this.curMoveSpeed=this.playerBaseInfo.moveSpeed,this.curDodgeRate=this.playerBaseInfo.dodgeRate,this.curCriticalHitRate=this.playerBaseInfo.criticalHitRate,this.curCriticalHitDamage=this.playerBaseInfo.criticalHitDamage,this.curHpLimit=this.playerBaseInfo.hp;this._arrBuffSkill.length?(this.isArrowIce=-1!==this._arrBuffSkill.indexOf(L.PLAYER_SKILL.ARROW_ICE),this.isArrowFire=-1!==this._arrBuffSkill.indexOf(L.PLAYER_SKILL.ARROW_FIRE)):(this.isArrowIce=!1,this.isArrowFire=!1),this._arrTriggerSkill.length?(this.isArrowLightning=-1!==this._arrTriggerSkill.indexOf(L.PLAYER_SKILL.ARROW_LIGHTNING),this.isArrowLaunch=-1!==this._arrTriggerSkill.indexOf(L.PLAYER_SKILL.ARROW_LAUNCH),this.isBloodthirsty=-1!==this._arrTriggerSkill.indexOf(L.PLAYER_SKILL.BLOODTHIRSTY)):(this.isArrowLightning=!1,this.isArrowLaunch=!1,this.isBloodthirsty=!1)},l.getValueSkillRate=function(t){var e,i=0;if(-1!==this._arrValueChangeSkill.indexOf(t)){var r=S.instance.queryByID(L.playerSkillName(),t);i=Number(r.value)}return null!=(e=i)?e:0},l.getValueSkillRateArr=function(t){var e=[];-1!==this._arrValueChangeSkill.indexOf(t)&&(e=S.instance.queryByID(L.playerSkillName(),t).value.split("#"));return 0===(e=e.map((function(t){return t?Number(t):0}))).length&&(e=[0,0]),e},l.playAction=function(t){if(!this.isDie)switch(t.action){case L.PLAYER_ACTION.MOVE:var e=(t.value+135)*A.RAD;this._horizontal=Math.round(1*Math.cos(e)),this._vertical=Math.round(1*Math.sin(e)),this.isMoving=!0,this._curAngleY=t.value,this._curAngleY=this._curAngleY<0?this._curAngleY+360:this._curAngleY>360?this._curAngleY-360:this._curAngleY;break;case L.PLAYER_ACTION.STOP_MOVE:this._horizontal=0,this._vertical=0,this._onPlayerStopMove(),this.isMoving=!1,this.rigidComPlayer.clearState(),this.scriptCharacterRigid.stopMove(),this._rotateInterval=.2}},l._onPlayerStopMove=function(){!I.isGameOver&&I.isGameStart&&(I.arrMonster.length?I.arrMonster.some((function(t){return null!==t.parent}))&&this._attackMonster():this.scriptPlayerModel.playAni(L.PLAYER_ANI_TYPE.IDLE,!0))},l._moveToTargetWorPos=function(t){var e=this._getTwoPosAngleY(this.node.worldPosition,t);this.playAction({action:L.MONSTER_ACTION.MOVE,value:e})},l._getTwoPosAngleY=function(t,e){var i,r,s=null==(i=I.mainCamera)?void 0:i.worldToScreen(e),n=null==(r=I.mainCamera)?void 0:r.worldToScreen(t);return c.subtract(this._playerMonsterOffset,s,n),Math.round(180*Math.atan2(this._playerMonsterOffset.y,this._playerMonsterOffset.x)/Math.PI)},l._attackMonster=function(){var t=this;this._ndTarget=I.getNearestMonster(),this._ndTarget&&!this.isDie&&(this._moveToTargetWorPos(this._ndTarget.worldPosition),this.isMoving=!1,this.scriptPlayerModel.playAni(L.PLAYER_ANI_TYPE.ATTACK,!1,(function(){t.scriptPlayerModel.isRunning||t._attackMonster()})))},l.throwArrowToEnemy=function(){var t=this;this.node.forward=c.subtract(this._forWard,this.node.worldPosition,this._ndTarget.worldPosition).normalize().negative(),this._arrFormChangeSkill.length?(this.isArrowDouble?this.isArrowContinuous?this._initArrow("arrowDoubleContinuous"):this._initArrow("arrowDouble"):this.isArrowContinuous?this._initArrow("arrowSingleContinuous"):this._initArrow("arrowSingle"),this._arrFormChangeSkill.forEach((function(e){var i=S.instance.queryByID(L.playerSkillName(),String(e));e!==L.PLAYER_SKILL.ARROW_REVERSE&&e!==L.PLAYER_SKILL.ARROW_SIDE&&e!==L.PLAYER_SKILL.ARROW_UMBRELLA||t._initArrow(i.resName)}))):this._initArrow("arrowSingle")},l._initArrow=function(t){var e=this;v.loadModelRes("weapon/arrow/"+t).then((function(t){if(!e.isMoving){var i=D.instance.getNode(t,I.ndGameManager),r=e.node.worldPosition;e._arrowPos.set(r.x,3,r.z),i.setWorldPosition(e._arrowPos),i.eulerAngles=e.node.eulerAngles,i.children.forEach((function(t){t.getComponent(m).init(e._throwArrowSpeed,e.node.worldPosition)}));var s=I.scriptPlayer.isArrowIce,n=I.scriptPlayer.isArrowFire,a=I.scriptPlayer.isArrowLightning;s||n||a?(s&&y.instance.playSound(L.SOUND.ICE),n&&y.instance.playSound(L.SOUND.FIRE),a&&y.instance.playSound(L.SOUND.LIGHTNING)):y.instance.playSound(L.SOUND.LOOSE)}}))},l.addBlood=function(t,e){var i={effectPath:"recovery/recovery",ndTarget:this.node,isPlayAnimation:!1,speed:I.gameSpeed,isRecycle:!0};P.instance.loadAndPlayEffect(i),k.instance.showBloodTips(this,L.FIGHT_TIP.ADD_BLOOD,t,this._bloodTipOffsetPos),this.scriptBloodBar.refreshBlood(t,e),y.instance.playSound(L.SOUND.RECOVERY)},l.reduceBlood=function(t){if(!this.isDie&&(y.instance.playSound(L.SOUND.HIT_PLAYER),Math.random()>this.playerBaseInfo.dodgeRate)){var e=L.FIGHT_TIP.REDUCE_BLOOD,i=t.attackPower*I.attackAddition*(1-this.playerBaseInfo.defensePower/(this.playerBaseInfo.defensePower+400));Math.random()<=t.criticalHitRate&&(i*=t.criticalHitDamage,e=L.FIGHT_TIP.CRITICAL_HIT),k.instance.showBloodTips(this,e,-i,this._bloodTipOffsetPos),this.scriptBloodBar.refreshBlood(-i)}},l.playRunSmoke=function(){var t=a(o().mark((function t(){var e,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._ndRunSmokeEffect){t.next=5;break}return t.next=3,v.loadEffectRes("runSmoke/runSmoke");case 3:e=t.sent,this._ndRunSmokeEffect=D.instance.getNode(e,this.node);case 5:i={ndEffect:this._ndRunSmokeEffect},P.instance.playParticle(i);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),l.hideRunSmoke=function(){this._ndRunSmokeEffect&&this._ndRunSmokeEffect.active&&(this._ndRunSmokeEffect.active=!1)},l.preloadArrow=function(t){var e=this,i=[],r=function(t,i){return new Promise((function(r,s){if(-1==e._arrArrowPreload.indexOf(t)){console.log("是否首次加载箭",t),e._arrArrowPreload.push(t);var n=I.preloadArrowEffects(2*i),a=I.preloadArrow(t,2);Promise.all([n,a]).then((function(){r(null)}))}else r(null)}))};if(this._arrFormChangeSkill.length)if(this._arrFormChangeSkill.forEach((function(t){var e=S.instance.queryByID(L.playerSkillName(),String(t));if(t===L.PLAYER_SKILL.ARROW_REVERSE||t===L.PLAYER_SKILL.ARROW_SIDE||t===L.PLAYER_SKILL.ARROW_UMBRELLA){var s=r(e.resName,2);i.push(s)}})),this.isArrowDouble)if(this.isArrowContinuous){var s=r("arrowDoubleContinuous",4);i.push(s)}else{var n=r("arrowDouble",2);i.push(n)}else if(this.isArrowContinuous){var a=r("arrowSingleContinuous",2);i.push(a)}else{var o=r("arrowSingle",1);i.push(o)}else{var l=r("arrowSingle",1);i.push(l)}Promise.all(i).then((function(){t&&t()}))},l._showDie=function(){this.scriptCharacterRigid.stopMove(),y.instance.playSound(L.SOUND.PLAYER_01_DIE),this.scriptPlayerModel.playAni(L.PLAYER_ANI_TYPE.DIE,!1,(function(){I.isWin=!1}))},l._onRevive=function(){var t=this,e={effectPath:"revival/revival",ndTarget:this.node,speed:I.gameSpeed,isRecycle:!0};P.instance.loadAndPlayEffect(e),this.scheduleOnce((function(){var e=.5*t.curHpLimit;I.isGamePause&&!I.isGameOver&&(k.instance.showBloodTips(t,L.FIGHT_TIP.ADD_BLOOD,e,t._bloodTipOffsetPos),t.scriptBloodBar.refreshBlood(e,!1),y.instance.playSound(L.SOUND.RECOVERY),I.isGamePause=!1,t.scriptBloodBar.node.active=!0,t.scriptPlayerModel.playAni(L.PLAYER_ANI_TYPE.REVIVE,!1,(function(){t.isDie=!1,t.playAction({action:L.PLAYER_ACTION.STOP_MOVE}),w.dispatchEvent(L.EVENT_TYPE.MONSTER_MOVE)})),y.instance.playSound(L.SOUND.REVIVE))}),2)},l.update=function(t){if(I.isGameStart&&!I.isGameOver&&!I.isGamePause&&!this.isDie){if(this.isPlayRotate)this._tempAngle.set(this.node.eulerAngles),this._tempAngle.y=this._tempAngle.y<0?this._tempAngle.y+360:this._tempAngle.y,this.node.eulerAngles=this._tempAngle,this._curAngle_1.set(0,this._tempAngle.y,0),0===this._horizontal&&0===this._vertical?this._range=.1:this._range=.01,this._curAngle_1.equals(this._targetAngle,this._range)?(this.isPlayRotate=!1,this.node.eulerAngles=this._targetAngle):(c.lerp(this._curAngle_1,this._curAngle_1,this._targetAngle,.167),this.node.eulerAngles=this._curAngle_1);if(0!==this._horizontal||0!==this._vertical){if(this._rotateDirection.set(this._horizontal,0,-this._vertical),this._rotateDirection.normalize(),h.fromViewUp(K,this._rotateDirection),h.toEuler(F,K),F.y=F.y<0?F.y+360:F.y,this.isPlayRotate=!0,this._curAngle_2.set(this.node.eulerAngles),this._curAngle_2.y<0?(this._curAngle_2.y+=360,this.node.eulerAngles=this._curAngle_2):this._curAngle_2.y>360&&(this._curAngle_2.y-=360,this.node.eulerAngles=this._curAngle_2),F.equals(this.node.eulerAngles,.01)?(this.isPlayRotate=!1,this.node.eulerAngles=F):(this._targetAngle.y=this._curAngleY+225,this._targetAngle.y=this._targetAngle.y<0?this._targetAngle.y+360:this._targetAngle.y>360?this._targetAngle.y-360:this._targetAngle.y,this._targetAngle.set(0,this._targetAngle.y,0),Math.abs(this._targetAngle.y-this._curAngle_2.y)>180&&(this._targetAngle.y>this._curAngle_2.y?this._targetAngle.y-=360:this._targetAngle.y+=360)),!this.isMoving)return;this.scriptCharacterRigid.move(this._rotateDirection.x*this.curMoveSpeed*.5*t,this._rotateDirection.z*this.curMoveSpeed*.5*t),this.scriptPlayerModel.isRunning||this.isDie||this.scriptPlayerModel.playAni(L.PLAYER_ANI_TYPE.RUN,!0)}else this.isDie||this.scriptPlayerModel.isIdle||this.scriptPlayerModel.isAttacking||(this.scriptPlayerModel.playAni(L.PLAYER_ANI_TYPE.IDLE,!0),this.scriptCharacterRigid.stopMove()),this._rotateInterval>0&&(this._rotateInterval-=t,this._rotateInterval<=0&&this.isPlayRotate&&(this.isPlayRotate=!1))}},n(e,[{key:"isDie",get:function(){return this._isDie},set:function(t){this._isDie=t,this._isDie&&this._showDie()}},{key:"scriptBloodBar",get:function(){return this._scriptBloodBar},set:function(t){this._scriptBloodBar=t}},{key:"isMoving",get:function(){return this._isMoving},set:function(t){this._isMoving=t}},{key:"isPlayRotate",get:function(){return this._isPlayRotate},set:function(t){this._isPlayRotate=t}},{key:"scriptCharacterRigid",get:function(){return this._scriptCharacterRigid},set:function(t){this._scriptCharacterRigid=t}},{key:"playerBaseInfo",get:function(){return this._playerBaseInfo},set:function(t){this._playerBaseInfo=t}},{key:"curMoveSpeed",get:function(){return this._curMoveSpeed},set:function(t){this._curMoveSpeed=t,this.scriptCharacterRigid.initSpeed(t)}},{key:"isArrowDouble",get:function(){return this._isArrowDouble},set:function(t){this._isArrowDouble=t}},{key:"isArrowPenetrate",get:function(){return this._isArrowPenetrate},set:function(t){this._isArrowPenetrate=t}},{key:"isArrowContinuous",get:function(){return this._isArrowContinuous},set:function(t){this._isArrowContinuous=t}},{key:"isArrowIce",get:function(){return this._isArrowIce},set:function(t){this._isArrowIce=t}},{key:"isArrowFire",get:function(){return this._isArrowFire},set:function(t){this._isArrowFire=t}},{key:"isBloodthirsty",get:function(){return this._isBloodthirsty},set:function(t){this._isBloodthirsty=t}},{key:"isArrowLightning",get:function(){return this._isArrowLightning},set:function(t){this._isArrowLightning=t}},{key:"isArrowLaunch",get:function(){return this._isArrowLaunch},set:function(t){this._isArrowLaunch=t}},{key:"curAttackPower",get:function(){return this._curAttackPower},set:function(t){this._curAttackPower=t}},{key:"curDefensePower",get:function(){return this._curDefensePower},set:function(t){this._curDefensePower=t}},{key:"curAttackSpeed",get:function(){return this._curAttackSpeed},set:function(t){this._curAttackSpeed=t}},{key:"curDodgeRate",get:function(){return this._curDodgeRate},set:function(t){this._curDodgeRate=t}},{key:"curCriticalHitRate",get:function(){return this._curCriticalHitRate},set:function(t){this._curCriticalHitRate=t}},{key:"curCriticalHitDamage",get:function(){return this._curCriticalHitDamage},set:function(t){this._curCriticalHitDamage=t}},{key:"curHpLimit",get:function(){return this._curHpLimit},set:function(t){this._curHpLimit=t}}]),e}(f)).prototype,"scriptPlayerModel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(N.prototype,"rigidComPlayer",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(N.prototype,"colliderComPlayer",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=N))||Y));l._RF.pop()}}}));

System.register("chunks:///_virtual/playerBloodBar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constant.ts","./poolManager.ts"],(function(t){var o,i,n,e,r,a,l,s,d,h,u,c,B,_,p,b,C,f,m,g,P;return{setters:[function(t){o=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,e=t.assertThisInitialized,r=t.createClass},function(t){a=t.cclegacy,l=t._decorator,s=t.Prefab,d=t.Node,h=t.Layout,u=t.UITransform,c=t.SpriteComponent,B=t.SpriteFrame,_=t.Vec3,p=t.clamp,b=t.tween,C=t.find,f=t.CameraComponent,m=t.Component},function(t){g=t.Constant},function(t){P=t.PoolManager}],execute:function(){var y,v,w,W,I,z,U,S,T,x,L,R,E,H,M,D,F,k,G,N,O,V,X,j,A,Y;a._RF.push({},"f051daFE7VBBrMhCIXIdlGE","playerBloodBar",void 0);var Z=l.ccclass,q=l.property;t("PlayerBloodBar",(y=Z("PlayerBloodBar"),v=q(s),w=q(d),W=q(h),I=q(u),z=q(d),U=q(u),S=q(d),T=q(c),x=q(B),L=q(B),R=q(u),y((M=o((H=function(t){function o(){for(var o,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return o=t.call.apply(t,[this].concat(r))||this,n(o,"lineWidth",M,e(o)),n(o,"pbLine",D,e(o)),n(o,"ndContainer",F,e(o)),n(o,"layoutContainer",k,e(o)),n(o,"UIComWhiteBar",G,e(o)),n(o,"ndWhiteBar",N,e(o)),n(o,"UIComCurBloodBar",O,e(o)),n(o,"ndCurBloodBar",V,e(o)),n(o,"spComBloodBar",X,e(o)),n(o,"sfRed",j,e(o)),n(o,"sfGreen",A,e(o)),n(o,"UIComBloodBar",Y,e(o)),o._curBlood=0,o._minBloodBarWidth=100,o._bloodBarWidth=0,o._minBloodBarItemWidth=10,o._maxItemBlood=200,o._totalBlood=0,o._ndTarget=null,o._offsetPos=null,o._curPos=new _,o._scriptParent=null,o._scale=new _,o._bloodBarHeight=15,o._oriContainerPos=new _,o._curContainerPos=new _,o._bloodBarPos=new _,o._whiteBarPos=new _,o}i(o,t);var a=o.prototype;return a.show=function(t,o,i,n,e,r){var a=this;this._scriptParent=t,this._totalBlood=o,this._offsetPos=n,this._scale=e,this._ndTarget=t.node,this.node.setScale(e),this.curBlood=i;var l=Math.ceil(o/this._maxItemBlood);this._bloodBarWidth=this._minBloodBarItemWidth*l;var s=this._bloodBarWidth>this._minBloodBarWidth;this._oriContainerPos.set(this.ndContainer.position),s?(this._curContainerPos.set(.5*-this._bloodBarWidth,this._oriContainerPos.y,0),this.ndContainer.setPosition(this._curContainerPos)):this._bloodBarWidth=this._minBloodBarWidth,this.layoutContainer.spacingX=this._bloodBarWidth/l-1,this.ndContainer.children.forEach((function(t){t.active=!1}));var d=this.curBlood/this._totalBlood;d=p(d,0,1),this.UIComBloodBar.setContentSize(this._bloodBarWidth+2,this._bloodBarHeight),this.node.setSiblingIndex(g.PRIORITY.ZERO);for(var B=0;B<l+1;B++){var _=void 0;(_=B>=this.ndContainer.children.length?P.instance.getNode(this.pbLine,this.ndContainer):this.ndContainer.children[B]).active=!0;var b=_.getComponent(u);B%5==0?b.setContentSize(1.5,7):b.setContentSize(1,5)}this.ndContainer.getComponent(h).updateLayout(),this.ndContainer.children.forEach((function(t,o){var i=t.getComponent(c);0===o||o===l||t.position.x>a._bloodBarWidth*d?i.enabled=!1:i.enabled=!0})),this.UIComWhiteBar.setContentSize(d*this._bloodBarWidth,.8*this._bloodBarHeight),this._whiteBarPos.set(this.ndContainer.position.x,.5,this.ndContainer.position.z),this.ndWhiteBar.setPosition(this._whiteBarPos),this.UIComCurBloodBar.setContentSize(d*this._bloodBarWidth,.8*this._bloodBarHeight),this._bloodBarPos.set(this.ndContainer.position.x,0,this.ndContainer.position.z),this.ndCurBloodBar.setPosition(this._bloodBarPos),r&&r()},a.refreshBlood=function(t,o){var i=this;void 0===o&&(o=!1),this.curBlood+=t,this.curBlood=p(this.curBlood,0,this._totalBlood);var n=this.curBlood/this._totalBlood;t<0?(n=n<=0?0:n,this.UIComCurBloodBar.setContentSize(this._bloodBarWidth*n,.8*this._bloodBarHeight),n>0?(this.ndContainer.children.forEach((function(t){var o=t.getComponent(c);o.enabled&&t.position.x>i._bloodBarWidth*n&&(o.enabled=!1)})),b(this.UIComWhiteBar).to(.7,{width:this._bloodBarWidth*n}).call((function(){})).start()):(this.node.active=!1,this._scriptParent.isDie=!0,this.curBlood=0)):(o?(this.curBlood+=t,this._totalBlood+=t,this.curBlood=this.curBlood>=this._totalBlood?this._totalBlood:this.curBlood,n=this.curBlood/this._totalBlood):n=n>=1?1:n,b(this.UIComCurBloodBar).to(1,{width:this._bloodBarWidth*n}).call((function(){i.show(i._scriptParent,i._totalBlood,i.curBlood,i._offsetPos,i._scale,null)})).start())},a.update=function(t){var o;this.node.parent&&this.node.active&&this._ndTarget&&this._ndTarget.parent&&(null==(o=this._mainCamera)||o.convertToUINode(this._ndTarget.worldPosition,C("Canvas"),this._curPos),this._curPos.add(this._offsetPos),this.node.setPosition(this._curPos))},r(o,[{key:"curBlood",get:function(){return this._curBlood},set:function(t){this._curBlood=t}},{key:"_mainCamera",get:function(){var t;return null==(t=C("Main Camera"))?void 0:t.getComponent(f)}}]),o}(m)).prototype,"lineWidth",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),D=o(H.prototype,"pbLine",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=o(H.prototype,"ndContainer",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=o(H.prototype,"layoutContainer",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=o(H.prototype,"UIComWhiteBar",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=o(H.prototype,"ndWhiteBar",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=o(H.prototype,"UIComCurBloodBar",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=o(H.prototype,"ndCurBloodBar",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=o(H.prototype,"spComBloodBar",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=o(H.prototype,"sfRed",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=o(H.prototype,"sfGreen",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=o(H.prototype,"UIComBloodBar",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=H))||E));a._RF.pop()}}}));

System.register("chunks:///_virtual/playerData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util.ts","./constant.ts","./localConfig.ts","./storageManager.ts","./clientEvent.ts"],(function(t){var e,n,i,s,a,r,o,l,c,f;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){i=t.cclegacy,s=t._decorator,a=t.Component},function(t){r=t.Util},function(t){o=t.Constant},function(t){l=t.LocalConfig},function(t){c=t.StorageManager},function(t){f=t.ClientEvent}],execute:function(){var h,u;i._RF.push({},"e5927B2lO9C6o5eLg2NmcKB","playerData",void 0);var _=s.ccclass;s.property,t("PlayerData",_("PlayerData")(((u=function(t){function i(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this).serverTime=0,e.localTime=0,e._userId="",e._playerInfo=null,e._history=null,e._settings=null,e._isNewBee=!1,e._dataVersion="",e}e(i,t);var s=i.prototype;return s.loadGlobalCache=function(){var t=c.instance.getUserId();t&&(this._userId=t)},s.loadFromCache=function(){this._playerInfo=this._loadDataByKey(o.LOCAL_CACHE.PLAYER),this._history=this._loadDataByKey(o.LOCAL_CACHE.HISTORY),this._settings=this._loadDataByKey(o.LOCAL_CACHE.SETTINGS)},s._loadDataByKey=function(t){var e={},n=c.instance.getConfigData(t);if(n)try{e=JSON.parse(n)}catch(t){e={}}return e},s.createPlayerInfo=function(t){if(this._playerInfo={diamond:0,gold:0,key:0,level:1,highestLevel:1,arrSkill:[],createDate:new Date},this._isNewBee=!0,t)for(var e in t)this._playerInfo[e]=t[e];this.savePlayerInfoToLocalCache()},s.generateRandomAccount=function(){this.userId=""+Date.now()+r.getRandomInt(0,1e3),c.instance.setUserId(this._userId)},s.saveAccount=function(t){this._userId=t,c.instance.setUserId(t)},s.savePlayerInfoToLocalCache=function(){c.instance.setConfigData(o.LOCAL_CACHE.PLAYER,JSON.stringify(this._playerInfo))},s.saveSettingsToLocalCache=function(){c.instance.setConfigData(o.LOCAL_CACHE.SETTINGS,JSON.stringify(this._settings))},s.saveAll=function(){c.instance.setConfigDataWithoutSave(o.LOCAL_CACHE.PLAYER,JSON.stringify(this._playerInfo)),c.instance.setConfigDataWithoutSave(o.LOCAL_CACHE.HISTORY,JSON.stringify(this._history)),c.instance.setConfigDataWithoutSave(o.LOCAL_CACHE.SETTINGS,JSON.stringify(this._settings)),c.instance.setConfigData(o.LOCAL_CACHE.DATA_VERSION,this._dataVersion)},s.updatePlayerInfo=function(t,e){var n=!1;this._playerInfo.hasOwnProperty(t)&&("number"==typeof e?(n=!0,this._playerInfo[t]+=e,this._playerInfo[t]<0&&(this._playerInfo[t]=0)):"boolean"!=typeof e&&"string"!=typeof e||(n=!0,this._playerInfo[t]=e)),n&&c.instance.setConfigData(o.LOCAL_CACHE.PLAYER,JSON.stringify(this._playerInfo))},s.getSetting=function(t){return this._settings&&this._settings.hasOwnProperty(t)?this._settings[t]:null},s.setSetting=function(t,e){this._settings||(this._settings={}),this._settings[t]=e,this.saveSettingsToLocalCache()},s.clear=function(){this._playerInfo={},this._settings={},this.saveAll()},s.addFightTimes=function(t){var e=this.getFightTimes();e+=1,this.setSetting(o.SETTINGS_KEY.FIGHT_TIMES,e)},s.getFightTimes=function(){var t=this.getSetting(o.SETTINGS_KEY.FIGHT_TIMES);return t||(t=0,this.setSetting(o.SETTINGS_KEY.FIGHT_TIMES,0)),t},s.getLockPlyerSkill=function(){var t=this;return l.instance.getTableArr(o.playerSkillName()).filter((function(e){return!t.playerInfo.arrSkill.includes(e.ID)&&e.ID!==o.PLAYER_SKILL.RECOVERY}))},s.addPlayerSkill=function(t){this.playerInfo.arrSkill.includes(t.ID)||(this.playerInfo.arrSkill.push(t.ID),this.savePlayerInfoToLocalCache(),f.dispatchEvent(o.EVENT_TYPE.PARSE_PLAYER_SKILL))},s.reducePlayerSkill=function(t){if(this.playerInfo.arrSkill.includes(t.ID)){var e=this.playerInfo.arrSkill.findIndex((function(e){return e===t.ID}));this.playerInfo.arrSkill.splice(e,1),this.savePlayerInfoToLocalCache(),f.dispatchEvent(o.EVENT_TYPE.PARSE_PLAYER_SKILL)}},n(i,[{key:"userId",get:function(){return this._userId},set:function(t){this._userId=t}},{key:"settings",get:function(){return this._settings},set:function(t){this._settings=t}},{key:"playerInfo",get:function(){return this._playerInfo},set:function(t){this._playerInfo=t}},{key:"history",get:function(){return this._history},set:function(t){this._history=t}},{key:"isNewBee",get:function(){return this._isNewBee},set:function(t){this._isNewBee=t}},{key:"isPlayerSkillAllUnlock",get:function(){var t=l.instance.getTableArr(o.playerSkillName());return this.playerInfo.arrSkill.length===t.length-1}}],[{key:"instance",get:function(){return this._instance||(this._instance=new i),this._instance}}]),i}(a))._instance=void 0,h=u))||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/playerModel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameManager.ts","./constant.ts","./audioManager.ts"],(function(e){var n,i,t,a,r,o,s,l,u,c,p,y,A,d,h;return{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inheritsLoose,t=e.initializerDefineProperty,a=e.assertThisInitialized,r=e.createClass},function(e){o=e.cclegacy,s=e._decorator,l=e.Node,u=e.SkeletalAnimationComponent,c=e.Vec3,p=e.AnimationClip,y=e.Component},function(e){A=e.GameManager},function(e){d=e.Constant},function(e){h=e.AudioManager}],execute:function(){var _,P,g,f,m,S,E,T,k,v,w;o._RF.push({},"6d341OU0KFKnp6rW79mlG0J","playerModel",void 0);var I=s.ccclass,b=s.property;e("PlayerModel",(_=I("PlayerModel"),P=b(l),g=b(l),f=b(l),m=b(u),_((T=n((E=function(e){function n(){for(var n,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return n=e.call.apply(e,[this].concat(r))||this,t(n,"ndSocketLoose",T,a(n)),t(n,"ndSocketHand",k,a(n)),t(n,"ndArrow",v,a(n)),t(n,"aniComPlayer",w,a(n)),n._aniType="",n._aniState=null,n._stepIndex=0,n._looseEulerAngles=new c,n._isAniPlaying=!1,n}i(n,e);var o=n.prototype;return o.start=function(){},o.init=function(){this.hideArrow()},o.onFrameAttackLoose=function(){var e;A.isGameOver||A.isGamePause||(this.looseEulerAngles=null==(e=this.node.parent)?void 0:e.eulerAngles,A.scriptPlayer.throwArrowToEnemy(),this.ndArrow.active=!1)},o.onFrameRun=function(){this._stepIndex=0===this._stepIndex?1:0,h.instance.playSound(d.SOUND.FOOT_STEP[this._stepIndex])},o.onFrameAttackDraw=function(){this.ndArrow.active=!0},o.hideArrow=function(){this.ndArrow.active=!1},o.playAni=function(e,n,i,t){var a,r,o=this;if(void 0===n&&(n=!1),this._aniState=null==(a=this.aniComPlayer)?void 0:a.getState(e),!this._aniState||!this._aniState.isPlaying){if(this._aniType=e,this._aniType!==d.PLAYER_ANI_TYPE.ATTACK&&this.hideArrow(),null==(r=this.aniComPlayer)||r.play(e),this.isAniPlaying=!0,this._aniState)switch(this._aniState.wrapMode=n?p.WrapMode.Loop:p.WrapMode.Normal,e){case d.PLAYER_ANI_TYPE.ATTACK:this._aniState.speed=A.gameSpeed*A.scriptPlayer.curAttackSpeed,A.scriptPlayer.hideRunSmoke();break;case d.PLAYER_ANI_TYPE.RUN:this._aniState.speed=A.gameSpeed*(A.scriptPlayer.curMoveSpeed/A.scriptPlayer.playerBaseInfo.moveSpeed),A.scriptPlayer.playRunSmoke();break;case d.PLAYER_ANI_TYPE.IDLE:default:this._aniState.speed=A.gameSpeed}n||this.aniComPlayer.once(u.EventType.FINISHED,(function(){o.isAniPlaying=!1,i&&i()}))}},r(n,[{key:"looseEulerAngles",get:function(){return this._looseEulerAngles},set:function(e){this._looseEulerAngles=e}},{key:"isAniPlaying",get:function(){return this._isAniPlaying},set:function(e){this._isAniPlaying=e}},{key:"isRunning",get:function(){return this._aniType===d.PLAYER_ANI_TYPE.RUN&&!0===this.isAniPlaying}},{key:"isIdle",get:function(){return this._aniType===d.PLAYER_ANI_TYPE.IDLE&&!0===this.isAniPlaying}},{key:"isAttacking",get:function(){return this._aniType===d.PLAYER_ANI_TYPE.ATTACK&&!0===this.isAniPlaying}}]),n}(y)).prototype,"ndSocketLoose",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=n(E.prototype,"ndSocketHand",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=n(E.prototype,"ndArrow",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=n(E.prototype,"aniComPlayer",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=E))||S));o._RF.pop()}}}));

System.register("chunks:///_virtual/poolManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,n,e,i,a;return{setters:[function(t){o=t.createClass},function(t){n=t.cclegacy,e=t._decorator,i=t.instantiate,a=t.NodePool}],execute:function(){var r,c;n._RF.push({},"e4ab6T5/1VCqK/Vn+UcADNM","poolManager",void 0);var s=e.ccclass;e.property,t("PoolManager",s("PoolManager")(((c=function(){function t(){this._dictPool={},this._dictPrefab={}}var n=t.prototype;return n.getNode=function(t,o){var n=t.name;t.position||(n=t.data.name),this._dictPrefab[n]=t;var e=null;if(this._dictPool.hasOwnProperty(n)){var r=this._dictPool[n];e=r.size()>0?r.get():i(t)}else{var c=new a;this._dictPool[n]=c,e=i(t)}return e.parent=o,e.active=!0,e},n.putNode=function(t){if(t){var o=t.name,n=null;this._dictPool.hasOwnProperty(o)?n=this._dictPool[o]:(n=new a,this._dictPool[o]=n),n.put(t)}},n.clearPool=function(t){this._dictPool.hasOwnProperty(t)&&this._dictPool[t].clear()},n.preloadPool=function(t,o){var n=t.name;t.position||(n=t.data.name);var e=null;this._dictPool.hasOwnProperty(n)?e=this._dictPool[n]:(e=new a,this._dictPool[n]=e);for(var r=0;r<o;r++){var c=i(t);e.put(c)}},o(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,r=c))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/resourceUtil.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constant.ts"],(function(r){var t,e,n,a,u,s,o,i,c,p,f,l,d;return{setters:[function(r){t=r.asyncToGenerator,e=r.regeneratorRuntime},function(r){n=r.cclegacy,a=r._decorator,u=r.resources,s=r.error,o=r.Prefab,i=r.Texture2D,c=r.SpriteFrame,p=r.instantiate,f=r.find,l=r.isValid},function(r){d=r.Constant}],execute:function(){var h;n._RF.push({},"7844e1bOwZK+7JMYjENQU5v","resourceUtil",void 0);var E=a.ccclass;r("ResourceUtil",E("ResourceUtil")(h=function(){function r(){}return r.loadRes=function(r,t){return new Promise((function(e,n){u.load(r,t,(function(r,t){if(r)return s(r.message||r),void(n&&n(r));e&&e(t)}))}))},r.loadEffectRes=function(){var r=t(e().mark((function r(t){return e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this.loadRes(d.RESOURCES_FILE_NAME.PREFAB+"/"+d.PREFAB_FILE_NAME.EFFECT+"/"+t,o));case 1:case"end":return r.stop()}}),r,this)})));return function(t){return r.apply(this,arguments)}}(),r.loadModelRes=function(){var r=t(e().mark((function r(t){return e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this.loadRes(d.RESOURCES_FILE_NAME.PREFAB+"/"+d.PREFAB_FILE_NAME.MODEL+"/"+t,o));case 1:case"end":return r.stop()}}),r,this)})));return function(t){return r.apply(this,arguments)}}(),r.loadModelResArr=function(r,t,e,n){var a=t.map((function(t){return r+"/"+t}));u.load(a,o,e,n)},r.loadSpriteFrameRes=function(){var r=t(e().mark((function r(t){var n,a,u;return e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.loadRes(t,c);case 2:return n=r.sent,(a=new i).image=n,(u=new c).texture=a,r.abrupt("return",u);case 8:case"end":return r.stop()}}),r,this)})));return function(t){return r.apply(this,arguments)}}(),r.getMap=function(){var r=t(e().mark((function r(t){var n,a,u,s,o;return e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n="map",n+=t>=100?t:t>=10?"0"+t:"00"+t,r.next=4,this.loadRes("map/config/"+n,null);case 4:if(a=r.sent,u="",!a._file){r.next=12;break}return window.LZString&&(u=window.LZString.decompressFromEncodedURIComponent(a._file)),s=JSON.parse(u),r.abrupt("return",s);case 12:if(!a.text){r.next=18;break}return window.LZString&&(u=window.LZString.decompressFromEncodedURIComponent(a.text)),o=JSON.parse(u),r.abrupt("return",o);case 18:if(!a.json){r.next=22;break}return r.abrupt("return",a.json);case 22:return r.abrupt("return","failed");case 23:case"end":return r.stop()}}),r,this)})));return function(t){return r.apply(this,arguments)}}(),r.getMapObj=function(r,t,e,n){for(var a=[],s=0;s<t.length;s++)a.push("map/"+r+"/"+t[s]);u.load(a,o,e,n)},r.getUIPrefabRes=function(){var r=t(e().mark((function r(t){return e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this.loadRes(d.RESOURCES_FILE_NAME.PREFAB+"/"+d.PREFAB_FILE_NAME.UI+"/"+t,o));case 1:case"end":return r.stop()}}),r,this)})));return function(t){return r.apply(this,arguments)}}(),r.createUI=function(){var r=t(e().mark((function r(t,n){var a,u;return e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.getUIPrefabRes(t);case 2:return a=r.sent,(u=p(a)).setPosition(0,0,0),n||(n=f("Canvas")),n.addChild(u),r.abrupt("return",u);case 8:case"end":return r.stop()}}),r,this)})));return function(t,e){return r.apply(this,arguments)}}(),r.getJsonData=function(){var r=t(e().mark((function r(t){var n;return e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.loadRes(d.RESOURCES_FILE_NAME.DATA+"/"+t,null);case 2:if(!(n=r.sent).json){r.next=7;break}return r.abrupt("return",n.json);case 7:return r.abrupt("return","failed!!!");case 8:case"end":return r.stop()}}),r,this)})));return function(t){return r.apply(this,arguments)}}(),r.getTextData=function(){var r=t(e().mark((function r(t){var n,a;return e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.loadRes(d.RESOURCES_FILE_NAME.DATA+"/"+t,null);case 2:return n=r.sent,a=n.text,r.abrupt("return",a);case 5:case"end":return r.stop()}}),r,this)})));return function(t){return r.apply(this,arguments)}}(),r.loadDirRes=function(r,t,e){u.loadDir(r,t,(function(r,t){r?console.error(r):e(null,t)}))},r.setSpriteFrame=function(){var r=t(e().mark((function r(t,n){var a;return e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.loadRes(t+"/spriteFrame",c);case 2:a=r.sent,n&&l(n)&&(n.spriteFrame=a);case 4:case"end":return r.stop()}}),r,this)})));return function(t,e){return r.apply(this,arguments)}}(),r}())||h);n._RF.pop()}}}));

System.register("chunks:///_virtual/revivePanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./playerData.ts","./clientEvent.ts","./constant.ts","./uiManager.ts","./LanguageData.ts"],(function(t){var e,n,i,a,o,r,l,s,c,u,h,v,g,p,f,_,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized,o=t.createClass},function(t){r=t.cclegacy,l=t._decorator,s=t.Sprite,c=t.Label,u=t.Node,h=t.UITransform,v=t.Component},function(t){g=t.PlayerData},function(t){p=t.ClientEvent},function(t){f=t.Constant},function(t){_=t.UIManager},function(t){b=t.updateSceneRenderers}],execute:function(){var k,D,w,y,M,d,m,P,H,C,E;r._RF.push({},"e234a52wbRAh4xy02FAvDwv","revivePanel",void 0);var R=l.ccclass,z=l.property;t("RevivePanel",(k=R("RevivePanel"),D=z(s),w=z(c),y=z(u),M=z(c),k((P=e((m=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,i(e,"spPayIcon",P,a(e)),i(e,"lbLevel",H,a(e)),i(e,"ndMask",C,a(e)),i(e,"lbCountDown",E,a(e)),e._countDown=10,e._maxMaskHeight=190,e._curMaskHeight=0,e._callback=null,e}n(e,t);var r=e.prototype;return r.show=function(t){b(),this._countDown=10,this._curMaskHeight=0,this._callback=t},r.onBtnSkipClick=function(){this._close()},r.onBtnReviveClick=function(){_.instance.hideDialog("revive/revivePanel"),p.dispatchEvent(f.EVENT_TYPE.ON_REVIVE)},r._close=function(){this._callback&&this._callback(),_.instance.hideDialog("fight/fightPanel"),_.instance.hideDialog("revive/revivePanel"),_.instance.showDialog("settlement/settlementPanel")},r.update=function(t){this.countDown>0&&(this.countDown-=t)},o(e,[{key:"countDown",get:function(){return this._countDown},set:function(t){var e;this._countDown=t,this.lbCountDown.string=String(Math.floor(this._countDown)),this.lbLevel.string=g.instance.playerInfo.level,this._curMaskHeight+=this._maxMaskHeight/(120*this._countDown),this._curMaskHeight=this._curMaskHeight>=this._maxMaskHeight?this._maxMaskHeight:this._curMaskHeight,null==(e=this.ndMask.getComponent(h))||e.setContentSize(260,this._curMaskHeight),t<0&&this._close()}}]),e}(v)).prototype,"spPayIcon",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(m.prototype,"lbLevel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(m.prototype,"ndMask",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(m.prototype,"lbCountDown",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=m))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/reward.ts",["./rollupPluginModLoBabelHelpers.js","cc","./effectManager.ts","./util.ts","./constant.ts","./clientEvent.ts","./gameManager.ts","./resourceUtil.ts","./audioManager.ts","./poolManager.ts"],(function(t){var e,i,s,o,r,n,a,h,_,l,c,d,u,P,p,T,f,g,y,w,W;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,s=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createClass},function(t){n=t.cclegacy,a=t.Enum,h=t._decorator,_=t.Vec3,l=t.Quat,c=t.tween,d=t.clamp,u=t.Component},function(t){P=t.EffectManager},function(t){p=t.Util},function(t){T=t.Constant},function(t){f=t.ClientEvent},function(t){g=t.GameManager},function(t){y=t.ResourceUtil},function(t){w=t.AudioManager},function(t){W=t.PoolManager}],execute:function(){var m,v,E,S,O;n._RF.push({},"4b12d072FhMU41q2basHIT2","reward",void 0);var D=a({GOLD:1,HEART:2}),R=h.ccclass,x=h.property;t("Reward",(m=R("Reward"),v=x({type:D,displayOrder:1}),m((O=e((S=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return e=t.call.apply(t,[this].concat(r))||this,s(e,"rewardType",O,o(e)),e._isDropOver=!1,e._trialScale=new _(3,3,3),e._trialPos=new _(0,-.1,0),e._tweenBounce=null,e._curQuat=new l,e._isAutoRotate=!1,e._isInhaling=!1,e._oriScale=null,e._ndParent=null,e._ndTrial=null,e._endTargetPos=new _,e._midTargetPos=new _,e._stepTargetPos=new _,e._upSpeedY=.2,e._downSpeedY=.2,e._curSpeedY=0,e._oriWorPos=new _,e._isArriveMinPos=!1,e._rewardWorPos=new _,e._playerWorPos=new _,e._nextWorPos=new _,e._offsetPos=new _,e._targetWorPos=new _,e._totalFlyTime=0,e._curFlyTime=0,e._raiseTimes=1,e._bouncePos=new _(0,.618,0),e._bounceScale=new _(.2,.2,.2),e}i(e,t);var n=e.prototype;return n.onEnable=function(){f.on(T.EVENT_TYPE.INHALE_REWARD,this._inhaleReward,this)},n.onDisable=function(){f.off(T.EVENT_TYPE.INHALE_REWARD,this._inhaleReward,this)},n.start=function(){},n.init=function(t,e){var i=this;this._ndParent=e,this._oriScale?this.node.setScale(this._oriScale):this._oriScale=this.node.getScale(),this._isAutoRotate=!1,this._isInhaling=!1,this._curSpeedY=this._upSpeedY,this._oriWorPos.set(this.node.getWorldPosition().x,1.65,this.node.getWorldPosition().z),this._isArriveMinPos=!1,this.isDropOver=!1,this._totalFlyTime=0,this._curFlyTime=0,this._raiseTimes=1,this.scheduleOnce((function(){i.show()}),t),this._ndTrial?this._ndTrial.active=!1:y.loadEffectRes("trail/coinTrail").then((function(t){i._ndTrial=W.instance.getNode(t,i.node),i._ndTrial.active=!1,i._ndTrial.setScale(i._trialScale),i._ndTrial.setPosition(i._trialPos)}))},n.show=function(){this.node.active=!0;var t=6*Math.random()-3,e=6*Math.random()-3;this._endTargetPos=this._endTargetPos.set(this._oriWorPos).add3f(t,0,e),this._midTargetPos=this._midTargetPos.set(this._oriWorPos).add3f(t/2,4,e/2),w.instance.playSound(T.SOUND.GOLD_DROP)},n._checkMonsterClearOver=function(){g.getNearestMonster()||this._ndParent.children.filter((function(t){return"gold"===t.name||"heart"===t.name})).every((function(t){return!0===t.getComponent(e).isDropOver}))&&(console.log("###所有的奖品都已经掉落到地上了"),f.dispatchEvent(T.EVENT_TYPE.INHALE_REWARD))},n._inhaleReward=function(){var t=this;this._closeTween(),this._tweenBounce=c(this.node).by(.3,{position:this._bouncePos,scale:this._bounceScale},{easing:"bounceInOut"}).call((function(){t._ndTrial.active=!0;var e={ndEffect:t._ndTrial};P.instance.playParticle(e),t._isInhaling=!0})).start()},n._closeTween=function(){this._tweenBounce&&(this._tweenBounce.stop(),this._tweenBounce=null)},n._checkInhaleOver=function(){this._ndParent.children.filter((function(t){return"gold"===t.name||"heart"===t.name})).length||(console.log("###已吸入全部奖品"),w.instance.playSound(T.SOUND.GOLD_COLLECT),f.dispatchEvent(T.EVENT_TYPE.SHOW_WARP_GATE))},n.update=function(t){if(this.isDropOver||(this._rewardWorPos.set(this.node.position),this._isArriveMinPos?(this._stepTargetPos=this._rewardWorPos.lerp(this._endTargetPos,.02),this._curSpeedY=p.lerp(this._downSpeedY,this._curSpeedY,.05),this._nextWorPos=this._nextWorPos.set(this._stepTargetPos).add3f(0,-this._curSpeedY,0),this._nextWorPos.y=d(this._nextWorPos.y,this._endTargetPos.y,this._midTargetPos.y),this.node.setPosition(this._nextWorPos),this._nextWorPos.equals(this._endTargetPos,.3)&&(this.isDropOver=!0,this._isAutoRotate=!0,this._checkMonsterClearOver())):(this._stepTargetPos=this._rewardWorPos.lerp(this._midTargetPos,.03),this._curSpeedY=p.lerp(this._upSpeedY,this._curSpeedY,.03),this._nextWorPos=this._nextWorPos.set(this._stepTargetPos).add3f(0,this._curSpeedY,0),this._nextWorPos.y=d(this._nextWorPos.y,0,this._midTargetPos.y),this.node.setPosition(this._nextWorPos),this._nextWorPos.y>=this._midTargetPos.y&&(this._isArriveMinPos=!0,this._curSpeedY=0))),this._isAutoRotate&&(l.fromEuler(this._curQuat,0,120*t,0),this.node.rotate(this._curQuat)),this._isInhaling){this._playerWorPos.set(g.scriptPlayer.node.worldPosition),this._rewardWorPos.set(this.node.worldPosition),_.subtract(this._offsetPos,this._playerWorPos,this._rewardWorPos),this._totalFlyTime||(this._totalFlyTime=this._offsetPos.length()/2),this._raiseTimes+=t;var e=Math.pow(this._raiseTimes,.5)-1;this._curFlyTime+=t+e,this._curFlyTime=this._curFlyTime>=this._totalFlyTime?this._totalFlyTime:this._curFlyTime;var i=Number((this._curFlyTime/this._totalFlyTime).toFixed(2));if(this._targetWorPos.set(this._rewardWorPos.x+this._offsetPos.x*i,this._playerWorPos.y,this._rewardWorPos.z+this._offsetPos.z*i),this.node.setWorldPosition(this._targetWorPos),p.getTwoPosXZLength(this._targetWorPos.x,this._targetWorPos.z,this._playerWorPos.x,this._playerWorPos.z)<=.1){if(this._isInhaling=!1,this._ndTrial.active=!1,W.instance.putNode(this.node),this.rewardType===D.GOLD)g.addGold();else if(this.rewardType===D.HEART){var s=.05*g.scriptPlayer.curHpLimit;g.scriptPlayer.addBlood(s)}this._checkInhaleOver()}}},r(e,[{key:"isDropOver",get:function(){return this._isDropOver},set:function(t){this._isDropOver=t}}]),e}(u)).prototype,"rewardType",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return D.GOLD}}),E=S))||E));n._RF.pop()}}}));

System.register("chunks:///_virtual/sdkUtil.ts",["cc","./playerData.ts","./storageManager.ts"],(function(t){var e,i,n,a;return{setters:[function(t){e=t.cclegacy,i=t.sys},function(t){n=t.PlayerData},function(t){a=t.StorageManager}],execute:function(){e._RF.push({},"a8753/f8aJIM6kpa2WkESB8","sdkUtil",void 0);var o=t("SdkUtil",function(){function t(){}return t.customEventStatistics=function(t,e){t=t.toString(),e||(e={}),e.isNewBee=n.instance.isNewBee,"wx"===this.platform&&window.wx&&window.wx.aldSendEvent&&window.wx.aldSendEvent(t,e),"cocos"===this.platform&&window.cocosAnalytics&&window.cocosAnalytics.isInited()&&(console.log("###统计",t,e),window.cocosAnalytics.CACustomEvent.onStarted(t,e))},t.vibrateShort=function(){var t;if(null==(t=a.instance.getGlobalData("vibration"))||t){var e=Date.now();e-this.vibratePreTime>=this.vibrateInterval&&(i.isNative?jsb.reflection.callStaticMethod("com/cocos/game/AppActivity","vibrator","()V"):window.wx&&wx.vibrateShort({success:function(t){},fail:function(){},complete:function(){}}),this.vibratePreTime=e)}},t.shareGame=function(t,e){window.wx&&(wx.showShareMenu({withShareTicket:!0,complete:function(){}}),wx.aldOnShareAppMessage?wx.aldOnShareAppMessage((function(){return{title:t,imageUrl:e}})):wx.onShareAppMessage((function(){return{title:t,imageUrl:e}})))},t}());o.platform="cocos",o.imgAd=null,o.imgShare=null,o.isDebugMode=!1,o.onlineInterval=-1,o.isEnableVibrate=!0,o.isCheckOffline=!1,o.isWatchVideoAd=!1,o.isEnableMoving=!1,o.isEnableZoom=!1,o.arrLockDiary=[],o.vibrateInterval=100,o.vibratePreTime=0,e._RF.pop()}}}));

System.register("chunks:///_virtual/settingPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiManager.ts","./audioManager.ts","./storageManager.ts","./LanguageData.ts","./constant.ts"],(function(t){var n,i,e,s,a,o,r,u,c,l,g,h,p,b,_,d,f,D,S;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,r=t.SpriteFrame,u=t.Node,c=t.Vec3,l=t.Sprite,g=t.Label,h=t.profiler,p=t.Component},function(t){b=t.UIManager},function(t){_=t.AudioManager},function(t){d=t.StorageManager},function(t){f=t.updateSceneRenderers,D=t._language},function(t){S=t.Constant}],execute:function(){var O,B,y,A,P,m,C,v,M,V,w,z,G;a._RF.push({},"97ae7Pk189CwayAava/p+Ah","settingPanel",void 0);var N=o.ccclass,k=o.property;t("SettingPanel",(O=N("SettingPanel"),B=k(r),y=k(r),A=k(u),P=k(u),m=k(u),O((M=n((v=function(t){function n(){for(var n,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=t.call.apply(t,[this].concat(a))||this,e(n,"sfSelect",M,s(n)),e(n,"sfUnSelect",V,s(n)),e(n,"ndBtnVibration",w,s(n)),e(n,"ndBtnMusic",z,s(n)),e(n,"ndBtnDebug",G,s(n)),n._isAudioOpen=!1,n._isVibrationOpen=!1,n._isDebugOpen=!1,n._curDotPos=new c,n}i(n,t);var a=n.prototype;return a.show=function(){var t,n;f(),this._isAudioOpen=_.instance.getAudioSetting(!0),this._changeState(this.ndBtnMusic,this._isAudioOpen),this._isVibrationOpen=null==(t=d.instance.getGlobalData("vibration"))||t,this._changeState(this.ndBtnVibration,this._isVibrationOpen),this._isDebugOpen=null!=(n=d.instance.getGlobalData("debug"))&&n,this._changeState(this.ndBtnDebug,this._isDebugOpen)},a._changeState=function(t,n){var i,e=t.getComponent(l),s=t.getChildByName("dot"),a=null==(i=s.getChildByName("txt"))?void 0:i.getComponent(g),o=s.position;n?(e.spriteFrame=this.sfSelect,this._curDotPos.set(24,o.y,o.z),s.setPosition(this._curDotPos),D===S.I18_LANGUAGE.CHINESE?a.string="开":a.string="on"):(e.spriteFrame=this.sfUnSelect,this._curDotPos.set(-24,o.y,o.z),s.setPosition(this._curDotPos),D===S.I18_LANGUAGE.CHINESE?a.string="关":a.string="off")},a.onBtnVibrationClick=function(){this._isVibrationOpen=!this._isVibrationOpen,this._changeState(this.ndBtnVibration,this._isVibrationOpen),d.instance.setGlobalData("vibration",this._isVibrationOpen)},a.onBtnMusicClick=function(){this._isAudioOpen=!this._isAudioOpen,this._changeState(this.ndBtnMusic,this._isAudioOpen),_.instance.switchSound(this._isAudioOpen),_.instance.switchMusic(this._isAudioOpen)},a.onBtnDebugClick=function(){this._isDebugOpen=!this._isDebugOpen,this._changeState(this.ndBtnDebug,this._isDebugOpen),d.instance.setGlobalData("debug",this._isDebugOpen),!0===this._isDebugOpen?h.showStats():h.hideStats()},a.onBtnCloseClick=function(){b.instance.hideDialog("setting/settingPanel")},n}(p)).prototype,"sfSelect",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=n(v.prototype,"sfUnSelect",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=n(v.prototype,"ndBtnVibration",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(v.prototype,"ndBtnMusic",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=n(v.prototype,"ndBtnDebug",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=v))||C));a._RF.pop()}}}));

System.register("chunks:///_virtual/settlementPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constant.ts","./playerData.ts","./gameManager.ts","./uiManager.ts","./clientEvent.ts","./skillList.ts","./LanguageData.ts"],(function(e){var n,t,i,l,a,r,o,c,s,u,f,p,b,g,h,m,y,d;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,o=e.Node,c=e.SpriteFrame,s=e.Sprite,u=e.Label,f=e.Component},function(e){p=e.Constant},function(e){b=e.PlayerData},function(e){g=e.GameManager},function(e){h=e.UIManager},function(e){m=e.ClientEvent},function(e){y=e.SkillList},function(e){d=e.updateSceneRenderers}],execute:function(){var v,w,P,k,L,T,N,S,_,z,D,I,C,E,M,F,W;a._RF.push({},"6bc867ji2JNjZoTsbw3Odz5","settlementPanel",void 0);var j=r.ccclass,A=r.property;e("SettlementPanel",(v=j("SettlementPanel"),w=A(o),P=A(o),k=A(c),L=A(c),T=A(s),N=A(u),S=A(o),v((D=n((z=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return n=e.call.apply(e,[this].concat(a))||this,i(n,"winNode",D,l(n)),i(n,"failNode",I,l(n)),i(n,"sfTitleWin",C,l(n)),i(n,"sfTitleFail",E,l(n)),i(n,"spTitle",M,l(n)),i(n,"lbLevel",F,l(n)),i(n,"ndSkillList",W,l(n)),n._callback=null,n}t(n,e);var a=n.prototype;return a.show=function(e){d(),this._callback=e,this.lbLevel.string=b.instance.playerInfo.level,this.winNode.active=g.isWin,this.failNode.active=!g.isWin,this.ndSkillList.getComponent(y).init()},a.onBtnHomeClick=function(){this._callback&&this._callback(),g.isWin||(b.instance.playerInfo.arrSkill=[],b.instance.playerInfo.level=1,b.instance.savePlayerInfoToLocalCache()),h.instance.hideDialog("settlement/settlementPanel"),h.instance.showDialog("home/homePanel")},a.onBtnPlayAgainClick=function(){m.dispatchEvent(p.EVENT_TYPE.ON_GAME_INIT,(function(){h.instance.hideDialog("settlement/settlementPanel"),h.instance.showDialog("fight/fightPanel")}))},n}(f)).prototype,"winNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=n(z.prototype,"failNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=n(z.prototype,"sfTitleWin",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=n(z.prototype,"sfTitleFail",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=n(z.prototype,"spTitle",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=n(z.prototype,"lbLevel",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=n(z.prototype,"ndSkillList",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=z))||_));a._RF.pop()}}}));

System.register("chunks:///_virtual/shopItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./effectManager.ts","./gameManager.ts","./playerData.ts","./resourceUtil.ts","./audioManager.ts","./constant.ts"],(function(e){var t,n,i,o,l,r,a,c,s,u,p,f,b,h,m,d,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){l=e.cclegacy,r=e._decorator,a=e.SpriteComponent,c=e.LabelComponent,s=e.Button,u=e.Color,p=e.Component},function(e){f=e.EffectManager},function(e){b=e.GameManager},function(e){h=e.PlayerData},function(e){m=e.ResourceUtil},function(e){d=e.AudioManager},function(e){g=e.Constant}],execute:function(){var y,_,I,k,S,M,v,C,D,w,E,P,z;l._RF.push({},"049ebL3+7lNN5+LHpx6ehQr","shopItem",void 0);var G=r.ccclass,L=r.property;e("ShopItem",(y=G("ShopItem"),_=L(a),I=L(c),k=L(c),S=L(c),M=L(s),y((D=t((C=function(e){function t(){for(var t,n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return t=e.call.apply(e,[this].concat(l))||this,i(t,"spSkillIcon",D,o(t)),i(t,"lbName",w,o(t)),i(t,"lbDesc",E,o(t)),i(t,"lbGold",P,o(t)),i(t,"btnCom",z,o(t)),t._callback=null,t._itemInfo=null,t._colorRed=new u(255,0,0,255),t._colorBlack=new u(0,0,0,255),t._isMoneyEnough=!1,t}n(t,e);var l=t.prototype;return l.init=function(e,t){this._itemInfo=e,this._callback=t,this.lbName.string=e.name,this.lbDesc.string=e.desc,this.lbGold.string=e.price,this._isMoneyEnough=h.instance.playerInfo.gold>=e.price,this.btnCom.interactable=this._isMoneyEnough,this._isMoneyEnough?this.lbGold.color=this._colorBlack:this.lbGold.color=this._colorRed,m.setSpriteFrame("texture/skillIcon/"+e.icon,this.spSkillIcon)},l.onBtnItemClick=function(){if(d.instance.playSound(g.SOUND.SELL),this._isMoneyEnough){this._callback&&this._callback(),h.instance.addPlayerSkill(this._itemInfo),b.addGold(-this._itemInfo.price);var e={effectPath:"levelUp/levelUp",ndTarget:b.ndPlayer,isPlayAnimation:!1,speed:b.gameSpeed,isRecycle:!0};f.instance.loadAndPlayEffect(e)}},t}(p)).prototype,"spSkillIcon",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(C.prototype,"lbName",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(C.prototype,"lbDesc",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(C.prototype,"lbGold",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(C.prototype,"btnCom",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=C))||v));l._RF.pop()}}}));

System.register("chunks:///_virtual/shopPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./shopItem.ts","./util.ts","./uiManager.ts","./playerData.ts","./localConfig.ts","./constant.ts","./LanguageData.ts"],(function(n){var t,e,i,o,l,a,c,r,s,u,f,h,p,g,y,k;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){l=n.cclegacy,a=n._decorator,c=n.Node,r=n.Sprite,s=n.Component},function(n){u=n.ShopItem},function(n){f=n.Util},function(n){h=n.UIManager},function(n){p=n.PlayerData},function(n){g=n.LocalConfig},function(n){y=n.Constant},function(n){k=n.updateSceneRenderers}],execute:function(){var b,d,v,_,S,D,P;l._RF.push({},"434ebEgTgJEaYZMyqxnlnJN","shopPanel",void 0);var C=a.ccclass,m=a.property;n("ShopPanel",(b=C("ShopPanel"),d=m(c),v=m(r),b((D=t((S=function(n){function t(){for(var t,e=arguments.length,l=new Array(e),a=0;a<e;a++)l[a]=arguments[a];return t=n.call.apply(n,[this].concat(l))||this,i(t,"ndSkills",D,o(t)),i(t,"spRefreshIcon",P,o(t)),t._callback=null,t}e(t,n);var l=t.prototype;return l.show=function(n){var t=this;k(),this._callback=n;var e=p.instance.getLockPlyerSkill();e=f.shuffle(e),this.ndSkills.children.forEach((function(n,i,o){if(e[i]){var l=g.instance.queryByID(y.playerSkillName(),e[i].ID);n.active=!0,n.getComponent(u).init(l,(function(){t._close()}))}else n.active=!1}))},l.onBtnGiveUpClick=function(){this._close()},l.onBtnRefreshClick=function(){this.show(this._callback)},l._close=function(){this._callback&&this._callback(),h.instance.hideDialog("shop/shopPanel"),h.instance.showDialog("fight/fightPanel")},l.onBtnCloseClick=function(){this._close()},t}(s)).prototype,"ndSkills",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(S.prototype,"spRefreshIcon",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=S))||_));l._RF.pop()}}}));

System.register("chunks:///_virtual/skillIcon.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constant.ts","./clientEvent.ts","./resourceUtil.ts"],(function(t){var e,i,n,o,c,l,s,r,a,u,h,_,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){c=t.cclegacy,l=t._decorator,s=t.Button,r=t.SpriteComponent,a=t.Node,u=t.Component},function(t){h=t.Constant},function(t){_=t.ClientEvent},function(t){f=t.ResourceUtil}],execute:function(){var p,E,d,S,b,I,m,C,k;c._RF.push({},"4a59a0RrSJPEbbf8yzemWPE","skillIcon",void 0);var v=l.ccclass,y=l.property;t("SkillIcon",(p=v("SkillIcon"),E=y(s),d=y(r),S=y(a),p((m=e((I=function(t){function e(){for(var e,i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return e=t.call.apply(t,[this].concat(c))||this,n(e,"btnCom",m,o(e)),n(e,"spIcon",C,o(e)),n(e,"ndBg",k,o(e)),e._callback=null,e._itemInfo=null,e._isSelected=!1,e}i(e,t);var c=e.prototype;return c.onEnable=function(){_.on(h.EVENT_TYPE.HIDE_SKILL_ICON_SELECTED,this._hideSelected,this)},c.onDisable=function(){_.off(h.EVENT_TYPE.HIDE_SKILL_ICON_SELECTED,this._hideSelected,this)},c.init=function(t,e,i){this._itemInfo=e,this._callback=i,this._isSelected=!1,0===t&&this._callback?(this._showSelected(),this._callback(this._itemInfo)):this._hideSelected(),this.btnCom.transition=i?s.Transition.SCALE:s.Transition.NONE,f.setSpriteFrame("texture/skillIcon/"+e.icon,this.spIcon)},c.onItemClick=function(){!this._isSelected&&this._callback&&(_.dispatchEvent(h.EVENT_TYPE.HIDE_SKILL_ICON_SELECTED),this._callback(this._itemInfo),this._showSelected())},c._showSelected=function(){this._isSelected=!0,this.ndBg.active=!0},c._hideSelected=function(){this._isSelected=!1,this.ndBg.active=!1},e}(u)).prototype,"btnCom",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(I.prototype,"spIcon",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(I.prototype,"ndBg",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=I))||b));c._RF.pop()}}}));

System.register("chunks:///_virtual/skillItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameManager.ts","./audioManager.ts","./constant.ts","./effectManager.ts","./playerData.ts","./resourceUtil.ts"],(function(e){var t,n,i,a,l,r,o,c,s,u,p,f,m,b,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){l=e.cclegacy,r=e._decorator,o=e.SpriteComponent,c=e.LabelComponent,s=e.Component},function(e){u=e.GameManager},function(e){p=e.AudioManager},function(e){f=e.Constant},function(e){m=e.EffectManager},function(e){b=e.PlayerData},function(e){y=e.ResourceUtil}],execute:function(){var g,d,h,I,k,_,S,v,D;l._RF.push({},"e3994yV5qxHeapY6CuIe8SC","skillItem",void 0);var P=r.ccclass,C=r.property;e("SkillItem",(g=P("SkillItem"),d=C(o),h=C(c),I=C(c),g((S=t((_=function(e){function t(){for(var t,n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return t=e.call.apply(e,[this].concat(l))||this,i(t,"spIcon",S,a(t)),i(t,"lbName",v,a(t)),i(t,"lbDesc",D,a(t)),t._callback=null,t._itemInfo=null,t}n(t,e);var l=t.prototype;return l.init=function(e,t){this._itemInfo=e,this._callback=t,this.lbName.string=e.name,this.lbDesc.string=e.desc,y.setSpriteFrame("texture/skillIcon/"+e.icon,this.spIcon)},l.onBtnItemClick=function(){p.instance.playSound(f.SOUND.GET_SKILL),this._callback&&this._callback(),b.instance.addPlayerSkill(this._itemInfo);var e={effectPath:"levelUp/levelUp",ndTarget:u.ndPlayer,isPlayAnimation:!1,speed:u.gameSpeed,isRecycle:!0};m.instance.loadAndPlayEffect(e)},t}(s)).prototype,"spIcon",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(_.prototype,"lbName",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(_.prototype,"lbDesc",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=_))||k));l._RF.pop()}}}));

System.register("chunks:///_virtual/skillList.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constant.ts","./localConfig.ts","./skillIcon.ts","./poolManager.ts","./playerData.ts"],(function(n){var t,i,e,o,l,r,c,a,s,u,p,f,h;return{setters:[function(n){t=n.applyDecoratedDescriptor,i=n.inheritsLoose,e=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){l=n.cclegacy,r=n._decorator,c=n.Prefab,a=n.Component},function(n){s=n.Constant},function(n){u=n.LocalConfig},function(n){p=n.SkillIcon},function(n){f=n.PoolManager},function(n){h=n.PlayerData}],execute:function(){var g,y,d,I,k;l._RF.push({},"7f904J+miVGoI/YxEAcqFJg","skillList",void 0);var v=r.ccclass,L=r.property;n("SkillList",(g=v("SkillList"),y=L(c),g((k=t((I=function(n){function t(){for(var t,i=arguments.length,l=new Array(i),r=0;r<i;r++)l[r]=arguments[r];return t=n.call.apply(n,[this].concat(l))||this,e(t,"pbSkillIcon",k,o(t)),t}return i(t,n),t.prototype.init=function(n){var t=this,i=h.instance.playerInfo.arrSkill.concat();this.node.children.forEach((function(n){n.active=!1})),i.length>s.MAX_SKILL_ICON_NUM&&(i.length=s.MAX_SKILL_ICON_NUM),i.forEach((function(e,o){var l;(l=o>=t.node.children.length?f.instance.getNode(t.pbSkillIcon,t.node):t.node.children[o]).active=!0;var r=u.instance.queryByID(s.playerSkillName(),i[o]);l.getComponent(p).init(o,r,n)}))},t}(a)).prototype,"pbSkillIcon",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=I))||d));l._RF.pop()}}}));

System.register("chunks:///_virtual/skillPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./localConfig.ts","./gameManager.ts","./skillItem.ts","./util.ts","./uiManager.ts","./constant.ts","./playerData.ts","./audioManager.ts","./LanguageData.ts"],(function(n){var t,e,i,l,a,o,r,c,s,u,f,g,p,h,d,k,b,y,_,S;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,l=n.assertThisInitialized},function(n){a=n.cclegacy,o=n._decorator,r=n.Node,c=n.SpriteComponent,s=n.LabelComponent,u=n.Component},function(n){f=n.LocalConfig},function(n){g=n.GameManager},function(n){p=n.SkillItem},function(n){h=n.Util},function(n){d=n.UIManager},function(n){k=n.Constant},function(n){b=n.PlayerData},function(n){y=n.AudioManager},function(n){_=n.updateSceneRenderers,S=n._language}],execute:function(){var v,m,D,C,I,L,P,G,R;a._RF.push({},"ccff8loXZRAR5uAetyAqv+L","skillPanel",void 0);var w=o.ccclass,A=o.property;n("SkillPanel",(v=w("SkillPanel"),m=A(r),D=A(c),C=A(s),v((P=t((L=function(n){function t(){for(var t,e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return t=n.call.apply(n,[this].concat(a))||this,i(t,"ndSkills",P,l(t)),i(t,"spRefreshIcon",G,l(t)),i(t,"lbGold",R,l(t)),t._gold=50,t._callback=null,t}e(t,n);var a=t.prototype;return a.show=function(n){var t=this;_(),this._callback=n,S===k.I18_LANGUAGE.CHINESE?this.lbGold.string="获得 "+this._gold:this.lbGold.string="get "+this._gold;var e=b.instance.getLockPlyerSkill();e=h.shuffle(e),this.ndSkills.children.forEach((function(n,i,l){if(e[i]){var a=f.instance.queryByID(k.playerSkillName(),e[i].ID);n.active=!0,n.getComponent(p).init(a,(function(){t._close()}))}else n.active=!1}))},a.onBtnGiveUpClick=function(){y.instance.playSound(k.SOUND.SELL),g.addGold(this._gold),this._close()},a.onBtnRefreshClick=function(){this.show(this._callback)},a._close=function(){this._callback&&this._callback(),d.instance.hideDialog("skill/skillPanel"),d.instance.showDialog("fight/fightPanel")},t}(u)).prototype,"ndSkills",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(L.prototype,"spRefreshIcon",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(L.prototype,"lbGold",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=L))||I));a._RF.pop()}}}));

System.register("chunks:///_virtual/storageManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util.ts"],(function(t){var a,s,e,i,n,o;return{setters:[function(t){a=t.createClass},function(t){s=t.cclegacy,e=t._decorator,i=t.sys,n=t.log},function(t){o=t.Util}],execute:function(){var r,c;s._RF.push({},"5689348bSJGyYo12WGa6eeJ","storageManager",void 0);var h=e.ccclass;e.property,t("StorageManager",h("StorageManager")(((c=function(){function t(){this._path=null,this._keyConfig="archero",this._markSave=!1,this._saveTimer=-1,this.jsonData={}}var s=t.prototype;return s.start=function(){var t,a=this;(this.jsonData={userId:""},this._path=this._getConfigPath(),i.isNative)?t=jsb.fileUtils.getValueMapFromFile(this._path)[this._keyConfig]:t=i.localStorage.getItem(this._keyConfig);if(t&&t.length){t.startsWith("@")&&(t=t.substring(1),t=o.decrypt(t));try{var s=JSON.parse(t);this.jsonData=s}catch(t){}}this._saveTimer=setInterval((function(){a.scheduleSave()}),5e3)},s.setConfigDataWithoutSave=function(t,a){var s=this.jsonData.userId;this.jsonData[s]?this.jsonData[s][t]=a:console.error("no account can not save")},s.setConfigData=function(t,a){this.setConfigDataWithoutSave(t,a),this._markSave=!0},s.getConfigData=function(t){var a=this.jsonData.userId;if(this.jsonData[a]){var s=this.jsonData[a][t];return s||""}return n("no account can not load"),""},s.setGlobalData=function(t,a){this.jsonData[t]=a,this.save()},s.getGlobalData=function(t){return this.jsonData[t]},s.setUserId=function(t){this.jsonData.userId=t,this.jsonData[t]||(this.jsonData[t]={}),this.save()},s.getUserId=function(){return this.jsonData.userId},s.scheduleSave=function(){this._markSave&&this.save()},s.markModified=function(){this._markSave=!0},s.save=function(){var t=JSON.stringify(this.jsonData),a="@"+o.encrypt(t);if(this._markSave=!1,i.isNative){var s={};s[this._keyConfig]=a,jsb.fileUtils.writeToFile(s,this._getConfigPath())}else{i.localStorage.setItem(this._keyConfig,a)}},s._getConfigPath=function(){var t=i.platform,a="";return t===i.OS.WINDOWS?a="src/conf":t===i.OS.LINUX?a="./conf":i.isNative?(a=jsb.fileUtils.getWritablePath(),a+="conf"):a="src/conf",a},a(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t,this._instance.start()),this._instance}}]),t}())._instance=void 0,r=c))||r);s._RF.pop()}}}));

System.register("chunks:///_virtual/test.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){var e,t,i,n,a,o,s,l,c,u;return{setters:[function(r){e=r.applyDecoratedDescriptor,t=r.inheritsLoose,i=r.initializerDefineProperty,n=r.assertThisInitialized},function(r){a=r.cclegacy,o=r._decorator,s=r.Node,l=r.ParticleSystemComponent,c=r.Vec3,u=r.Component}],execute:function(){var h,p,d,f,g,v,_;a._RF.push({},"2b6adRTWCtEz5SjJi1RaOm5","test",void 0);var y=o.ccclass,b=o.property;r("Test",(h=y("Test"),p=b([s]),h((g=e((f=function(r){function e(){for(var e,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=r.call.apply(r,[this].concat(a))||this,i(e,"speed",g,n(e)),i(e,"range",v,n(e)),i(e,"arrNdTarget",_,n(e)),e._arrOriPos=[],e._arrArriveEnd=[],e}t(e,r);var a=e.prototype;return a.start=function(){var r=this;this._arrOriPos=[],this._arrArriveEnd=[],this.arrNdTarget.forEach((function(e){r._arrOriPos.push(e.worldPosition.clone())}))},a._resetAllPos=function(){var r=this;this.arrNdTarget.forEach((function(e,t){e.setWorldPosition(r._arrOriPos[t]),e.getComponentsInChildren(l).forEach((function(r){r.simulationSpeed=1,null==r||r.clear(),null==r||r.stop(),null==r||r.play()}))})),this._arrArriveEnd=[]},a.update=function(r){if(this.arrNdTarget.length)for(var e=0;e<this.arrNdTarget.length;e++){var t=this.arrNdTarget[e];if(t.worldPosition.clone().length()>=this.range){if(-1===this._arrArriveEnd.indexOf(e)&&this._arrArriveEnd.push(e),this._arrArriveEnd.length>=this.arrNdTarget.length){this._resetAllPos();break}}else t.translate(new c(0,0,-r*this.speed),s.NodeSpace.LOCAL)}},e}(u)).prototype,"speed",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),v=e(f.prototype,"range",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),_=e(f.prototype,"arrNdTarget",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=f))||d));a._RF.pop()}}}));

System.register("chunks:///_virtual/tips.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util.ts","./poolManager.ts"],(function(t){var i,e,n,o,s,r,a,l,c,p,u,h,f,g,b,d,y,m;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,a=t.LabelComponent,l=t.SpriteComponent,c=t.UIOpacityComponent,p=t.SpriteFrame,u=t.Vec3,h=t.UITransform,f=t.isValid,g=t.Color,b=t.tween,d=t.Component},function(t){y=t.Util},function(t){m=t.PoolManager}],execute:function(){var w,T,v,I,B,P,_,z,U,O,C,F,S,G,H;s._RF.push({},"a91d7M56W1FG4vm4cXb+REy","tips",void 0);var M=r.ccclass,N=r.property;t("tips",(w=M("tips"),T=N(a),v=N(l),I=N(l),B=N(c),P=N(p),_=N(p),w((O=i((U=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return i=t.call.apply(t,[this].concat(s))||this,n(i,"lbTips",O,o(i)),n(i,"spIcon",C,o(i)),n(i,"spBg",F,o(i)),n(i,"UIOpacityBg",S,o(i)),n(i,"sfGold",G,o(i)),n(i,"sfHeart",H,o(i)),i._movePos=new u,i._curTipPos=new u,i._uiTipTargetPos=new u(0,230,0),i}return e(i,t),i.prototype.show=function(t,i,e,n,o){var s,r=this;void 0===o&&(o=function(){}),this.node.setScale(n,n,n);var a=null==(s=this.lbTips)||null==(s=s.node)||null==(s=s.getComponent(h))?void 0:s.contentSize;f(a)?(this.lbTips.string=t,this.lbTips.color=new g(214,132,53,255),"gold"===i||"heart"===i?(this.spBg.enabled=!1,this._movePos.set(0,0,0),this._curTipPos.set(0,0,0),this.UIOpacityBg.opacity=50,"gold"===i?this.spIcon.spriteFrame=this.sfGold:"heart"===i&&(this.spIcon.spriteFrame=this.sfHeart),this.lbTips.color=new g(255,255,255,255),this.lbTips.string=y.formatValue(Number(t)),b(this.node).to(1.2,{scale:new u(n,n,n)},{easing:"smooth"}).start(),b(this.UIOpacityBg).to(.8,{opacity:255},{easing:"smooth"}).to(.4,{opacity:0},{easing:"smooth"}).call((function(){o&&o(),m.instance.putNode(r.node)})).start()):(this.spBg.enabled=!0,this.UIOpacityBg.opacity=255,this.node.setPosition(e),this.spIcon.node.active=!1,this.scheduleOnce((function(){b(r.node).to(1.1,{position:r._uiTipTargetPos},{easing:"smooth"}).call((function(){o&&o(),m.instance.putNode(r.node)})).start(),b(r.UIOpacityBg).to(.7,{opacity:220},{easing:"smooth"}).to(.4,{opacity:0},{easing:"smooth"}).call((function(){})).start()}),.8))):m.instance.putNode(this.node)},i}(d)).prototype,"lbTips",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=i(U.prototype,"spIcon",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=i(U.prototype,"spBg",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=i(U.prototype,"UIOpacityBg",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=i(U.prototype,"sfGold",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=i(U.prototype,"sfHeart",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=U))||z));s._RF.pop()}}}));

System.register("chunks:///_virtual/tornado.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameManager.ts","./effectManager.ts","./util.ts","./constant.ts","./audioManager.ts","./poolManager.ts"],(function(t){var e,o,n,s,i,r,a,l,c,u,f,d,h,p,_,P,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized,i=t.createClass},function(t){r=t.cclegacy,a=t._decorator,l=t.AnimationComponent,c=t.Vec3,u=t.Node,f=t.Component},function(t){d=t.GameManager},function(t){h=t.EffectManager},function(t){p=t.Util},function(t){_=t.Constant},function(t){P=t.AudioManager},function(t){g=t.PoolManager}],execute:function(){var y,S,W,v,M;r._RF.push({},"c5fdbt9RkFOCaHUSrwAIUTs","tornado",void 0);var b=a.ccclass,w=a.property;t("Tornado",(y=b("Tornado"),S=w(l),y((M=e((v=function(t){function e(){for(var e,o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,n(e,"aniMove",M,s(e)),e._baseInfo=null,e._skillInfo=null,e._offsetPos=new c,e._oriWorPos=new c,e._targetSpeed=0,e._curSpeed=0,e._targetWorPos=new c,e._curWorPos=new c,e._disappearRange=25,e}o(e,t);var r=e.prototype;return r.init=function(t,e,o){var n;this.skillInfo=t,this.baseInfo=e,null==o||null==(n=o.scriptWarning)||n.hideWarning(),this._oriWorPos.set(this.node.worldPosition),this._curWorPos.set(this.node.worldPosition),c.subtract(this._offsetPos,this._curWorPos,d.ndPlayer.worldPosition),this._offsetPos.normalize().negative(),c.add(this._curWorPos,this._curWorPos,this._offsetPos.multiplyScalar(2)),this.node.setWorldPosition(this._curWorPos);var s={ndEffect:this.node};h.instance.playParticle(s),this._targetSpeed=t.flySpeed,this._curSpeed=.5*this._targetSpeed,this.aniMove.getState("tornado").time=0,this.aniMove.getState("tornado").sample(),this.aniMove.play(),P.instance.playSound(_.SOUND.TORNADO)},r.update=function(t){d.ndPlayer&&(this._curSpeed=p.lerp(this._targetSpeed,this._curSpeed,.25),this._targetWorPos.set(0,0,-t*this._curSpeed),this.node.translate(this._targetWorPos,u.NodeSpace.LOCAL),this._curWorPos.set(this.node.worldPosition),c.subtract(this._offsetPos,this._curWorPos,d.ndPlayer.worldPosition),this._offsetPos&&this._offsetPos.length()>=this._disappearRange&&g.instance.putNode(this.node))},i(e,[{key:"baseInfo",get:function(){return this._baseInfo},set:function(t){this._baseInfo=t}},{key:"skillInfo",get:function(){return this._skillInfo},set:function(t){this._skillInfo=t}}]),e}(f)).prototype,"aniMove",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=v))||W));r._RF.pop()}}}));

System.register("chunks:///_virtual/uiManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fightTip.ts","./resourceUtil.ts","./poolManager.ts","./tips.ts","./playerBloodBar.ts","./monsterBloodBar.ts","./constant.ts"],(function(o){var t,i,n,e,a,s,r,p,h,c,l,u,d,f;return{setters:[function(o){t=o.createClass},function(o){i=o.cclegacy,n=o._decorator,e=o.Vec3,a=o.isValid,s=o.find,r=o.CameraComponent},function(o){p=o.FightTip},function(o){h=o.ResourceUtil},function(o){c=o.PoolManager},function(o){l=o.tips},function(o){u=o.PlayerBloodBar},function(o){d=o.MonsterBloodBar},function(o){f=o.Constant}],execute:function(){var g,v;i._RF.push({},"f9384FYDp5GqoW+CtrCla3U","uiManager",void 0);var w=n.ccclass,P=(n.property,new e(-10,100,0)),_=new e(1.5,1.5,1.5),m=new e(-10,100,0);o("UIManager",w("UIManager")(((v=function(){function o(){this._dictSharedPanel={},this._dictLoading={},this._arrPopupDialog=[],this._showTipsTime=0}var i=o.prototype;return i.isDialogVisible=function(o){if(!this._dictSharedPanel.hasOwnProperty(o))return!1;var t=this._dictSharedPanel[o];return a(t)&&t.active&&a(t.parent)},i.showDialog=function(o,t,i,n){var e=this;if(void 0===n&&(n=f.PRIORITY.NORMAL),!this._dictLoading[o]){var r=o.lastIndexOf("/"),p=o.slice(r+1);if(t||(t=[]),this._dictSharedPanel.hasOwnProperty(o)){var c=this._dictSharedPanel[o];if(a(c)){c.parent=s("Canvas"),c.active=!0;var l=c.getComponent(p),u=c.getComponent(p.charAt(0).toUpperCase()+p.slice(1));if(l&&l.show)l.show.apply(l,t),i&&i(l);else{if(!u||!u.show)throw"查找不到脚本文件"+p;u.show.apply(u,t),i&&i(u)}return}}this._dictLoading[o]=!0,h.createUI(o).then((function(a){var s=!1;e._dictLoading[o]||(s=!0),e._dictLoading[o]=!1,a.setSiblingIndex(n),e._dictSharedPanel[o]=a;var r=a.getComponent(p),h=a.getComponent(p.charAt(0).toUpperCase()+p.slice(1));if(r&&r.show)r.show.apply(r,t),i&&i(r);else{if(!h||!h.show)throw"查找不到脚本文件"+p;h.show.apply(h,t),i&&i(h)}s&&e.hideDialog(o)}))}},i.hideDialog=function(o,t){if(this._dictSharedPanel.hasOwnProperty(o)){var i=this._dictSharedPanel[o];if(i&&a(i)){var n=i.getComponent("animationUI");n?n.close((function(){i.parent=null,t&&"function"==typeof t&&t()})):(i.parent=null,t&&"function"==typeof t&&t())}else t&&"function"==typeof t&&t()}this._dictLoading[o]=!1},i.pushToPopupSeq=function(o,t,i){var n={panelPath:o,scriptName:t,param:i,isShow:!1};this._arrPopupDialog.push(n),this._checkPopupSeq()},i.insertToPopupSeq=function(o,t,i){var n={panelPath:t,param:i,isShow:!1};this._arrPopupDialog.splice(o,0,n)},i.shiftFromPopupSeq=function(o){var t=this;this.hideDialog(o,(function(){t._arrPopupDialog[0]&&t._arrPopupDialog[0].panelPath===o&&(t._arrPopupDialog.shift(),t._checkPopupSeq())}))},i._checkPopupSeq=function(){if(this._arrPopupDialog.length>0){var o=this._arrPopupDialog[0];o.isShow||(this.showDialog(o.panelPath,o.param),this._arrPopupDialog[0].isShow=!0)}},i.showTips=function(o,t,i,n,a){var s=this;void 0===t&&(t="txt"),void 0===i&&(i=new e),void 0===n&&(n=1),void 0===a&&(a=function(){});var r=String(o),p=function(){s._showTipsAni(r,t,i,n,a)},h=Date.now();if(h-this._showTipsTime<800&&"gold"!==t&&"heart"!==t){var c=800-(h-this._showTipsTime);setTimeout((function(){p()}),c),this._showTipsTime=h+c}else p(),this._showTipsTime=h},i._showTipsAni=function(o,t,i,n,e){h.getUIPrefabRes("common/tips").then((function(a){c.instance.getNode(a,s("Canvas")).getComponent(l).show(o,t,i,n,e)}))},i.showPlayerBloodBar=function(o,t,i,n,e,a){void 0===n&&(n=function(){}),void 0===e&&(e=P),void 0===a&&(a=_),h.getUIPrefabRes("fight/playerBloodBar").then((function(r){var p=c.instance.getNode(r,s("Canvas"));p.setSiblingIndex(0);var h=p.getComponent(u);o.scriptBloodBar=h,h.show(o,t,i,e,a,n)}))},i.showMonsterBloodBar=function(o,t,i,n,e){void 0===n&&(n=function(){}),void 0===e&&(e=m),h.getUIPrefabRes("fight/monsterBloodBar").then((function(a){var r=c.instance.getNode(a,s("Canvas")).getComponent(d);o.scriptBloodBar=r,r.show(o,t,e,i,n)}))},i.showBloodTips=function(o,t,i,n,e){h.getUIPrefabRes("common/fightTip").then((function(a){var h,l=c.instance.getNode(a,s("Canvas")),u=null==(h=s("Main Camera"))?void 0:h.getComponent(r),d=null==u?void 0:u.convertToUINode(o.node.worldPosition,s("Canvas"));d.add(n),l.setPosition(d),l.getComponent(p).show(o,t,i,e)}))},t(o,null,[{key:"instance",get:function(){return this._instance||(this._instance=new o),this._instance}}]),o}())._instance=void 0,g=v))||g);i._RF.pop()}}}));

System.register("chunks:///_virtual/util.ts",["cc"],(function(r){var t,e;return{setters:[function(r){t=r.cclegacy,e=r._decorator}],execute:function(){var n;t._RF.push({},"51238kLGAFBiLoz3gxcwxtH","util",void 0);var o=e.ccclass;e.property,r("Util",o("Util")(n=function(){function r(){}return r.clone=function(r){if(null===r||"object"!=typeof r)return r;var t={};for(var e in r.constructor===Array&&(t=[]),r)r.hasOwnProperty(e)&&(t[e]=this.clone(r[e]));return t},r.objectToArray=function(r){var t=[];for(var e in r)r.hasOwnProperty(e)&&t.push(r[e]);return t},r.arrayToObject=function(r,t){var e={};for(var n in r)r.hasOwnProperty(n)&&r[n][t]&&(e[r[n][t]]=r[n]);return e},r.getWeightRandIndex=function(r,t){for(var e=Math.floor(Math.random()*t),n=0,o=0;o<r.length&&!(e<(n+=r[o]));o++);return o},r.getRandomNFromM=function(r,t){for(var e=[],n=0,o=0;o<t&&!(o>=r+1);){n=this.getRandomInt(0,r);for(var i=0,a=0;a<o;a++)if(e[a]===n){i=1;break}0===i&&(e[o]=n,o++)}return e},r.getRandomInt=function(r,t){var e=Math.random()*(t-r+1)+r;return Math.floor(e)},r.getRandom=function(r,t){return Math.random()*(t-r)+r},r.getStringLength=function(r){for(var t=r,e=0,n=0,o=t.length;n<o;n++){e+=t.charCodeAt(n)<=255?1:2}return Math.ceil(e/2)},r.isEmptyObject=function(r){var t=!0;if(r&&r.constructor===Object){for(var e in r)if(r.hasOwnProperty(e)){t=!1;break}}else t=!1;return t},r.isNewDay=function(r){var t=new Date(r),e=new Date,n=t.getYear(),o=t.getMonth(),i=t.getDate(),a=e.getYear(),f=e.getMonth(),u=e.getDate();return a>n||(f>o||u>i)},r.getPropertyCount=function(r){var t,e=0;for(t in r)r.hasOwnProperty(t)&&e++;return e},r.difference=function(r,t){var e=[];if(r.constructor!==Array||t.constructor!==Array)return e;for(var n=r.length,o=0;o<n;o++)-1===t.indexOf(r[o])&&e.push(r[o]);return e},r._stringToArray=function(r){var t,e="\\ufe0e\\ufe0f",n="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",o=RegExp("[\\u200d\\ud800-\\udfff"+n+e+"]"),i="\\ud83c[\\udffb-\\udfff]",a="[\\ufe0e\\ufe0f]?",f="["+n+"]",u="(?:"+f+"|"+i+")"+"?",h="[\\ud800-\\udfff]",c="[^\\ud800-\\udfff]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",s=a+u+("(?:\\u200d(?:"+[c,d,g].join("|")+")"+a+u+")*"),l="(?:"+[c+f+"?",f,d,g,h].join("|")+")",v=RegExp(i+"(?="+i+")|"+l+s,"g");return t=r,o.test(t)?function(r){return r.match(v)||[]}(r):function(r){return r.split("")}(r)},r.simulationUUID=function(){function r(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return r()+r()+"-"+r()+"-"+r()+"-"+r()+"-"+r()+r()+r()},r.trim=function(r){return r.replace(/(^\s*)|(\s*$)/g,"")},r.isNowValid=function(r,t){var e=new Date(r),n=new Date(t),o=!1;if(e.getDate()+""!="NaN"&&n.getDate()+""!="NaN"){var i=new Date;o=i<n&&i>e}return o},r.getDeltaDays=function(r,t){r=new Date(r),t=new Date(t);var e=r.getFullYear(),n=r.getMonth()+1,o=r.getDate(),i=t.getFullYear(),a=t.getMonth()+1,f=t.getDate();r=new Date(e+"/"+n+"/"+o+" GMT+0800").getTime();var u=(t=new Date(i+"/"+a+"/"+f+" GMT+0800").getTime())-r;return Math.floor(u/864e5)},r.getMin=function(r){var t=null;if(r.constructor===Array)for(var e=r.length,n=0;n<e;n++)t=0===n?Number(r[0]):t>Number(r[n])?Number(r[n]):t;return t},r.formatTwoDigits=function(r){return(Array(2).join(0)+r).slice(-2)},r.formatDate=function(r,t){var e={"M+":r.getMonth()+1,"d+":r.getDate(),"h+":r.getHours(),"m+":r.getMinutes(),"s+":r.getSeconds(),"q+":Math.floor((r.getMonth()+3)/3),S:r.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(r.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?e[n]:("00"+e[n]).substr((""+e[n]).length)));return t},r.getDay=function(){var r=new Date;return r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate()},r.formatName=function(r,t){t=t||6;var e=this._stringToArray(r),n="";if(e.length>t){for(var o=0;o<t;o++)n+=e[o];n+="..."}else n=r;return n},r.formatMoney=function(r){for(var t=["","K","M","G","T","P","E","Z","Y","B","N","D"],e="",n=0;n<t.length;n++){if(!(r>=1e4)){e=Math.floor(r)+t[n];break}r/=1e3}return""===e&&(e=Math.floor(r)+"U"),e},r.formatValue=function(r){for(var t=[],e="",n=0;n<26;n++)t.push(String.fromCharCode(97+n));for(var o=0;o<t.length;o++){if(!(r>=1e4)){e=Math.floor(r)+t[o];break}r/=1e3}return e},r.formatTimeForSecond=function(r,t){void 0===t&&(t=!1);var e="",n=r%60,o=Math.floor(r/60);o=o<0?0:o;var i=Math.floor(o/60),a=o%60;return i>0?(e+=i>9?i.toString():"0"+i,e+=":"):e+="00:",e+=a>9?a.toString():"0"+a,t||(e+=":",e+=n>9?n.toString():"0"+n),e},r.formatTimeForMillisecond=function(r){var t=Math.floor(r/1e3%60),e=Math.floor(r/1e3/60%60);return{hour:Math.floor(r/1e3/60/60),minute:e,second:t}},r.rand=function(r){for(var t=this.clone(r),e=t.length-1;e>=0;e--){var n=Math.floor(Math.random()*(e+1)),o=t[n];t[n]=t[e],t[e]=o}return t},r.getOffsetMimutes=function(r,t){var e=t-r;return Math.floor(e%36e5/6e4)},r.formatNumToFixed=function(r,t){return void 0===t&&(t=0),Number(r.toFixed(t))},r.lerp=function(r,t,e){void 0===e&&(e=.25);var n=t;return r>t?n=t+(r-t)*e:r<t&&(n=t-(t-r)*e),n},r.decrypt=function(r){var t=6;r.length%2==0&&(t=7);for(var e="",n=0;n<r.length-t;n+=2)e+=r[n+1],e+=r[n];return e+=r.slice(r.length-t+1),e=this._base64Decode(e)},r.encrypt=function(r){var t=this._base64encode(r),e=6;t.length%2==0&&(e=7);for(var n="",o=0;o<(t.length-e+1)/2;o++)n+=t[2*o+1],n+=t[2*o];return n+=t.slice(t.length-e+1)},r._base64encode=function(r){var t,e,n,o,i,a,f,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h="",c=0;for(r=this._utf8Encode(r);c<r.length;)o=(t=r.charCodeAt(c++))>>2,i=(3&t)<<4|(e=r.charCodeAt(c++))>>4,a=(15&e)<<2|(n=r.charCodeAt(c++))>>6,f=63&n,isNaN(e)?a=f=64:isNaN(n)&&(f=64),h=h+u.charAt(o)+u.charAt(i)+u.charAt(a)+u.charAt(f);return h},r._utf8Encode=function(r){r=r.replace(/\r\n/g,"\n");for(var t="",e=0;e<r.length;e++){var n=r.charCodeAt(e);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},r._utf8Decode=function(r){for(var t="",e=0,n=0,o=0,i=0;e<r.length;)(n=r.charCodeAt(e))<128?(t+=String.fromCharCode(n),e++):n>191&&n<224?(o=r.charCodeAt(e+1),t+=String.fromCharCode((31&n)<<6|63&o),e+=2):(o=r.charCodeAt(e+1),i=r.charCodeAt(e+2),t+=String.fromCharCode((15&n)<<12|(63&o)<<6|63&i),e+=3);return t},r._base64Decode=function(r){var t,e,n,o,i,a,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",h=0;for(r=r.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<r.length;)t=f.indexOf(r.charAt(h++))<<2|(o=f.indexOf(r.charAt(h++)))>>4,e=(15&o)<<4|(i=f.indexOf(r.charAt(h++)))>>2,n=(3&i)<<6|(a=f.indexOf(r.charAt(h++))),u+=String.fromCharCode(t),64!=i&&(u+=String.fromCharCode(e)),64!=a&&(u+=String.fromCharCode(n));return u=this._utf8Decode(u)},r.shuffle=function(r){if(Array.isArray(r)){var t=r.concat();return t.sort((function(){return.5-Math.random()})),t}},r.filterDifferentValue=function(r,t){return r.filter((function(r){return-1!==t.indexOf(r)}))},r.checkIsLowPhone=function(){if(window.wx){var r=-1,t=window.wx.getSystemInfoSync();if(t.system.indexOf("iOS")>=0){var e=t.model;console.log("###model",e);for(var n=["iPhone1,1","iPhone1,2","iPhone2,1","iPhone3,1","iPhone3,3","iPhone4,1","iPhone5,1","iPhone5,2","iPhone5,3","iPhone5,4","iPhone6,1","iPhone6,2"],o=["iPhone6,2","iPhone7,1","iPhone7,2","iPhone8,1","iPhone8,2","iPhone8,4"],i=["iPhone9,1","iPhone9,2","iPhone9,3","iPhone9,4","iPhone10,1","iPhone10,2","iPhone10,3","iPhone10,4","iPhone10,5","iPhone10,6","iPhone XS"],a=["iPhone11,2","iPhone11,4","iPhone11,6","iPhone11,8","iPhone12,1","iPhone12,3","iPhone12,5","iPhone12,8","iPhone 13","iPhone 14"],f=0;f<n.length;f++)e.indexOf(n[f])>=0&&(r=5);for(var u=0;u<o.length;u++)e.indexOf(o[u])>=0&&(r=10);for(var h=0;h<i.length;h++)e.indexOf(i[h])>=0&&(r=20);for(var c=0;c<a.length;c++)e.indexOf(a[c])>=0&&(r=30)}else r=t.benchmarkLevel;return r<20}return!1},r.getRandomItemFromArray=function(r){return r[Math.floor(Math.random()*r.length)]},r.parseStringData=function(r,t){return void 0===t&&(t="#"),r.split(t).map((function(r){return Number(r)}))},r.toFixed=function(r,t){return void 0===t&&(t=2),Number(r.toFixed(t))},r.getTwoNodeXZRadius=function(r,t,e){void 0===e&&(e=!1);var n=e?r.position.x:r.worldPosition.x,o=e?r.position.z:r.worldPosition.z,i=e?t.position.x:t.worldPosition.x,a=e?t.position.z:t.worldPosition.z;return this.getTwoPosXZRadius(n,i,o,a)},r.getTwoPosXZRadius=function(r,t,e,n){return Math.atan2(r-e,t-n)},r.getTwoNodeXZLength=function(r,t,e){void 0===e&&(e=!1);var n=e?r.position.x:r.worldPosition.x,o=e?r.position.z:r.worldPosition.z,i=e?t.position.x:t.worldPosition.x,a=e?t.position.z:t.worldPosition.z;return this.getTwoPosXZLength(n,o,i,a)},r.getTwoPosXZLength=function(r,t,e,n){var o=r-e,i=t-n;return Math.sqrt(o*o+i*i)},r.getRandomDirector=function(){return Math.random()>.5?1:-1},r}())||n);t._RF.pop()}}}));

System.register("chunks:///_virtual/warningCircle.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameManager.ts","./poolManager.ts"],(function(t){var e,n,o,i,s,r,a,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,i=t.tween,s=t.Vec3,r=t.Component},function(t){a=t.GameManager},function(t){c=t.PoolManager}],execute:function(){var l;n._RF.push({},"f4b57yoodpAooaYvsjlnvtZ","warningCircle",void 0);var _=o.ccclass;o.property,t("WarningCircle",_("WarningCircle")(l=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this)._tweenLoop=null,e._tweenHide=null,e._targetWorPos=new s,e._targetScale_1=new s,e._targetScale_2=new s,e._targetScale_3=new s,e._scriptParent=null,e}e(n,t);var o=n.prototype;return o.start=function(){},o.init=function(t,e){e.recycleWarning(),this._scriptParent=e,this._targetScale_1.set(t,t,t),this._targetScale_2.set(.8*t,.8*t,.8*t),this.node.setScale(this._targetScale_3);var n=a.ndPlayer.worldPosition;this._targetWorPos.set(n.x,n.y+.2,n.z),this.node.setWorldPosition(this._targetWorPos),this._closeTween(),this.showWarning()},o.showWarning=function(){this._tweenLoop=i(this.node).to(.4,{scale:this._targetScale_1},{easing:"smooth"}).start()},o.hideWarning=function(){var t=this;this._closeTween(),this._tweenHide=i(this.node).to(.3,{scale:this._targetScale_3},{easing:"backInOut"}).call((function(){c.instance.putNode(t.node),t._closeTween()})).start()},o._closeTween=function(){this._tweenHide&&(this._tweenHide.stop(),this._tweenHide=null),this._tweenLoop&&(this._tweenLoop.stop(),this._tweenLoop=null)},n}(r))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/warningLine.ts",["./rollupPluginModLoBabelHelpers.js","cc","./poolManager.ts"],(function(n){var t,o,i,r,e;return{setters:[function(n){t=n.inheritsLoose},function(n){o=n.cclegacy,i=n._decorator,r=n.Component},function(n){e=n.PoolManager}],execute:function(){var a;o._RF.push({},"249fettRepLDLPIq30iHueC","warningLine",void 0);var s=i.ccclass;i.property,n("WarningLine",s("WarningLine")(a=function(n){function o(){for(var t,o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(t=n.call.apply(n,[this].concat(i))||this)._scriptParent=null,t}t(o,n);var i=o.prototype;return i.start=function(){},i.init=function(n,t){t.recycleWarning(),this._scriptParent=t,this.node.setWorldPosition(t.node.worldPosition.x,2.5,t.node.worldPosition.z),this.node.forward=t.attackForward,this.node.setScale(1,1,n),this.showWarning()},i.showWarning=function(){},i.hideWarning=function(){e.instance.putNode(this.node)},o}(r))||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/warningStrip.ts",["./rollupPluginModLoBabelHelpers.js","cc","./poolManager.ts"],(function(n){var t,r,o,i,e;return{setters:[function(n){t=n.inheritsLoose},function(n){r=n.cclegacy,o=n._decorator,i=n.Component},function(n){e=n.PoolManager}],execute:function(){var a;r._RF.push({},"a816bqAQNtKtp+4XcORW3SO","warningStrip",void 0);var c=o.ccclass;o.property,n("WarningStrip",c("WarningStrip")(a=function(n){function r(){for(var t,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=n.call.apply(n,[this].concat(o))||this)._scriptParent=null,t}t(r,n);var o=r.prototype;return o.start=function(){},o.init=function(n,t){t.recycleWarning(),this._scriptParent=t,this.node.setWorldPosition(t.node.worldPosition.x,2.5,t.node.worldPosition.z),this.node.forward=t.attackForward,this.node.setScale(1,1,n),this.showWarning()},o.showWarning=function(){},o.hideWarning=function(){e.instance.putNode(this.node)},r}(i))||a);r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});